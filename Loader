repeat task["wait"]() until game:IsLoaded()

if (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") then
    cleardrawcache()
end

-- > ( luraph variables )

if not LPH_OBFUSCATED then
    LPH_JIT_MAX = function(...) return ... end
    LPH_NO_VIRTUALIZE = function(...) return ... end
    LPH_ENCSTR = function(...) return ... end
    LPH_NO_UPVALUES = function(...) return ... end
    LPH_JIT = function(...) return ... end
end

getgenv()["juju"] = {}

-- > ( bypass )

LPH_JIT_MAX(function()
    if not getgenv().done then
        local reg = getreg()
        local connection = reg["RBXScriptConnection"]
        local signal = reg["RBXScriptSignal"]
        local gc = getgc(true)

        local connection_count = 0

        for i, v in reg do
            if typeof(v) == "function" and islclosure(v) then
                local info = getinfo(v)
                local _, count = string.gsub(info.source, "%.", "")
                if count == 1 and not string.find(info.source, "Replicated") then
                    if getupvalues(v)[2] ~= 26 then
                        connection_count+=1
                        reg[i] = function(a) end
                    end
                end
            end
        end

        local function safe_hook_function(old, replace)
            local fake_old = clonefunction(old)

            local replacements = {}

            for _, v in gc do
                if typeof(v) == "table" and #v < 2500 then
                    local index = table.find(v, old)

                    if index then
                        replacements[v] = index
                    end
                end
            end

            hookfunction(old, replace)

            for _, v in replacements do
                rawset(_, v, fake_old)
            end

            return fake_old
        end

        old = nil; old = safe_hook_function(signal.__index, LPH_NO_UPVALUES(function(self, index)
            if (index:find("^[Cc]onnect")) and getinfo(3) then
                local source = getinfo(3).source
                local _, count = string.gsub(source, "%.", "")
                if count == 1 and not string.find(source, "Replicated") then
                    return function()
                        return setrawmetatable(newproxy(), connection)
                    end
                end
            end
            return old(self, index)
        end))

        old2 = nil; old2 = safe_hook_function(cloneref(game["GetService"](game, "UserInputService")).GetFocusedTextBox, newcclosure(LPH_NO_UPVALUES(function()
            return nil
        end)))

        getgenv().done = true
    end
end)()

-- > ( global cheat variables )

local user_input_service = cloneref(game:GetService("UserInputService"))
    local get_mouse_location = user_input_service["GetMouseLocation"]
local players_service = cloneref(game:GetService("Players"))
    local local_player = players_service["LocalPlayer"]
        local mouse = local_player:GetMouse()
local tween_service = cloneref(game:GetService("TweenService"))
    local get_value = tween_service["GetValue"]
local http_service = cloneref(game:GetService("HttpService"))
local workspace = workspace
    local camera = cloneref(workspace["CurrentCamera"])
local hui = cloneref(gethui())

local color3_fromrgb = Color3["fromRGB"]
    local color3_lerp = color3_fromrgb()["Lerp"]
local vector2_new = Vector2["new"]
local udim2_new = UDim2["new"]

local math_random = math["random"]
local clock = os["clock"]
local delay = task["delay"]
local spawn = task["spawn"]
local clamp = math["clamp"]
local floor = math["floor"]
local shops = {}
local wait = task["wait"]
local type = type

local shadow_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAABpN6lAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAHdElNRQfiAQkTIxqKm+UhAAACvElEQVR42u2dzY7aMBhFjxPHEzJQBolRq77/27XSwBCSkD/PwinS7LpBVwrfeYLjI4Ozuy6Cw+HIyHBkOMCxTiIQmYnMzEQi0S9Hz/EUePIlxDpJB58YGRiZmJlTgIKCQMkLYYmwTtLhe2509AwM6QbkFJRUbKnYEChWHGCgp6WhpoF0AzI8gYodB/bs2BDI1aYPYqKn5cIZR7oPkyejoGTLgZ+888aOEq82fRAjHRdOlEBkZGTwODwvVOx55zdH9rxSqE0fxMCVMxXQ0dHS4TwZOYENO9448osDW4La9EH01GyAhhOfBHKy9Ar4JcGeA0d2Kw5QAu3yT+fJcB7IyJdn8JUtO36sOAB0vFISKNJz7+9fgelTKBAIlGrThxEI3z743Fpf/P/GAqgF1FgAtYAaC6AWUGMB1AJqLIBaQI0FUAuosQBqATUWQC2gxgKoBdRYALWAGgugFlBjAdQCaiyAWkCNBVALqLEAagE1FkAtoMYCqAXUWAC1gBoLoBZQYwHUAmosgFpAjQVQC6ixAGoBNRZALaDGAqgF1FgAtYAaC6AWUGMB1AJqLIBaQI0FUAuosQBqATUWQC2gxgKoBdRYALWAGgugFlBjAdQCaiyAWkCNBVALqLEAagE1FkAtoMYCqAXUWAC1gBoLoBZQYwHUAmosgFpAjQVQC6ixAGoBNRZALaDGAqgF1FgAtYAaC6AWUGMB1AJqLIBaQI0nfpsi7enp1VIPI53uPriaVmfT9ORAT8eVmhJWvDZ3oea6TK5OzOkGzIz3Lc4N0K04QM0HZy609IzMRM98nyI9UQHt6ic3/3JaEkzMnsjIjYYzJdA8xejqH8403BjTDRjoqHFAx+lJZnc/qOkYmP3yD9AAkY7PJxpe7hnTT2BiAGZG2ieb3p6ILj75+LqL4O7Dq245/HoDpAjx32cQ8QtpRORenSWX2AAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xOdTWsmQAAAAASUVORK5CYII=")
local pixel_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAA8nYBAOgDAADydgEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACOO8FX0xe8TgAAAAxJREFUGFdj+P//PwAF/gL+pzWBhAAAAABJRU5ErkJggg==")
local exponential = Enum["EasingStyle"]["Exponential"]
local circular = Enum["EasingStyle"]["Circular"]
local quad = Enum["EasingStyle"]["Quad"]

local show_transparency = {Transparency = 1}
local hide_transparency = {Transparency = 0}
local menu_references = {}

local out = Enum["EasingDirection"]["Out"]

local connections = {}
local addon_data = {}
local heartbeat = {}
local flags = {
    ["keybinds_position"] = {15, camera["ViewportSize"]["Y"]/2 - 10},
    ["loaded_addons"] = {},
    ["favorites"] = {},
    ["skins"] = {}
}

-- > ( global cheat functions )

local create_connection = LPH_NO_VIRTUALIZE(function(signal, callback)
    local connection = signal:Connect(callback)
    connections[#connections + 1] = connection

    return connection
end)

local create_instance = LPH_NO_VIRTUALIZE(function(class, properties)
    local instance = Instance["new"](class)

    for property, value in properties do
        instance[property] = value
    end

    return instance
end)

local round = LPH_NO_VIRTUALIZE(function(num, decimals)
    local mult = 10^(decimals or 0)
    return floor(num * mult + 0.5 - (num < 0 and 1 or 0)) / mult
end)

local remove = LPH_NO_VIRTUALIZE(function(tbl, index)
    local length = #tbl
    for i = index, length - 1 do
        tbl[i] = tbl[i + 1]
    end
    tbl[length] = nil
end)

-- > ( signal library )

local signal = {}

do
    -- > ( connection class)

    local connection = {}

    connection["__index"] = connection

    function connection.new(signal, callback)
        local callbacks = signal["callbacks"]
        callbacks[#callbacks+1] = callback

        return setmetatable({
            callback = callback,
            signal = signal
        }, connection)
    end

    function connection:Disconnect()
        local callbacks = self["signal"]["callbacks"]
        local callback = self["callback"]

        for i = 1, #callbacks do
            if callbacks[i] == callback then
                remove(callbacks, i)

                break
            end
        end
    end

    -- > ( signal class )

    signal["__index"] = signal

    signal.new = LPH_JIT_MAX(function()
        return setmetatable({
            callbacks = {}
        }, signal)
    end)

    function signal:Fire(...)
        local callbacks = self["callbacks"]
        for i = 1, #callbacks do
            spawn(callbacks[i], ...)
        end
    end

    function signal:Connect(callback)
        return connection["new"](self, callback)
    end
end

-- > ( tween library )

local active_tweens = {
    Color = {},
    Color3 = {},
    Size = {},
    tween_position = {},
    Position = {},
    tween_size = {},
    Transparency = {},
    FillTransparency = {},
    OutlineTransparency = {},
    BackgroundTransparency = {},
    ImageTransparency = {},
    FillColor = {},
    OutlineColor = {},
    [11] = {},
    [15] = {}
}

local tween = nil 
do
    local sqrt = math["sqrt"]
 
    tween = LPH_NO_VIRTUALIZE(function(object, properties, easing_style, _, tween_duration)
        local start_time = clock()

        local tween_functions = {}

        for property, value in properties do
            local tweens = active_tweens[property]
            local old_tween = tweens[object]

            if old_tween then
                for i = 1, #heartbeat do
                    if heartbeat[i] == old_tween then
                        remove(heartbeat, i)
                        break
                    end
                end
            end

            local old_value = object[property]

            if property == "Color" or property == "Color3" or property == "FillColor" or property == "OutlineColor" then
                tween_functions[property] = function()
                    local t = ((clock() - start_time)/tween_duration)
                    object[property] = color3_lerp(old_value, value, easing_style == exponential and (t == 1 and 1 or 1 - 2 ^ (-10 * t)) or easing_style == quad and t^2 or sqrt(1 - (t - 1) ^ 2)) or easing_style == "sine" and t < 0.5 and 0.5 * math.sin(clamp(t, 0, 1) * 355/113) or 0.5 + 0.5 * (1 - math.cos((clamp(t, 0, 1) - 0.5) * 355/113))
                end
            elseif property == "tween_position" or property == "tween_size" then
                tween_functions[property] = function()
                    local t = ((clock() - start_time)/tween_duration)
                    local tween_value = easing_style == exponential and (t == 1 and 1 or 1 - 2 ^ (-10 * t)) or easing_style == quad and t^2 or sqrt(1 - (t - 1) ^ 2)

                    local new = (value - old_value)
                    new = udim2_new(new["X"]["Scale"] * tween_value, new["X"]["Offset"] * tween_value, new["Y"]["Scale"] * tween_value, new["Y"]["Offset"] * tween_value)

                    object[property] = old_value + new
                end
            else
                tween_functions[property] = function()
                    local t = ((clock() - start_time)/tween_duration)

                    object[property] = old_value + (value - old_value) * (easing_style == exponential and (t == 1 and 1 or 1 - 2 ^ (-10 * t)) or easing_style == quad and t^2 or sqrt(1 - (t - 1) ^ 2))
                end
            end
        end

        for property, tween in tween_functions do
            heartbeat[#heartbeat+1] = tween
            active_tweens[property][object] = tween
        end

        delay(tween_duration, function()
            for property, tween in tween_functions do
                for i = 1, #heartbeat do
                    if heartbeat[i] == tween then
                        remove(heartbeat, i)

                        object[property] = properties[property]
                        break
                    end
                end
            end
        end)
    end)
end

-- > ( menu )

local menu = {
    on_config_loaded = signal["new"](),
    accent = color3_fromrgb(255, 213, 253),
    colors = {
        ["shadow"] = color3_fromrgb(154, 213, 222),
        ["accent"] = color3_fromrgb(154, 213, 222),
        ["active_text"] = color3_fromrgb(197, 197, 197),
        ["keybind_text"] = color3_fromrgb(197, 197, 197),
        ["border"] = color3_fromrgb(24, 25, 24),
        ["inactive_text"] = color3_fromrgb(75, 72, 72),
        ["highlighted"] = color3_fromrgb(51, 65, 70),
        ["dark_text"] = color3_fromrgb(70, 85, 87),
        ["image"] = color3_fromrgb(89, 89, 89),
        ["section"] = color3_fromrgb(6, 6, 6),
        ["background"] = color3_fromrgb(0, 0, 0),
        ["success"] = color3_fromrgb(154, 213, 222),
        ["error"] = color3_fromrgb(39, 60, 96),
        ["alert"] = color3_fromrgb(30, 51, 61),
        ["logo"] = color3_fromrgb(154, 213, 222),
        ["juju"] = color3_fromrgb(154, 213, 222),
        ["build"] = color3_fromrgb(154, 213, 222),
        ["cursor"] = color3_fromrgb(154, 213, 222),
    },
    settings = {},
    notifications = {},
    groups = {},
    favorites = {},
    autoload = nil,
    initial_base_offset = 75,
    ordered_groups = {},
    theme = ""
}

do
    -- > ( file system )

    do
        local files = {
            ["assets"] = {
                ["api.lua"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/api.lua") end,
                ["sparkle.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/sparkle.ogg") end,
                ["skeet.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/skeet.ogg") end,
                ["neverlose.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/neverlose.ogg") end,
                ["break.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/break.ogg") end,
                ["mc bow.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/mc%20bow.ogg") end,
                ["primordial.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/primordial.ogg") end,
                ["rust.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/rust.ogg") end,
                ["sexy.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/sexy.ogg") end,
                ["jaydes.png"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/jaydes.png") end,
                ["1.png"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/1.png") end,
                ["2.png"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/2.png") end,
                ["logo.png"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/logo.png") end,
                ["saturation.png"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/saturation.png") end,
            },
            ["custom"] = {
                ["textures.json"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/example.textures") end,
                ["character.rbxm"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/character.rbxm") end,
                ["pinksky.rbxm"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/pinksky.rbxm") end,
                ["crunch.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/juju.ogg") end,
                ["scar.ogg"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/scar.ogg") end,
                ["x hit.rbxm"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/x%20hit.rbxm") end,
                ["blossom aura.rbxm"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/blossom%20aura.rbxm") end,
                ["spam.json"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/spam.json") end,
            },
            ["themes"] = {
                ["default.th"] = function() return game:HttpGet("https://github.com/xander-999/juju/raw/refs/heads/main/default.th") end,
            },
            ["addons"] = {},
            ["configs"] = {},
            ["data.dat"] = [[{"notifications":true,"theme":"","favorites":[]}]]
        }

        if not isfolder("juju recode") then
            makefolder("juju recode")
        end

        local recursive_check

        recursive_check = function(path, array)
            for file, data in array do
                local path = path..file
                local data_type = type(data)

                if data_type == "table" then
                    if not isfolder(path) then
                        makefolder(path)
                    end
                    recursive_check(path.."/", data)
                elseif not isfile(path) then
                    writefile(path, type(data) == "function" and data() or data)
                end
            end
        end

        recursive_check("juju recode/", files)
    end

    -- > ( custom drawing )

    local drawing = Drawing
    LPH_NO_VIRTUALIZE(function()
        drawing = _G.FORCE_REAL_DRAWING and Drawing or loadstring(readfile("juju recode/assets/api.lua"))()
    end)()

    getgenv()["fake_drawing"] = drawing

    -- > ( global menu variables )

    local context_action_service = cloneref(game:GetService("ContextActionService"))
        local context_action_click = tostring({}):sub(math_random(8,12))
        local context_action_scroll = tostring({}):sub(math_random(8,12))
        local context_action_typing = tostring({}):sub(math_random(8,12))
        local context_action_typing_core = tostring({}):sub(math_random(8,12))

    local shortened_characters = {
		[Enum.KeyCode.LeftShift] = "lshift",
		[Enum.KeyCode.RightShift] = "rshift",
		[Enum.UserInputType.MouseButton1] = "m1",
		[Enum.UserInputType.MouseButton2] = "m2",
		[Enum.UserInputType.MouseButton3] = "m3",
		[Enum.KeyCode.ButtonX] = "xb",
		[Enum.KeyCode.ButtonY] = "yb",
		[Enum.KeyCode.ButtonA] = "ab",
		[Enum.KeyCode.ButtonB] = "bb",
		[Enum.KeyCode.ButtonR1] = "r1",
		[Enum.KeyCode.ButtonR2] = "r2",
		[Enum.KeyCode.ButtonR1] = "l1",
		[Enum.KeyCode.ButtonR2] = "l2",
		[Enum.KeyCode.DPadLeft] = "dpl",
		[Enum.KeyCode.DPadRight] = "dpr",
		[Enum.KeyCode.DPadUp] = "dpup",
		[Enum.KeyCode.DPadDown] = "dpdn",
		[Enum.KeyCode.Thumbstick1] = "ts1",
		[Enum.KeyCode.Thumbstick2] = "ts2",
		[Enum.KeyCode.Delete] = "delete",
		[Enum.KeyCode.Insert] = "insert",
		[Enum.KeyCode.PageUp] = "pgup",
		[Enum.KeyCode.PageDown] = "pgdw",
		[Enum.KeyCode.LeftControl] = "lctrl",
		[Enum.KeyCode.RightControl] = "rctrl",
		[Enum.KeyCode.RightAlt] = "ralt",
		[Enum.KeyCode.LeftAlt] = "lalt",
		[Enum.KeyCode.CapsLock] = "caps",
		[Enum.KeyCode.ScrollLock] = "slock",
		[Enum.KeyCode.Backspace] = "bspace",
		[Enum.KeyCode.Space] = "space",
        [Enum.KeyCode.Backquote] = "bqte",
        [Enum.KeyCode.BackSlash] = "bsls",
	}

    local on_keybind_created = signal["new"]()
    local on_keybind_deleted = signal["new"]()
    local on_keybind_updated = signal["new"]()
    local on_keybind_change = signal["new"]()
    local transparency_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAABkAAAAMBAMAAABl3At4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///8rKyoNe1IIAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAABdJREFUGNNjYBBEgmg8ZI4AGo+u+hgEAKy7BSkQOa/KAAAAAElFTkSuQmCC")
    local checkmark_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAAEFJREFUKFOFj0EOACEIxMD//3ncTsSDYbUXDFMhpKS4MVbt4Kf+BI/Nj07YIesRPIpm1QoBIf1qQqgVls4QHmdGTFexGgt5dAJMAAAAAElFTkSuQmCC")
    local config_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAAFFJREFUKFOdz8ERwCAIBEC0x6QmuzYcORlkhofuB0VEbKKmQoya4tJ0xuzNl6tC64hiNZj6n04eHvlY5YyRz4tCsE3A9FnH7TNILEy5u441kQ8rkEMeEE8J7QAAAABJRU5ErkJggg==")
    local button_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAAAMdwEA6AMAAAx3AQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAO7qLRjGzAACAAAAK0lEQVQYVz3KQRIAAAQCwPr/p5WiQ9YAfkDcZiph7HnUucyD3V/RWqbaCjkOewBGmBH+OgAAAABJRU5ErkJggg==")
    local arrow_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAA8nYBAOgDAADydgEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACOO8FX0xe8TgAAABdJREFUKFNj/A8EDHgAE5QmHwwBKxgYAJzaC/5K6BlzAAAAAElFTkSuQmCC")
    local cog_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAQKAAAECgBJz8A6wAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAAB3mgEA6AMAAHeaAQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAEyPNqYn0aVIAAAALElEQVQYV2NgBAIGCAmioQhIQACQCZaGYBAJoZGYSApgUhATYAiikJGRkREACr4AMZ+SUSoAAAAASUVORK5CYII=")
    local menu_position = udim2_new(0, camera["ViewportSize"]["X"]/2 - 575/2, 0, camera["ViewportSize"]["Y"]/2 - 450*0.5)

    local half_transparency = {Transparency = 0.5}
    local stop_panel_search = nil
    local do_notifications = true
    local set_active_tab = nil
    local theme_section = nil
    local close_context = nil
    local menu_open = true
    local menu_tick = clock()
    local pop_menu = nil
    local old_text = ""
    local searching = nil
    local hud_frames = {}

    local actives = {
        ["colorpicker"] = nil,
        ["dropdown"] = nil,
        ["settings"] = nil,
        ["binding"] = nil,
        ["keybind"] = nil,
        ["context"] = nil,
        ["panel"] = nil,
        ["tab"] = nil,
        ["colorpicker_saturation"] = 0,
        ["colorpicker_hue"] = 0,
        ["colorpicker_value"] = 0
    }

    -- > ( drawing proxy )

    local drawing_proxy = {}
    local create1 = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and Drawing["new"] or drawing["new"]

    drawing_proxy.new = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and LPH_NO_VIRTUALIZE(function(class, properties)
        local object = create1(class)

        local proxy = setmetatable({
            ["position"] = udim2_new(0, 0, 0, 0),
            ["real_position"] = vector2_new(0, 0),
            ["size"] = class == "Text" and 12 or udim2_new(0, 0, 0, 0),
            ["real_size"] = class == "Text" and 12 or vector2_new(0, 0),
            ["object"] = object,
            ["children"] = {},
            ["parent"] = false,
            ["is_rendering"] = false,
            ["skip"] = class == "Circle",
            ["visible"] = false,
            ["destroy"] = function()
                object:Destroy()
            end
        }, drawing_proxy)

        local size = properties["Size"]
        if size and type(size) == "number" then
            properties["Size"] = size+2
        end

        local z_index = properties["ZIndex"]
        properties["ZIndex"] = z_index and z_index+20 or 20

        for property, value in properties do
            proxy[property] = value
        end

        return proxy
    end) or LPH_NO_VIRTUALIZE(function(class, properties)
        local object = create1(class)

        local proxy = setmetatable({
            ["position"] = udim2_new(0, 0, 0, 0),
            ["real_position"] = vector2_new(0, 0),
            ["size"] = class == "Text" and 12 or udim2_new(0, 0, 0, 0),
            ["real_size"] = class == "Text" and 12 or vector2_new(0, 0),
            ["object"] = object,
            ["children"] = {},
            ["parent"] = false,
            ["is_rendering"] = false,
            ["skip"] = class == "Circle",
            ["visible"] = false,
            ["destroy"] = function()
                object:Destroy()
            end
        }, drawing_proxy)

        local z_index = properties["ZIndex"]
        properties["ZIndex"] = z_index and z_index+20 or 20

        for property, value in properties do
            proxy[property] = value
        end

        return proxy
    end)

    getgenv()["_PROXY"] = drawing_proxy
    menu["create_proxy_drawing"] = drawing_proxy["new"]

    do
        local rawget = rawget
        local type = type

        local update_proxy_position
        update_proxy_position = LPH_NO_VIRTUALIZE(function(proxy, position)
            local parent = rawget(proxy, "parent")
            local real_position = parent and parent["real_position"] or vector2_new(position["X"]["Offset"], position["Y"]["Offset"])

            if parent then
                local parent_position = parent["real_position"]
                local real_parent_size = parent["real_size"]

                real_position = vector2_new((parent_position["X"] + real_parent_size["X"] * position["X"]["Scale"]) + position["X"]["Offset"], (parent_position["Y"] + real_parent_size["Y"] * position["Y"]["Scale"]) + position["Y"]["Offset"])
            end

            proxy["object"]["Position"] = real_position
            proxy["real_position"] = real_position

            local children = proxy["children"]
            for i = 1, #children do
                local child = children[i]
                update_proxy_position(child, child["position"])
            end
        end)

        local update_proxy_visibility
        update_proxy_visibility = LPH_NO_VIRTUALIZE(function(proxy, visible)
            local children = proxy["children"]
            local parent = rawget(proxy, "parent")
            local object = proxy["object"]

            if parent and not parent["is_rendering"] then
                proxy["is_rendering"] = false
                object["Visible"] = false
            else
                object["Visible"] = visible
                proxy["is_rendering"] = visible
            end

            for i = 1, #children do
                local child = children[i]
                update_proxy_visibility(child, child["visible"])
            end
        end)

        local update_proxy_size
        update_proxy_size = LPH_NO_VIRTUALIZE(function(proxy, size)
            if type(proxy) ~= "table" or type(proxy["real_size"]) == "number" then -- ??
                return
            end

            local parent = rawget(proxy, "parent")
            local real_size = parent and parent["real_size"] or vector2_new(size["X"]["Offset"], size["Y"]["Offset"])

            if parent then
                local parent_size = parent["real_size"]

                real_size = vector2_new((parent_size["X"] * size["X"]["Scale"]) + size["X"]["Offset"], (parent_size["Y"] * size["Y"]["Scale"]) + size["Y"]["Offset"])
            end

            proxy["object"]["Size"] = real_size
            proxy["real_size"] = real_size

            local children = proxy["children"]
            for i = 1, #children do
                local child = children[i]
                local old = child["real_size"]
                update_proxy_size(child, child["size"])
                
                update_proxy_position(child, child["position"])

            end
        end)

        function drawing_proxy:__newindex(property, value)
            if property == "Position" or property == "tween_position" then
                self["position"] = value
                update_proxy_position(self, value)
            elseif property == "Parent" then
                if value then
                    local children = value["children"]
                    children[#children+1] = self
                end

                self["parent"] = value
                update_proxy_position(self, self["position"])
                update_proxy_visibility(self, self["visible"])

                if type(self["size"]) ~= "number" and not self["skip"] then
                    update_proxy_size(self, self["size"])
                end
            elseif property == "Visible" then
                self["visible"] = value
                update_proxy_visibility(self, value)
            elseif (property == "Size" or property == "tween_size") and type(value) ~= "number" and not self["skip"] then
                self["size"] = value
                update_proxy_size(self, value)
            else
                self["object"][property] = value
            end
        end

        function drawing_proxy:__index(property)
            return property == "tween_size" and self["size"] or property == "tween_position" and self["position"] or property == "Destroy" and self["destroy"] or self["object"][property]
        end
    end

    -- > ( menu creation )

    local cursor = drawing_proxy["new"]("Image", {
        ["Position"] = menu_position,
        ["Size"] = udim2_new(0, 24, 0, 24),
        ["Color"] = menu["colors"]["cursor"],
        ["Rounding"] = 0,
        ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACHUExURaWlpdTV1cDBwbq6uv///+Li4q6ursPDw9vc3Nna2sTExLCwsNPT09bW1tXV1bGxsdLT083OzrKyss/Pz7Ozs8jIyLS1tcbHx7W1tcnJybm5ufDw8JKSkpmZmaqrq6ipqaWmpqanp4aGhpqamszMzMLCwuLh4Xx8fL29vfHw8Hl5eY+OjgAAAAqocEsAAAAtdFJOU///////////////////////////////////////////////////////////AKXvC/0AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuNBLfpoMAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuNAADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADX5rshveZftAAAALhJREFUOE/V0scWgjAQhWHUK2JX7L33vP/zmcilJRNd+6+Yme+w4BCoH2kQVKocpDSoAfWQo5sGDQCRVxCg6RMatAxA1ObGKgPoyCIHHlEA6EqiCNDrc1uoBDBwRRlgGHOfZQGMxjyk2QCTKS/MAZjNeUpyARY8JQmgLCSAJY8mCax4+5SD9WYbx+Fufyh/8AwcubBLwYmzkwbmjzr7XmDABbjeOLppcMfjyUlIA/VKHuUM+NofAKXelaSKsWMM5jMAAAAASUVORK5CYII="),
        ["Transparency"] = 0,
        ["ZIndex"] = 1011,
        ["Visible"] = true
    })

    local frame = drawing_proxy["new"]("Image", {
        ["Position"] = menu_position,
        ["Size"] = udim2_new(0, 575, 0, 450),
        ["Color"] = menu["colors"]["background"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 1,
        ["Visible"] = false
    })

    local inside = drawing_proxy["new"]("Image", {
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(1, -2, 1, -2),
        ["Color"] = menu["colors"]["section"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 1,
        ["Parent"] = frame,
        ["Visible"] = false
    })

    local logo = drawing_proxy["new"]("Image", {
        ["Color"] = menu["colors"]["accent"],
        ["Data"] = readfile("juju recode/assets/logo.png"),
        ["Position"] = udim2_new(0, 15, 0, 15),
        ["Parent"] = inside,
        ["Size"] = udim2_new(0, 35, 0, 35),
        ["Visible"] = true,
        ["Transparency"] = 1
    })

    local juju_text = drawing_proxy["new"]("Text", {
        ["Font"] = 1,
        ["Color"] = color3_fromrgb(255, 255, 255),
        ["Text"] = "juju",
        ["Parent"] = logo,
        ["Position"] = udim2_new(1, 5, 0, 3),
        ["Size"] = 14,
        ["Visible"] = true,
        ["Transparency"] = 1
    })

    local build_text = drawing_proxy["new"]("Text", {
        ["Font"] = 1,
        ["Color"] = menu["colors"]["accent"],
        ["Text"] = (LRM_ScriptName == "da hood" or LRM_ScriptName == "da hood copies") and "live" or "private",
        ["Parent"] = logo,
        ["Position"] = udim2_new(1, 5, 0, 19),
        ["Size"] = 14,
        ["Visible"] = true,
        ["Transparency"] = 1
    })

    local right_side = drawing_proxy["new"]("Square", {
        ["Parent"] = inside,
        ["Position"] = udim2_new(0, 101, 0, 0),
        ["Size"] = udim2_new(1, -101, 1, 0),
        ["Color"] = menu["colors"]["background"],
        ["Visible"] = true,
        ["Filled"] = true,
        ["Transparency"] = 1
    })

    local right_side_cover = drawing_proxy["new"]("Square", {
        ["Parent"] = inside,
        ["Position"] = udim2_new(0, 101, 0, 0),
        ["Size"] = udim2_new(1, -101, 1, 0),
        ["Color"] = menu["colors"]["background"],
        ["Visible"] = true,
        ["Filled"] = true,
        ["ZIndex"] = 999,
        ["Transparency"] = 0
    })

    local right_side_divider = drawing_proxy["new"]("Square", {
        ["Parent"] = inside,
        ["Position"] = udim2_new(0, 100, 0, 0),
        ["Size"] = udim2_new(0, 1, 1, 0),
        ["Color"] = menu["colors"]["background"],
        ["Visible"] = true,
        ["Thickness"] = 1,
        ["Filled"] = true,
        ["Transparency"] = 1
    })

    local search_image = drawing_proxy["new"]("Image", {
        ["Color"] = menu["colors"]["image"],
        ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAAGdJREFUKFONkGEWgCAIg5GTdP9LlqPBA8Pq+yFuOvA5JHFOuDXGhNvAjPVipgtZAFAGtIuvbrSdRA4sJQQBKB/wOM6V9TevAe+cn6su8liwaieSuwuONy4/k0PdZHglsKOEWD+5QyIX+wJP/y1yP3IAAAAASUVORK5CYII="),
        ["Position"] = udim2_new(0, 27, 1, -27),
        ["Parent"] = inside,
        ["Size"] = udim2_new(0, 12, 0, 12),
        ["Transparency"] = 1,
        ["ZIndex"] = 999,
        ["Visible"] = true,
    })

    local themes_image = drawing_proxy["new"]("Image", {
        ["Color"] = menu["colors"]["image"],
        ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADdYAAA3WAZBveZwAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAiF8BAOgDAACIXwEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAAC1cWHl18YwawAAAH5JREFUKFOFkAsOgCAMQwE5lIfx/qeA4Do7ZCL6ErOWtHwMb7TWinyN1pE4Owxul5uJnAp2ljGFo0B5F1Zhw0p6JVxDfIZegQymtroRTK9wj0bYjl5QtTCGPkqHLGcXpFRQGtYqwhDuDU9YKhYGaQwjAGix0S7W/z0UAO0PIZyip02b2JexIAAAAABJRU5ErkJggg=="),
        ["Position"] = udim2_new(0, 44, 1, -27),
        ["Parent"] = inside,
        ["Size"] = udim2_new(0, 12, 0, 12),
        ["Transparency"] = 1,
        ["Visible"] = true,
    })

    local settings_image = drawing_proxy["new"]("Image", {
        ["Color"] = menu["colors"]["image"],
        ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAALEwAACxMBAJqcGAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAABJGQEA6AMAAEkZAQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAC/Sb/YZ+v7JAAAAMklEQVQYV1WLARIAQAQC9f9Pn65oNAZpFajyUHn0MtJZWkbdt+QxBwtA47X1kzDk9QY8FowASc0mZqAAAAAASUVORK5CYII="),
        ["Position"] = udim2_new(0, 61, 1, -27),
        ["Parent"] = inside,
        ["Size"] = udim2_new(0, 12, 0, 12),
        ["Transparency"] = 1,
        ["Visible"] = true,
    })

    local tab_line = drawing_proxy["new"]("Square", {
        ["Parent"] = inside,
        ["Position"] = udim2_new(0, 0, 0, 0),
        ["Size"] = udim2_new(0, 1, 0, 12),
        ["Filled"] = true,
        ["Transparency"] = 0.5,
        ["Color"] = menu["colors"]["accent"],
        ["Visible"] = true,
    })

    local search_border = drawing_proxy["new"]("Image", {
        ["Parent"] = frame,
        ["Position"] = udim2_new(0, 11, 1, -32),
        ["Size"] = udim2_new(0, 78, 0, 20),
        ["Color"] = menu["colors"]["border"],
        ["Transparency"] = 1,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Visible"] = false,
    })

    local search_inside = drawing_proxy["new"]("Image", {
        ["Parent"] = search_border,
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(1, -2, 1, -2),
        ["Color"] = menu["colors"]["background"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 1,
        ["Visible"] = true,
    })

    local search_out_border = drawing_proxy["new"]("Image", {
        ["Parent"] = frame,
        ["Position"] = udim2_new(0, 11, 1, -57),
        ["Size"] = udim2_new(0, 78, 0, 20),
        ["Color"] = menu["colors"]["border"],
        ["Transparency"] = 1,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["ZIndex"] = 999,
        ["Visible"] = false,
    })

    local search_out = drawing_proxy["new"]("Image", {
        ["Parent"] = search_out_border,
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(1, -2, 1, -2),
        ["Color"] = menu["colors"]["background"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 1,
        ["ZIndex"] = 1000,
        ["Visible"] = true,
    })

    local search_text = drawing_proxy["new"]("Text", {
        ["Color"] = menu["colors"]["active_text"],
        ["Text"] = "",
        ["Size"] = 12,
        ["Font"] = 1,
        ["Transparency"] = 1,
        ["Visible"] = true,
        ["Parent"] = search_inside,
        ["Center"] = false,
        ["Position"] = udim2_new(0, 18, 0, 2),
    })

    local drag_frame = drawing_proxy["new"]("Image", {
        ["Position"] = menu_position,
        ["Size"] = udim2_new(0, 575, 0, 450),
        ["Color"] = menu["colors"]["background"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 0,
        ["ZIndex"] = 1000,
        ["Visible"] = false
    })

    local drag_inside = drawing_proxy["new"]("Image", {
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(1, -2, 1, -2),
        ["Color"] = menu["colors"]["section"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 1,
        ["Parent"] = drag_frame,
        ["ZIndex"] = 1001,
        ["Visible"] = true
    })

    local drag_logo = drawing_proxy["new"]("Image", {
        ["Color"] = menu["colors"]["accent"],
        ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAA3JJREFUWEe92EtIVFEcx/HrIx9ZWvkoTSFLDJPQIBPShRRFSFCQQkVlkPSAViLUImgXgZsWtWpVG1fRQmgRBBEGUUFtWrQoqCjoSQ8qet6+v3PvmTkzXh9zm5kffHTunXHm3P953DMW+L7v5SFlWIu76MVTFOMbPuE3vEL9yEP0wc3BQ+8C9uE5+lCJAnj5qkwpenDDHKWmEa/g56syf6APTE8/PgcP89NNqkoNinBTJ8gwunAHX2G6J9fdpItdDo0PZRceQ1VSI34h0YBcV0YDd0Xw0ORK+Ftd8xMplchlYzRDKrDaHCWj7opMLhujD23ARXMUZARvoIotRAnMtFZy1RhbFS10brToaaFrgbqqFjlvjK3KuDkKoqo8w1Jc1wmiyiSSi8bYqnSYo2Qeohxa/NTQbXiP5CDW1M6yYqyBm9Poxn5z5PsHUI9CJP4225WZripaV3TuMq7hNt7iL5JxW5YFUVWZxJngoX8cer4EU/5+yon/oNW8CnsQFZ1fiVJE/X1WbgfqGs2e+WjFPaRnEx7hA8zeJSpxG6MGaLxpalahCW24BDcDuI/X+IEZPyzTxqgBWj0XoA7aMKka55Ae3ZknoOmrLcTssf01C03BcjRgI4aRnvHwt806zEPU+0WKPOlQ5crQhM04BTdXsQP95iiZI6iGqfxcRZ4MaZrWoBdjcHMMPWhELQbgZj0ip+9MIk9C5dU01Erp5ii6oAZoiqrBzXCjhur5jKoiUSd1Ra0Yhc1ZqEJ10PP2gyqwHW42IOOqSPoJXekqjMBGi5WuXmPHvdoitMDNYahrM66KuAd6A5X3IGy2QANRH5z+Wq22g3DTiYxmkMs90JtoPNj0oRIpd9aQXtsBN7uxCLGqIu5dW19B7be+vdD+4wtS76zBwlcNfU210eZaK61ezyXGi22Mlnc1ptsced4DRL2xXqd7UCfO60SYrXiJua200yUskUqrzY4yBA3ClBKGNIg1W9xo+i9G7O6x3G6yVdA5URXc6KaobjxpjoKM4ha0uY7dPYk4LdPVaRAq7dA013ldsRa49LVnAm2ItaZEcSvzHS+Ch2ZM1EPfbZagHTsxBuUEVCH9n0WDNysx/RxGDdO2QP8z0VcMbQHeQfsVd58yhElowGqPkrW4jVG0V1kGffnSxtnNIWi39gQfMe2OLV487x+AjByM3j95+QAAAABJRU5ErkJggg=="),
        ["Position"] = udim2_new(0.5, -20, 0.5, -20),
        ["Parent"] = drag_inside,
        ["Size"] = udim2_new(0, 40, 0, 40),
        ["Visible"] = true,
        ["ZIndex"] = 1002,
        ["Transparency"] = 1
    })

    -- > ( keybinds )

    local keybind_data = {
        [1] = {
            ["key"] = Enum["KeyCode"]["Delete"],
            ["value"] = true,
            ["original_value"] = false,
            ["set_activated"] = LPH_NO_VIRTUALIZE(function()
                pop_menu()
            end)
        }
    }

    local keybind = {}
    keybind["__index"] = keybind

    function keybind:set_activated(activated)
        local new_value = activated and self["value"] or (not activated and self["original_value"])
        local element = self["element"]
        local type = self["type"]

        if type == 1 then
            element:set_dropdown(new_value, true)
        elseif type == 2 then
            element:set_slider(new_value, true)
        elseif type == 3 then
            element:set_toggle(activated, true)
        elseif type == 4 then
            return element["on_clicked"]:Fire()
        end

        self["activated"] = activated

        on_keybind_change:Fire(self, element, activated)
    end

    -- > ( keybinds list )

    local list_frame = drawing_proxy["new"]("Image", {
        ["Position"] = udim2_new(0, 15, 0, camera["ViewportSize"]["Y"]/2 - 10),
        ["Size"] = udim2_new(0, 74, 0, 20),
        ["Color"] = menu["colors"]["border"],
        ["Transparency"] = 0,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["ZIndex"] = 10,
        ["Visible"] = false,
    })

    hud_frames["keybinds_position"] = list_frame

    local list_shadow = drawing_proxy["new"]("Image", {
        ["Parent"] = list_frame,
        ["Data"] = shadow_image_data,
        ["Rounding"] = 7,
        ["Color"] = menu["colors"]["shadow"],
        ["Transparency"] = 0,
        ["Size"] = udim2_new(1, 6, 1, 4),
        ["ZIndex"] = 9,
        ["Visible"] = true,
        ["Position"] = udim2_new(0, -3, 0, -2)
    })

    local list_inside = drawing_proxy["new"]("Image", {
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(0, 72, 0, 18),
        ["Color"] = color3_fromrgb(15, 15, 15),
        ["Transparency"] = 0,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Parent"] = list_frame,
        ["ZIndex"] = 11,
        ["Visible"] = true,
    })

    local list_icon = drawing_proxy["new"]("Image", {
        ["Color"] = menu["colors"]["accent"],
        ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAABgAAAAAQAAAGAAAAABAAAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAOnV9jjK2mx6AAAAKklEQVQYV2NghANkJhCAKCgGUUAazIUCiBiIAVEAFoLwIQgsCgZwJiMjABBLAEmFjHpsAAAAAElFTkSuQmCC"),
        ["Transparency"] = 0,
        ["Position"] = udim2_new(0, 4, 0, 4),
        ["Parent"] = list_inside,
        ["Size"] = udim2_new(0, 10, 0, 10),
        ["ZIndex"] = 12,
        ["Visible"] = true,
    })

    local list_divider = drawing_proxy["new"]("Square", {
        ["Position"] = udim2_new(0, 20, 0, 4),
        ["Size"] = udim2_new(0, 1, 0, 10),
        ["Color"] = menu["colors"]["accent"],
        ["Transparency"] = 0,
        ["Filled"] = true,
        ["Parent"] = list_inside,
        ["ZIndex"] = 12,
        ["Visible"] = true,
    })

    local list_text = drawing_proxy["new"]("Text", {
        ["Color"] = color3_fromrgb(255, 255, 255),
        ["Text"] = "hotkeys",
        ["Size"] = 12,
        ["Font"] = 1,
        ["Transparency"] = 0,
        ["Visible"] = true,
        ["Parent"] = list_inside,
        ["Position"] = udim2_new(0, 26, 0, (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 2 or 3),
        ["ZIndex"] = 12,
    })

    local list_drawings = {}
    local active_binds = {}

    menu["show_bind"] = function(keybind, just_visual)
        local found = nil

        for i = 1, #active_binds do
            local bind = active_binds[i]
            if bind == keybind then
                found = i
                break
            end
        end

        if not just_visual then
            if not found then
                active_binds[#active_binds+1] = keybind
                found = #active_binds
            end
        end

        local drawings = list_drawings[keybind]
        local frame = drawings["frame"]
        local y = 24 + (found - 1)*21

        frame["Position"] = udim2_new(0, -5, 0, y)
        tween(frame, {Transparency = 0 or 0.2, tween_position = udim2_new(0, 0, 0, y)}, circular, out, 0.15)
        tween(drawings["inside"], {Transparency = 0.7}, circular, out, 0.15)
        tween(drawings["text"], {Transparency = 0.9}, circular, out, 0.15)
        tween(drawings["value"], {Transparency = 0.7}, circular, out, 0.15)
        tween(drawings["shadow"], {Transparency = 0.16}, circular, out, 0.15)
        frame["Visible"] = true
    end

    menu["get_active_binds"] = LPH_NO_VIRTUALIZE(function()
        return active_binds
    end)
    
    local create_hover_connection = nil

    menu["hide_bind"] = function(keybind, just_visual)
        if not just_visual then
            for i = 1, #active_binds do
                if active_binds[i] == keybind then
                    remove(active_binds, i)
                    break
                end
            end

            for i = 1, #active_binds do
                local frame = list_drawings[active_binds[i]]["frame"]
                local old_position = frame["tween_position"]
                local new_position = udim2_new(0, 0, 0, 24 + (i - 1)*21)

                if old_position ~= new_position then
                    tween(frame, {tween_position = new_position}, circular, out, 0.15)
                end
            end
        end

        local drawings = list_drawings[keybind]

        if drawings then
            local frame = drawings["frame"]

            tween(drawings["frame"], {Transparency = 0, tween_position = frame["tween_position"] - udim2_new(0, 5, 0, 0)}, circular, out, 0.15)
            tween(drawings["inside"], hide_transparency, circular, out, 0.15)
            tween(drawings["text"], hide_transparency, circular, out, 0.15)
            tween(drawings["value"], hide_transparency, circular, out, 0.15)
            tween(drawings["shadow"], hide_transparency, circular, out, 0.15)

            delay(0.15, function()
                local found = nil

                if not just_visual then
                    for i = 1, #active_binds do
                        local bind = active_binds[i]
                        if bind == keybind then
                            found = i
                            break
                        end
                    end
                end

                if not found then
                    frame["Visible"] = false
                end
            end)
        end
    end

    function menu:show_keybinds()
        list_frame["Visible"] = true
        tween(list_frame, {Transparency = 0.7}, circular, out, 0.15)
        tween(list_inside, show_transparency, circular, out, 0.15)
        tween(list_shadow, {Transparency = 0.16}, circular, out, 0.15)
        local children = list_inside["children"]
        for i = 1, #children do
            local child = children[i]
            if child["Visible"] then
                tween(child, child == list_text and show_transparency or half_transparency, circular, out, 0.15)
            end
        end

        for i = 1, #active_binds do
            menu["show_bind"](active_binds[i], true)
        end

        menu["keybinds_visible"] = true
    end

    function menu:hide_keybinds()
        list_frame["Visible"] = true
        tween(list_frame, hide_transparency, circular, out, 0.15)
        tween(list_inside, hide_transparency, circular, out, 0.15)
        tween(list_shadow, hide_transparency, circular, out, 0.15)
        local children = list_inside["children"]
        for i = 1, #children do
            local child = children[i]
            if child["Visible"] then
                tween(child, hide_transparency, circular, out, 0.15)
            end
        end

        local old_tick = clock()

        for i = 1, #active_binds do
            local keybind = active_binds[i]
            menu["hide_bind"](keybind, true)
        end

        menu["keybinds_visible"] = old_tick

        delay(0.15, function()
            if old_tick == menu["keybinds_visible"] then
                menu["keybinds_visible"] = false
                list_frame["Visible"] = false
            end
        end)
    end

    function menu:load_theme(theme)
        if theme then
            local path = "juju recode/themes/"..theme..".th"
            if isfile(path) then
                local s, data = pcall(function()
                    return http_service:JSONDecode(readfile(path))
                end)

                if s and data then
                    local elements = theme_section["elements"]
                    for i = 1, #elements do
                        local element = elements[i]
                        local flag = element["color_flag"]
                        if flag then
                            local color = data[flag]

                            if color then
                                element:set_colorpicker(color3_fromrgb(color[1], color[2], color[3]))
                            end
                        end
                    end

                    menu["new_notification"]("loaded theme "..theme, 1)
                    menu["did_action"] = true
                    menu["theme"] = theme
                    menu["saved"] = true
                else
                    menu["new_notification"]("failed to load theme "..theme, 3)
                end
            else
                menu["theme"] = ""
                menu["saved"] = true
            end
        end
    end

    local offset = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 1 or 2

    create_connection(on_keybind_created, function(keybind, element)
        local type = keybind["type"]

        if type == 1 then
            local keybind_frame = drawing_proxy["new"]("Image", {
                ["Position"] = udim2_new(0, 0, 0, 25),
                ["Size"] = udim2_new(0, 74, 0, 18),
                ["Color"] = menu["colors"]["border"],
                ["Transparency"] = 0,
                ["Rounding"] = 4,
                ["Parent"] = list_frame,
                ["Data"] = pixel_image_data,
                ["Visible"] = false,
            })

            local keybind_inside = drawing_proxy["new"]("Image", {
                ["Position"] = udim2_new(0, 1, 0, 1),
                ["Size"] = udim2_new(0, 72, 0, 18),
                ["Color"] = menu["colors"]["background"],
                ["Transparency"] = 0,
                ["Rounding"] = 4,
                ["Data"] = pixel_image_data,
                ["Parent"] = keybind_frame,
                ["Visible"] = true,
            })

            local value_image = drawing_proxy["new"]("Image", {
                ["Color"] = menu["colors"]["accent"],
                ["Size"] = udim2_new(0, 10, 0, 10),
                ["Data"] = arrow_image_data,
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Parent"] = keybind_inside,
                ["Position"] = udim2_new(0, 3, 0, 3),
                ["ZIndex"] = 2
            })

            local keybind_text = drawing_proxy["new"]("Text", {
                ["Color"] = menu["colors"]["keybind_text"],
                ["Text"] = element["name"],
                ["Size"] = 12,
                ["Font"] = 1,
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Parent"] = keybind_inside,
                ["Position"] = udim2_new(0, 23, 0, offset),
                ["ZIndex"] = 2
            })

            local keybind_shadow = drawing_proxy["new"]("Image", {
                ["Parent"] = keybind_frame,
                ["Data"] = shadow_image_data,
                ["Rounding"] = 7,
                ["Color"] = menu["colors"]["shadow"],
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Position"] = udim2_new(0, 0, 0, 0),
                ["ZIndex"] = 3
            })

            local x_size = keybind_text["TextBounds"]["X"] + 31

            keybind_frame["Size"] = udim2_new(0, x_size, 0, 18)
            keybind_inside["Size"] = udim2_new(0, x_size-2, 0, 16)

            local shadow_size = floor(x_size/11)
            keybind_shadow["Size"] = udim2_new(1, shadow_size - 1, 1, 4)
            keybind_shadow["Position"] = udim2_new(0, -shadow_size/2, 0, -2)

            list_drawings[keybind] = {
                ["frame"] = keybind_frame,
                ["inside"] = keybind_inside,
                ["text"] = keybind_text,
                ["value"] = value_image,
                ["shadow"] = keybind_shadow
            }
        elseif type == 2 then
            local keybind_frame = drawing_proxy["new"]("Image", {
                ["Position"] = udim2_new(0, 0, 0, 25),
                ["Size"] = udim2_new(0, 74, 0, 18),
                ["Color"] = menu["colors"]["border"],
                ["Transparency"] = 0,
                ["Rounding"] = 4,
                ["Parent"] = list_frame,
                ["Data"] = pixel_image_data,
                ["Visible"] = false,
            })

            local keybind_inside = drawing_proxy["new"]("Image", {
                ["Position"] = udim2_new(0, 1, 0, 1),
                ["Size"] = udim2_new(0, 72, 0, 18),
                ["Color"] = menu["colors"]["background"],
                ["Transparency"] = 0,
                ["Rounding"] = 4,
                ["Data"] = pixel_image_data,
                ["Parent"] = keybind_frame,
                ["Visible"] = true,
            })

            local value_text = drawing_proxy["new"]("Text", {
                ["Color"] = menu["colors"]["accent"],
                ["Text"] = element["drawings"]["slider_text"]["Text"],
                ["Size"] = 12,
                ["Font"] = 1,
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Parent"] = keybind_inside,
                ["Position"] = udim2_new(0, 3, 0, offset),
            })

            local value = keybind["value"]

            if value == element["slider_min"] then
                value_text["Text"] = element["slider_min_text"] or element["slider_prefix"]..value..element["slider_suffix"]
            else
                value_text["Text"] = (value == element["slider_max"] and element["slider_max_text"]) or element["slider_prefix"]..value..element["slider_suffix"]
            end

            local keybind_text = drawing_proxy["new"]("Text", {
                ["Color"] = menu["colors"]["keybind_text"],
                ["Text"] = element["name"],
                ["Size"] = 12,
                ["Font"] = 1,
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Parent"] = keybind_inside,
                ["Position"] = udim2_new(0, 23, 0, offset),
            })

            local keybind_shadow = drawing_proxy["new"]("Image", {
                ["Parent"] = keybind_frame,
                ["Data"] = shadow_image_data,
                ["Rounding"] = 7,
                ["Color"] = menu["colors"]["shadow"],
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Position"] = udim2_new(0, 0, 0, 0),
                ["ZIndex"] = 3
            })


            local text_bounds = value_text["TextBounds"]["X"]
            local x_size = text_bounds + keybind_text["TextBounds"]["X"] + 18

            keybind_text["Position"] = udim2_new(0, text_bounds + 13, 0, 2)
            keybind_frame["Size"] = udim2_new(0, x_size, 0, 18)
            keybind_inside["Size"] = udim2_new(0, x_size-2, 0, 16)

            local shadow_size = floor(x_size/11)
            keybind_shadow["Size"] = udim2_new(1, shadow_size - 1, 1, 4)
            keybind_shadow["Position"] = udim2_new(0, -shadow_size/2, 0, -2)

            list_drawings[keybind] = {
                ["frame"] = keybind_frame,
                ["inside"] = keybind_inside,
                ["text"] = keybind_text,
                ["value"] = value_text,
                ["shadow"] = keybind_shadow
            }
        elseif type == 3 then
            local keybind_frame = drawing_proxy["new"]("Image", {
                ["Position"] = UDim2.new(0, 0, 0, 25),
                ["Size"] = UDim2.new(0, 74, 0, 18),
                ["Color"] = menu["colors"]["border"],
                ["Transparency"] = 0,
                ["Rounding"] = 4,
                ["Parent"] = list_frame,
                ["Data"] = pixel_image_data,
                ["Visible"] = false,
            })

            local keybind_inside = drawing_proxy["new"]("Image", {
                ["Position"] = UDim2.new(0, 1, 0, 1),
                ["Size"] = UDim2.new(0, 72, 0, 18),
                ["Color"] = menu["colors"]["background"],
                ["Transparency"] = 0,
                ["Rounding"] = 4,
                ["Data"] = pixel_image_data,
                ["Parent"] = keybind_frame,
                ["Visible"] = true,
            })

            local keybind_shadow = drawing_proxy["new"]("Image", {
                ["Parent"] = keybind_frame,
                ["Data"] = shadow_image_data,
                ["Rounding"] = 7,
                ["Color"] = menu["colors"]["shadow"],
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Position"] = udim2_new(0, 0, 0, 0),
                ["ZIndex"] = 3
            })

            local value_image = drawing_proxy["new"]("Image", {
                ["Color"] = menu["colors"]["accent"],
                ["Size"] = UDim2.new(0, 10, 0, 10),
                ["Data"] = checkmark_image_data,
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Parent"] = keybind_inside,
                ["Position"] = UDim2.new(0, 3, 0, 3),
                ["ZIndex"] = 2
            })

            local keybind_text = drawing_proxy["new"]("Text", {
                ["Color"] = menu["colors"]["keybind_text"],
                ["Text"] = element["name"],
                ["Size"] = 12,
                ["Font"] = 1,
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Parent"] = keybind_inside,
                ["Position"] = UDim2.new(0, 23, 0, offset),
                ["ZIndex"] = 2
            })

            local x_size = keybind_text["TextBounds"]["X"] + 31

            keybind_frame["Size"] = UDim2.new(0, x_size, 0, 18)
            keybind_inside["Size"] = UDim2.new(0, x_size-2, 0, 16)

            local shadow_size = floor(x_size/11)
            keybind_shadow["Size"] = udim2_new(1, shadow_size - 1, 1, 4)
            keybind_shadow["Position"] = udim2_new(0, -shadow_size/2, 0, -2)

            list_drawings[keybind] = {
                ["frame"] = keybind_frame,
                ["inside"] = keybind_inside,
                ["text"] = keybind_text,
                ["value"] = value_image,
                ["shadow"] = keybind_shadow
            }

            if keybind["value"] then
                menu["show_bind"](keybind)
            end
        end
    end)

    create_connection(on_keybind_updated, function(keybind, element)
        local type = keybind["type"]

        if type == 2 then
            local drawings = list_drawings[keybind]
            local value_text = drawings["value"]
            local value = keybind["value"]

            if value == element["slider_min"] then
                value_text["Text"] = element["slider_min_text"] or element["slider_prefix"]..value..element["slider_suffix"]
            else
                value_text["Text"] = (value == element["slider_max"] and element["slider_max_text"]) or element["slider_prefix"]..value..element["slider_suffix"]
            end

            local text_bounds = value_text["TextBounds"]["X"]
            local x_size = text_bounds + drawings["text"]["TextBounds"]["X"] + 18

            drawings["text"]["Position"] = udim2_new(0, text_bounds + 13, 0, 2)
            drawings["frame"]["Size"] = udim2_new(0, x_size, 0, 18)
            drawings["inside"]["Size"] = udim2_new(0, x_size-2, 0, 16)
        end
    end)

    create_connection(on_keybind_change, function(keybind, element, activated)
        if menu["keybinds_visible"] then
            if activated then
                menu["show_bind"](keybind)
            else
                menu["hide_bind"](keybind)
            end
        end
    end)

    create_connection(on_keybind_deleted, function(keybind, element, force)
        if menu["keybinds_visible"] or force then
            menu["hide_bind"](keybind)

            delay(0.15, function()
                local data = list_drawings[keybind]

                if data then
                    for _, drawing in data do
                        drawing:Destroy()
                        data[_] = nil
                    end
                    list_drawings[keybind] = nil
                end
            end)
        else
            local data = list_drawings[keybind]

            if data then
                for _, drawing in data do
                    drawing:Destroy()
                    data[_] = nil
                end
                list_drawings[keybind] = nil
            end
        end
    end)

    -- > ( elements )

    local element = {}
    element["__index"] = element

    local section = {}
    section["__index"] = section

    local item = {}
    item["__index"] = item

    -- > ( inputs )

    local moving = nil

    local right_click_connections = {}
    local scroll_connections = {}
    local hover_connections = {}
    local click_connections = {}
    local hovering_objects = {}
    local active_typing = nil

    local type_line = drawing_proxy["new"]("Square", {
        ["Position"] = udim2_new(0, 0, 0, 0),
        ["Size"] = udim2_new(0, 1, 0, 12),
        ["Filled"] = true,
        ["Transparency"] = 0,
        ["Color"] = menu["colors"]["inactive_text"],
        ["Visible"] = true,
        ["ZIndex"] = 999
    })

    local type_function = LPH_NO_VIRTUALIZE(function()
        local position = active_typing["real_position"]
        type_line["Transparency"] = 0.5 + 0.5 * math["sin"](clock() * math["pi"] * 2.5)
        type_line["Position"] = udim2_new(0, position["X"] + active_typing["TextBounds"]["X"] + 3, 0, position["Y"] + 1)
    end)

    local create_click_connection = function(new_handle, object, callback)
        local handle = click_connections[new_handle]

        if not handle then
            click_connections[new_handle] = {}
            handle = click_connections[new_handle]
        end

        local new_handle = handle[object]
        if not new_handle then
            handle[object] = {
                callback
            }
        else
            new_handle[#new_handle + 1] = callback
        end
    end

    local create_scroll_connection = function(new_handle, object, callback)
        local handle = scroll_connections[new_handle]

        if not handle then
            scroll_connections[new_handle] = {}
            handle = scroll_connections[new_handle]
        end

        local new_handle = handle[object]
        if not new_handle then
            handle[object] = {
                callback
            }
        else
            new_handle[#new_handle + 1] = callback
        end
    end

    local create_right_click_connection = function(new_handle, object, callback)
        local handle = right_click_connections[new_handle]

        if not handle then
            right_click_connections[new_handle] = {}
            handle = right_click_connections[new_handle]
        end

        local new_handle = handle[object]
        if not new_handle then
            handle[object] = {
                callback
            }
        else
            new_handle[#new_handle + 1] = callback
        end
    end

    create_hover_connection = function(new_handle, object, hover_callback, leave_callback)
        local handle = hover_connections[new_handle]

        if not handle then
            hover_connections[new_handle] = {}
            handle = hover_connections[new_handle]
        end

        local new_handle = handle[object]
        if not new_handle then
            handle[object] = {
                {
                    hover_callback,
                    leave_callback
                }
            }
        else
            new_handle[#new_handle + 1] = {
                hover_callback,
                leave_callback
            }
        end
    end

    local open_settings = function(settings)
        local border = settings["border"]
        for _, element in settings["elements"] do
            for _, drawing in element["drawings"] do
                tween(drawing, _ == "slider_fill" and half_transparency or _ == "slider_line" and half_transparency or _ == "checkmark" and (flags[element["toggle_flag"]] and half_transparency or hide_transparency) or _ == "colorpicker_transparency" and {Transparency = -flags[element["transparency_flag"]]+1} or show_transparency, exponential, out, 0.18)
            end
        end

        local position = border["real_position"]
        local x_position = position["X"] + 30
        local screen_size = camera["ViewportSize"]
        local x_size = screen_size["X"]
        local y_size = screen_size["Y"]

        local x_overlap = (x_position + border["real_size"]["X"]) - x_size
        local y_overlap = (position["Y"] + border["real_size"]["Y"]) - y_size

        if x_overlap > 0 then
            x_position-=(x_overlap + 5)
        elseif x_overlap < -x_size then
            x_position+=(-x_overlap + 5)
        else
            x_overlap = 0
        end

        if y_overlap > 0 then
            position-=vector2_new(0, y_overlap + 5)
        elseif y_overlap < -y_size then
            position+=vector2_new(0, y_overlap - 5)
        else
            y_overlap = 0
        end

        tween(settings["inside"], show_transparency, circular, out, 0.15)
        tween(border, {tween_position = udim2_new(1, 5 - x_overlap, 0, -y_overlap), Transparency = 1}, circular, out, 0.15)
        border["Visible"] = true
        actives["settings"] = settings
    end

    local close_settings = function(settings)
        local border = settings["border"]
        for _, element in settings["elements"] do
            for _, drawing in element["drawings"] do
                tween(drawing, hide_transparency, circular, out, 0.15)
            end
        end
        tween(settings["inside"], hide_transparency, circular, out, 0.15)
        tween(border, {tween_position = udim2_new(1, 5, 0, -5), Transparency = 0}, circular, out, 0.15)
        actives["settings"] = nil
        delay(0.15, function()
            if actives["settings"] ~= settings then
                border["Visible"] = false
            end
        end)

        if menu["saved"] then
            menu["saved"] = false
            writefile("juju recode/data.dat", http_service:JSONEncode({
                ["notifications"] = do_notifications,
                ["favorites"] = menu["favorites"],
                ["theme"] = menu["theme"],
                ["hide_on_load"] = menu["hide_on_load"],
                ["autoload"] = menu["autoload"]
            }))
        end
    end

    local stop_typing = function()
        for i = 1, #heartbeat do
            if heartbeat[i] == type_function then
                remove(heartbeat, i)
                break
            end
        end

        if active_typing then
            active_typing["Text"] = old_text
            active_typing = false
            type_line["Visible"] = false
        end

        context_action_service:UnbindAction(context_action_typing)
    end

    local stop_search = function()
        local children = search_out["children"]
        click_connections[search_out] = nil
        hover_connections[search_out] = nil

        for _, child in children do
            children[_] = nil
            child:Destroy()
        end

        search_out_border["Visible"] = false

        searching = nil

        tween(search_image, {tween_position = udim2_new(0, 27, 1, -27), Color = menu["colors"]["image"]}, circular, out, 0.15)
        tween(search_border, {Color = menu["colors"]["border"], ["Transparency"] = 0}, circular, out, 0.15)
        tween(search_inside, hide_transparency, circular, out, 0.15)
        tween(search_text, hide_transparency, circular, out, 0.15)


        delay(0.15, function()
            if not searching then
                search_border["Visible"] = false
            end
        end)
    end

    local start_typing = LPH_JIT_MAX(function(label, limit, callback, numbers, allow_enter, allow_all, only_on_enter) -- > LOL dont ask im too lazy to rewrite this >->
        if active_typing then
            stop_typing()
            return
        end

        type_line["Size"] = udim2_new(0, 1, 0, label["Size"] - 1)
        active_typing = label
        type_line["Visible"] = true
        heartbeat[#heartbeat + 1] = type_function

        local current_input = ""

        old_text = label["Text"]

        local items = Enum["KeyCode"]:GetEnumItems()

        local backspace = Enum["KeyCode"]["Backspace"]
        local enter = Enum["KeyCode"]["Return"]
        local shift = Enum["KeyCode"]["LeftShift"]

        context_action_service:BindAction(context_action_typing, function(_, state, input)
            if state == Enum["UserInputState"]["Begin"] then
                local keycode = input["KeyCode"]
                local is_enter = keycode == enter
                local last_input = current_input

                if is_enter and allow_enter then
                    stop_typing()

                    if searching then
                        stop_search()
                    end

                    if actives["panel"] then
                        stop_panel_search()
                    end

                    callback(current_input, input)

                    return
                elseif keycode == backspace and #current_input > 0 then
                    current_input = current_input:sub(1, #current_input-1)
                elseif user_input_service:IsKeyDown(Enum["KeyCode"]["LeftControl"]) and user_input_service:IsKeyDown(Enum["KeyCode"]["V"]) then
                    local textbox = create_instance("TextBox", {
                        ["Name"] = "\0",
                        ["Parent"] = hui
                    })
                    textbox:CaptureFocus()
                    keypress(0xA2)
                    keypress(0x56)
                    wait()
                    keyrelease(0xA2)
                    keyrelease(0x56)
                    local text = textbox["Text"]
                    if text and #text > 0 then
                        current_input ..= text
                    end
                    textbox["Parent"] = nil
                    textbox:Destroy()
                elseif keycode then
                    if label["TextBounds"]["X"] > limit then
                        return
                    end

                    local letter = user_input_service:GetStringForKeyCode(keycode):lower()
                    local byte = string["byte"](letter)

                    if (allow_all and byte) or ((byte) and (not numbers and (byte == 32 or byte == 44 or byte == 46 or byte >= 97 and byte <= 122) or numbers and (byte == 44 or byte == 46 or byte >= 48 and byte <= 57))) then
                        current_input ..= (user_input_service:IsKeyDown(shift) and string["upper"] or string["lower"])(letter)
                    end

                    callback(current_input)
                end

                label["Text"] = current_input

                if is_enter and only_on_enter or not only_on_enter then
                    local ignore = callback(current_input, input)

                    if ignore then
                        current_input = last_input
                    end
                end
            end
        end, false, unpack(items))

        label["Text"] = ""
    end)

    local do_search = LPH_JIT_MAX(function(text)
        local children = search_out["children"]
        hover_connections[search_out] = nil
        click_connections[search_out] = nil

        for _, child in children do
            children[_] = nil
            child:Destroy()
        end

        search_out_border["Visible"] = false

        if #text < 2 then
            return
        end

        local results = {}

        text = text:lower()

        for name, group in menu["groups"] do
            for name, tab in group["tabs"] do
                for _, section in tab["sections"] do
                    local elements = section["elements"]
                    for i = 1, #elements do
                        local element = elements[i]
                        local test = (element["name"] or "f"):lower():gsub(" ", "")
                        if test:find(text) then
                            results[#results + 1] = {
                                group,
                                tab,
                                section,
                                element
                            }
                        end
                    end
                end
            end
        end

        for element_settings, settings in menu["settings"] do
            local elements = settings["elements"]
            for i = 1, #elements do
                local element = elements[i]
                if (element["name"]:lower()):find(text) then
                    results[#results + 1] = {
                        element_settings,
                        element,
                        settings,
                    }
                end
            end
        end

        local max_textbounds = 0

        if #results > 0 then
            search_out_border["Visible"] = true

            local size = 8 + #results*12

            for i = 1, #results do
                local result = results[i]
                local path = nil
                local tab = nil
                local settings = nil
                local settings_element = nil
                local element = nil
                if #result == 3 then
                    path = result[1]["name"].." > "..result[2]["name"]
                    settings = result[3]
                    settings_element = result[1]
                    element = result[2]
                else
                    tab = result[2]
                    path = result[3]["name"].." > "..result[4]["name"]
                    element = result[4]
                end

                local position = udim2_new(0, 3, 0, 3 + (i-1)*12)
                local text_click = drawing_proxy["new"]("Square", {
                    ["Size"] = udim2_new(1, -6, 0, 12),
                    ["Position"] = position,
                    ["Visible"] = true,
                    ["Filled"] = true,
                    ["Transparency"] = 0,
                    ["Parent"] = search_out
                })
                local text = drawing_proxy["new"]("Text", {
                    ["Color"] = menu["colors"]["inactive_text"],
                    ["Text"] = path,
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["Parent"] = search_out,
                    ["Position"] = udim2_new(0, 3, 0, 3 + (i-1)*12),
                    ["ZIndex"] = 1001
                })

                local textbounds = text["TextBounds"]
                if textbounds["X"] > max_textbounds then
                    max_textbounds = textbounds["X"]
                end

                create_hover_connection(search_out, text_click, function()
                    tween(text, {["Color"] = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end, function()
                    tween(text, {["Color"] = menu["colors"]["inactive_text"]}, circular, out, 0.17)
                end)

                create_click_connection(search_out, text_click, function()
                    stop_search()
                    stop_typing()
                    if not tab then
                        for name, group in menu["groups"] do
                            for name, potential_tab in group["tabs"] do
                                for _, section in potential_tab["sections"] do
                                    local elements = section["elements"]
                                    for i = 1, #elements do
                                        if elements[i] == settings_element then
                                            tab = potential_tab
                                            break
                                        end
                                    end
                                end
                            end
                        end
                    end
                    if tab and actives["tab"] ~= tab then
                        set_active_tab(tab)
                    end
                    if settings then
                        if tab then
                            wait(0.075)
                        end
                        open_settings(settings)
                    end
                    local drawings = element["drawings"]
                    local label = drawings["button_text"] or drawings["text"]
                    tween(label, hide_transparency, circular, out, 0.33)
                    delay(0.33, function()
                        if menu_open then
                            tween(label, show_transparency, circular, out, 0.33)
                            delay(0.33, function()
                                if menu_open then
                                    tween(label, hide_transparency, circular, out, 0.33)
                                    delay(0.33, function()
                                        if menu_open then
                                            tween(label, show_transparency, circular, out, 0.33)
                                        end
                                    end)
                                end
                            end)
                        end
                    end)
                end)
            end

            search_out_border["Size"] = udim2_new(0, max_textbounds + 8, 0, size)
            search_out_border["Position"] = udim2_new(0, 11, 1, -42 - size)
            search_out["Size"] = udim2_new(1, -2, 1, -2)

            local children = search_out["children"]
            for i = 1, #children do
                local child = children[i]
                if child["Size"] ~= 12 then
                    child["Size"] = udim2_new(1, -6, 0, 12)
                end
            end
        end
    end)

    local start_search = function()
        tween(search_image, {tween_position = udim2_new(0, 14, 1, -27), Color = menu["colors"]["highlighted"]}, circular, out, 0.15)
        tween(search_border, {["Transparency"] = 1, ["Color"] = menu["colors"]["highlighted"]}, circular, out, 0.15)
        tween(search_inside, show_transparency, circular, out, 0.15)
        tween(search_text, show_transparency, circular, out, 0.15)
        search_border["Visible"] = true

        searching = true

        start_typing(search_text, 51, do_search, false, true, true, false)
    end

    local stop_binding = function(key)
        context_action_service:UnbindCoreAction(context_action_typing_core)
        tween(actives["binding"]["drawings"]["keybind_text"], {["Color"] = menu["colors"]["dark_text"]}, circular, out, 0.17)
        actives["binding"] = nil
    end

    local start_binding = function(element)
        actives["binding"] = element

        local drawings = element["drawings"]
        local keybind_border = drawings["keybind_border"]
        local keybind_inside = drawings["keybind_inside"]
        local keybind_text = drawings["keybind_text"]

        keybind_text["Text"] = "..."

        local size = keybind_text["TextBounds"]["X"] + 8

        keybind_border["Size"] = udim2_new(0, size, 0, 12)
        keybind_border["Position"] = udim2_new(1, -size, 0, 0)
        keybind_inside["Size"] = udim2_new(0, size-2, 0, 10)
        keybind_text["Position"] = udim2_new(0, (size-2)/2, 0, -2)

        local escape = Enum["KeyCode"]["Escape"]
        local tilde = Enum["KeyCode"]["Tilde"]
        local items = Enum["KeyCode"]:GetEnumItems()

        for _, a in Enum["UserInputType"]:GetEnumItems() do
            items[#items + 1] = a
        end

        context_action_service:BindCoreAction(context_action_typing_core, function(_, state, input)
            local key = shortened_characters[input["UserInputType"]] and input["UserInputType"] or input["KeyCode"]

            if state == Enum["UserInputState"]["Begin"] and key ~= Enum["KeyCode"]["Unknown"] then
                if key == escape or key == tilde then
                    key = nil
                end

                element:set_key(key)

                stop_binding()
            end
        end, false, unpack(items))

        tween(keybind_text, {Color = menu["colors"]["accent"]}, circular, out, 0.17)
    end

    local dropdown_border = drawing_proxy["new"]("Image", {
        ["Position"] = udim2_new(0, 0, 0, 14),
        ["Size"] = udim2_new(0, 0, 0, 15),
        ["Color"] = menu["colors"]["border"],
        ["Transparency"] = 0,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["ZIndex"] = 1003,
        ["Visible"] = false,
    })

    local dropdown_inside = drawing_proxy["new"]("Image", {
        ["Parent"] = dropdown_border,
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(1, -2, 1, -2),
        ["Color"] = menu["colors"]["background"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 0,
        ["ZIndex"] = 1004,
        ["Visible"] = true,
    })

    local close_dropdown = function()
        local position = dropdown_border["real_position"]
        tween(dropdown_border, {tween_position = udim2_new(0, position["X"], 0, position["Y"] - 5), Transparency = 0}, circular, out, 0.15)
        tween(dropdown_inside, hide_transparency, circular, out, 0.15)
        local connections = click_connections[dropdown_border]

        if connections then
            for object, callback in connections do
                click_connections[object] = nil
            end
            click_connections[dropdown_border] = nil
        end

        local connections = hover_connections[dropdown_border]

        if connections then
            for object, callback in hover_connections[dropdown_border] do
                hover_connections[object] = nil
            end
        end

        local children = dropdown_inside["children"]
        for _, child in children do
            local children = child["children"]
            for i = 1, #children do
                tween(children[i], hide_transparency, circular, out, 0.15)
            end
        end

        local children = dropdown_inside["children"]
        for _, child in children do
            children[_] = nil

            delay(0.14, function()
                child:Destroy()
                local children = child["children"]
                for i = 1, #children do
                    children[i]:Destroy()
                end
            end)
        end

        hover_connections[dropdown_border] = nil
        actives["dropdown"] = nil
    end

    local open_dropdown = function(element)
        actives["dropdown"] = element

        local border = element["drawings"]["dropdown_border"]
        local position = border["real_position"]
        local size = border["real_size"]
        dropdown_border["Position"] = udim2_new(0, position["X"], 0, position["Y"] + 15)
        dropdown_border["Visible"] = true
        tween(dropdown_border, {tween_position = udim2_new(0, position["X"], 0, position["Y"] + 18), Transparency = 1}, circular, out, 0.15)
        tween(dropdown_inside, show_transparency, circular, out, 0.15)

        local options = element["options"]
        dropdown_border["Size"] = udim2_new(0, size["X"], 0, (8 + #options*12))
        dropdown_inside["Size"] = udim2_new(0, size["X"] - 2, 0, (8 + #options*12) - 2)

        local selected_options = flags[element["dropdown_flag"]]

        local multi = element["multi"]

        for i = 1, #options do
            local option = options[i]
            local selected = nil
            if selected_options then
                for i = 1, #selected_options do
                    if selected_options[i] == option then
                        selected = true
                        break
                    end
                end
            end

            local option_click = drawing_proxy["new"]("Square", {
                ["Parent"] = dropdown_inside,
                ["Size"] = udim2_new(1, -6, 0, 12),
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Filled"] = true,
                ["Position"] = udim2_new(0, 3, 0, 3 + (i-1)*12)
            })
            local option_checkmark = drawing_proxy["new"]("Image", {
                ["Parent"] = option_click,
                ["Position"] = udim2_new(1, -8, 0, 2),
                ["Size"] = udim2_new(0, 8, 0, 8),
                ["Data"] = checkmark_image_data,
                ["Transparency"] = 0,
                ["ZIndex"] = 1005,
                ["Color"] = menu["colors"]["highlighted"],
                ["Visible"] = true,
            })
            local option_text = drawing_proxy["new"]("Text", {
                ["Color"] = menu["colors"]["inactive_text"],
                ["Text"] = option,
                ["Size"] = 12,
                ["Font"] = 1,
                ["Transparency"] = 0,
                ["Visible"] = true,
                ["Parent"] = option_click,
                ["ZIndex"] = 1005,
                ["Position"] = udim2_new(0, 0, 0, 0),
            })

            tween(option_text, show_transparency, circular, out, 0.15)

            create_hover_connection(dropdown_border, option_click, function()
                if not selected then
                    tween(option_text, {["Color"] = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end
            end, function()
                if not selected then
                    tween(option_text, {Color = menu["colors"]["inactive_text"]}, circular, out, 0.17)
                end
            end)

            create_click_connection(dropdown_border, option_click, function()
                local result = element:update_dropdown_value(option)
                if result then
                    selected = true
                    tween(option_checkmark, show_transparency, circular, out, 0.15)
                    if not multi then
                        close_dropdown(actives["dropdown"])
                    end
                elseif result == false then
                    selected = false
                    tween(option_checkmark, hide_transparency, circular, out, 0.15)
                    if not multi then
                        close_dropdown(actives["dropdown"])
                    end
                end
            end)

            if selected then
                option_text["Color"] = menu["colors"]["highlighted"]
                tween(option_checkmark, show_transparency, circular, out, 0.15)
            end
        end
    end

    local context_border = drawing_proxy["new"]("Image", {
        ["Position"] = udim2_new(0, 0, 0, 14),
        ["Size"] = udim2_new(0, 100, 0, 15),
        ["Color"] = menu["colors"]["border"],
        ["Transparency"] = 0,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["ZIndex"] = 998,
        ["Visible"] = false,
    })

    local context_inside = drawing_proxy["new"]("Image", {
        ["Parent"] = context_border,
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(1, -2, 1, -2),
        ["Color"] = menu["colors"]["background"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 0,
        ["ZIndex"] = 999,
        ["Visible"] = true,
    })

    local keybind_border = drawing_proxy["new"]("Image", {
        ["Position"] = udim2_new(0, 0, 0, 14),
        ["Size"] = udim2_new(0, 170, 0, 20),
        ["Color"] = menu["colors"]["border"],
        ["Transparency"] = 0,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["ZIndex"] = 998,
        ["Visible"] = false,
    })

    local keybind_inside = drawing_proxy["new"]("Image", {
        ["Parent"] = keybind_border,
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(1, -2, 1, -2),
        ["Color"] = menu["colors"]["background"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 0,
        ["ZIndex"] = 999,
        ["Visible"] = true,
    })

    local keybind_holder = drawing_proxy["new"]("Square", {
        ["Parent"] = keybind_inside,
        ["Position"] = udim2_new(0, 10, 0, 10),
        ["Size"] = udim2_new(1, -20, 1, -20),
        ["Transparency"] = 0,
        ["Filled"] = true,
        ["Visible"] = true,
    })

    local keybind_section = nil
    local copied_transparency = nil
    local copied_color = nil

    local close_keybind = function()
        local position = keybind_border["real_position"]
        tween(keybind_border, {tween_position = udim2_new(0, position["X"], 0, position["Y"] - 5), Transparency = 0}, circular, out, 0.15)
        tween(keybind_inside, hide_transparency, circular, out, 0.15)

        local keybind_elements = keybind_section["elements"]
        for i = #keybind_elements, 1, -1 do
            keybind_elements[i]:remove()
        end

        click_connections[keybind_inside] = nil
        hover_connections[keybind_inside] = nil

        actives["keybind"] = nil

        delay(0.15, function()
            if not actives["keybind"] then
                keybind_border["Visible"] = false
            end
        end)
    end

    local star = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAALGAAACxgBiam1EAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAADIGQEA6AMAAMgZAQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAACaOS8o1uPhvAAAALklEQVQYV2NgRAIQDgOUgpBIHAYggNE4AEISogfGxuBA2FBlEBrCASsAqWFgBAAZ8wBLe9n4/wAAAABJRU5ErkJggg==")
    local autoload = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAN1gAADdYBkG95nAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS40Et+mgwAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAACIXwEA6AMAAIhfAQDoAwAAUGFpbnQuTkVUIDUuMS40AAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAItCLPyg+gOlAAAAJklEQVQYV2NgBAIQAcQMQABiAEkoAyQJZ4BkIQwQBCkA80G6GBkBBlgAKnvLiKoAAAAASUVORK5CYII=")
    local context_buttons = {
        [1] = {
            "create keybind",
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFE0AABRNAZTKjS8AAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAvQMCAOgDAAC9AwIA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACZvWRFEAE3KwAAACtJREFUKFNjQAb/oQDKBQMmKI0TEFTAiG4kOiBoAgoAuxAIoFwwoNSRDAwA1K8T+Ha/C0cAAAAASUVORK5CYII="),
            LPH_JIT_MAX(function()
                local new_keybind_data = keybind_data[actives["context"]]
                local do_fire = false

                if not new_keybind_data then
                    new_keybind_data = setmetatable({
                        ["key"] = nil,
                        ["method"] = 1,
                        ["value"] = nil,
                        ["activated"] = false,
                        ["original_value"] = nil,
                        ["type"] = nil,
                        ["element"] = actives["context"]
                    }, keybind)

                    do_fire = true
                end

                keybind_data[actives["context"]] = new_keybind_data

                local position = context_border["real_position"]
                local y_position = position["Y"] + context_border["real_size"]["Y"]
                keybind_border["Position"] = udim2_new(0, position["X"], 0, y_position)
                tween(keybind_border, {tween_position = udim2_new(0, position["X"], 0, y_position + 5), Transparency = 1}, circular, out, 0.15)
                tween(keybind_inside, show_transparency, circular, out, 0.15)
                keybind_border["Visible"] = true

                actives["keybind"] = actives["context"]

                local new_keybind = keybind_section:create_element({
                    ["name"] = "key"
                }, {
                    ["keybind"] = {
                        ["flag"] = tostring({}):sub(math_random(8, 12)),
                    }
                }, true)

                new_keybind:set_key(new_keybind_data["key"])

                local activate_when = keybind_section:create_element({
                    ["name"] = "activate when"
                }, {
                    ["dropdown"] = {
                        ["flag"] = tostring({}):sub(math_random(8, 12)),
                        ["requires_one"] = true,
                        ["options"] = {"toggled", "not held", "held"},
                        ["default"] = {"toggled"}
                    }
                }, true)

                local method = new_keybind_data["method"]

                activate_when:set_dropdown(method == 1 and {"toggled"} or method == 2 and {"not held"} or {"held"})

                create_connection(activate_when["on_dropdown_change"], function(value)
                    local value = value[1]
                    new_keybind_data["method"] = value == "toggled" and 1 or value == "not held" and 2 or 3
                    new_keybind_data:set_activated(value == "not held" and true or false)
                end)

                local active = actives["keybind"]

                if active["options"] then
                    local was_nil = new_keybind_data["type"] == nil
                    new_keybind_data["type"] = 1

                    if was_nil then
                        new_keybind_data["value"] = flags[active["dropdown_flag"]]
                        new_keybind_data["original_value"] = new_keybind_data["value"]
                    end

                    local new_dropdown = keybind_section:create_element({
                        ["name"] = "new value"
                    }, {
                        ["dropdown"] = {
                            ["default"] =  new_keybind_data["value"],
                            ["flag"] = tostring({}):sub(math_random(8, 12)),
                            ["options"] = active["options"],
                            ["requires_one"] = active["requires_one"],
                            ["multi"] = active["multi"]
                        }
                    }, true)

                    create_connection(new_dropdown["on_dropdown_change"], function(value)
                        new_keybind_data["value"] = value

                        if new_keybind_data["activated"] then
                            actives["context"]:set_dropdown(value, true)
                        end
                    end)
                elseif active["slider_flag"] then
                    local was_nil = new_keybind_data["type"] == nil

                    new_keybind_data["type"] = 2

                    if was_nil then
                        new_keybind_data["value"] = flags[active["slider_flag"]]
                        new_keybind_data["original_value"] = new_keybind_data["value"]
                    end

                    local new_slider = keybind_section:create_element({
                        name = "new value"
                    }, {
                        ["slider"] = {
                            ["default"] = new_keybind_data["value"],
                            ["flag"] = tostring({}):sub(math_random(8, 12)),
                            ["min"] = active["slider_min"],
                            ["max"] = active["slider_max"],
                            ["min_text"] = active["slider_min_text"],
                            ["prefix"] = active["slider_prefix"],
                            ["suffix"] = active["slider_suffix"],
                            ["max_text"] = active["slider_max_text"],
                            ["decimals"] = active["slider_decimals"],
                        }
                    }, true)

                    create_connection(new_slider["on_slider_change"], function(value)
                        new_keybind_data["value"] = value
                        on_keybind_updated:Fire(new_keybind_data, actives["context"])

                        if new_keybind_data["activated"] then
                            actives["context"]:set_slider(value, true)
                        end
                    end)
                elseif active["toggle_flag"] then
                    new_keybind_data["type"] = 3

                    new_keybind_data["value"] = flags[active["toggle_flag"]]
                    new_keybind_data["original_value"] = flags[active["toggle_flag"]]
                else
                    activate_when:set_visible(false)
                    new_keybind_data["type"] = 4
                    new_keybind_data["method"] = 1
                end

                create_connection(new_keybind["on_key_change"], function(key)
                    new_keybind_data["key"] = key
                end)

                if do_fire then
                    on_keybind_created:Fire(new_keybind_data, actives["context"])
                end
            end)
        },
        [2] = {
            "delete keybind",
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAADHcBAOgDAAAMdwEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADu6i0YxswAAgAAAChJREFUKFNjQAb/oQDKBQNGEIEuCAOMQABl4gYETWCCsnECmitgYAAAtW8QA/NoRH8AAAAASUVORK5CYII="),
            function()
                local data = keybind_data[actives["context"]]

                if data then
                    if data["type"] ~= 4 then
                        data:set_activated(false)
                    end
                    keybind_data[actives["context"]] = nil
                    on_keybind_deleted:Fire(data, actives["context"])
                end

                close_context()
            end
        },
        [3] = {
            "paste color",
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAN1gAADdYBkG95nAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAACIXwEA6AMAAIhfAQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAALVxYeXXxjBrAAAALklEQVQYV2NgBAMGBgZGCBPEAGIIC04ASRgBkgeqBdPI4ig6wAIQFlgtmMXICAAM5AA7FWCogwAAAABJRU5ErkJggg=="),
            function()
                if copied_color and copied_transparency then
                    actives["context"]:set_colorpicker(copied_color)
                    actives["context"]:set_colorpicker_transparency(copied_transparency)
                end
                close_context()
            end
        },
        [4] = {
            "copy color",
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAASRkBAOgDAABJGQEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAAAv0m/2Gfr+yQAAAEFJREFUKFNjZEAC/4EAykQBjCAAZYMBLoUgwAQi8CmAASZiFIEA2ERiAPUVMiK7ET0UkAGKQmwAppkJnykIwMAAAFFQGAl6/FkNAAAAAElFTkSuQmCC"),
            function()
                copied_color = flags[actives["context"]["color_flag"]]
                copied_transparency = flags[actives["context"]["transparency_flag"]]
                close_context()
            end
        },
        [5] = {
            "favorite",
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAALGAAACxgBiam1EAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAADIGQEA6AMAAMgZAQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAACaOS8o1uPhvAAAAH0lEQVQYV2NghAIQgwFMwBlwAGWCpMA0MgOkkpGBEQAF1gAlfZ5svQAAAABJRU5ErkJggg=="),
            function()
                local active = actives["context"]
                local favorites = menu["favorites"]
                local flag = active["favorite_flag"]

                if not favorites[flag] then
                    favorites[flag] = true
                    menu["saved"] = true
                    active["favorited"] = true
                    active["parent"]:add_icon(active["drawings"]["text"]["Text"], star)

                    writefile("juju recode/data.dat", http_service:JSONEncode({
                        ["notifications"] = do_notifications,
                        ["favorites"] = menu["favorites"],
                        ["theme"] = menu["theme"],
                        ["autoload"] = menu["autoload"]
                    }))
                end

                close_context()
            end
        },
        [6] = {
            "unfavorite",
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAALGAAACxgBiam1EAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAADIGQEA6AMAAMgZAQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAACaOS8o1uPhvAAAAH0lEQVQYV2NghAIQgwFMwBlwAGWCpMA0MgOkkpGBEQAF1gAlfZ5svQAAAABJRU5ErkJggg=="),
            function()
                local active = actives["context"]

                local favorites = menu["favorites"]
                local flag = active["favorite_flag"]
                if favorites[flag] then
                    favorites[flag] = nil
                    active["favorited"] = false
                    active["parent"]:remove_icon(active["drawings"]["text"]["Text"], star)
                    menu["saved"] = true

                    writefile("juju recode/data.dat", http_service:JSONEncode({
                        ["notifications"] = do_notifications,
                        ["favorites"] = menu["favorites"],
                        ["theme"] = menu["theme"],
                        ["autoload"] = menu["autoload"]
                    }))
                end

                close_context()
            end
        },
        [7] = {
            "paste clipboard",
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS40Et+mgwAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAAAMdwEA6AMAAAx3AQDoAwAAUGFpbnQuTkVUIDUuMS40AAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAANDZYAGx8DPMAAAAHklEQVQYV2NgBAEGKAVhQ3hAAsyCEBBxEKAXh5ERABXWAD2lxbDCAAAAAElFTkSuQmCC"),
            function()
                local textbox = create_instance("TextBox", {
                    ["Parent"] = hui
                })
                textbox:CaptureFocus()
                keypress(0xA2)
                keypress(0x56)
                wait()
                wait()
                keyrelease(0xA2)
                keyrelease(0x56)
                local text = textbox["Text"]
                textbox:Destroy()

                local r, g, b = 255, 255, 255
                local a = 0

                local trimmed_text = (text:match("^%s*(.-)%s*$") or ""):lower():gsub("%s+", "")

                local parsed = false

                local hex_digits = trimmed_text:match("^#?([0-9a-f]+)$")
                if hex_digits then
                    local len = #hex_digits
                    if len == 6 then
                        local r_val = tonumber(hex_digits:sub(1, 2), 16)
                        local g_val = tonumber(hex_digits:sub(3, 4), 16)
                        local b_val = tonumber(hex_digits:sub(5, 6), 16)
                        if r_val and g_val and b_val then
                            r, g, b = r_val, g_val, b_val
                            parsed = true
                        end
                    elseif len == 8 then
                        local r_val = tonumber(hex_digits:sub(1, 2), 16)
                        local g_val = tonumber(hex_digits:sub(3, 4), 16)
                        local b_val = tonumber(hex_digits:sub(5, 6), 16)
                        local a_val = tonumber(hex_digits:sub(7, 8), 16)
                        if r_val and g_val and b_val and a_val then
                            r, g, b = r_val, g_val, b_val
                            a = 1 - (math["min"](math["max"](a_val, 0), 255) / 255)
                            parsed = true
                        end
                    end
                end

                if not parsed then
                    local r_str, g_str, b_str, a_str = trimmed_text:match("^(%d+),(%d+),(%d+),?(%d*)$")
                    if r_str and g_str and b_str then
                        local r_val = tonumber(r_str)
                        local g_val = tonumber(g_str)
                        local b_val = tonumber(b_str)
                        if r_val and g_val and b_val then
                            r, g, b = r_val, g_val, b_val
                            if a_str and #a_str > 0 then
                                local a_val = tonumber(a_str)
                                if a_val then
                                    a = 1 - (math["min"](math["max"](a_val, 0), 255) / 255)
                                end
                            end
                        end
                    end
                end

                if r and g and b then
                    actives["context"]:set_colorpicker(color3_fromrgb(r, g, b))
                    actives["context"]:set_colorpicker_transparency(a or 0)
                    close_context()
                end
            end
        },
        [8] = {
            "autoload config",
            autoload,
            function()
                local active = actives["context"]
                local name = active["name"]

                if menu["autoload"] ~= name then
                    menu["autoload"] = name
                    menu["saved"] = true
                    local parent = active["parent"]
                    local elements = parent["elements"]

                    for _, element in next, elements do
                        parent:remove_icon(element["name"], autoload)                        
                    end

                    active["parent"]:add_icon(active["drawings"]["text"]["Text"], autoload)

                    writefile("juju recode/data.dat", http_service:JSONEncode({
                        ["notifications"] = do_notifications,
                        ["favorites"] = menu["favorites"],
                        ["theme"] = menu["theme"],
                        ["autoload"] = menu["autoload"]
                    }))
                end

                close_context()
            end
        },
        [9] = {
            "stop autoload",
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAPhwAAD4cBYAYLnAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS40Et+mgwAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAAB+igEA6AMAAH6KAQDoAwAAUGFpbnQuTkVUIDUuMS40AAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAANdbGZi1Ab9fAAAAJElEQVQYV2NgYGAEAiAFZoFJMBtIQbnIDBANVQERBNGMjAwMAAOoABlFkxrMAAAAAElFTkSuQmCC"),
            function()
                local active = actives["context"]
                local active = actives["context"]
                local name = active["name"]

                if menu["autoload"] == name then
                    menu["autoload"] = nil
                    menu["saved"] = true
                    active["parent"]:remove_icon(active["drawings"]["text"]["Text"], autoload)

                    writefile("juju recode/data.dat", http_service:JSONEncode({
                        ["notifications"] = do_notifications,
                        ["favorites"] = menu["favorites"],
                        ["theme"] = menu["theme"],
                        ["autoload"] = menu["autoload"]
                    }))
                end

                close_context()
            end
        }
    }

    for i = 1, #context_buttons do
        local button = context_buttons[i]

        local button_click = drawing_proxy["new"]("Image", {
            ["Parent"] = context_inside,
            ["Size"] = udim2_new(1, 0, 0, 16),
            ["Transparency"] = 0,
            ["Color"] = menu["colors"]["background"],
            ["Visible"] = true,
            ["ZIndex"] = 999,
            ["Data"] = pixel_image_data,
            ["Rounding"] = 4,
        })

        local button_text = drawing_proxy["new"]("Text", {
            ["Color"] = menu["colors"]["inactive_text"],
            ["Text"] = button[1],
            ["Size"] = 12,
            ["Font"] = 1,
            ["Transparency"] = 0,
            ["Visible"] = true,
            ["Parent"] = button_click,
            ["Center"] = false,
            ["Position"] = udim2_new(0, 18, 0, 1),
            ["ZIndex"] = 1000
        })

        local button_icon = drawing_proxy["new"]("Image", {
            ["Data"] = button[2],
            ["Color"] = menu["colors"]["accent"],
            ["Size"] = udim2_new(0, 8, 0, 8),
            ["Transparency"] = 0,
            ["Visible"] = true,
            ["Parent"] = button_click,
            ["Position"] = udim2_new(0, 5, 0, 4),
            ["ZIndex"] = 1000
        })

        create_hover_connection(context_border, button_click, function()
            local h, s, v = menu["colors"]["background"]:ToHSV()

            tween(button_click, {Color = Color3["fromHSV"](h, s, clamp(v * 1.5, 0.1, 1))}, circular, out, 0.15)
        end, function()
            tween(button_click, {Color = menu["colors"]["background"]}, circular, out, 0.15)
        end)

        create_click_connection(context_border, button_click, button[3])

        context_buttons[i] = {
            ["frame"] = button_click,
            ["text"] = button_text,
            ["icon"] = button_icon
        }
    end

    local open_context = function(buttons, element, position)
        local x_position = position["X"] + 15
        local y_position = 0

        context_border["Visible"] = true
        context_border["Position"] = udim2_new(0, x_position, 0, position["Y"] - 5)
        tween(context_border, {Transparency = 1, tween_position = udim2_new(0, x_position, 0, position["Y"])}, circular, out, 0.15)
        tween(context_inside, show_transparency, circular, out, 0.15)

        for i = 1, #context_buttons do
            context_buttons[i]["frame"]["Visible"] = false
        end

        local textbounds = 0

        for i = 1, #buttons do
            local index = buttons[i]
            local button = context_buttons[index]
            local callback = buttons[i]

            if callback then
                local frame = button["frame"]

                frame["Visible"] = true
                tween(frame, show_transparency, circular, out, 0.15)
                tween(button["text"], show_transparency, circular, out, 0.15)
                tween(button["icon"], half_transparency, circular, out, 0.15)
                frame["Position"] = udim2_new(0, 0, 0, y_position)

                if index == 1 then
                    button["text"]["Text"] = keybind_data[element] and "edit keybind" or "create keybind"
                end

                local button_textbounds = button["text"]["TextBounds"]["X"]
                if button_textbounds > textbounds then
                    textbounds = button_textbounds
                end
            end

            y_position = y_position + 16
        end

        context_border["Size"] = udim2_new(0, textbounds + 25, 0, y_position + 2)
        context_inside["Size"] = udim2_new(0, textbounds + 23, 0, y_position)

        for i = 1, #buttons do
            context_buttons[buttons[i]]["frame"]["Size"] = udim2_new(1, 0, 0, 16)
        end

        actives["context"] = element
    end

    close_context = function()
        local position = context_border["real_position"]

        tween(context_border, {Transparency = 0, tween_position = udim2_new(0, position["X"], 0, position["Y"] - 5)}, circular, out, 0.15)
        tween(context_inside, hide_transparency, circular, out, 0.15)

        for i = 1, #context_buttons do
            local button = context_buttons[i]
            local frame = button["frame"]

            if frame["Visible"] then
                tween(frame, hide_transparency, circular, out, 0.15)
                tween(button["text"], hide_transparency, circular, out, 0.15)
                tween(button["icon"], hide_transparency, circular, out, 0.15)
            end
        end

        delay(0.15, function()
            if actives["context"] == nil then
                context_border["Visible"] = false
            end
        end)

        actives["context"] = nil
    end

    local colorpicker_border = drawing_proxy["new"]("Image", {
        ["Position"] = udim2_new(0, 0, 0, 14),
        ["Size"] = udim2_new(0, 185, 0, 221),
        ["Color"] = menu["colors"]["border"],
        ["Transparency"] = 0,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["ZIndex"] = 998,
        ["Visible"] = false,
    })

    local colorpicker_inside = drawing_proxy["new"]("Image", {
        ["Parent"] = colorpicker_border,
        ["Position"] = udim2_new(0, 1, 0, 1),
        ["Size"] = udim2_new(1, -2, 1, -2),
        ["Color"] = menu["colors"]["background"],
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["Transparency"] = 0,
        ["ZIndex"] = 999,
        ["Visible"] = true,
    })

    local colorpicker_saturation_background = drawing_proxy["new"]("Image", {
        ["Parent"] = colorpicker_inside,
        ["Position"] = udim2_new(0, 10, 0, 10),
        ["Size"] = udim2_new(0, 163, 0, 163),
        ["Color"] = color3_fromrgb(255, 255, 255),
        ["Transparency"] = 1,
        ["Rounding"] = 4,
        ["Data"] = pixel_image_data,
        ["ZIndex"] = 1000,
        ["Visible"] = true,
    })

    local colorpicker_saturation = drawing_proxy["new"]("Image", {
        ["Parent"] = colorpicker_saturation_background,
        ["Position"] = udim2_new(0, 0, 0, 0),
        ["Size"] = udim2_new(0, 163, 0, 163),
        ["Color"] = color3_fromrgb(255, 0, 0),
        ["Transparency"] = 1,
        ["Rounding"] = 4,
        ["Data"] = readfile("juju recode/assets/saturation.png"),
        ["ZIndex"] = 1001,
        ["Visible"] = true,
    })

    local colorpicker_saturation_dragger = drawing_proxy["new"]("Circle", {
        ["Radius"] = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 5 or 6,
        ["Color"] = color3_fromrgb(255, 255, 255),
        ["Position"] = udim2_new(0, 159, 0, 4),
        ["Transparency"] = 0,
        ["Thickness"] = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 2 or 4,
        ["Parent"] = colorpicker_saturation,
        ["Visible"] = true,
        ["ZIndex"] = 1002
    })

    local colorpicker_transparency = drawing_proxy["new"]("Image", {
        ["Parent"] = colorpicker_inside,
        ["Position"] = udim2_new(0, 10, 0, 183),
        ["Size"] = udim2_new(0, 163, 0, 8),
        ["Color"] = color3_fromrgb(255, 255, 255),
        ["Transparency"] = 1,
        ["Rounding"] = 4,
        ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAKAAAAAICAIAAADx4mP5AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAAEVJREFUWEftkTEKACAQw6r/f7TgrTf0EJeSTA10yyr2pUarzmekzuefOp8XdT4jdT69CqIhcDgEDofA4RA4HAKHQ+BopAN55gMK+LqL+AAAAABJRU5ErkJggg=="),
        ["ZIndex"] = 1001,
        ["Visible"] = true,
    })

    local colorpicker_transparency_dragger = drawing_proxy["new"]("Circle", {
        ["Radius"] = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 3 or 5,
        ["Color"] = color3_fromrgb(0, 0, 0),
        ["Position"] = udim2_new(0, 4, 0, 4),
        ["Transparency"] = 0,
        ["Thickness"] = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 1 or 4,
        ["Filled"] = true,
        ["Parent"] = colorpicker_transparency,
        ["Visible"] = true,
        ["ZIndex"] = 1002
    })

    local colorpicker_transparency_dragger_overlay = drawing_proxy["new"]("Circle", {
        ["Radius"] = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 2 or 7,
        ["Color"] = color3_fromrgb(255, 255, 255),
        ["Transparency"] = 0,
        ["Radius"] = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 2 or 4,
        ["Parent"] = colorpicker_transparency_dragger,
        ["Position"] = udim2_new(0, 0, 0, 0),
        ["Visible"] = true,
        ["ZIndex"] = 1003
    })

    local colorpicker_hue = drawing_proxy["new"]("Image", {
        ["Parent"] = colorpicker_inside,
        ["Position"] = udim2_new(0, 10, 0, 201),
        ["Size"] = udim2_new(0, 163, 0, 8),
        ["Color"] = color3_fromrgb(255, 255, 255),
        ["Transparency"] = 1,
        ["Rounding"] = 4,
        ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAKAAAAAICAIAAADx4mP5AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAAHJJREFUWEftkW0LgCAMhM9ArP7/b60gSmlGWOILfRz3cIzbhDE54y0wieak5qZ7fjiswIKr5ubHfIOR7U3FI1ra7Wv7Y0q18iTVnenvb6Vt5enTRj/Cy/ZOxVOKGkBUw4CVw4CVw4CVw4CVw4CVw4BVAwRG9lMU6VQQuwAAAABJRU5ErkJggg=="),
        ["ZIndex"] = 1001,
        ["Visible"] = true,
    })

    local colorpicker_hue_dragger = drawing_proxy["new"]("Circle", {
        ["Radius"] = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 3 or 5,
        ["Color"] = color3_fromrgb(255, 255, 255),
        ["Position"] = udim2_new(0, 4, 0, 4),
        ["Transparency"] = 0,
        ["Thickness"] = (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") and 2 or 4,
        ["Parent"] = colorpicker_hue,
        ["Visible"] = true,
        ["ZIndex"] = 1002
    })

    local set_colorpicker_color = function(color, set)
        colorpicker_saturation["Color"] = Color3.fromHSV(actives["colorpicker_hue"], 1, 1)

        tween(colorpicker_hue_dragger, {tween_position = udim2_new(0, clamp(actives["colorpicker_hue"] * 163, 6, 157), 0, 4)}, circular, out, 0.1)
        tween(colorpicker_saturation_dragger, {tween_position = udim2_new(0, clamp(actives["colorpicker_saturation"] * 163, 6, 157), 0, clamp((1 - actives["colorpicker_value"]) * 163, 6, 157))}, circular, out, 0.1)

        if set then
            actives["colorpicker"]:set_colorpicker(color)
        end
    end

    local set_colorpicker_transparency = function(transparency, set)
        tween(colorpicker_transparency_dragger, {tween_position = udim2_new(0, clamp((1 - transparency) * 163, 6, 157), 0, 4)}, circular, out, 0.1)

        if set then
            actives["colorpicker"]:set_colorpicker_transparency(transparency)
        end
    end

    create_click_connection(colorpicker_border, colorpicker_saturation, function(position)
        local frame_position = colorpicker_saturation["real_position"]
        local frame_position_x = frame_position["X"]
        local frame_position_y = frame_position["Y"]

        actives["colorpicker_saturation"] = clamp((position["X"] - frame_position_x) / 163, 0, 1)
        actives["colorpicker_value"] = clamp((163 - (position["Y"] - frame_position_y)) / 163, 0, 1)

        set_colorpicker_color(Color3.fromHSV(actives["colorpicker_hue"], actives["colorpicker_saturation"], actives["colorpicker_value"]), true)

        moving = create_connection(mouse["Move"], function()
            local position = get_mouse_location(user_input_service)

            actives["colorpicker_saturation"] = clamp((position["X"] - frame_position_x) / 163, 0, 1)
            actives["colorpicker_value"] = clamp((163 - (position["Y"] - frame_position_y)) / 163, 0, 1)

            set_colorpicker_color(Color3.fromHSV(actives["colorpicker_hue"], actives["colorpicker_saturation"], actives["colorpicker_value"]), true)
        end)
    end)

    create_click_connection(colorpicker_border, colorpicker_hue, function(position)
        local frame_position_x = colorpicker_hue["real_position"]["X"]

        actives["colorpicker_hue"] = clamp((position["X"] - frame_position_x) / 163, 0, 1)

        set_colorpicker_color(Color3.fromHSV(actives["colorpicker_hue"], actives["colorpicker_saturation"], actives["colorpicker_value"]), true)

        moving = create_connection(mouse["Move"], function()
            actives["colorpicker_hue"] = clamp((get_mouse_location(user_input_service)["X"] - frame_position_x) / 158, 0, 1)
            set_colorpicker_color(Color3.fromHSV(actives["colorpicker_hue"], actives["colorpicker_saturation"], actives["colorpicker_value"]), true)
        end)
    end)

    create_click_connection(colorpicker_border, colorpicker_transparency, function(position)
        local frame_position_x = colorpicker_transparency["real_position"]["X"]

        set_colorpicker_transparency(clamp(1 - (position["X"] - frame_position_x) / 163, 0, 1), true)

        moving = create_connection(mouse["Move"], function()
            set_colorpicker_transparency(clamp(1 - (get_mouse_location(user_input_service)["X"] - frame_position_x) / 163, 0, 1), true)
        end)
    end)

    local open_colorpicker = function(element)
        local position = element["drawings"]["colorpicker_border"]["real_position"]
        local x_position = position["X"] + 30
        local screen_size = camera["ViewportSize"]
        local x_size = screen_size["X"]
        local y_size = screen_size["Y"]

        local x_overlap = (x_position + colorpicker_inside["real_size"]["X"]) - x_size
        local y_overlap = (position["Y"] + colorpicker_inside["real_size"]["Y"]) - y_size

        if x_overlap > 0 then
            x_position-=(x_overlap + 5)
        elseif x_overlap < -x_size then
            x_position+=(-x_overlap + 5)
        end

        if y_overlap > 0 then
            position-=vector2_new(0, y_overlap + 5)
        elseif y_overlap < -y_size then
            position+=vector2_new(0, y_overlap + 5)
        end


        colorpicker_border["Visible"] = true
        colorpicker_border["Position"] = udim2_new(0, x_position, 0, position["Y"] - 5)

        tween(colorpicker_border, {Transparency = 1, tween_position = udim2_new(0, x_position, 0, position["Y"])}, circular, out, 0.15)
        tween(colorpicker_inside, show_transparency, circular, out, 0.15)
        tween(colorpicker_saturation_background, show_transparency, circular, out, 0.15)
        tween(colorpicker_saturation, show_transparency, circular, out, 0.15)
        tween(colorpicker_transparency, show_transparency, circular, out, 0.15)
        tween(colorpicker_hue, show_transparency, circular, out, 0.15)
        tween(colorpicker_transparency_dragger, show_transparency, circular, out, 0.15)
        tween(colorpicker_transparency_dragger_overlay, show_transparency, circular, out, 0.15)
        tween(colorpicker_hue_dragger, show_transparency, circular, out, 0.15)
        tween(colorpicker_saturation_dragger, show_transparency, circular, out, 0.15)

        local color = flags[element["color_flag"]]

        actives["colorpicker_hue"], actives["colorpicker_saturation"], actives["colorpicker_value"] = color:ToHSV()

        if actives["colorpicker_saturation"] < 0.001 then
            actives["colorpicker_hue"] = 1
        end

        set_colorpicker_color(color)
        set_colorpicker_transparency(flags[element["transparency_flag"]])

        actives["colorpicker"] = element
    end

    local close_colorpicker = function()
        local position = colorpicker_border["real_position"]
        tween(colorpicker_border, {Transparency = 0, tween_position = udim2_new(0, position["X"], 0, position["Y"] - 5)}, circular, out, 0.15)
        tween(colorpicker_inside, hide_transparency, circular, out, 0.15)
        tween(colorpicker_saturation_background, hide_transparency, circular, out, 0.15)
        tween(colorpicker_saturation, hide_transparency, circular, out, 0.15)
        tween(colorpicker_transparency, hide_transparency, circular, out, 0.15)
        tween(colorpicker_hue, hide_transparency, circular, out, 0.15)
        tween(colorpicker_transparency_dragger, hide_transparency, circular, out, 0.15)
        tween(colorpicker_transparency_dragger_overlay, hide_transparency, circular, out, 0.15)
        tween(colorpicker_hue_dragger, hide_transparency, circular, out, 0.15)
        tween(colorpicker_saturation_dragger, hide_transparency, circular, out, 0.15)

        actives["colorpicker"] = nil

        delay(0.15, function()
            if actives["colorpicker"] == nil then
                colorpicker_border["Visible"] = false
            end
        end)
    end

    stop_panel_search = function()
        tween(actives["panel"]["search_border"], {Color = menu["colors"]["border"]}, circular, out, 0.15)
        tween(actives["panel"]["search_image"], {Color = menu["colors"]["border"]}, circular, out, 0.15)
        tween(actives["panel"]["search_text"], {Color = menu["colors"]["inactive_text"]}, circular, out, 0.15)

        local panel = actives["panel"]
        actives["panel"] = nil
        panel:update_position()
    end

    local do_panel_search = function(search_text)
        if not actives["panel"] then
            return
        end

        actives["panel"]["scroll_index"] = 1

        local elements = actives["panel"]["elements"]
        local search_text = search_text:lower()
        local search_index = 0

        for i = 1, #elements do
            local element = elements[i]
            local drawings = element["drawings"]
            local frame = drawings["border"]
            local text = drawings["text"]
            local text2 = element["text2"]
            if search_index < 13 and (text["Text"]:lower():find(search_text) or text2 and text2:lower():find(search_text)) then
                search_index+=1
                frame["Visible"] = true
                frame["Position"] = udim2_new(0, 0, 0, 30 + (search_index - 1) * 30)
            else
                frame["Visible"] = false
            end
        end
    end

    local start_panel_search = function(element)
        actives["panel"] = element

        start_typing(actives["panel"]["search_text"], 150, do_panel_search, false, true, true, false)

        tween(actives["panel"]["search_border"], {Color = menu["colors"]["highlighted"]}, circular, out, 0.15)
        tween(actives["panel"]["search_image"], {Color = menu["colors"]["highlighted"]}, circular, out, 0.15)
        tween(actives["panel"]["search_text"], {Color = menu["colors"]["active_text"]}, circular, out, 0.15)
    end

    local handle_click = LPH_JIT_MAX(function(_, state, input)
        if moving then
            moving:Disconnect()
            moving = nil

            if drag_frame["Visible"] then
                frame["Position"] = menu_position
                frame["Visible"] = true
                tween(drag_frame, hide_transparency, circular, out, 0.12)
                tween(drag_logo, hide_transparency, circular, out, 0.12)
                tween(drag_inside, hide_transparency, circular, out, 0.12)
                delay(0.12, function()
                    if not moving then
                        drag_frame["Visible"] = false
                    end
                end)
            end
        end

        local type = input["UserInputType"]
        if (type ~= Enum["UserInputType"]["MouseButton1"] and type ~= Enum["UserInputType"]["Touch"]) or state ~= Enum["UserInputState"]["Begin"] then
            return
        end

        if active_typing then
            delay(0, function()
                stop_typing(active_typing)

                if searching then
                    stop_search()
                end

                if actives["panel"] then
                    stop_panel_search()
                end
            end)
        end

        local mouse_position = get_mouse_location(user_input_service)
            local mouse_position_x = mouse_position["X"]
            local mouse_position_y = mouse_position["Y"]

        if actives["dropdown"] then
            local border = actives["dropdown"]["drawings"]["dropdown_border"]
                local border_position = border["real_position"] + vector2_new(0, 18)

            if not (mouse_position_x > border_position["X"] and mouse_position_x < border_position["X"] + border["real_size"]["X"]) or not (mouse_position_y > border_position["Y"] and mouse_position_y < border_position["Y"] + dropdown_border["real_size"]["Y"]) then
                close_dropdown(actives["dropdown"])

                return
            end
        elseif actives["colorpicker"] then
            local border_position = colorpicker_border["real_position"]

            if not (mouse_position_x > border_position["X"] and mouse_position_x < border_position["X"] + colorpicker_border["real_size"]["X"]) or not (mouse_position_y > border_position["Y"] and mouse_position_y < border_position["Y"] + colorpicker_border["real_size"]["Y"]) then
                close_colorpicker(actives["colorpicker"])

                return
            end
        elseif actives["keybind"] then
            local border_position = keybind_border["real_position"]

            if not (mouse_position_x > border_position["X"] and mouse_position_x < border_position["X"] + keybind_border["real_size"]["X"]) or not (mouse_position_y > border_position["Y"] and mouse_position_y < border_position["Y"] + keybind_border["real_size"]["Y"]) then
                close_keybind(actives["keybind"])
                close_context(actives["context"])

                return
            end
        elseif actives["context"] then
            local border_position = context_border["real_position"]

            if not (mouse_position_x > border_position["X"] and mouse_position_x < border_position["X"] + context_border["real_size"]["X"]) or not (mouse_position_y > border_position["Y"] and mouse_position_y < border_position["Y"] + context_border["real_size"]["Y"]) then
                close_context(actives["context"])

                return
            end
        elseif actives["settings"] then
            local border = actives["settings"]["border"]
                local border_position = border["real_position"]

            if not (mouse_position_x > border_position["X"] and mouse_position_x < border_position["X"] + border["real_size"]["X"]) or not (mouse_position_y > border_position["Y"] and mouse_position_y <  border_position["Y"] + border["real_size"]["Y"]) then
                close_settings(actives["settings"])

                return
            end
        end

        local connections = searching and click_connections[search_out] or actives["colorpicker"] and click_connections[colorpicker_border] or actives["dropdown"] and click_connections[dropdown_border] or actives["keybind"] and click_connections[keybind_inside] or actives["context"] and click_connections[context_border] or actives["settings"] and click_connections[actives["settings"]["inside"]] or nil

        if connections or (mouse_position_x > menu_position["X"]["Offset"] and mouse_position_x < menu_position["X"]["Offset"] + frame["Size"]["X"]) and (mouse_position_y > menu_position["Y"]["Offset"] and mouse_position_y < menu_position["Y"]["Offset"] + frame["Size"]["Y"]) then
            if not connections then
                for object, connections in click_connections do
                    if not object["is_rendering"] then
                        continue
                    end

                    local object_position = object["real_position"]
                    local object_size = object["real_size"]

                    if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                        for object, data in connections do
                            if not object["is_rendering"] then
                                continue
                            end

                            local object_position = object["real_position"]
                            local object_size = object["real_size"]

                            if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                                for i = 1, #data do
                                    data[i](mouse_position)
                                end

                                return
                            end
                        end
                    end
                end

                local fake_menu_position = frame["real_position"]
                local abs = math["abs"]

                moving = create_connection(mouse["Move"], function()
                    if not drag_frame["Visible"] then
                        drag_frame["Visible"] = true
                        tween(drag_frame, show_transparency, circular, out, 0.05)
                        tween(drag_logo, show_transparency, circular, out, 0.05)
                        tween(drag_inside, show_transparency, circular, out, 0.05)

                        drag_frame["Position"] = menu_position
                        delay(0.02, function()
                            if moving then
                                frame["Visible"] = false
                            end
                        end)
                    end

                    local new_mouse_position = get_mouse_location(user_input_service)
                    local new_position = udim2_new(0, fake_menu_position["X"] - (mouse_position_x - new_mouse_position["X"]), 0, fake_menu_position["Y"] - (mouse_position_y - new_mouse_position["Y"]))

                    if abs(menu_position["X"]["Offset"]-new_position["X"]["Offset"]) > 1.1 or abs(menu_position["Y"]["Offset"]-new_position["Y"]["Offset"]) > 1.1 then
                        drag_frame["Position"] = new_position
                        menu_position = new_position
                    end
                end)
            else
                for object, data in connections do
                    if not object["is_rendering"] then
                        continue
                    end

                    local object_position = object["real_position"]
                    local object_size = object["real_size"]

                    if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                        for i = 1, #data do
                            data[i](mouse_position)
                        end

                        return
                    end
                end
            end
        else
            for flag, frame in hud_frames do
                if frame["is_rendering"] then
                    local hud_position = frame["real_position"]
                    local hud_size = frame["real_size"]

                    if (mouse_position_x > hud_position["X"] and mouse_position_x < hud_position["X"] + hud_size["X"]) and (mouse_position_y > hud_position["Y"] and mouse_position_y < hud_position["Y"] + hud_size["Y"]) then
                        local fake_hud_position = hud_position

                        moving = create_connection(mouse["Move"], function()
                            local new_mouse_position = get_mouse_location(user_input_service)
                            local new_position_x = fake_hud_position["X"] - (mouse_position_x - new_mouse_position["X"])
                            local new_position_y = fake_hud_position["Y"] - (mouse_position_y - new_mouse_position["Y"])
                            local new_position = udim2_new(0, new_position_x, 0, new_position_y)

                            list_frame["Position"] = new_position
                            flags[flag] = {new_position_x, new_position_y}
                        end)

                        break
                    end
                end
            end
        end
    end)

    local handle_scroll = LPH_JIT_MAX(function(_, state, input)
        if state ~= Enum["UserInputState"]["Change"] or input["UserInputType"] ~= Enum["UserInputType"]["MouseWheel"] then
            return
        end

        local mouse_position = get_mouse_location(user_input_service)
            local mouse_position_x = mouse_position["X"]
            local mouse_position_y = mouse_position["Y"]

        local is_up = input["Position"]["Z"] > 0

        if (mouse_position_x > menu_position["X"]["Offset"] and mouse_position_x < menu_position["X"]["Offset"] + frame["Size"]["X"]) and (mouse_position_y > menu_position["Y"]["Offset"] and mouse_position_y < menu_position["Y"]["Offset"] + frame["Size"]["Y"]) then
            for object, connections in scroll_connections do
                if not object["is_rendering"] then
                    continue
                end

                local object_position = object["real_position"]
                local object_size = object["real_size"]

                if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                    for object, data in connections do
                        if not object["is_rendering"] then
                            continue
                        end

                        local object_position = object["real_position"]
                        local object_size = object["real_size"]

                        if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                            for i = 1, #data do
                                data[i](is_up)
                            end

                            return
                        end
                    end
                end
            end
        end
    end)

    local handle_hover = LPH_JIT_MAX(function()
        local mouse_position = get_mouse_location(user_input_service)
            local mouse_position_x = mouse_position["X"]
            local mouse_position_y = mouse_position["Y"]

        cursor["Position"] = udim2_new(0, mouse_position["X"], 0, mouse_position["Y"])
        user_input_service["MouseIconEnabled"] = false

        local connections = searching and hover_connections[search_out] or actives["colorpicker"] and hover_connections[colorpicker_border] or actives["dropdown"] and hover_connections[dropdown_border] or actives["keybind"] and hover_connections[keybind_inside] or actives["context"] and hover_connections[context_border] or actives["settings"] and hover_connections[actives["settings"]["inside"]] or nil

        if connections or (mouse_position_x > menu_position["X"]["Offset"] and mouse_position_x < menu_position["X"]["Offset"] + frame["Size"]["X"]) and (mouse_position_y > menu_position["Y"]["Offset"] and mouse_position_y < menu_position["Y"]["Offset"] + frame["Size"]["Y"]) then
            if not connections then
                for object, connections in hover_connections do
                    if not object["is_rendering"] then
                        continue
                    end

                    local object_position = object["real_position"]
                    local object_size = object["real_size"]

                    if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                        for object, data in connections do
                            if not object["is_rendering"] then
                                continue
                            end

                            local object_position = object["real_position"]
                            local object_size = object["real_size"]

                            if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                                if hovering_objects[object] then
                                    return
                                end

                                for object, data in hovering_objects do
                                    for _, data in data do
                                        data[2]()
                                    end
                                    hovering_objects[object] = nil
                                end

                                hovering_objects[object] = data

                                for _, data in data do
                                    data[1](mouse_position)
                                end

                                return
                            end
                        end
                    end
                end
            else
                for object, data in connections do
                    if not object["is_rendering"] then
                        continue
                    end

                    local object_position = object["real_position"]
                    local object_size = object["real_size"]

                    if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                        if hovering_objects[object] then
                            return
                        end

                        for object, data in hovering_objects do
                            for _, data in data do
                                data[2]()
                            end
                            hovering_objects[object] = nil
                        end

                        hovering_objects[object] = data

                        for _, data in data do
                            data[1](mouse_position)
                        end

                        return
                    end
                end
            end

            for object, data in hovering_objects do
                for _, data in data do
                    data[2]()
                end
                hovering_objects[object] = nil
            end
        else
            for flag, frame in hud_frames do
                if frame["is_rendering"] then
                    local hud_position = frame["real_position"]
                    local hud_size = frame["real_size"]

                    if (mouse_position_x > hud_position["X"] and mouse_position_x < hud_position["X"] + hud_size["X"]) and (mouse_position_y > hud_position["Y"] and mouse_position_y < hud_position["Y"] + hud_size["Y"]) then
                        if hovering_objects[frame] then
                            return
                        end

                        local data = hover_connections[frame][frame]

                        if data then
                            for object, data in hovering_objects do
                                for _, data in data do
                                    data[2]()
                                end
                                hovering_objects[frame] = nil
                            end

                            hovering_objects[frame] = data

                            for _, data in data do
                                data[1](mouse_position)
                            end

                            return
                        end
                    end

                    for object, data in hovering_objects do
                        for _, data in data do
                            data[2]()
                        end
                        hovering_objects[object] = nil
                    end
                end
            end
        end
    end)

    local handle_right_click = LPH_JIT_MAX(function(_, input)
        if actives["dropdown"] then
            return
        end

        local mouse_position = get_mouse_location(user_input_service)
            local mouse_position_x = mouse_position["X"]
            local mouse_position_y = mouse_position["Y"]

        if (mouse_position_x > menu_position["X"]["Offset"] and mouse_position_x < menu_position["X"]["Offset"] + frame["Size"]["X"]*1.5) and (mouse_position_y > menu_position["Y"]["Offset"] and mouse_position_y < menu_position["Y"]["Offset"] + frame["Size"]["Y"]*1.5) then
            for object, connections in right_click_connections do
                if not object["is_rendering"] then
                    continue
                end

                local object_position = object["real_position"]
                local object_size = object["real_size"]

                if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                    for object, data in connections do
                        if not object["is_rendering"] then
                            continue
                        end

                        local object_position = object["real_position"]
                        local object_size = object["real_size"]

                        if (mouse_position_x > object_position["X"] and mouse_position_x < object_position["X"] + object_size["X"]) and (mouse_position_y > object_position["Y"] and mouse_position_y < object_position["Y"] + object_size["Y"]) then
                            for i = 1, #data do
                                data[i](mouse_position)
                            end

                            return
                        end
                    end
                end
            end
        end
    end)

    local hovering = nil

    pop_menu = LPH_JIT_MAX(function(a)
        if moving then
            moving:Disconnect()
            moving = nil
        end

        if drag_frame["Visible"] then
            drag_frame["Visible"] = false
            frame["Visible"] = true
            frame["Position"] = menu_position
        end

        if hovering then
            hovering:Disconnect()
            hovering = nil
        end

        if actives["settings"] then
            close_settings(actives["settings"])
        end

        if searching then
            stop_search()
        end

        if actives["binding"] then
            stop_binding(actives["binding"])
        end

        if actives["dropdown"] then
            close_dropdown(actives["dropdown"])
        end

        if actives["context"] then
            close_context(actives["context"])
        end

        if actives["keybind"] then
            close_keybind(actives["keybind"])
        end

        if actives["panel"] then
            stop_panel_search(actives["panel"])
        end

        if actives["colorpicker"] then
            close_colorpicker(actives["colorpicker"])
        end

        if active_typing then
            stop_typing()
        end

        for object, data in hovering_objects do
            for _, data in data do
                data[2]()
            end
            hovering_objects[object] = nil
        end

        menu_open = not menu_open

        local half_transparency = menu_open and half_transparency or hide_transparency
        local transparency = menu_open and show_transparency or hide_transparency

        tween(cursor, transparency, exponential, out, 0.18)

        local mouse_position = get_mouse_location(user_input_service)
        user_input_service["MouseIconEnabled"] = not menu_open
        cursor["Position"] = udim2_new(0, mouse_position["X"], 0, mouse_position["Y"])
        
        frame["Visible"] = not a
        inside["Visible"] = not a

        tween(frame, transparency, exponential, out, 0.18)
        tween(inside, transparency, exponential, out, 0.18)
        tween(logo, transparency, exponential, out, 0.18)
        tween(juju_text, transparency, exponential, out, 0.18)
        tween(build_text, transparency, exponential, out, 0.18)
        tween(right_side, transparency, exponential, out, 0.18)
        tween(right_side_divider, transparency, exponential, out, 0.18)
        tween(search_image, transparency, exponential, out, 0.18)
        tween(themes_image, transparency, exponential, out, 0.18)

        tween(settings_image, transparency, exponential, out, 0.18)
        tween(tab_line, half_transparency, exponential, out, 0.18)
        tween(search_border, transparency, exponential, out, 0.18)
        tween(search_inside, transparency, exponential, out, 0.18)
        tween(search_text, transparency, exponential, out, 0.18)

        for name, group in menu["groups"] do
            tween(group["text"], half_transparency, exponential, out, 0.18)
            tween(group["line"], half_transparency, exponential, out, 0.18)

            for name, tab in group["tabs"] do
                tween(tab["text"], transparency, exponential, out, 0.18)

                if actives["tab"] == tab then
                    for _, section in tab["sections"] do
                        tween(section["border"], transparency, exponential, out, 0.18)
                        tween(section["line_two"], half_transparency, exponential, out, 0.18)
                        tween(section["inside"], transparency, exponential, out, 0.18)
                        tween(section["label"], half_transparency, exponential, out, 0.18)
                        tween(section["line"], half_transparency, exponential, out, 0.18)

                        local search_border = section["search_border"]

                        if search_border then
                            tween(search_border, transparency, exponential, out, 0.18)
                            tween(section["search_inside"], transparency, exponential, out, 0.18)
                            tween(section["search_text"], transparency, exponential, out, 0.18)
                            tween(section["search_image"], transparency, exponential, out, 0.18)
                        end

                        for _, element in section["elements"] do
                            for _, drawing in element["drawings"] do
                                tween(drawing, _ == "slider_fill" and half_transparency or _ == "slider_line" and half_transparency or _ == "checkmark" and (flags[element["toggle_flag"]] and half_transparency or hide_transparency) or _ == "colorpicker_transparency" and (menu_open and {Transparency = -flags[element["transparency_flag"]]+1} or transparency) or transparency, exponential, out, 0.18)
                            end
                        end
                    end
                end
            end
        end

        context_action_service:BindAction(context_action_click, handle_click, false, Enum["UserInputType"]["MouseButton1"], Enum["UserInputType"]["Touch"])
        context_action_service:BindAction(context_action_scroll, handle_scroll, false, Enum["UserInputType"]["MouseWheel"])

        local old_tick = clock()
        menu_tick = old_tick

        if not menu_open then
            context_action_service:UnbindAction(context_action_click)
            context_action_service:UnbindAction(context_action_scroll)

            delay(0.17, function()
                if old_tick == menu_tick then
                    frame["Visible"] = false
                    inside["Visible"] = false
                end
            end)
        else
            hovering = create_connection(mouse["Move"], handle_hover)
        end
    end)

    create_connection(user_input_service["InputBegan"], LPH_NO_VIRTUALIZE(function(input, gpe)
        local user_input_type = input["UserInputType"]

        if not gpe then
            for element, keybind in keybind_data do
                local key = keybind["key"]
                local is_key = user_input_type == key or input["KeyCode"] == key

                if is_key then
                    local method = keybind["method"]

                    if method == 1 then
                        keybind:set_activated(not keybind["activated"])
                    else
                        keybind:set_activated(method == 3 and true or false)
                    end
                end
            end

            if menu_open and user_input_type == Enum["UserInputType"]["MouseButton2"] then
                handle_right_click(nil, input)
            end
        end
    end))

    create_connection(user_input_service["InputEnded"], LPH_NO_VIRTUALIZE(function(input, gpe)
        if not gpe then
            for _, keybind in keybind_data do
                local key = keybind["key"]
                local is_key = input["UserInputType"] == key or input["KeyCode"] == key

                if is_key then
                    local method = keybind["method"]
                    if method == 2 then
                        keybind:set_activated(true)
                    elseif method == 3 then
                        keybind:set_activated(false)
                    end
                end
            end
        end
    end))

    -- > ( other )

    menu.is_menu_open = LPH_NO_VIRTUALIZE(function()
        return menu_open
    end)

    -- > ( groups )

    set_active_tab = function(tab)
        actives["old_tab"] = actives["tab"]
        local last_group = actives["old_tab"] and actives["old_tab"]["group"]

        tween(right_side_cover, show_transparency, circular, out, 0.15)

        if actives["old_tab"] then
            tween(actives["old_tab"]["frame"], {["tween_position"] = udim2_new(0, 10, 0, 20)}, circular, out, 0.15)
            tween(actives["old_tab"]["text"], {["Color"] = menu["colors"]["inactive_text"], ["tween_position"] = actives["old_tab"]["position"]}, circular, out, 0.15)
        end

        local tab_position = tab["position"]

        if last_group == tab["group"] then
            tween(tab_line, {["tween_position"] = udim2_new(0, tab_position["X"]["Offset"], 0, tab_position["Y"]["Offset"] + 1)}, circular, out, 0.15)
        else
            tab_line["Transparency"] = 0
            tab_line["Position"] = udim2_new(0, tab_position["X"]["Offset"], 0, tab_position["Y"]["Offset"] + 1)
            tween(tab_line, half_transparency, circular, out, 0.2)
        end

        tween(tab["text"], {["Color"] = menu["colors"]["active_text"], ["tween_position"] = udim2_new(0, tab_position["X"]["Offset"] + 5, 0, tab_position["Y"]["Offset"])}, circular, out, 0.15)

        delay(0.14, function()
            if actives["tab"] == tab then
                if actives["old_tab"] then
                    actives["old_tab"]["frame"]["Visible"] = false
                end

                tween(right_side_cover, hide_transparency, circular, out, 0.15)

                local new_frame = tab["frame"]
                new_frame["Visible"] = true
                new_frame["Position"] = udim2_new(0, 10, 0, 20)
                tween(new_frame, {["tween_position"] = udim2_new(0, 10, 0, 10)}, circular, out, 0.15)
            elseif actives["old_tab"] and actives["tab"] ~= actives["old_tab"] then
                actives["old_tab"]["frame"]["Visible"] = false
            end
        end)
        actives["tab"] = tab
    end

    local group_header_height = 30
    local tab_vertical_step = 15

    function menu.update_layout()
        local current_y_offset = menu["initial_base_offset"]
        local ordered_groups = menu["ordered_groups"]
        local num_groups = #ordered_groups
    
        for i = 1, num_groups do
            local group = ordered_groups[i]
            local should_be_visible = group["is_visible"]
            local group_text = group["text"]
            local group_line = group["line"]
            local ordered_tabs = group["ordered_tabs"]
            local num_tabs = #ordered_tabs
    
            group["initial_offset"] = current_y_offset
    
            if group_text then group_text["Visible"] = should_be_visible end
            if group_line then group_line["Visible"] = should_be_visible end
    
            for tab_index = 1, num_tabs do
                local tab = ordered_tabs[tab_index]
                local tab_text = tab["text"]
                local tab_text_frame = tab["text_frame"]
                if tab_text then tab_text["Visible"] = should_be_visible end
                if tab_text_frame then tab_text_frame["Visible"] = should_be_visible end
            end
    
            if should_be_visible then
                if group_text then
                    group_text["Position"] = udim2_new(0, 15, 0, current_y_offset)
                end
                if group_line then
                    group_line["Position"] = udim2_new(0, 15, 0, current_y_offset + 15)
                end
    
                local base_tab_y = current_y_offset + 20
                for tab_index = 1, num_tabs do
                    local tab = ordered_tabs[tab_index]
                    local tab_text = tab["text"]
                    local tab_text_frame = tab["text_frame"]
                    local new_tab_y = base_tab_y + (tab_index-1)*tab_vertical_step
                    local new_tab_position = udim2_new(0, 15, 0, new_tab_y)
                    
                    tab["position"] = new_tab_position
                    if tab_text then
                        tab_text["Position"] = actives["tab"] == tab and udim2_new(0, 20, 0, new_tab_y) or new_tab_position
                    end
                    if tab_text_frame then
                        tab_text_frame["Position"] = new_tab_position
                        if tab_text then
                            tab_text_frame["Size"] = udim2_new(0, 70, 0, tab_text["TextBounds"]["Y"])
                        end
                    end
                end
                current_y_offset = current_y_offset + group["current_height"]
            end
        end

        local size = current_y_offset > 405 and udim2_new(0, 575, 0, 450 + (current_y_offset - 405)) or udim2_new(0, 575, 0, 450)
        drag_frame["Size"] = size
        frame["Size"] = size
    end
    
    local group = {}
    group["__index"] = group
    
    function menu.create_group(name)
        local new_tabs = {}
        local ordered_tabs = {}
        local initial_offset
        local ordered_groups = menu["ordered_groups"]
        local num_groups = #ordered_groups
    
        if num_groups > 0 then
            local previous_group = nil
            for i = num_groups, 1, -1 do
                local g = ordered_groups[i]
                if g["is_visible"] then
                    previous_group = g
                    break
                end
            end
    
            if previous_group then
                initial_offset = previous_group["initial_offset"] + previous_group["current_height"]
            else
                initial_offset = menu["initial_base_offset"]
            end
        else
            initial_offset = menu["initial_base_offset"]
        end
    
        local new_group = setmetatable({
            ["tabs"] = new_tabs,
            ["ordered_tabs"] = ordered_tabs,
            ["initial_offset"] = initial_offset,
            ["current_height"] = group_header_height,
            ["is_visible"] = true,
            ["name"] = name,
            ["text"] = drawing_proxy["new"]("Text", {
                ["Color"] = menu["colors"]["accent"],
                ["Transparency"] = 0.5,
                ["Text"] = name,
                ["Parent"] = inside,
                ["Size"] = 14,
                ["Font"] = 1,
                ["Position"] = udim2_new(0, 15, 0, initial_offset),
                ["Visible"] = true,
            }),
            ["line"] = drawing_proxy["new"]("Square", {
                ["Parent"] = inside,
                ["Transparency"] = 0.5,
                ["Position"] = udim2_new(0, 15, 0, initial_offset + 15),
                ["Size"] = udim2_new(0, 70, 0, 1),
                ["Color"] = menu["colors"]["accent"],
                ["Filled"] = true,
                ["Visible"] = true,
            })
        }, group)
    
        menu["groups"][name] = new_group
        ordered_groups[#ordered_groups+1] = new_group
    
        return new_group
    end
    
    function group:create_tab(name)
        local group_initial_offset = self["initial_offset"]
        local ordered_tabs = self["ordered_tabs"]
        local index = #ordered_tabs + 1
        local position = udim2_new(0, 15, 0, group_initial_offset + 20 + (index-1)*tab_vertical_step)
        local is_group_visible = self["is_visible"]
    
        local new_tab = {
            ["text"] = drawing_proxy["new"]("Text", {
                ["Color"] = menu["colors"]["inactive_text"],
                ["Text"] = name:sub(1, 12),
                ["Size"] = 12,
                ["Font"] = 1,
                ["Visible"] = is_group_visible,
                ["Parent"] = inside,
                ["Position"] = position
            }),
            ["frame"] = drawing_proxy["new"]("Square", {
                ["Parent"] = right_side,
                ["Position"] = udim2_new(0, 10, 0, 10),
                ["Size"] = udim2_new(1, -20, 1, -20),
                ["Filled"] = true,
                ["Transparency"] = 0,
                ["Visible"] = false
            }),
            ["sections"] = {},
            ["position"] = position,
            ["group"] = self,
            ["name"] = name
        }


        new_tab["destroy"] = function(self)
            if not self or not self["text"] then
                error("attempt to destroy nil tab")
                return
            end
            self["text"]:Destroy()
            self["frame"]:Destroy()
            for _, section in self["sections"] do
                section:destroy()
            end

            self["group"]:remove_tab(name)
        end

        local text = new_tab["text"]
    
        local text_frame = drawing_proxy["new"]("Square", {
            ["Parent"] = inside,
            ["Position"] = position,
            ["Size"] = udim2_new(0, 70, 0, text["TextBounds"]["Y"]),
            ["Filled"] = true,
            ["Transparency"] = 0,
            ["Visible"] = is_group_visible,
        })
        new_tab["text_frame"] = text_frame
    
        self["tabs"][name] = new_tab
        ordered_tabs[#ordered_tabs+1] = new_tab
    
        self["current_height"] = group_header_height + #ordered_tabs * tab_vertical_step
    
        create_click_connection(text_frame, text_frame, function()
            if actives["tab"] ~= new_tab then
                set_active_tab(new_tab)
            end
        end)
        create_hover_connection(text_frame, text_frame, function()
            if actives["tab"] ~= new_tab then
                tween(text, {["Color"] = menu["colors"]["highlighted"]}, circular, out, 0.17)
            end
        end, function()
            if actives["tab"] ~= new_tab then
                tween(text, {["Color"] = menu["colors"]["inactive_text"]}, circular, out, 0.17)
            end
        end)
    
        if actives["tab"] == nil then
            set_active_tab(new_tab)
        end
    
        if is_group_visible then
            menu.update_layout()
        end
    
        return new_tab
    end
    
    function group:remove_tab(name)
        local tab_to_remove = self["tabs"][name]
        if not tab_to_remove then return end
    
        local remove_index = nil
        local ordered_tabs = self["ordered_tabs"]
        local num_tabs = #ordered_tabs
        for i = 1, num_tabs do
            local tab = ordered_tabs[i]
            if tab == tab_to_remove then
                remove_index = i
                break
            end
        end
    
        if not remove_index then return end
    
        local text_obj = tab_to_remove["text"]
        local text_frame_obj = tab_to_remove["text_frame"]
        local frame_obj = tab_to_remove["frame"]
    
        if text_obj then
            text_obj["Visible"] = false
            text_obj["Parent"] = nil
        end
        if text_frame_obj then
            text_frame_obj["Visible"] = false
            text_frame_obj["Parent"] = nil
        end
        if frame_obj then
            frame_obj["Visible"] = false
            frame_obj["Parent"] = nil
        end
    
        if actives["tab"] == tab_to_remove then
            actives["tab"] = nil
        end
    
        self["tabs"][name] = nil
        remove(ordered_tabs, remove_index)
    
        self["current_height"] = group_header_height + #ordered_tabs * tab_vertical_step
    
        if self["is_visible"] then
             menu.update_layout()
        end
    end
    
    function group:hide()
        if not self["is_visible"] then return end
        self["is_visible"] = false
        menu.update_layout()
    end
    
    function group:show()
        if self["is_visible"] then return end
        self["is_visible"] = true
        menu.update_layout()
    end
    
    local section = {}
    section["__index"] = section
    
    function group:create_section(tab_name, name, side, size, y_position)
        local tab = self["tabs"][tab_name]
        if not tab then return nil end
    
        local new_section = setmetatable({
            ["tab"] = tab,
            ["name"] = name,
            ["side"] = side,
            ["size"] = size,
            ["total_y_size"] = 10,
            ["elements"] = {}
        }, section)
    
        local tab_frame = tab["frame"]
        local y_position = y_position or 0
    
        local section_border = drawing_proxy["new"]("Image", {
            ["Parent"] = tab_frame,
            ["Position"] = udim2_new(side == 1 and 0 or 0.5, side == 1 and 0 or 5, y_position, y_position ~= 0 and 10 or 0),
            ["Size"] = udim2_new(0.5, -5, size, y_position ~= 0 and - 10 or 0),
            ["Color"] = menu["colors"]["border"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = 2,
            ["Visible"] = true,
        })
        local section_inside = drawing_proxy["new"]("Image", {
            ["Parent"] = section_border,
            ["Position"] = udim2_new(0, 1, 0, 0),
            ["Size"] = udim2_new(1, -2, 1, -1),
            ["Color"] = menu["colors"]["section"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = 3,
            ["Visible"] = true,
        })
        local section_line = drawing_proxy["new"]("Square", {
            ["Parent"] = section_inside,
            ["Size"] = udim2_new(0, 9, 0, 1),
            ["Position"] = udim2_new(0, 1, 0, 0),
            ["Color"] = menu["colors"]["accent"],
            ["Transparency"] = 0.5,
            ["Filled"] = true,
            ["ZIndex"] = 4,
            ["Visible"] = true,
        })
        local section_label = drawing_proxy["new"]("Text", {
            ["Color"] = menu["colors"]["accent"],
            ["Transparency"] = 0.5,
            ["Text"] = name,
            ["Parent"] = section_inside,
            ["Position"] = udim2_new(0, 15, 0, -8),
            ["Size"] = 12,
            ["Font"] = 1,
            ["ZIndex"] = 4,
            ["Visible"] = true,
        })
        local text_bounds = section_label["TextBounds"]["X"]+20
        local section_line_two = drawing_proxy["new"]("Square", {
            ["Parent"] = section_inside,
            ["Position"] = udim2_new(0, text_bounds, 0, 0),
            ["Size"] = udim2_new(1, -(text_bounds+1), 0, 1),
            ["Color"] = menu["colors"]["accent"],
            ["Filled"] = true,
            ["Transparency"] = 0.5,
            ["ZIndex"] = 4,
            ["Visible"] = true,
        })
        local element_holder = drawing_proxy["new"]("Square", {
            ["Parent"] = section_inside,
            ["Position"] = udim2_new(0, 10, 0, 10),
            ["Size"] = udim2_new(1, -20, 1, -20),
            ["Transparency"] = 0,
            ["Filled"] = true,
            ["Visible"] = true,
        })
    
        new_section["border"] = section_border
        new_section["line_two"] = section_line_two
        new_section["inside"] = section_inside
        new_section["label"] = section_label
        new_section["line"] = section_line
        new_section["holder"] = element_holder
    
        tab["sections"][name] = new_section
    
        return new_section
    end
    
    local panel_section = {}
    panel_section["__index"] = panel_section
    
    function group:create_panel_section(tab_name, name, side, favorites, configs)
        local tab = self["tabs"][tab_name]
        if not tab then return nil end
    
        local new_section = setmetatable({
            ["tab"] = tab,
            ["name"] = name,
            ["total_y_size"] = 30,
            ["scroll_index"] = 1,
            ["elements"] = {},
            ["selected"] = nil,
            ["on_selection_change"] = signal["new"](),
            ["favorites"] = favorites,
            ["configs"] = configs
        }, panel_section)
    
        local tab_frame = tab["frame"]
    
        local section_border = drawing_proxy["new"]("Image", {
            ["Parent"] = tab_frame,
            ["Position"] = udim2_new(side == 1 and 0 or 0.5, side == 1 and 0 or 5, 0, 0),
            ["Size"] = udim2_new(0.5, -5, 1, 0),
            ["Color"] = menu["colors"]["border"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["Visible"] = true,
        })
        local section_inside = drawing_proxy["new"]("Image", {
            ["Parent"] = section_border,
            ["Position"] = udim2_new(0, 1, 0, 0),
            ["Size"] = udim2_new(1, -2, 1, -1),
            ["Color"] = menu["colors"]["section"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["Visible"] = true,
        })
        local section_line = drawing_proxy["new"]("Square", {
            ["Parent"] = section_inside,
            ["Size"] = udim2_new(0, 9, 0, 1),
            ["Position"] = udim2_new(0, 1, 0, 0),
            ["Color"] = menu["colors"]["accent"],
            ["Transparency"] = 0.5,
            ["Filled"] = true,
            ["Visible"] = true,
        })
        local section_label = drawing_proxy["new"]("Text", {
            ["Color"] = menu["colors"]["accent"],
            ["Transparency"] = 0.5,
            ["Text"] = name,
            ["Parent"] = section_inside,
            ["Position"] = udim2_new(0, 15, 0, -8),
            ["Size"] = 12,
            ["Font"] = 1,
            ["Visible"] = true,
        })
        local text_bounds = section_label["TextBounds"]["X"]+20
        local section_line_two = drawing_proxy["new"]("Square", {
            ["Parent"] = section_inside,
            ["Position"] = udim2_new(0, text_bounds, 0, 0),
            ["Size"] = udim2_new(1, -(text_bounds+1), 0, 1),
            ["Color"] = menu["colors"]["accent"],
            ["Filled"] = true,
            ["Transparency"] = 0.5,
            ["Visible"] = true,
        })
        local element_holder = drawing_proxy["new"]("Square", {
            ["Parent"] = section_inside,
            ["Position"] = udim2_new(0, 10, 0, 10),
            ["Size"] = udim2_new(1, -20, 1, -20),
            ["Transparency"] = 0,
            ["Filled"] = true,
            ["Visible"] = true,
        })
        local search_border = drawing_proxy["new"]("Image", {
            ["Parent"] = element_holder,
            ["Position"] = udim2_new(0, 0, 0, 0),
            ["Size"] = udim2_new(1, 0, 0, 20),
            ["Color"] = menu["colors"]["border"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = zindex,
            ["Visible"] = true,
        })
        local search_inside = drawing_proxy["new"]("Image", {
            ["Parent"] = search_border,
            ["Position"] = udim2_new(0, 1, 0, 1),
            ["Size"] = udim2_new(1, -2, 1, -2),
            ["Color"] = menu["colors"]["background"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = zindex,
            ["Visible"] = true,
        })
        local search_text = drawing_proxy["new"]("Text", {
            ["Color"] = menu["colors"]["inactive_text"],
            ["Text"] = "search",
            ["Size"] = 12,
            ["Font"] = 1,
            ["Transparency"] = 1,
            ["Visible"] = true,
            ["Parent"] = search_inside,
            ["Position"] = udim2_new(0, 22, 0, 3),
        })
        local search_image = drawing_proxy["new"]("Image", {
            ["Color"] = menu["colors"]["inactive_text"],
            ["Data"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAAGdJREFUKFONkGEWgCAIg5GTdP9LlqPBA8Pq+yFuOvA5JHFOuDXGhNvAjPVipgtZAFAGtIuvbrSdRA4sJQQBKB/wOM6V9TevAe+cn6su8liwaieSuwuONy4/k0PdZHglsKOEWD+5QyIX+wJP/y1yP3IAAAAASUVORK5CYII="),
            ["Position"] = udim2_new(0, 4, 0, 4),
            ["Parent"] = search_inside,
            ["Size"] = udim2_new(0, 12, 0, 12),
            ["Transparency"] = 1,
            ["Visible"] = true,
        })
    
        new_section["border"] = section_border
        new_section["line_two"] = section_line_two
        new_section["inside"] = section_inside
        new_section["label"] = section_label
        new_section["line"] = section_line
        new_section["holder"] = element_holder
        new_section["search_image"] = search_image
        new_section["search_border"] = search_border
        new_section["search_inside"] = search_inside
        new_section["search_text"] = search_text
        new_section["search_image"] = search_image
    
        tab["sections"][name] = new_section
    
        create_hover_connection(element_holder, search_border, function()
            if not actives["panel"] then
                tween(search_border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.15)
            end
        end, function()
            if not actives["panel"] then
                tween(search_border, {Color = menu["colors"]["border"]}, circular, out, 0.15)
            end
        end)
    
        create_click_connection(element_holder, search_border, function()
            start_panel_search(new_section)
        end)
    
        create_scroll_connection(section_border, section_border, function(is_up)
            local old_scroll_index = new_section["scroll_index"]
            new_section["scroll_index"] = clamp(old_scroll_index + (is_up and -1 or 1), 1, 1 + clamp(#new_section["elements"] - 13, 0, 1000))
            new_section:update_position()
        end)
    
        return new_section
    end

    -- > ( panel sections )

    function panel_section:add_item(info)
        local new_item = setmetatable({
            ["drawings"] = {},
            ["color"] = color,
            ["name"] = info["text"],
            ["parent"] = self["name"],
            ["icons"] = {}
        }, item)

        local border = drawing_proxy["new"]("Image", {
            ["Parent"] = self["holder"],
            ["Position"] = udim2_new(0, 0, 0, self["total_y_size"]),
            ["Size"] = udim2_new(1, 0, 0, 20),
            ["Color"] = menu["colors"]["border"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["Visible"] = false,
        })
        local inside = drawing_proxy["new"]("Image", {
            ["Parent"] = border,
            ["Position"] = udim2_new(0, 1, 0, 1),
            ["Size"] = udim2_new(1, -2, 1, -2),
            ["Color"] = menu["colors"]["background"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = 2,
            ["Visible"] = true,
        })
        local text = drawing_proxy["new"]("Text", {
            ["Color"] = menu["colors"]["inactive_text"],
            ["Text"] = info["text"],
            ["Size"] = 12,
            ["Font"] = 1,
            ["Transparency"] = 1,
            ["Visible"] = true,
            ["Parent"] = inside,
            ["ZIndex"] = 3,
            ["Position"] = udim2_new(0, 5, 0, 3),
        })


        new_item["drawings"]["border"] = border
        new_item["drawings"]["inside"] = inside
        new_item["drawings"]["text"] = text

        self["total_y_size"]+=30
        self["elements"][#self["elements"]+1] = new_item

        local icons = info["icons"]
        for i = 1, #icons do
            local icon = icons[i]
            local name = "icon_"..tostring(clock())

            new_item["drawings"][name] = drawing_proxy["new"]("Image", {
                ["Parent"] = inside,
                ["Position"] = udim2_new(0, 4 + (#icons - i)*15, 0, 4),
                ["Size"] = udim2_new(0, 10, 0, 10),
                ["Color"] = menu["colors"]["accent"],
                ["Visible"] = true,
                ["Transparency"] = 1,
                ["ZIndex"] = 4,
                ["Data"] = icon
            })

            new_item["icons"][i] = {icon, name}
        end

        self["scroll_index"] = clamp(self["scroll_index"], 1, 1 + clamp(#self["elements"] - 13, 0, 1000))

        local x = 4 + #(icons)*15
        text["Position"] = udim2_new(0, x, 0, 3)
        local text2_text = info["text2"]
        if text2_text then
            local text2 = drawing_proxy["new"]("Text", {
                ["Color"] = menu["colors"]["dark_text"],
                ["Text"] = text2_text,
                ["Size"] = 12,
                ["Font"] = 1,
                ["Transparency"] = 1,
                ["Visible"] = true,
                ["Parent"] = inside,
                ["ZIndex"] = 4,
                ["Position"] = udim2_new(0, x + text["TextBounds"]["X"] + 3, 0, 3),
            })

            local size = text2["Position"]["X"] + text2["TextBounds"]["X"] + 9
            local border_size = border["Position"]["X"] + border["Size"]["X"]
            if size > border_size then
                local overlap = 2 + math["ceil"]((size-border_size)/6)
                text2["Text"] = text2["Text"]:sub(1, -overlap)..".."
            end
            new_item["drawings"]["text2"] = text2
            new_item["text2"] = text2_text
        end

        self:update_position()

        create_hover_connection(self["holder"], border, function()
            if self["selected"] ~= new_item then
                tween(border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
            end
        end, function()
            if self["selected"] ~= new_item then
                tween(border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
            end
        end)

        if self["favorites"] then
            local flag = info["text"]..self["name"]
            new_item["favorite_flag"] = flag
            new_item["parent"] = self
            local favorited = menu["favorites"][flag]
            if favorited then
                new_item["favorited"] = true
                self:add_icon(info["text"], star)
            end
            create_right_click_connection(self["holder"], border, function(position)
                open_context({menu["favorites"][flag] and 6 or 5}, new_item, position)
            end)
        elseif self["configs"] then
            new_item["parent"] = self
            create_right_click_connection(self["holder"], border, function(position)
                open_context({menu["autoload"] == new_item["name"] and 9 or 8}, new_item, position)
            end)
        end

        create_click_connection(self["holder"], border, function()
            if not self["locked"] then
                local selected = self["selected"]
                if selected ~= new_item then
                    tween(border, {["Color"] = menu["colors"]["highlighted"]}, circular, out, 0.17)
                    self["selected"] = new_item
                    self["on_selection_change"]:Fire(text["Text"])

                    local elements = self["elements"]
                    local index = nil
                    for i = 1, #elements do
                        if elements[i] == new_item then
                            index = i
                        end
                    end

                    local elements = self["elements"]
                    local old_item = elements[1]
                    elements[1] = new_item
                    elements[index or #elements+1] = old_item

                    if selected then
                        tween(selected["drawings"]["border"], {Color = menu["colors"]["border"]}, circular, out, 0.17)
                    end

                    self["scroll_index"] = 1
                    self:update_position()
                else
                    tween(border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
                    self["selected"] = nil
                    self["on_selection_change"]:Fire(nil)
                end
            end
        end)

        return new_item
    end

    function panel_section:remove_item(text, delay, skip)
        local elements = self["elements"]
        local holder = self["holder"]
        local object = nil

        for i = 1, #elements do
            local element = elements[i]

            if element and element["drawings"]["text"]["Text"] == text then
                object = element
                if not delay then
                    remove(elements, i)
                end
                break
            end
        end

        if not object then
            return
        end

        local drawings = object["drawings"]
        local frame = drawings["border"]

        local connections = click_connections[holder]

        if connections then
            connections[frame] = nil
        end

        local connections = hover_connections[holder]

        if connections then
            connections[frame] = nil
        end

        local connections = right_click_connections[holder]

        if connections then
            connections[frame] = nil
        end

        for _, drawing in drawings do
            drawing:Destroy()
            drawings[_] = nil
        end

        self["scroll_index"] = clamp(self["scroll_index"], 1, 1 + clamp(#self["elements"] - 13, 0, 1000))

        if not delay then
            self:update_position()
        end

        if self["selected"] == object then
            self["selected"] = nil
            if not skip then
                self["on_selection_change"]:Fire(nil)
            end
        end
    end

    function panel_section:edit_item_color(text, color)
        local elements = self["elements"]
        local object = nil

        for i = 1, #elements do
            local element = elements[i]["drawings"]["text"]

            if element["Text"] == text then
                object = element
                break
            end
        end

        if not object then
            return
        end

        object["Color"] = color
    end

    function panel_section:remove_icon(text, icon)
        local elements = self["elements"]
        local object = nil

        for i = 1, #elements do
            local element = elements[i]
            local label = elements[i]["drawings"]["text"]

            if label["Text"] == text then
                object = element
                break
            end
        end

        if not object then
            return
        end

        local drawings = object["drawings"]
        local icons = object["icons"]

        local has_icon = false

        for i = 1, #icons do
            local icon_data = icons[i]
            if icon_data[1] == icon then
                has_icon = true                
                break
            end
        end

        if not has_icon then
            return
        end

        for i = 1, #icons do
            local icon_data = icons[i]
            if icon_data[1] == icon then
                local name = icon_data[2]
                remove(icons, i)
                drawings[name]:Destroy() 
                drawings[name] = nil
                break
            else
                drawings[icon_data[2]]["tween_position"]-=udim2_new(0, 15, 0, 0)
            end
        end

        drawings["text"]["tween_position"] = udim2_new(0, 5 + (15) * (#icons), 0, 3)

        self:update_position()
    end

    function panel_section:add_icon(text, icon)
        local elements = self["elements"]
        local object = nil

        for i = 1, #elements do
            local element = elements[i]
            local label = elements[i]["drawings"]["text"]

            if label["Text"] == text then
                object = element
                break
            end
        end

        if not object then
            return
        end

        local drawings = object["drawings"]
        local icons = object["icons"]

        for i = 1, #icons do
            drawings[icons[i][2]]["tween_position"]+=udim2_new(0, 15, 0, 0)
        end

        local name = "icon_"..clock()

        drawings[name] = drawing_proxy["new"]("Image", {
            ["Parent"] = drawings["inside"],
            ["Position"] = udim2_new(0, 4, 0, 4),
            ["Size"] = udim2_new(0, 10, 0, 10),
            ["Color"] = menu["colors"]["accent"],
            ["Visible"] = true,
            ["Transparency"] = 1,
            ["ZIndex"] = 4,
            ["Data"] = icon
        })

        icons[#icons+1] = {icon, name}

        drawings["text"]["tween_position"] = udim2_new(0, 5 + (15) * (#icons), 0, 3)

        self:update_position()
    end

    function panel_section:update_position()
        if actives["panel"] then
            return
        end

        local scroll_index = self["scroll_index"]
        local elements = self["elements"]
        local fake_elements = {}

        for i = 1, #elements do
            local element = elements[i]
            if element["favorited"] then
                local frame = elements[i]["drawings"]["border"]
                frame["Visible"] = true
                frame["Position"] = udim2_new(0, 0, 0, 30 + (i - scroll_index) * 30)
                fake_elements[#fake_elements+1] = element
            end
        end

        for i = 1, #elements do
            local element = elements[i]
            if not element["favorited"] then
                fake_elements[#fake_elements+1] = element
            end
        end

        for i = 1, #fake_elements do
            local frame = fake_elements[i]["drawings"]["border"]
            if i >= scroll_index and i < scroll_index + 13 then
                frame["Visible"] = true
                frame["Position"] = udim2_new(0, 0, 0, 30 + (i - scroll_index) * 30)
            else
                frame["Visible"] = false
            end
        end
    end

    -- > ( elements )

    function element.new(info, elements)
        local position = info["position"]
        local parent = info["parent"]

        local frame = drawing_proxy["new"]("Square", {
            ["Parent"] = parent,
            ["Position"] = position,
            ["Size"] = udim2_new(1, -20, 0, 12),
            ["Transparency"] = 0,
            ["Visible"] = true,
        })

        local zindex = parent["ZIndex"] + 1

        local new_element = setmetatable({
            ["drawings"] = {
                ["text"] = drawing_proxy["new"]("Text", {
                    ["Color"] = menu["colors"]["inactive_text"],
                    ["Text"] = info["text"],
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(0, 0, 0, -1),
                    ["ZIndex"] = zindex
                })
            },
            ["frame"] = frame,
            ["visible"] = true,
            ["section"] = info["section"],
            ["name"] = info["text"],
            ["old_visible"] = true
        }, element)

        local text = new_element["drawings"]["text"]
        local total_y_size = 17

        for element, properties in elements do
            if element == "toggle" then
                text["tween_position"]+=udim2_new(0, 17, 0, 0)

                local toggle_border = drawing_proxy["new"]("Image", {
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(0, 0, 0, 0),
                    ["Size"] = udim2_new(0, 12, 0, 12),
                    ["Color"] = menu["colors"]["border"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["ZIndex"] = zindex + 1,
                    ["Visible"] = true,
                })
                local toggle_inside = drawing_proxy["new"]("Image", {
                    ["Parent"] = toggle_border,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Color"] = menu["colors"]["background"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["ZIndex"] = zindex + 2,
                    ["Visible"] = true,
                })
                local toggle_click = drawing_proxy["new"]("Square", {
                    ["Parent"] = frame,
                    ["Size"] = udim2_new(0, 17 + new_element["drawings"]["text"]["TextBounds"]["X"], 1, 0),
                    ["Transparency"] = 0,
                    ["Visible"] = true,
                    ["ZIndex"] = zindex + 3,
                    ["Position"] = udim2_new(0, 0, 0, 0),
                })
                local checkmark = drawing_proxy["new"]("Image", {
                    ["Parent"] = toggle_inside,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Data"] = checkmark_image_data,
                    ["Transparency"] = 0,
                    ["ZIndex"] = zindex + 3,
                    ["Color"] = menu["colors"]["accent"],
                    ["Visible"] = true,
                })

                new_element["drawings"]["toggle_border"] = toggle_border
                new_element["drawings"]["toggle_inside"] = toggle_inside
                new_element["drawings"]["checkmark"] = checkmark

                create_hover_connection(parent, toggle_click, function()
                    tween(toggle_border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end, function()
                    tween(toggle_border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
                end)

                new_element["on_toggle_change"] = signal["new"]()
                new_element["toggle_flag"] = properties["flag"]

                if properties["default"] then
                    new_element:set_toggle(true)
                else
                    flags[properties["flag"]] = false
                end

                create_click_connection(parent, toggle_click, function()
                    new_element:set_toggle(not flags[properties["flag"]])
                end)

                if not info["fake"] then
                    create_right_click_connection(parent, toggle_click, function(position)
                        open_context(keybind_data[new_element] and {2,1} or {1}, new_element, position)
                    end)
                end
            elseif element == "slider" then
                total_y_size+=14

                local slider_border = drawing_proxy["new"]("Image", {
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(0, 0, 0, 14),
                    ["Size"] = udim2_new(1, 0, 0, 12),
                    ["Color"] = menu["colors"]["border"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["ZIndex"] = zindex + 1,
                    ["Visible"] = true,
                })
                local slider_inside = drawing_proxy["new"]("Image", {
                    ["Parent"] = slider_border,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Color"] = menu["colors"]["background"],
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["Transparency"] = 1,
                    ["ZIndex"] = zindex + 2,
                    ["Visible"] = true,
                })
                local slider_fill = drawing_proxy["new"]("Image", {
                    ["Parent"] = slider_inside,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(0, 0, 1, -2),
                    ["Color"] = menu["colors"]["accent"],
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["Transparency"] = 0.5,
                    ["ZIndex"] = zindex + 3,
                    ["Visible"] = true,
                })
                local slider_line = drawing_proxy["new"]("Square", {
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(0, text["TextBounds"]["X"] + (elements["toggle"] and 20 or 3), 0, 2),
                    ["Size"] = udim2_new(0, 1, 0, 8),
                    ["Color"] = menu["colors"]["dark_text"],
                    ["Visible"] = true,
                    ["Filled"] = true,
                    ["Transparency"] = 0.5,
                    ["ZIndex"] = zindex + 4,
                })
                local slider_text = drawing_proxy["new"]("Text", {
                    ["Color"] = menu["colors"]["dark_text"],
                    ["Text"] = "",
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["Parent"] = frame,
                    ["ZIndex"] = zindex + 5,
                    ["Position"] = udim2_new(0, text["TextBounds"]["X"] + (elements["toggle"] and 24 or 7), 0, -1),
                })
                local slider_click = drawing_proxy["new"]("Square", {
                    ["Parent"] = slider_line,
                    ["Position"] = udim2_new(0, 0, 0, -1),
                    ["Size"] = udim2_new(0, 50, 0, 10),
                    ["Transparency"] = 0,
                    ["Filled"] = true,
                    ["ZIndex"] = zindex + 5,
                    ["Visible"] = true,
                })

                new_element["drawings"]["slider_border"] = slider_border
                new_element["drawings"]["slider_inside"] = slider_inside
                new_element["drawings"]["slider_fill"] = slider_fill
                new_element["drawings"]["slider_line"] = slider_line
                new_element["drawings"]["slider_text"] = slider_text

                new_element["on_slider_change"] = signal["new"]()
                new_element["slider_max"] = properties["max"]
                new_element["slider_min"] = properties["min"]
                new_element["slider_min_text"] = properties["min_text"]
                new_element["slider_max_text"] = properties["max_text"]
                new_element["slider_suffix"] = properties["suffix"] or ""
                new_element["slider_decimals"] = properties["decimals"] or 0

                new_element["slider_prefix"] = properties["prefix"] or ""
                new_element["slider_flag"] = properties["flag"]

                create_hover_connection(parent, slider_border, function()
                    tween(slider_border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end, function()
                    tween(slider_border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
                end)

                create_click_connection(parent, slider_click, function()
                    start_typing(slider_text, 100, function(value)
                        if tonumber(value) then
                            new_element:set_slider(value)
                        end
                    end, true, true)
                end)

                create_click_connection(parent, slider_border, function(mouse_position)
                    local min, max, decimals = properties["min"], properties["max"], properties["decimals"]
                    moving = create_connection(mouse["Move"], function()
                        new_element:set_slider(round(min + (max - min) * (get_mouse_location(user_input_service)["X"] - slider_inside["real_position"]["X"])/slider_inside["real_size"]["X"], decimals))
                    end)
                    new_element:set_slider(round(min + (max - min) * (mouse_position["X"] - slider_inside["real_position"]["X"])/slider_inside["real_size"]["X"], decimals))
                end)

                if not info["fake"] then
                    create_right_click_connection(parent, slider_border, function(position)
                        open_context(keybind_data[new_element] and {2,1} or {1}, new_element, position)
                    end)
                end

                new_element:set_slider(properties["default"] or properties["min"])
            elseif element == "textbox" then
                total_y_size+=18

                local textbox_border = drawing_proxy["new"]("Image", {
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(0, 0, 0, 14),
                    ["Size"] = udim2_new(1, 0, 0, 16),
                    ["Color"] = menu["colors"]["border"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["Visible"] = true,
                    ["ZIndex"] = zindex + 1,
                })
                local textbox_inside = drawing_proxy["new"]("Image", {
                    ["Parent"] = textbox_border,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Color"] = menu["colors"]["background"],
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["Transparency"] = 1,
                    ["ZIndex"] = zindex + 2,
                    ["Visible"] = true,
                })
                local textbox_text = drawing_proxy["new"]("Text", {
                    ["Color"] = menu["colors"]["dark_text"],
                    ["Text"] = "...",
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["Parent"] = textbox_inside,
                    ["Center"] = false,
                    ["ZIndex"] = zindex + 3,
                    ["Position"] = udim2_new(0, 2, 0, 0),
                })
                new_element["drawings"]["textbox_border"] = textbox_border
                new_element["drawings"]["textbox_inside"] = textbox_inside
                new_element["drawings"]["textbox_text"] = textbox_text

                new_element["on_textbox_change"] = signal["new"]()
                new_element["textbox_flag"] = properties["flag"]

                create_hover_connection(parent, textbox_border, function()
                    tween(textbox_border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end, function()
                    tween(textbox_border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
                end)

                create_click_connection(parent, textbox_border, function()
                    start_typing(textbox_text, textbox_border["real_size"]["X"] - 15, function(value)
                        new_element:set_textbox(tostring(value))
                    end, false, true, true, true)
                end)

                new_element:set_textbox(properties["default"] or nil)
            elseif element == "dropdown" then
                total_y_size+=18

                local dropdown_border = drawing_proxy["new"]("Image", {
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(0, 0, 0, 14),
                    ["Size"] = udim2_new(1, 0, 0, 16),
                    ["Color"] = menu["colors"]["border"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["Visible"] = true,
                    ["ZIndex"] = zindex + 1,
                })
                local dropdown_inside = drawing_proxy["new"]("Image", {
                    ["Parent"] = dropdown_border,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Color"] = menu["colors"]["background"],
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["Transparency"] = 1,
                    ["ZIndex"] = zindex + 2,
                    ["Visible"] = true,
                })
                local dropdown_text = drawing_proxy["new"]("Text", {
                    ["Color"] = menu["colors"]["dark_text"],
                    ["Text"] = "none",
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["Parent"] = dropdown_inside,
                    ["Center"] = false,
                    ["ZIndex"] = zindex + 3,
                    ["Position"] = udim2_new(0, 3, 0, 0),
                })
                local dropdown_arrow = drawing_proxy["new"]("Image", {
                    ["Color"] = menu["colors"]["dark_text"],
                    ["Data"] = arrow_image_data,
                    ["Size"] = udim2_new(0, 8, 0, 8),
                    ["Position"] = udim2_new(1, -11, 0.5, -4),
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["ZIndex"] = zindex + 3,
                    ["Parent"] = dropdown_inside,
                })

                new_element["drawings"]["dropdown_border"] = dropdown_border
                new_element["drawings"]["dropdown_inside"] = dropdown_inside
                new_element["drawings"]["dropdown_arrow"] = dropdown_arrow
                new_element["drawings"]["dropdown_text"] = dropdown_text
                new_element["on_dropdown_change"] = signal["new"]()
                new_element["dropdown_flag"] = properties["flag"]
                new_element["multi"] = properties["multi"]
                new_element["requires_one"] = properties["requires_one"]

                new_element["options"] = properties["options"]

                create_hover_connection(parent, dropdown_border, function()
                    tween(dropdown_border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
                    tween(dropdown_arrow, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end, function()
                    tween(dropdown_border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
                    tween(dropdown_arrow, {Color = menu["colors"]["dark_text"]}, circular, out, 0.17)
                end)

                local extensions = properties["use_custom_extensions"]
                if extensions then
                    local original_options = properties["options"]
                    local new_options = {}

                    for i = 1, #original_options do
                        new_options[#new_options + 1] = original_options[i]
                    end

                    for _, file in listfiles("juju recode/custom") do
                        local extension = file:match("%.([^%.]+)$")

                        if extension then
                            for i = 1, #extensions do
                                if extensions[i] == extension then
                                    local file_name = file:match("([^/\\]+)$")
                                    local found = false
                                    for i = 1, #original_options do
                                        if original_options[i] == file_name then
                                            found = true 
                                            break
                                        end
                                    end
                                    if not found then
                                        new_options[#new_options + 1] = file_name
                                    end
                                    break
                                end
                            end
                        end
                    end

                    new_element["options"] = new_options

                    create_click_connection(parent, dropdown_border, function()
                        local original_options = properties["options"]
                        local new_options = {}
    
                        for i = 1, #original_options do
                            new_options[#new_options + 1] = original_options[i]
                        end
    
                        for _, file in listfiles("juju recode/custom") do
                            local extension = file:match("%.([^%.]+)$")
    
                            if extension then
                                for i = 1, #extensions do
                                    if extensions[i] == extension then
                                        local file_name = file:match("([^/\\]+)$")
                                        local found = false
                                        for i = 1, #original_options do
                                            if original_options[i] == file_name then
                                                found = true 
                                                break
                                            end
                                        end
                                        if not found then
                                            new_options[#new_options + 1] = file_name
                                        end
                                        break
                                    end
                                end
                            end
                        end
    
                        new_element["options"] = new_options

                        open_dropdown(new_element)
                    end)
                else
                    create_click_connection(parent, dropdown_border, function()
                        open_dropdown(new_element)
                    end)
                end

                if not info["fake"] then
                    create_right_click_connection(parent, dropdown_border, function(position)
                        open_context(keybind_data[new_element] and {2,1} or {1}, new_element, position)
                    end)
                end

                local default = properties["default"]
                new_element["dropdown_default"] = default
                new_element["requires_one"] = properties["requires_one"]

                if default then
                    new_element:set_dropdown(default)
                end
            elseif element == "keybind" then
                local keybind_border = drawing_proxy["new"]("Image", {
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(1, -40, 0, 0),
                    ["Size"] = udim2_new(0, 40, 0, 12),
                    ["Color"] = menu["colors"]["border"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["ZIndex"] = zindex + 1,
                    ["Visible"] = true,
                })
                local keybind_inside = drawing_proxy["new"]("Image", {
                    ["Parent"] = keybind_border,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Color"] = menu["colors"]["background"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["ZIndex"] = zindex + 2,
                    ["Visible"] = true,
                })
                local keybind_text = drawing_proxy["new"]("Text", {
                    ["Color"] = menu["colors"]["dark_text"],
                    ["Text"] = "none",
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["Parent"] = keybind_inside,
                    ["Center"] = true,
                    ["ZIndex"] = zindex + 3,
                    ["Position"] = udim2_new(0.5, 0, 0, -1),
                })

                local size = keybind_text["TextBounds"]["X"] + 8

                keybind_border["Size"] = udim2_new(0, size, 0, 12)
                keybind_border["Position"] = udim2_new(1, -size, 0, 0)
                keybind_inside["Size"] = udim2_new(0, size-2, 0, 10)

                new_element["drawings"]["keybind_border"] = keybind_border
                new_element["drawings"]["keybind_inside"] = keybind_inside
                new_element["drawings"]["keybind_text"] = keybind_text
                new_element["on_key_change"] = signal["new"]()
                new_element["on_key_press"] = signal["new"]()

                create_hover_connection(parent, frame, function()
                    tween(keybind_border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end, function()
                    tween(keybind_border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
                end)

                create_click_connection(parent, frame, function()
                    start_binding(new_element)
                end)

                if properties["flag"] then
                    new_element["keybind_flag"] = properties["flag"]

                    local data = math_random(9000000,90000000)
                    keybind_data[data] = {
                        ["key"] = properties["default"],
                        ["value"] = true,
                        ["original_value"] = false,
                        ["set_activated"] = function()
                            new_element["on_key_press"]:Fire()
                        end
                    }
                    create_connection(new_element["on_key_change"], function(key)
                        keybind_data[data]["key"] = key
                        flags[properties["flag"]] = key
                    end)
                end
            elseif element == "colorpicker" then
                local transparency = properties["default_transparency"] or 0
                local color = properties["default_color"] or color3_fromrgb(255, 0, 0)

                local colorpicker_border = drawing_proxy["new"]("Image", {
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(1, -25, 0, 0),
                    ["Size"] = udim2_new(0, 25, 0, 12),
                    ["Color"] = menu["colors"]["border"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["ZIndex"] = zindex + 1,
                    ["Visible"] = true,
                })
                local colorpicker_inside = drawing_proxy["new"]("Image", {
                    ["Parent"] = colorpicker_border,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Color"] = menu["colors"]["background"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["ZIndex"] = zindex + 2,
                    ["Visible"] = true,
                })
                local colorpicker_transparency = drawing_proxy["new"]("Image", {
                    ["Parent"] = colorpicker_inside,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Color"] = color3_fromrgb(255, 255, 255),
                    ["Transparency"] = -transparency+1,
                    ["Rounding"] = 4,
                    ["Data"] = transparency_image_data,
                    ["ZIndex"] = zindex + 3,
                    ["Visible"] = true,
                })
                local colorpicker_fill = drawing_proxy["new"]("Image", {
                    ["Parent"] = colorpicker_transparency,
                    ["Position"] = udim2_new(0, 0, 0, 0),
                    ["Size"] = udim2_new(1, 0, 1, 0),
                    ["Color"] = color,
                    ["Transparency"] = 1,
                    ["Rounding"] = 2,
                    ["Data"] = pixel_image_data,
                    ["ZIndex"] = zindex + 3,
                    ["Visible"] = true,
                })

                new_element["drawings"]["colorpicker_transparency"] = colorpicker_transparency
                new_element["drawings"]["colorpicker_border"] = colorpicker_border
                new_element["drawings"]["colorpicker_inside"] = colorpicker_inside
                new_element["drawings"]["colorpicker_fill"] = colorpicker_fill

                new_element["transparency_flag"] = properties["transparency_flag"]
                new_element["color_flag"] = properties["color_flag"]
                new_element["on_transparency_change"] = signal["new"]()
                new_element["on_color_change"] = signal["new"]()

                create_hover_connection(parent, colorpicker_border, function()
                    tween(colorpicker_border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end, function()
                    tween(colorpicker_border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
                end)

                create_click_connection(parent, colorpicker_border, function()
                    open_colorpicker(new_element)
                end)

                create_right_click_connection(parent, colorpicker_border, function(position)
                    open_context({7,3,4}, new_element, position)
                end)

                new_element:set_colorpicker(properties["default_color"] or color3_fromrgb(255, 0, 0))
                new_element:set_colorpicker_transparency(properties["default_transparency"] or 0)
            elseif element == "info" then
                new_element["drawings"]["info_text"] = drawing_proxy["new"]("Text", {
                    ["Color"] = menu["colors"]["inactive_text"],
                    ["Text"] = "",
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(0, 0, 0, -1),
                    ["ZIndex"] = zindex + 1
                })
            elseif element == "button" then
                total_y_size+=4
                local button_border = drawing_proxy["new"]("Image", {
                    ["Parent"] = frame,
                    ["Position"] = udim2_new(0, 0, 0, 0),
                    ["Size"] = udim2_new(1, 0, 0, 16),
                    ["Color"] = menu["colors"]["border"],
                    ["Transparency"] = 1,
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["Visible"] = true,
                    ["ZIndex"] = zindex + 1,
                })
                local button_inside = drawing_proxy["new"]("Image", {
                    ["Parent"] = button_border,
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Color"] = menu["colors"]["background"],
                    ["Rounding"] = 4,
                    ["Data"] = pixel_image_data,
                    ["Transparency"] = 1,
                    ["ZIndex"] = zindex + 2,
                    ["Visible"] = true,
                })
                local button_icon = drawing_proxy["new"]("Image", {
                    ["Parent"] = button_border,
                    ["Position"] = udim2_new(1, -14, 0, 3),
                    ["Size"] = udim2_new(0, 10, 0, 10),
                    ["Color"] = menu["colors"]["dark_text"],
                    ["Rounding"] = 4,
                    ["Data"] = button_image_data,
                    ["Transparency"] = 1,
                    ["ZIndex"] = zindex + 3,
                    ["Visible"] = true,
                })
                local button_text = drawing_proxy["new"]("Text", {
                    ["Color"] = menu["colors"]["dark_text"],
                    ["Text"] = info["text"],
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["Transparency"] = 1,
                    ["Visible"] = true,
                    ["Parent"] = button_inside,
                    ["Center"] = false,
                    ["ZIndex"] = zindex + 3,
                    ["Position"] = udim2_new(0, 3, 0, 0),
                })

                local cooldown = clock()

                new_element["on_clicked"] = signal["new"]()

                local drawings = new_element["drawings"]
                drawings["button_border"] = button_border
                drawings["button_inside"] = button_inside
                drawings["button_text"] = button_text
                drawings["button_icon"] = button_icon
                drawings["text"]["Text"] = ""

                create_hover_connection(parent, button_border, function()
                    tween(button_border, {Color = menu["colors"]["highlighted"]}, circular, out, 0.17)
                end, function()
                    tween(button_border, {Color = menu["colors"]["border"]}, circular, out, 0.17)
                end)

                if properties["confirmation"] then
                    local in_confirmation = false

                    create_click_connection(parent, button_border, function()
                        if clock() - cooldown > 0.15 and not actives["typing"] then
                            cooldown = clock()
                            if in_confirmation then
                                new_element["on_clicked"]:Fire()
                                tween(button_inside, {Color = color3_fromrgb(40, 40, 40)}, circular, out, 0.075)
                                delay(0.075, function()
                                    tween(button_inside, {Color = menu["colors"]["background"]}, circular, out, 0.075)
                                end)
                                tween(button_text, {["Color"] = menu["colors"]["dark_text"]}, circular, out, 0.075)
                                tween(button_text, {["tween_position"] = udim2_new(0, 3, 0, 0)}, circular, out, 0.075)
                                in_confirmation = false
                            else
                                tween(button_text, {Color = menu["colors"]["accent"]}, circular, out, 0.075)
                                local old = cooldown
                                in_confirmation = cooldown
                                for i = 1, 3 do
                                    if in_confirmation ~= old then
                                        break
                                    end
                                    button_text["Text"] = "are you sure? ("..(4-i).."s left)"
                                    tween(button_text, {["tween_position"] = udim2_new(0, 3, 0, -1)}, circular, out, 0.075)
                                    wait(0.075)
                                    if in_confirmation ~= old then
                                        break
                                    end
                                    tween(button_text, {["tween_position"] = udim2_new(0, 3, 0, 0)}, circular, out, 0.075)
                                    wait(0.925)
                                end
                                button_text["Text"] = info["text"]
                                tween(button_text, {["Color"] = menu["colors"]["dark_text"]}, circular, out, 0.075)
                                tween(button_text, {["tween_position"] = udim2_new(0, 3, 0, 0)}, circular, out, 0.075)
                                in_confirmation = false
                            end
                        end
                    end)
                else
                    create_click_connection(parent, button_border, function()
                        if clock() - cooldown > 0.15 then
                            cooldown = clock()
                            new_element["on_clicked"]:Fire()
                            tween(button_inside, {Color = color3_fromrgb(40, 40, 40)}, circular, out, 0.075)
                            delay(0.075, function()
                                tween(button_inside, {Color = menu["colors"]["background"]}, circular, out, 0.075)
                            end)
                        end
                    end)

                    if not info["fake"] then
                        create_right_click_connection(parent, button_border, function(position)
                            open_context(keybind_data[new_element] and {2,1} or {1}, new_element, position)
                        end)
                    end
                end
            end
        end

        local tip = info["tip"]

        if tip then
            create_hover_connection(parent, button_border, function()
                show_tooltip(new_element, tip)
            end, function()
                hide_tooltip(new_element, tip)
            end)
        end

        new_element["total_y_size"] = total_y_size

        frame["Size"] = udim2_new(1, -20, 0, total_y_size)

        return new_element, total_y_size
    end

    function element:set_info(property, value)
        local text = self["drawings"]["info_text"]
        text[property] = value

        if property == "Text" then
            text["Position"] = udim2_new(1, -text["TextBounds"]["X"], 0, -1)
        end
    end

    function element:set_options(options)
        self:set_dropdown()
        self["options"] = options
    end

    function element:set_toggle(value, just_keybind)
        local keybind = keybind_data[self]
        if keybind then
            if not just_keybind then
                local is_on_not_held = keybind["method"] == 2
                keybind["value"] = value
                keybind["activated"] = is_on_not_held or value
                spawn(on_keybind_change["Fire"], on_keybind_change, keybind, self, is_on_not_held or value)

                if is_on_not_held then
                    return
                end
            end
        end

        local drawings = self["drawings"]
        tween(drawings["text"], {Color = value and menu["colors"]["active_text"] or menu["colors"]["inactive_text"]}, exponential, out, 0.2)
        tween(drawings["checkmark"], {Transparency = value and 0.5 or 0}, exponential, out, 0.2)

        flags[self["toggle_flag"]] = value
        self["on_toggle_change"]:Fire(value)
    end

    function element:set_slider(value, just_keybind)
        local drawings = self["drawings"]
        local max = self["slider_max"]
        local min = self["slider_min"]
        value = clamp(value, min, max)

        tween(drawings["slider_fill"], {tween_size = udim2_new((value - min) / (max - min), value == max and -2 or 0, 1, -2)}, exponential, out, 0.2)

        local text = drawings["slider_text"]
        if value == min then
            tween(drawings["slider_line"], {Color = menu["colors"]["dark_text"]}, circular, out, 0.2)
            text["Text"] = self["slider_min_text"] or self["slider_prefix"]..value..self["slider_suffix"]
        else
            tween(drawings["slider_line"], {Color = menu["colors"]["accent"]}, circular, out, 0.2)
            text["Text"] = (value == max and self["slider_max_text"]) or self["slider_prefix"]..value..self["slider_suffix"]
        end

        local keybind = keybind_data[self]

        if keybind then
            if not just_keybind then
                keybind["original_value"] = value
            end
        end

        flags[self["slider_flag"]] = value
        self["on_slider_change"]:Fire(value)
    end

    function element:set_textbox(value)
        flags[self["textbox_flag"]] = value
        self["drawings"]["textbox_text"]["Text"] = value == nil and "..." or value == "" and "..." or value
        self["on_textbox_change"]:Fire(value)
    end

    function element:set_colorpicker(value)
        flags[self["color_flag"]] = value
        self["drawings"]["colorpicker_fill"]["Color"] = value

        self["on_color_change"]:Fire(value)
    end

    function element:set_colorpicker_transparency(value)
        flags[self["transparency_flag"]] = value
        self["drawings"]["colorpicker_fill"]["Transparency"] = -value+1

        self["on_transparency_change"]:Fire(value)
    end

    function element:set_dropdown(value, just_keybind, no_fire)
        local drawings = self["drawings"]
        local dropdown_text = drawings["dropdown_text"]
        local max_textbounds = drawings["dropdown_inside"]["real_size"]["X"]

        local text = ""
        local last_text = ""

        value = type(value) == "table" and value or {value}

        local options = self["options"]

        for i = 1, #value do
            local option = value[i]
            local found = false
            for i = 1, #options do
                if options[i] == option then
                    found = true
                    break
                end
            end
            if not found then
                for i = 1, #value do
                    if value[i] == option then
                        remove(value, i)
                        break
                    end
                end
            end
        end

        if value and #value ~= 0 then
            for i = 1, #value do
                local option = value[i]
                text = i == 1 and option or text .. ", " .. option
                dropdown_text["Text"] = text

                if dropdown_text["TextBounds"]["X"] + 8 > max_textbounds then
                    dropdown_text["Text"] = last_text.."..."
                    break
                end

                last_text = text
            end
        else
            dropdown_text["Text"] = "none"
        end

        local keybind = keybind_data[self]

        if keybind then
            if not just_keybind then
                keybind["original_value"] = value
            end
        end

        flags[self["dropdown_flag"]] = value

        if not no_fire then
            self["on_dropdown_change"]:Fire(value)
        end
    end

    function element:update_dropdown_value(option)
        local value = flags[self["dropdown_flag"]]
        local multi = self["multi"]
        local requires_one = self["requires_one"]

        if multi then
            local count = value and #value or 0
            for i = 1, count do
                if value[i] == option then
                    if requires_one and count == 1 then
                        return nil
                    end

                    remove(value, i)

                    self:set_dropdown(value)

                    return false
                end
            end

            if value then
                value[#value+1] = option
            else
                value = {option}
                flags[self["dropdown_flag"]] = value
            end

            self:set_dropdown(value)

            return true
        else
            if value and option == value[1] then
                if requires_one then
                    return nil
                end

                self:set_dropdown(nil)

                return false
            else
                self:set_dropdown({option})

                return true
            end
        end
    end

    function element:set_key(value)
        local drawings = self["drawings"]
        local keybind_border = drawings["keybind_border"]
        local keybind_inside = drawings["keybind_inside"]
        local keybind_text = drawings["keybind_text"]

        keybind_text["Text"] = value and (shortened_characters[value] and shortened_characters[value] or value["Name"]:lower()) or "none"

        local size = keybind_text["TextBounds"]["X"] + 8

        keybind_border["Size"] = udim2_new(0, size, 0, 12)
        keybind_border["Position"] = udim2_new(1, -size, 0, 0)
        keybind_inside["Size"] = udim2_new(0, size-2, 0, 10)
        keybind_text["Position"] = udim2_new(0, (size-2)/2, 0, -2)

        local flag = self["keybind_flag"]

        if flag then
            flags[flag] = value
        end

        self["on_key_change"]:Fire(value)
    end

    local settings = {}
    settings["__index"] = settings

    function settings:create_element(a,b,c)
        return self["sections"][a["section"] or 1]:create_element(a,b,c)
    end

    function element:create_settings(count)
        local frame = self["frame"]
        local cog_icon = drawing_proxy["new"]("Image", {
            ["Data"] = cog_image_data,
            ["Visible"] = true,
            ["Transparency"] = 1,
            ["Color"] = menu["colors"]["inactive_text"],
            ["Size"] = udim2_new(0, 10, 0, 10),
            ["Position"] = udim2_new(1, -10, 0, 1),
            ["ZIndex"] = frame["ZIndex"] + 4,
            ["Parent"] = frame
        })

        self["drawings"]["cog_icon"] = cog_icon

        create_hover_connection(frame, cog_icon, function()
            tween(cog_icon, {["Color"] = menu["colors"]["highlighted"]}, circular, out, 0.17)
        end, function()
            tween(cog_icon, {Color = menu["colors"]["inactive_text"]}, circular, out, 0.17)
        end)

        local section_border = drawing_proxy["new"]("Image", {
            ["Parent"] = cog_icon,
            ["Position"] = udim2_new(1, 5, 0, -5),
            ["Size"] = udim2_new(0, 170, 0, 10),
            ["Color"] = menu["colors"]["border"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = 500,
            ["Visible"] = false,
        })
        local section_inside = drawing_proxy["new"]("Image", {
            ["Parent"] = section_border,
            ["Position"] = udim2_new(0, 1, 0, 1),
            ["Size"] = udim2_new(1, -2, 1, -2),
            ["Color"] = menu["colors"]["section"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = 501,
            ["Visible"] = true,
        })

        local new_settings = setmetatable({
            ["sections"] = {},
            ["elements"] = {},
            ["border"] = section_border,
            ["inside"] = section_inside
        }, settings)

        for i = 1, type(count) == "number" and count or 1 do
            local new_section = setmetatable({
                ["tab"] = self["section"]["tab"],
                ["total_y_size"] = 10,
                ["frame"] = self["frame"],
                ["elements"] = new_settings["elements"]
            }, section)

            local element_holder = drawing_proxy["new"]("Square", {
                ["Parent"] = section_inside,
                ["Position"] = udim2_new(0, 10 + i * 180, 0, 10),
                ["Size"] = udim2_new(1, -20, 1, -20),
                ["Transparency"] = 0,
                ["Filled"] = true,
                ["ZIndex"] = 502,
                ["Visible"] = true,
            })

            new_section["border"] = section_border
            new_section["inside"] = section_inside
            new_section["holder"] = element_holder

            new_settings["sections"][i] = new_section
        end

        create_click_connection(self["frame"], cog_icon, function()
            if actives["settings"] == new_settings then
                close_settings(new_settings)
            else
                open_settings(new_settings)
            end
        end)

        menu["settings"][self] = new_settings

        return new_settings
    end

    function element:remove()
        local parent = self["parent"]
        local object = self["frame"]

        local connections = click_connections[parent]

        if connections then
            connections[object] = nil
        end

        local connections = hover_connections[parent]

        if connections then
            connections[object] = nil
        end

        local connections = right_click_connections[parent]

        if connections then
            connections[object] = nil
        end

        local drawings = self["drawings"]

        for _, drawing in drawings do
            drawing:Destroy()
            drawings[_] = nil
        end

        local section = self["section"]
        local elements = section["elements"]

        for i = 1, #elements do
            if elements[i] == self then
                remove(elements, i)
                break
            end
        end

        section:recalculate_size()
    end

    function element:set_visible(visible, old)
        if not old then
            self["old_visible"] = visible
        end
        self["visible"] = visible
        self["frame"]["Visible"] = visible
        self["section"]:recalculate_size()
    end

    function section:create_element(info, elements, fake)
        local position = self["total_y_size"]
        local new_element, total_y_size = element["new"]({
            ["text"] = info["name"],
            ["parent"] = self["inside"],
            ["position"] = udim2_new(0, 10, 0, position),
            ["fake"] = fake,
            ["old_visible"] = true,
            ["section"] = self
        }, elements)

        self["total_y_size"]+=total_y_size

        self["elements"][#self["elements"]+1] = new_element

        if not self["side"] then
            self["border"]["Size"] = udim2_new(0, 170, 0, self["total_y_size"] + 7)
            self["inside"]["Size"] = udim2_new(1, -2, 1, -2)
        end

        return new_element
    end

    function section:recalculate_size()
        local elements = self["elements"]
        local total_size = 10

        for i = 1, #elements do
            local element = elements[i]
            if element["visible"] then
                element["frame"]["Position"] = udim2_new(0, 10, 0, total_size)
                total_size+=element["total_y_size"]
            end
        end

        if not self["side"] then
            self["border"]["Size"] = udim2_new(0, 170, 0, total_size + 7)
            self["inside"]["Size"] = udim2_new(1, -2, 1, -2)
        end

        self["total_y_size"] = total_size
    end

    function section:destroy()
        if not self["border"] then 
            return 
        end
        for _, element in self["elements"] do
            element:remove()
        end
        for _, drawing in self do
            local type = typeof(drawing)
            if (type == "Drawing" or type == "Table") and rawget(drawing, "Destroy") then
                drawing["Destroy"](drawing)
                self[_] = nil
            end
        end
    end

    -- > ( notifications )

    local notification_types = {
        [1] = {
            color3_fromrgb(174, 255, 0),
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAAFFJREFUOE/NzEsOgCAMRdGy/0UrlxSDtY90RDwD/hc7rvlccnW+rIdrhFL4ieBrKYvGzDAv40cqQlOXuwjpoyhGeA5UnEV4HcZYRSli+PY3zG4fbDP68uskQAAAAABJRU5ErkJggg==")
        },
        [2] = {
            color3_fromrgb(255, 225, 0),
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADdYAAA3WAZBveZwAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAiF8BAOgDAACIXwEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAAC1cWHl18YwawAAAGdJREFUOE+dkUsOgDAIRMWd9z+sSxUyNAKZ/t5mSmBKoQfjAQgLAg1kg3zg2Dihy5Sb2PNyV9pRCxWEhWBk3ZSca8aeyfnXbC/HjDPdHK+14VeMim2tY7qgNzRAjf4VNM8SIzZnFHkB8alA8IwiGIYAAAAASUVORK5CYII=")
        },
        [3] = {
            color3_fromrgb(255, 60, 63),
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAPgAAAD4ABMkKt4wAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAADMiQEA6AMAAMyJAQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAAd06aoHBh5lAAAAPElEQVQYV22LQQ4AMAjC8P+fHqg4l4yDthERQHRIUGzONd9rGTLk9SRcb38tc7mFkRpy5VTtKY1zltERByNGAFUDKq+CAAAAAElFTkSuQmCC")
        },
        [4] = {
            color3_fromrgb(255, 60, 63),
            base64_decode("iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAADydgEA6AMAAPJ2AQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAI47wVfTF7xOAAAAP0lEQVQYV22NSQoAIBDDnP9/WpNW8GBwaZyCa2TdO+choQJRgouM2vN2UFLx1V0eNQUkk9rnI4IQ21OuUj7MbDBmAHXXCP83AAAAAElFTkSuQmCC")
        }
    }

    do
        local update_notifications = LPH_NO_VIRTUALIZE(function()
            local notifications = menu["notifications"]
            local size = camera["ViewportSize"]["Y"]*0.88
            if #notifications > 6 then
                notifications[1]:dismiss()
            end
            for i = 1, #notifications do
                local notification = notifications[i]
                local inside = notification["inside"]
                local position = inside["Position"]
                local new_position = udim2_new(0, position["X"], 0, size - (i*29))
                if position ~= new_position then
                    tween(inside, {tween_position = new_position}, exponential, out, 0.14)
                end
            end
        end)

        local colors = menu["colors"]

        local notification = {}
        notification["__index"] = notification
        
        menu["new_notification"] = function(text, type, time, data)
            if do_notifications then
                local color = typeof(time) == "Color3" and time or (type == 1 and colors["success"]) or (type == 2 and colors["alert"]) or (type == 3 and colors["error"]) or colors["accent"]
                local inside = drawing_proxy["new"]("Image", {
                    ["Data"] = pixel_image_data,
                    ["Rounding"] = 7,
                    ["Size"] = udim2_new(1, -2, 1, -2),
                    ["Position"] = udim2_new(0, 1, 0, 1),
                    ["Color"] = colors["background"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 1101,
                    ["Visible"] = true,
                })
                local image = drawing_proxy["new"]("Image", {
                    ["Parent"] = inside,
                    ["Position"] = udim2_new(0, 5, 0, 5),
                    ["Size"] = udim2_new(0, 12, 0, 12),
                    ["Color"] = color,
                    ["Transparency"] = 0,
                    ["Data"] = data or notification_types[type][2],
                    ["Rounding"] = 4,
                    ["ZIndex"] = 1102,
                    ["Visible"] = true,
                })
                local text = drawing_proxy["new"]("Text", {
                    ["Parent"] = inside,
                    ["Position"] = udim2_new(0, 26, 0, 5),
                    ["Color"] = colors["active_text"],
                    ["Text"] = text,
                    ["Size"] = 12,
                    ["Font"] = 1,
                    ["ZIndex"] = 1102,
                    ["Transparency"] = 0,
                    ["Visible"] = true,
                })
                local shadow = drawing_proxy["new"]("Image", {
                    ["Parent"] = inside,
                    ["Data"] = shadow_image_data,
                    ["Rounding"] = 8,
                    ["Color"] = color,
                    ["Transparency"] = 0,
                    ["ZIndex"] = 1100,
                    ["Visible"] = true,
                    ["Position"] = udim2_new(0, 0, 0, 0),
                })

                local x_size = 32 + text["TextBounds"]["X"]
                local size = udim2_new(0, x_size, 0, 24)

                inside["Size"] = size

                local shadow_size = floor(x_size/13)
                shadow["Size"] = size + udim2_new(0, shadow_size, 0, 6)
                shadow["Position"] = udim2_new(0, -shadow_size/2, 0, -3)

                local new_notification = setmetatable({
                    ["inside"] = inside,
                    ["image"] = image,
                    ["text"] = text,
                    ["shadow"] = shadow,
                    ["start"] = clock(),
                    ["active"] = true
                }, notification)

                delay(clamp(time and typeof(time) == "number" and time or 2, 0.5, 7), function()
                    if new_notification["active"] then
                        new_notification:dismiss()
                    end
                end)

                local notifications = menu["notifications"]
                local viewport_size = camera["ViewportSize"]

                inside["Position"] = udim2_new(0, (viewport_size["X"]*0.5) - (x_size*0.5), 0, viewport_size["Y"]*0.88 - (#notifications*29 - 5))

                tween(inside, {Transparency = 0.89}, circular, out, 0.12)
                tween(image, show_transparency, circular, out, 0.12)
                tween(text, show_transparency, circular, out, 0.12)
                tween(shadow, {Transparency = 0.16}, circular, out, 0.12)

                notifications[#notifications+1] = new_notification

                spawn(update_notifications)
            end
        end

        function notification:dismiss()
            local inside = self["inside"]
            local image = self["image"]
            local text = self["text"]
            local shadow = self["shadow"]
            tween(inside, hide_transparency, circular, out, 0.12)
            tween(image, hide_transparency, circular, out, 0.12)
            tween(text, hide_transparency, circular, out, 0.12)
            tween(shadow, hide_transparency, circular, out, 0.12)
            self["active"] = false

            local notifications = menu["notifications"]
            for i = 1, #notifications do
                if notifications[i] == self then
                    remove(notifications, i)
                    break
                end
            end

            delay(0.12, function()
                inside:Destroy()
                image:Destroy()
                text:Destroy()
                shadow:Destroy()
                spawn(update_notifications)
            end)
        end
    end

    -- > ( finalization )

    do
        -- >> ( menu finalization )

        keybind_section = setmetatable({
            ["name"] = name,
            ["side"] = side,
            ["size"] = size,
            ["total_y_size"] = 10,
            ["holder"] = keybind_holder,
            ["border"] = keybind_border,
            ["inside"] = keybind_inside,
            ["elements"] = {}
        }, section)

        create_hover_connection(list_frame, list_frame, function()
            tween(list_frame, {Color = menu["colors"]["highlighted"], Transparency = 1}, circular, out, 0.15)
        end, function()
            tween(list_frame, {Color = menu["colors"]["border"], Transparency = 0.2}, circular, out, 0.15)
        end)

        menu.set_accent_color = LPH_JIT_MAX(function(color)
            menu["colors"]["accent"] = color

            tab_line["Color"] = color
            drag_logo["Color"] = color
            for name, group in menu["groups"] do
                group["text"]["Color"] = color
                group["line"]["Color"] = color

                for name, tab in group["tabs"] do
                    for _, section in tab["sections"] do
                        section["line_two"]["Color"] = color
                        section["line"]["Color"] = color
                        section["label"]["Color"] = color

                        for _, element in section["elements"] do
                            local drawings = element["drawings"]
                            local checkmark = drawings["checkmark"]
                            local slider_fill = drawings["slider_fill"]
                            local slider_text = drawings["slider_text"]

                            local icons = element["icons"]

                            if icons then
                                for i = 1, #icons do
                                    local icon = icons[i]
                                    drawings[icon[2]]["Color"] = color
                                end
                            end

                            if slider_fill then
                                slider_fill["Color"] = color

                                if flags[element["slider_flag"]] > element["slider_min"] then
                                    drawings["slider_line"]["Color"] = color
                                end
                            end

                            if checkmark then
                                checkmark["Color"] = color
                            end
                        end
                    end
                end
            end

            for _, settings in menu["settings"] do
                for _, element in settings["elements"] do
                    local drawings = element["drawings"]
                    local checkmark = drawings["checkmark"]
                    local slider_fill = drawings["slider_fill"]

                    if slider_fill then
                        slider_fill["Color"] = color

                        if flags[element["slider_flag"]] > element["slider_min"] then
                            drawings["slider_line"]["Color"] = color
                        end
                    end

                    if checkmark then
                        checkmark["Color"] = color
                    end
                end
            end

            for i = 1, #context_buttons do
                context_buttons[i]["icon"]["Color"] = color
            end

            list_divider["Color"] = color
            list_icon["Color"] = color

            for _, drawing in list_drawings do
                drawing["value"]["Color"] = color
            end
        end)

        -- >> ( config system )

        local function to_base64(input)
            local charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
            local encoded = ""
            local padding = 0

            while #input % 3 ~= 0 do
                input = input .. "\0"
                padding = padding + 1
            end

            for i = 1, #input, 3 do
                local a, b, c = string["byte"](input, i, i + 2)
                local n = a * 2^16 + (b or 0) * 2^8 + (c or 0)
                encoded = encoded .. string["sub"](charset, math.floor(n / 2^18) % 64 + 1, math.floor(n / 2^18) % 64 + 1)
                encoded = encoded .. string["sub"](charset, math.floor(n / 2^12) % 64 + 1, math.floor(n / 2^12) % 64 + 1)
                encoded = encoded .. string["sub"](charset, math.floor(n / 2^6) % 64 + 1, math.floor(n / 2^6) % 64 + 1)
                encoded = encoded .. string["sub"](charset, n % 64 + 1, n % 64 + 1)
            end

            return string["sub"](encoded, 1, #encoded - padding) .. string["rep"]("=", padding)
        end

        local function from_base64(input)
            local charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
            local decoded = ""
            input = string["gsub"](input, "=", "")

            for i = 1, #input, 4 do
                local a, b, c, d = string["find"](charset, string["sub"](input, i, i)) - 1,
                                   string["find"](charset, string["sub"](input, i + 1, i + 1)) - 1,
                                   string["find"](charset, string["sub"](input, i + 2, i + 2)) - 1 or 0,
                                   string["find"](charset, string["sub"](input, i + 3, i + 3)) - 1 or 0
                local n = a * 2^18 + b * 2^12 + c * 2^6 + d
                decoded = decoded .. string["char"](math.floor(n / 2^16) % 256)
                decoded = decoded .. string["char"](math.floor(n / 2^8) % 256)
                decoded = decoded .. string["char"](n % 256)
            end

            return string["gsub"](decoded, "%z", "")
        end

        local function xor_crypt(input, key)
            local output = {}
            for i = 1, #input do
                local key_byte = string["byte"](key, (i - 1) % #key + 1)
                local xored = bit32["bxor"](string["byte"](input, i), key_byte)
                table.insert(output, string["char"](xored))
            end
            return table.concat(output)
        end

        local function shuffle_key(key)
            local shuffled = {}
            for i = 1, #key do
                table.insert(shuffled, string["sub"](key, i, i))
            end
            for i = #shuffled, 2, -1 do
                local j = math_random(i)
                shuffled[i], shuffled[j] = shuffled[j], shuffled[i]
            end
            return table.concat(shuffled)
        end

        local function encrypt(input, key)
            local salt = tostring(math_random(1000, 9999))
            input = salt .. input .. string["reverse"](salt)
            local shuffled_key = shuffle_key(key)
            local xored = xor_crypt(input, shuffled_key)
            return to_base64(xored)
        end

        local function decrypt(input, key)
            local decoded = from_base64(input)
            local shuffled_key = shuffle_key(key)
            local xored = xor_crypt(decoded, shuffled_key)
            local salt_length = 4

            return string["sub"](xored, salt_length + 1, -salt_length - 1)
        end

        menu.get_config_list = function()
            local list = {}

            local files = listfiles("juju recode/configs/")
            for _, file in files do
                if string["match"](file, "%.(.*)") == "cfg" then
                    list[#list+1] = string["sub"](file, 21, #file-4)
                end
            end

            return list
        end

        menu.get_addon_list = function()
            local list = {}

            local files = listfiles("juju recode/addons/")
            for _, file in files do
                if string["match"](file, "%.(.*)") == "luau" then
                    list[#list+1] = string["sub"](file, 20, #file-5)
                end
            end

            return list
        end

        menu.get_skins_list = function()
            local list = {}

            local files = listfiles("juju recode/custom/")
            for _, file in files do
                if string["match"](file, "%.(.*)") == "skin" then
                    list[#list+1] = string["sub"](file, 20, #file-5)
                end
            end

            return list
        end

        menu.get_theme_list = function()
            local list = {}

            local files = listfiles("juju recode/themes/")
            for _, file in files do
                if string["match"](file, "%.(.*)") == "th" then
                    list[#list+1] = string["sub"](file, 20, #file-3)
                end
            end

            return list
        end

        menu.save_config = LPH_JIT(function(name)
            if string["find"](name, "%/") or string["find"](name, "%.") then
                return
            end

            local keybinds = {}

            local config = {
                ["keybinds"] = keybinds,
                ["author"] = flags["author"] or LRM_LinkedDiscordID or "Unknown",
                ["date"] = os["date"]("%x")
            }

            for flag, data in flags do
                local data = data
                local type_of = typeof(data)
                if type_of == "Color3" then
                    data = {floor(data["R"]*255), floor(data["G"]*255), floor(data["B"]*255)}
                elseif type_of == "EnumItem" then
                    data = data["Name"]
                end

                if flag:sub(1,1) == "!" then
                    continue
                end

                config[flag] = data
            end

            for element, data in keybind_data do
                if type(element) == "table" then
                    local type = data["type"]
                    local flag = data["element"][type == 1 and "dropdown_flag" or type == 2 and "slider_flag" or type == 3 and "toggle_flag" or type == 4 and "name"]
                    local original_value = data["original_value"]

                    keybinds[#keybinds + 1] = {
                        ["flag"] = flag,
                        ["og_value"] = original_value,
                        ["value"] = data["value"],
                        ["method"] = data["method"],
                        ["key"] = data["key"]["Name"],
                        ["type"] = type
                    }

                    config[flag] = original_value
                end
            end

            writefile("juju recode/configs/"..name..".cfg", encrypt(http_service:JSONEncode(config), "^^^^^^^^^^^^^^^^^^^^"))
        end)

        menu["get_config_data"] = LPH_JIT(function(data)
            local success, decrypted = pcall(decrypt, data, "^^^^^^^^^^^^^^^^^^^^")

            if decrypted then
                local success, json = pcall(function()
                    return http_service:JSONDecode(decrypted)
                end)

                if success then
                    return json
                end
            end
        end)

        menu["load_config"] = LPH_JIT_MAX(function(name)
            if string["find"](name, "%/") or string["find"](name, "%.") then
                return
            end

            local path = "juju recode/configs/"..name..".cfg"

            if isfile(path) then
                local new_flags = menu["get_config_data"](readfile(path))

                if new_flags then
                    local loaded_addons = new_flags["loaded_addons"]

                    if loaded_addons then
                        for _, addon in addon_data do
                            for i = 1, #loaded_addons do
                                if addon == loaded_addons[i] then
                                    continue
                                end
                                menu["unload_addon"](loaded_addons[i])
                            end
                        end

                        for _, addon in loaded_addons do
                            if not addon_data[addon] then
                                menu["load_addon"](addon)
                            end
                        end
                    else
                        for _, addon in addon_data do
                            menu["unload_addon"](addon)
                        end
                    end

                    for element, keybind in keybind_data do
                        if element ~= 1 then
                            on_keybind_deleted:Fire(keybind, element, true)
                        end
                    end

                    local colors = menu["colors"]
                    for color, old in colors do
                        local value = new_flags[color.."_color"]

                        if value then
                            colors[color] = color3_fromrgb(value[1], value[2], value[3])
                        end
                    end

                    local keybinds = new_flags["keybinds"]

                    if keybinds then
                        for _, data in keybind_data do
                            if type(_) == "table" then
                                keybind_data[_] = nil
                            end
                        end

                        for _, new_keybind in keybinds do
                            local flag = new_keybind["flag"]
                            local type = new_keybind["type"]
                            local flag_name = type == 1 and "dropdown_flag" or type == 2 and "slider_flag" or type == 3 and "toggle_flag" or type == 4 and "name"
                            local new_keybind_data = nil

                            local key = new_keybind["key"]

                            local s = pcall(function()
                                key = Enum["UserInputType"][key]
                            end)
                            if not s then
                                s = pcall(function()
                                    key = Enum["KeyCode"][key]
                                end)
                            end

                            if s then
                                for _, group in menu["groups"] do
                                    for name, tab in group["tabs"] do
                                        for _, section in tab["sections"] do
                                            local elements = section["elements"]
                                            for i = 1, #elements do
                                                local element = elements[i]
                                                if element[flag_name] == flag then
                                                    local method = new_keybind["method"]

                                                    new_keybind_data = setmetatable({
                                                        ["method"] = type == 2 and 1 or method,
                                                        ["original_value"] = new_keybind["og_value"],
                                                        ["value"] = (type == 4 and "") or (type == 3 and new_flags[element[flag_name]]) or (type ~= 3 and new_keybind["value"]),
                                                        ["type"] = type,
                                                        ["activated"] = method == 2,
                                                        ["element"] = element,
                                                        ["key"] = key
                                                    }, keybind)

                                                    break
                                                end
                                            end
                                        end
                                    end
                                end

                                for _, settings in menu["settings"] do
                                    local elements = settings["elements"]
                                    for i = 1, #elements do
                                        local element = elements[i]
                                        if element[flag_name] == flag then
                                            local method = new_keybind["method"]
                                            new_keybind_data = setmetatable({
                                                ["method"] = type == 2 and 1 or method,
                                                ["original_value"] = new_keybind["og_value"],
                                                ["value"] = (type == 4 and "") or (type == 3 and new_flags[element[flag_name]]) or (type ~= 3 and new_keybind["value"]),
                                                ["type"] = type,
                                                ["activated"] = method == 2,
                                                ["element"] = element,
                                                ["key"] = key
                                            }, keybind)
                                            break
                                        end
                                    end
                                end

                                if new_keybind_data then
                                    local element = new_keybind_data["element"]
                                    keybind_data[element] = new_keybind_data

                                    on_keybind_created:Fire(new_keybind_data, element)
                                end
                            end
                        end
                    end

                    for name, group in menu["groups"] do
                        for name, tab in group["tabs"] do
                            for _, section in tab["sections"] do
                                local elements = section["elements"]
                                for i = 1, #elements do
                                    local element = elements[i]
                                    local slider_flag = element["slider_flag"]
                                    local toggle_flag = element["toggle_flag"]
                                    local dropdown_flag = element["dropdown_flag"]
                                    local textbox_flag = element["textbox_flag"]
                                    local colorpicker_flag = element["color_flag"]
                                    local keybind_flag = element["keybind_flag"]

                                    if slider_flag then
                                        local value = flags[slider_flag]
                                        local new_value = new_flags[slider_flag]

                                        if new_value ~= nil and value ~= new_value then
                                            element:set_slider(new_value)
                                        end
                                    end

                                    if toggle_flag then
                                        local value = flags[toggle_flag]
                                        local new_value = new_flags[toggle_flag]

                                        if new_value ~= nil and value ~= new_value then
                                            element:set_toggle(new_value)
                                        end
                                    end

                                    if dropdown_flag then
                                        local value = flags[dropdown_flag]
                                        local new_value = new_flags[dropdown_flag]

                                        if value ~= new_value then
                                            if new_value then
                                                local options = element["options"]

                                                for _, value in new_value do
                                                    local found = false
                                                    for i = 1, #options do
                                                        if options[i] == value then
                                                            found = true
                                                            break
                                                        end
                                                    end
                                                    if not found then
                                                        remove(new_value, _)
                                                    end
                                                end
                                            end

                                            element:set_dropdown((new_value and #new_value > 0 and new_value) or (element["requires_one"] and element["dropdown_default"]))
                                        end
                                    end

                                    if textbox_flag then
                                        local value = flags[textbox_flag]
                                        local new_value = new_flags[textbox_flag]

                                        if new_value ~= nil and value ~= new_value then
                                            element:set_textbox(new_value)
                                        end
                                    end

                                    if colorpicker_flag then
                                        local color_value = flags[colorpicker_flag]
                                        local new_color_value = new_flags[colorpicker_flag]
                                        new_color_value = new_color_value and color3_fromrgb(new_color_value[1], new_color_value[2], new_color_value[3]) or nil
                                        local transparency_flag = element["transparency_flag"]
                                        local transparency_value = flags[transparency_flag]
                                        local new_transparency_value = new_flags[transparency_flag]

                                        if new_color_value ~= nil and color_value ~= new_color_value then
                                            element:set_colorpicker(new_color_value)
                                        end

                                        if new_transparency_value ~= nil and transparency_value ~= new_transparency_value then
                                            element:set_colorpicker_transparency(new_transparency_value)
                                        end
                                    end

                                    if keybind_flag then
                                        local value = flags[keybind_flag]
                                        local new_value = new_flags[keybind_flag]

                                        if new_value ~= nil and value ~= new_value then
                                            local s, err = pcall(function()
                                                new_value = Enum["UserInputType"][new_value]
                                            end)
                                            if not s then
                                                new_value = Enum["KeyCode"][new_value]
                                            end
                                            element:set_key(new_value)
                                        end
                                    end
                                end
                            end
                        end
                    end

                    for element_settings, settings in menu["settings"] do
                        local elements = settings["elements"]
                        for i = 1, #elements do
                            local element = elements[i]
                            local slider_flag = element["slider_flag"]
                            local toggle_flag = element["toggle_flag"]
                            local dropdown_flag = element["dropdown_flag"]
                            local textbox_flag = element["textbox_flag"]
                            local colorpicker_flag = element["color_flag"]
                            local keybind_flag = element["keybind_flag"]

                            if slider_flag then
                                local value = flags[slider_flag]
                                local new_value = new_flags[slider_flag]

                                if new_value ~= nil and value ~= new_value then
                                    element:set_slider(new_value)
                                end
                            end

                            if toggle_flag then
                                local value = flags[toggle_flag]
                                local new_value = new_flags[toggle_flag]

                                if new_value ~= nil and value ~= new_value then
                                    element:set_toggle(new_value)
                                end
                            end

                            if dropdown_flag then
                                local value = flags[dropdown_flag]
                                local new_value = new_flags[dropdown_flag]

                                if value ~= new_value then
                                    if new_value then
                                        local options = element["options"]

                                        for _, value in new_value do
                                            local found = false
                                            for i = 1, #options do
                                                if options[i] == value then
                                                    found = true
                                                    break
                                                end
                                            end
                                            if not found then
                                                remove(new_value, _)
                                            end
                                        end
                                    end

                                    element:set_dropdown((new_value and #new_value > 0 and new_value) or (element["requires_one"] and element["dropdown_default"]))
                                end
                            end

                            if textbox_flag then
                                local value = flags[textbox_flag]
                                local new_value = new_flags[textbox_flag]

                                if new_value ~= nil and value ~= new_value then
                                    element:set_textbox(new_value)
                                end
                            end

                            if colorpicker_flag then
                                local color_value = flags[colorpicker_flag]
                                local new_color_value = new_flags[colorpicker_flag]

                                new_color_value = new_color_value and color3_fromrgb(new_color_value[1], new_color_value[2], new_color_value[3]) or nil
                                local transparency_flag = element["transparency_flag"]
                                local transparency_value = flags[transparency_flag]
                                local new_transparency_value = new_flags[transparency_flag]

                                if new_color_value ~= nil and color_value ~= new_color_value then
                                    element:set_colorpicker(new_color_value)
                                end

                                if new_transparency_value ~= nil and transparency_value ~= new_transparency_value then
                                    element:set_colorpicker_transparency(new_transparency_value)
                                end
                            end

                            if keybind_flag then
                                local value = flags[keybind_flag]
                                local new_value = new_flags[keybind_flag]

                                if new_value ~= nil and value ~= new_value then
                                    local s, err = pcall(function()
                                        new_value = Enum["UserInputType"][new_value]
                                    end)
                                    if not s then
                                        new_value = Enum["KeyCode"][new_value]
                                    end
                                    element:set_key(new_value)
                                end
                            end
                        end
                    end

                    local keybinds_position = new_flags["keybinds_position"]

                    if keybinds_position then
                        list_frame["Position"] = udim2_new(0, keybinds_position[1], 0, keybinds_position[2])
                    end

                    local skins = new_flags["skins"]

                    if skins and type(skins) == "table" then
                        flags["skins"] = skins
                    end

                    menu["on_config_loaded"]:Fire()
                end
            end
        end)

        do
            menu["unload_addon"] = function(name)
                local data = addon_data[name]

                if data then
                    local thread = data[1]
                    local on_unload = data[4]
                    if on_unload then
                        on_unload()
                    end
                    if data[2]["destroy"] then
                    
                        data[2]["destroy"](data[2])
                        local addons_group = menu["groups"]["addons"]

                        local count = #addons_group["ordered_tabs"]
                        local is_visible = addons_group["is_visible"]
                        if count == 0 and is_visible then
                            addons_group["hide"](addons_group)
                        elseif count > 0 and not is_visible then
                            addons_group["show"](addons_group)
                        end
                    end
                    for _, connection in data[3] do
                        connection:Disconnect()
                    end
                    local loaded_addons = flags["loaded_addons"]
                    local found = nil
                    for i = 1, #loaded_addons do
                        if loaded_addons[i] == name then
                            found = i
                            break
                        end
                    end
                    if found then
                        remove(loaded_addons, found)
                    end

                    coroutine["close"](thread)
                    addon_data[name] = nil
                end
            end

            menu["load_addon"] = function(name)
                local path = "juju recode/addons/"..name..".luau"

                if not isfile(path) then
                    return "file does not exist"
                end

                local data = readfile(path)

                local s, err = pcall(function()
                    data = loadstring(data)
                end)

                if not s then
                    return "juju: addon "..name.." experienced an error while loading: "..err
                end

                if addon_data[name] then
                    menu["unload_addon"](name)
                end

                getfenv(data).__IDENTIFIER = name

                local thread = coroutine["create"](data)

                addon_data[name] = {
                    thread,
                    {},
                    {},
                    function()

                    end,
                    name
                }
                local loaded_addons = flags["loaded_addons"]
                loaded_addons[#loaded_addons+1] = name

                local s, err = coroutine["resume"](thread)

                if not s then
                    spawn(menu["unload_addon"], name)
                    error("juju: addon "..name.." experienced an error while loading: "..err)
                end
            end
        end

        -- >> ( fake settings )

        local settings_section = setmetatable({
            ["total_y_size"] = 10,
            ["elements"] = {}
        }, section)

        settings_section["border"] = drawing_proxy["new"]("Image", {
            ["Parent"] = settings_image,
            ["Position"] = udim2_new(1, 5, 0, -5),
            ["Size"] = udim2_new(0, 170, 0, 10),
            ["Color"] = menu["colors"]["border"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = 500,
            ["Visible"] = false,
        })
        settings_section["inside"] = drawing_proxy["new"]("Image", {
            ["Parent"] = settings_section["border"],
            ["Position"] = udim2_new(0, 1, 0, 1),
            ["Size"] = udim2_new(1, -2, 1, -2),
            ["Color"] = menu["colors"]["background"],
            ["Transparency"] = 1,
            ["Rounding"] = 4,
            ["Data"] = pixel_image_data,
            ["ZIndex"] = 501,
            ["Visible"] = true,
        })
        settings_section["holder"] = drawing_proxy["new"]("Square", {
            ["Parent"] = settings_section["inside"],
            ["Position"] = udim2_new(0, 10, 0, 10),
            ["Size"] = udim2_new(1, -20, 1, -20),
            ["Transparency"] = 0,
            ["Filled"] = true,
            ["ZIndex"] = 502,
            ["Visible"] = true,
        })

        menu["settings"][{["name"] = "settings"}] = settings_section

        -- >> ( settings )

        do
            local menu_keybind = settings_section:create_element({
                ["name"] = "toggle bind",
            }, {
                ["keybind"] = {
                    ["flag"] = "menu_key"
                }
            })

            menu_keybind:set_key(Enum["KeyCode"]["Insert"])
            create_connection(menu_keybind["on_key_change"], function(key)
                keybind_data[1]["key"] = key
            end)

            create_connection(settings_section:create_element({
                ["name"] = "keybinds list",
            }, {
                ["toggle"] = {
                    ["default"] = false,
                    ["flag"] = "keybind_list"
                }
            })["on_toggle_change"], function(bool)
                if bool then
                    menu:show_keybinds()
                else
                    menu:hide_keybinds()
                end
            end)

            menu_references["notifications"] = settings_section:create_element({
                ["name"] = "notifications",
            }, {
                ["toggle"] = {
                    ["default"] = do_notifications,
                    ["flag"] = "!notifications"
                }
            })

            menu_references["hide_on_load"] = settings_section:create_element({
                ["name"] = "hide on load",
            }, {
                ["toggle"] = {
                    ["default"] = false,
                    ["flag"] = "!hide_on_load"
                }
            })

            create_connection(menu_references["notifications"]["on_toggle_change"], function(bool)
                do_notifications = bool
                menu["saved"] = true
            end)
            
            create_connection(menu_references["hide_on_load"]["on_toggle_change"], function(bool)
                menu["hide_on_load"] = bool
                menu["saved"] = true
            end)

            settings_section:create_element({
                ["name"] = "custom kick screen",
            }, {
                ["toggle"] = {
                    ["default"] = false,
                    ["flag"] = "custom_kick_screen"
                },
                ["textbox"] = {
                    ["flag"] = "custom_kick_screen_background",
                    ["default"] = "2.png"
                },
                ["colorpicker"] = {
                    ["color_flag"] = "custom_kick_screen_color",
                    ["transparency_flag"] = "custom_kick_screen_color_transparency",
                    ["default_color"] = menu["colors"]["accent"],
                    ["default_transparency"] = 0
                }
            })

            create_connection(settings_section:create_element({
                ["name"] = "unload juju",
            }, {
                ["button"] = {
                    ["confirmation"] = true
                },
            })["on_clicked"], function()
                getgenv()["_JUJU"]()

                if (identifyexecutor() == "AWP" or identifyexecutor() == "Nihon") then
                    cleardrawcache()
                end
            end)
        end

       -- >> ( fake theme )

        do
            theme_section = setmetatable({
                ["total_y_size"] = 10,
                ["elements"] = {}
            }, section)

            theme_section["border"] = drawing_proxy["new"]("Image", {
                ["Parent"] = themes_image,
                ["Position"] = udim2_new(1, 5, 0, -5),
                ["Size"] = udim2_new(0, 170, 0, 10),
                ["Color"] = menu["colors"]["border"],
                ["Transparency"] = 1,
                ["Rounding"] = 4,
                ["Data"] = pixel_image_data,
                ["ZIndex"] = 500,
                ["Visible"] = false,
            })
            theme_section["inside"] = drawing_proxy["new"]("Image", {
                ["Parent"] = theme_section["border"],
                ["Position"] = udim2_new(0, 1, 0, 1),
                ["Size"] = udim2_new(1, -2, 1, -2),
                ["Color"] =  menu["colors"]["background"],
                ["Transparency"] = 1,
                ["Rounding"] = 4,
                ["Data"] = pixel_image_data,
                ["ZIndex"] = 501,
                ["Visible"] = true,
            })
            theme_section["holder"] = drawing_proxy["new"]("Square", {
                ["Parent"] = theme_section["inside"],
                ["Position"] = udim2_new(0, 10, 0, 10),
                ["Size"] = udim2_new(1, -20, 1, -20),
                ["Transparency"] = 0,
                ["Filled"] = true,
                ["ZIndex"] = 502,
                ["Visible"] = true,
            })

            menu["settings"][{["name"] = "theming"}] = theme_section

            -- >> ( settings )

            create_connection(theme_section:create_element({
                ["name"] = "juju color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["juju"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!juju_transparency",
                    ["color_flag"] = "!juju_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["juju"] = color
                juju_text["Color"] = color
            end)

            create_connection(theme_section:create_element({
                ["name"] = "logo color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["logo"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!logo_transparency",
                    ["color_flag"] = "!logo_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["logo"] = color
                logo["Color"] = color
            end)

            create_connection(theme_section:create_element({
                ["name"] = "error color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["error"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "e!rror_transparency",
                    ["color_flag"] = "!error_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["error"] = color
            end)

            create_connection(theme_section:create_element({
                ["name"] = "build color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["build"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!build_transparency",
                    ["color_flag"] = "!build_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["build"] = color
                build_text["Color"] = color
            end)

            create_connection(theme_section:create_element({
                ["name"] = "image color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["image"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!image_transparency",
                    ["color_flag"] = "!image_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["image"] = color
                themes_image["Color"] = color
                settings_image["Color"] = color
                search_image["Color"] = color
            end)

            create_connection(theme_section:create_element({
                ["name"] = "border color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["border"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!border_transparency",
                    ["color_flag"] = "!border_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["border"] = color
                context_border["Color"] = color
                dropdown_border["Color"] = color
                list_frame["Color"] = color
                search_out_border["Color"] = color
                for _, drawings in list_drawings do
                    drawings["inside"]["Color"] = color
                end

                for _, settings in menu["settings"] do
                    settings["border"]["Color"] = color
                end

                for name, group in menu["groups"] do
                    for name, tab in group["tabs"] do
                        for _, section in tab["sections"] do
                            local search_border = section["search_border"]
                            if search_border then
                                search_border["Color"] = color
                            end
                            section["border"]["Color"] = color
                            for _, element in section["elements"] do
                                local drawings = element["drawings"]
                                local toggle_border = drawings["toggle_border"]
                                local dropdown_border = drawings["dropdown_border"]
                                local slider_border = drawings["slider_border"]
                                local colorpicker_border = drawings["colorpicker_border"]
                                local keybind_border = drawings["keybind_border"]
                                local button_border = drawings["button_border"]
                                local textbox_border = drawings["textbox_border"]
                                local border = drawings["border"]

                                if toggle_border then
                                    toggle_border["Color"] = color
                                end

                                if dropdown_border then
                                    dropdown_border["Color"] = color
                                end

                                if slider_border then
                                    slider_border["Color"] = color
                                end

                                if colorpicker_border then
                                    colorpicker_border["Color"] = color
                                end

                                if keybind_border then
                                    keybind_border["Color"] = color
                                end

                                if button_border then
                                    button_border["Color"] = color
                                end

                                if border and section["selected"] ~= element then
                                    border["Color"] = color
                                end

                                if textbox_border then
                                    textbox_border["Color"] = color
                                end
                            end
                        end
                    end
                end

                for _, settings in menu["settings"] do
                    for _, element in settings["elements"] do
                        local drawings = element["drawings"]
                        local toggle_border = drawings["toggle_border"]
                        local dropdown_border = drawings["dropdown_border"]
                        local slider_border = drawings["slider_border"]
                        local colorpicker_border = drawings["colorpicker_border"]
                        local keybind_border = drawings["keybind_border"]
                        local button_border = drawings["button_border"]
                        local textbox_border = drawings["textbox_border"]

                        if toggle_border then
                            toggle_border["Color"] = color
                        end

                        if dropdown_border then
                            dropdown_border["Color"] = color
                        end

                        if slider_border then
                            slider_border["Color"] = color
                        end

                        if colorpicker_border then
                            colorpicker_border["Color"] = color
                        end

                        if keybind_border then
                            keybind_border["Color"] = color
                        end

                        if button_border then
                            button_border["Color"] = color
                        end

                        if textbox_border then
                            textbox_border["Color"] = color
                        end
                    end
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "alert color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["alert"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!alert_transparency",
                    ["color_flag"] = "!alert_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["alert"] = color
            end)

            create_connection(theme_section:create_element({
                ["name"] = "cursor color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["cursor"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!cursor_transparency",
                    ["color_flag"] = "!cursor_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["cursor"] = color
                cursor["Color"] = color
            end)

            create_connection(theme_section:create_element({
                ["name"] = "accent color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["accent"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!accent_transparency",
                    ["color_flag"] = "!accent_color"
                }
            })["on_color_change"], function(color)
                menu.set_accent_color(color)
            end)

            create_connection(theme_section:create_element({
                ["name"] = "shadow color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["shadow"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!shadow_transparency",
                    ["color_flag"] = "!shadow_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["shadow"] = color

                list_shadow["Color"] = color

                for _, drawing in list_drawings do
                    drawing["shadow"]["Color"] = color
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "success color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["success"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!success_transparency",
                    ["color_flag"] = "!success_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["success"] = color
            end)

            create_connection(theme_section:create_element({
                ["name"] = "dark text color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["dark_text"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!dark_text_transparency",
                    ["color_flag"] = "!dark_text_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["dark_text"] = color

                for name, group in menu["groups"] do
                    for name, tab in group["tabs"] do
                        for _, section in tab["sections"] do
                            for _, element in section["elements"] do
                                local drawings = element["drawings"]
                                local text = drawings["dropdown_text"]
                                local dropdown_arrow = drawings["dropdown_arrow"]
                                local button_text = drawings["button_text"]
                                local button_icon = drawings["button_icon"]
                                local textbox_text = drawings["textbox_text"]
                                local keybind_text = drawings["keybind_text"]
                                local slider_text = drawings["slider_text"]

                                local text2 = drawings["text2"]

                                if text then
                                    text["Color"] = color
                                end

                                if text2 then
                                    text2["Color"] = color
                                end

                                if button_text then
                                    button_text["Color"] = color
                                end

                                if textbox_text then
                                    textbox_text["Color"] = color
                                end

                                if button_icon then
                                    button_icon["Color"] = color
                                end

                                if keybind_text then
                                    keybind_text["Color"] = color
                                end

                                if dropdown_arrow then
                                    dropdown_arrow["Color"] = color
                                end

                                if slider_text then
                                    slider_text["Color"] = color
                                end
                            end
                        end
                    end
                end

                for _, settings in menu["settings"] do
                    for _, element in settings["elements"] do
                        local drawings = element["drawings"]
                        local text = drawings["dropdown_text"]
                        local dropdown_arrow = drawings["dropdown_arrow"]
                        local slider_text = drawings["slider_text"]
                        local text2 = drawings["text2"]
                        local button_text = drawings["button_text"]
                        local button_icon = drawings["button_icon"]
                        local textbox_text = drawings["textbox_text"]
                        local keybind_text = drawings["keybind_text"]

                        if text then
                            text["Color"] = color
                        end

                        if textbox_text then
                            textbox_text["Color"] = color
                        end

                        if dropdown_arrow then
                            dropdown_arrow["Color"] = color
                        end

                        if keybind_text then
                            keybind_text["Color"] = color
                        end

                        if text2 then
                            text2["Color"] = color
                        end

                        if button_text then
                            button_text["Color"] = color
                        end

                        if button_icon then
                            button_icon["Color"] = color
                        end

                        if slider_text then
                            slider_text["Color"] = color
                        end
                    end
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "section color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["section"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!section_transparency",
                    ["color_flag"] = "!section_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["section"] = color
                inside["Color"] = color

                for name, group in menu["groups"] do
                    for name, tab in group["tabs"] do
                        for _, section in tab["sections"] do
                            section["inside"]["Color"] = color
                        end
                    end
                end

                for _, settings in menu["settings"] do
                    settings["inside"]["Color"] = color
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "active text color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["active_text"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!active_text_transparency",
                    ["color_flag"] = "!active_text_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["active_text"] = color
                search_text["Color"] = color
                list_text["Color"] = color
                actives["tab"]["text"]["Color"] = color

                for name, group in menu["groups"] do
                    for name, tab in group["tabs"] do
                        if actives["tab"] == tab then
                            tab["text"]["Color"] = color
                        end
                        for _, section in tab["sections"] do
                            for _, element in section["elements"] do
                                local toggle_flag = element["toggle_flag"]

                                if toggle_flag then
                                    if flags[toggle_flag] then
                                        element["drawings"]["text"]["Color"] = color
                                    end
                                end
                            end
                        end
                    end
                end

                for _, settings in menu["settings"] do
                    for _, element in settings["elements"] do
                        local toggle_flag = element["toggle_flag"]

                        if toggle_flag then
                            if flags[toggle_flag] then
                                element["drawings"]["text"]["Color"] = color
                            end
                        end
                    end
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "inactive text color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["inactive_text"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!inactive_text_transparency",
                    ["color_flag"] = "!inactive_text_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["inactive_text"] = color
                type_line["Color"] = color

                for name, group in menu["groups"] do
                    for name, tab in group["tabs"] do
                        if actives["tab"] ~= tab then
                            tab["text"]["Color"] = color
                        end
                        for _, section in tab["sections"] do
                            local search_image = section["search_image"]

                            if search_image then
                                search_image["Color"] = color
                            end
                            for _, element in section["elements"] do
                                local drawings = element["drawings"]
                                local cog_icon = drawings["cog_icon"]

                                local toggle_flag = element["toggle_flag"]

                                if not toggle_flag or not flags[toggle_flag] then
                                    element["drawings"]["text"]["Color"] = color
                                end

                                if cog_icon then
                                    cog_icon["Color"] = color
                                end
                            end
                        end
                    end
                end

                for _, settings in menu["settings"] do
                    for _, element in settings["elements"] do
                        local drawings = element["drawings"]
                        local dropdown_arrow = drawings["dropdown_arrow"]

                        if dropdown_arrow then
                            dropdown_arrow["Color"] = color
                        end

                        local toggle_flag = element["toggle_flag"]

                        if not toggle_flag or not flags[toggle_flag] then
                            element["drawings"]["text"]["Color"] = color
                        end
                    end
                end

                for i = 1, #context_buttons do
                    context_buttons[i]["text"]["Color"] = color
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "keybind text color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["keybind_text"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!keybind_text_transparency",
                    ["color_flag"] = "!keybind_text_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["keybind_text"] = color
                for _, drawings in list_drawings do
                    drawings["text"]["Color"] = color
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "background color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["background"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!background_transparency",
                    ["color_flag"] = "!background_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["background"] = color
                context_inside["Color"] = color
                right_side["Color"] = color
                right_side_cover["Color"] = color
                right_side_divider["Color"] = color
                search_inside["Color"] = color
                search_out["Color"] = color
                keybind_inside["Color"] = color
                search_inside["Color"] = color
                colorpicker_inside["Color"] = color
                right_side["Color"] = color
                right_side_cover["Color"] = color
                right_side_divider["Color"] = color
                search_inside["Color"] = color
                search_out["Color"] = color
                dropdown_inside["Color"] = color
                context_inside["Color"] = color
                keybind_inside["Color"] = color
                search_inside["Color"] = color
                list_inside["Color"] = color
                search_out["Color"] = color
                drag_frame["Color"] = color

                for _, drawings in list_drawings do
                    drawings["inside"]["Color"] = color
                end

                for _, button in context_buttons do
                    button["frame"]["Color"] = color
                end

                for name, group in menu["groups"] do
                    for name, tab in group["tabs"] do
                        for _, section in tab["sections"] do
                            local search_inside = section["search_inside"]
                            if search_inside then
                                search_inside["Color"] = color
                            end
                            for _, element in section["elements"] do
                                local drawings = element["drawings"]
                                local toggle_inside = drawings["toggle_inside"]
                                local dropdown_inside = drawings["dropdown_inside"]
                                local slider_inside = drawings["slider_inside"]
                                local colorpicker_inside = drawings["colorpicker_inside"]
                                local keybind_inside = drawings["keybind_inside"]
                                local button_inside = drawings["button_inside"]
                                local textbox_inside = drawings["textbox_inside"]
                                local inside = drawings["inside"]

                                if toggle_inside then
                                    toggle_inside["Color"] = color
                                end

                                if dropdown_inside then
                                    dropdown_inside["Color"] = color
                                end

                                if slider_inside then
                                    slider_inside["Color"] = color
                                end

                                if colorpicker_inside then
                                    colorpicker_inside["Color"] = color
                                end

                                if keybind_inside then
                                    keybind_inside["Color"] = color
                                end

                                if button_inside then
                                    button_inside["Color"] = color
                                end

                                if textbox_inside then
                                    textbox_inside["Color"] = color
                                end

                                if inside then
                                    inside["Color"] = color
                                end
                            end
                        end
                    end
                end

                for _, settings in menu["settings"] do
                    for _, element in settings["elements"] do
                        local drawings = element["drawings"]
                        local toggle_inside = drawings["toggle_inside"]
                        local dropdown_inside = drawings["dropdown_inside"]
                        local slider_inside = drawings["slider_inside"]
                        local colorpicker_inside = drawings["colorpicker_inside"]
                        local keybind_inside = drawings["keybind_inside"]
                        local button_inside = drawings["button_inside"]
                        local textbox_inside = drawings["textbox_inside"]
                        local inside = drawings["inside"]

                        if toggle_inside then
                            toggle_inside["Color"] = color
                        end

                        if dropdown_inside then
                            dropdown_inside["Color"] = color
                        end

                        if slider_inside then
                            slider_inside["Color"] = color
                        end

                        if colorpicker_inside then
                            colorpicker_inside["Color"] = color
                        end

                        if keybind_inside then
                            keybind_inside["Color"] = color
                        end

                        if button_inside then
                            button_inside["Color"] = color
                        end

                        if textbox_inside then
                            textbox_inside["Color"] = color
                        end

                        if inside then
                            inside["Color"] = color
                        end
                    end
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "active border color",
            }, {
                ["colorpicker"] = {
                    ["default_color"] = menu["colors"]["highlighted"],
                    ["default_transparency"] = 0,
                    ["transparency_flag"] = "!active_border_transparency",
                    ["color_flag"] = "!active_border_color"
                }
            })["on_color_change"], function(color)
                menu["colors"]["highlighted"] = color
            end)

            theme_section:create_element({
                ["name"] = "themes",
                ["section"] = 2
            }, {
                ["dropdown"] = {
                    ["options"] = menu["get_theme_list"](),
                    ["flag"] = "!themes",
                    ["default"] = menu["theme"] and {menu["theme"]} or nil
                }
            })

            create_connection(theme_section:create_element({
                ["name"] = "refresh themes",
                ["section"] = 2
            }, {
                ["button"] = {
                    ["fake"] = true
                }
            })["on_clicked"], function()
                local elements = theme_section["elements"]

                for i = 1, #elements do
                    local element = elements[i]
                    if element["dropdown_flag"] then
                        element:set_options(menu["get_theme_list"]())
                        break
                    end
                end
            end)

            create_connection(theme_section:create_element({
                ["name"] = "load theme",
                ["section"] = 2
            }, {
                ["button"] = {
                    ["fake"] = true
                }
            })["on_clicked"], function()
                menu:load_theme(flags["!themes"][1])
            end)

            theme_section:create_element({
                ["name"] = "name",
                ["section"] = 2
            }, {
                ["textbox"] = {
                    ["flag"] = "!name"
                }
            })

            create_connection(theme_section:create_element({
                ["name"] = "save theme",
                ["section"] = 2
            }, {
                ["button"] = {}
            })["on_clicked"], function()
                local file = "juju recode/themes/"..flags["!name"]..".th"
                local data = {}

                local elements = theme_section["elements"]

                for i = 1, #elements do
                    local element = elements[i]
                    local flag = element["color_flag"]
                    if flag then
                        local color = flags[flag]
                        data[flag] = {floor(color["R"] * 255), floor(color["G"] * 255), floor(color["B"] * 255)}
                    end
                end

                writefile(file, http_service:JSONEncode(data))

                menu["new_notification"]("successfully saved theme "..flags["!name"], 1)

                local elements = theme_section["elements"]

                for i = 1, #elements do
                    local element = elements[i]
                    if element["dropdown_flag"] then
                        element:set_options(menu["get_theme_list"]())
                        break
                    end
                end
            end)

            create_click_connection(frame, themes_image, function()
                if actives["settings"] == theme_section then
                    close_settings(theme_section)
                else
                    open_settings(theme_section)
                end
            end)

            create_hover_connection(frame, themes_image, function()
                tween(themes_image, {Color = menu["colors"]["highlighted"]}, circular, out, 0.15)
            end, function()
                tween(themes_image, {Color = menu["colors"]["image"]}, circular, out, 0.15)
            end)
        end

        -- >> ( buttons )

        create_click_connection(frame, settings_image, function()
            if actives["settings"] == theme_section then
                close_settings(settings_section)
            else
                open_settings(settings_section)
            end
        end)

        create_hover_connection(frame, settings_image, function()
            tween(settings_image, {Color = menu["colors"]["highlighted"]}, circular, out, 0.15)
        end, function()
            tween(settings_image, {Color = menu["colors"]["image"]}, circular, out, 0.15)
        end)

        create_hover_connection(frame, search_image, function()
            if not searching then
                tween(search_image, {Color = menu["colors"]["highlighted"]}, circular, out, 0.15)
            end
        end, function()
            if not searching then
                tween(search_image, {Color = menu["colors"]["image"]}, circular, out, 0.15)
            end
        end)

        create_click_connection(frame, search_image, start_search)

        -- >> ( group creation )

        do
            local main = menu.create_group("main")
                main:create_tab("ragebot")
                main:create_tab("legitbot")

            local visuals = menu.create_group("visuals")
                visuals:create_tab("players")
                visuals:create_tab("general")
                visuals:create_tab("skins")

           local misc = menu.create_group("misc.")
                misc:create_tab("players")
                misc:create_tab("configs")
                misc:create_tab("addons")
                misc:create_tab("shop")
                misc:create_tab("main")
            menu.create_group("addons")
            menu["groups"]["addons"]:hide()
        end

        menu_references["addon_list"] = menu["groups"]["misc."]:create_panel_section("addons", "addon list", 1, 1, 0)
        menu_references["addon_panel"] = menu["groups"]["misc."]:create_section("addons", "addon panel", 2, 1, 0)

        menu_references["load_addon"] = menu_references["addon_panel"]:create_element({
            ["name"] = "load addon"
        }, {
            ["button"] = {
                ["fake"] = true
            }
        })

        menu_references["unload_addon"] = menu_references["addon_panel"]:create_element({
            ["name"] = "unload addon"
        }, {
            ["button"] = {
                ["fake"] = true
            }
        })

        menu_references["refresh_addon_list"] = menu_references["addon_panel"]:create_element({
            ["name"] = "refresh addon list"
        }, {
            ["button"] = {
                ["fake"] = true
            }
        })

        -- >> ( configs )

        local config_list = menu["groups"]["misc."]:create_panel_section("configs", "config list", 1, false, true)
        local config_info = menu["groups"]["misc."]:create_section("configs", "config info", 2, 0.3, 0)
        local config_editor = menu["groups"]["misc."]:create_section("configs", "config editor", 2, 0.7, 0.3)

        menu_references["config_list"] = config_list

        local config_author = config_info:create_element({
            ["name"] = "creator: "
        }, {
            ["info"] = {}
        })

        local config_last_updated = config_info:create_element({
            ["name"] = "last updated: "
        }, {
            ["info"] = {}
        })

        local config_name = config_editor:create_element({
            ["name"] = "config name"
        }, {
            ["textbox"] = {
                ["flag"] = "!config_name"
            }
        })

        local create_config = config_editor:create_element({
            ["name"] = "create config"
        }, {
            ["button"] = {
                ["fake"] = true
            }
        })

        local delete_config = config_editor:create_element({
            ["name"] = "delete config"
        }, {
            ["button"] = {
                ["confirmation"] = true,
                ["fake"] = true
            }
        })

        local update_config = config_editor:create_element({
            ["name"] = "update config"
        }, {
            ["button"] = {
                ["confirmation"] = true,
                ["fake"] = true
            }
        })

        local load_config = config_editor:create_element({
            ["name"] = "load config"
        }, {
            ["button"] = {
                ["confirmation"] = true,
                ["fake"] = true
            }
        })

        local refresh_config_list = config_editor:create_element({
            ["name"] = "refresh config list"
        }, {
            ["button"] = {
                ["fake"] = true
            }
        })

        create_connection(config_list["on_selection_change"], function(config)
            local config = config or "AbbbbAzbbbbA12z"
            local path = "juju recode/configs/"..config..".cfg"
            local data = nil
            if isfile(path) then
                data = menu["get_config_data"](readfile(path))
            end
            if not data then
                config_name:set_visible(true)
                create_config:set_visible(true)
                load_config:set_visible(false)
                update_config:set_visible(false)
                delete_config:set_visible(false)
                config_author:set_visible(false)

                config_last_updated:set_visible(false)
                refresh_config_list:set_visible(true)
            else
                config_name:set_visible(false)
                create_config:set_visible(false)
                load_config:set_visible(true)
                update_config:set_visible(true)
                delete_config:set_visible(true)
                refresh_config_list:set_visible(false)
                config_last_updated:set_visible(true)
                config_last_updated:set_info("Text", data["date"])

                local author = data["author"]
                local username = nil

                if author and tonumber(author) then
                    local s, data = pcall(function()
                        local body = request({
                            ["Url"] = "https://discord-lookup-api-pied.vercel.app/v1/user/"..author,
                            ["Method"] = "GET",
                            ["Headers"] = {
                                ["User-Agent"] = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
                                ["Accept"] = "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
                                ["Accept-Language"] = "en-US,en;q=0.9",
                                ["Connection"] = "keep-alive",
                                ["Referer"] = "https://www.google.com/",
                                ["DNT"] = "1",
                                ["Upgrade-Insecure-Requests"] = "1"
                            }
                        })

                        if body and body["StatusCode"] == 200 then
                            return http_service:JSONDecode(body["Body"])
                        end
                    end)
                    username = (s and data) and "@"..data["username"] or "failed to fetch"
                    config_author:set_visible(true)
                    config_author:set_info("Text", username)
                else
                    config_author:set_visible(false)
                    config_author:set_info("Text", "")
                end
            end
        end)

        create_connection(create_config["on_clicked"], function()
            local selected_config = flags["!config_name"]

            if selected_config and tostring(selected_config) and #selected_config > 0 then
                menu["save_config"](selected_config)

                config_list:add_item({
                    ["text"] = selected_config,
                    ["icons"] = {
                        config_image_data
                    }
                })

                menu["new_notification"](
                    "successfully created config "..selected_config,
                    1
                )
            end
        end)

        create_connection(refresh_config_list["on_clicked"], function()
            local elements = config_list["elements"]
            for _, element in elements do
                config_list:remove_item(element["name"], true)
                elements[_] = nil
            end

            local configs = menu["get_config_list"]()
            local current_autoload = menu["autoload"]

            for i = 1, #configs do
                local config = configs[i]
                config_list:add_item({
                    ["text"] = config,
                    ["icons"] = current_autoload == config and {
                        autoload,
                        config_image_data
                    } or {
                        config_image_data
                    }
                })
            end
        end)

        create_connection(delete_config["on_clicked"], function()
            local selected_config = config_list["selected"]["name"]

            if selected_config and tostring(selected_config) and #selected_config > 0 then
                config_list:remove_item(selected_config)
                delfile("juju recode/configs/"..selected_config..".cfg")
                menu["new_notification"](
                    "successfully deleted config "..selected_config,
                    1
                )
            end
        end)

        create_connection(update_config["on_clicked"], function()
            local selected_config = config_list["selected"]["name"]

            if selected_config and tostring(selected_config) and #selected_config > 0 then
                menu["save_config"](selected_config)
                menu["new_notification"](
                    "successfully updated config "..selected_config,
                    1
                )
            end
        end)

        create_connection(load_config["on_clicked"], function()
            local selected_config = config_list["selected"]["name"]

            if selected_config and tostring(selected_config) and #selected_config > 0 then
                menu["load_config"](selected_config)
                menu["new_notification"](
                    "successfully loaded config "..selected_config,
                    1
                )
            end
        end)

        for _, config in menu.get_config_list() do
            config_list:add_item({
                ["text"] = config,
                ["icons"] = menu["autoload"] == config and {
                    autoload,
                    config_image_data
                } or {
                    config_image_data
                }
            })
        end

        config_author:set_visible(false)
        update_config:set_visible(false)
        config_last_updated:set_visible(false)
        delete_config:set_visible(false)
        load_config:set_visible(false)
    end

    -- > ( loading / unloading )

    do
        local unload = getgenv()["_JUJU"]

        if unload then
            unload()
        end

        local env = getgenv()
        local old_drawing = env["fake_drawing"]

        local metatables = {}

        local real = getrawmetatable
        env["_OG"] = real
        env["getrawmetatable"] = newcclosure(function(instance)
            local mt = real(instance)
            metatables[instance] = mt

            return mt
        end)

        getrawmetatable = env["getrawmetatable"]

        env["_JUJU"] = function()
            env["_JUJU"] = nil

            for _, group in menu["groups"] do
                for _, tab in group["tabs"] do
                    for _, section in tab["sections"] do
                        local elements = section["elements"]
                        for i = 1, #elements do
                            local element = elements[i]

                            if element["toggle_flag"] then
                                element:set_toggle(false)
                            end
                        end
                    end
                end
            end

            for _, settings in menu["settings"] do
                local elements = settings["elements"]
                for i = 1, #elements do
                    local element = elements[i]

                    if element["toggle_flag"] then
                        element:set_toggle(false)
                    end
                end
            end

            for i = 1, #connections do
                connections[i]:Disconnect()
            end

            context_action_service:UnbindAction(context_action_click)
            context_action_service:UnbindAction(context_action_typing)
            context_action_service:UnbindCoreAction(context_action_typing_core)
            context_action_service:UnbindAction(context_action_scroll)

            env["getrawmetatable"] = real

            for instance, mt in metatables do
                setrawmetatable(instance, mt)
            end

            old_drawing["_UNLOAD"]()
        end

        -- >> ( data )

        local s, data = pcall(function()
            return http_service:JSONDecode(readfile("juju recode/data.dat"))
        end)

        if s and data then
            local notifications = data["notifications"]
            local autoload_config = data["autoload"]
            local favorites = data["favorites"]
            local theme = data["theme"]
            local hide_on_load = data["hide_on_load"]

            menu["hide_on_load"] = hide_on_load

            pop_menu(true)

            if not hide_on_load then
                pop_menu()
            end

            menu["theme"] = theme or ""
            menu["favorites"] = favorites or {}
            menu["autoload"] = autoload_config or nil
            do_notifications = notifications or notifications == nil or false
            menu_references["notifications"]:set_toggle(do_notifications)
            menu_references["hide_on_load"]:set_toggle(hide_on_load)

            if theme then
                menu:load_theme(theme)
            end
            
            if autoload_config then
                menu_references["config_list"]:add_icon(autoload_config, autoload)
            end
        else
            writefile("juju recode/data.dat", http_service:JSONEncode({
                ["notifications"] = do_notifications,
                ["favorites"] = {},
                ["hide_on_load"] = false,
                ["theme"] = "",
            }))
        end
    end
end

-- > ( cheat signals )

local signals = {
    ["on_local_character_description_changed"] = signal["new"](),
    ["on_player_character_added"] = signal["new"](),
    ["on_player_health_changed"] = signal["new"](),
    ["on_player_status_changed"] = signal["new"](),
    ["on_player_armor_changed"] = signal["new"](),
    ["on_player_tool_equipped"] = signal["new"](),
    ["on_player_bullet_fired"] = signal["new"](),
    ["on_local_bullet_confirmed"] = signal["new"](),
    ["on_legitbot_target_changed"] = signal["new"](),
    ["on_ragebot_target_changed"] = signal["new"](),
    ["on_local_armor_changed"] = signal["new"](),
    ["on_local_health_changed"] = signal["new"](),
    ["on_local_tool_equipped"] = signal["new"](),
    ["on_local_bullet_failed"] = signal["new"](),
    ["on_local_bullet_fired"] = signal["new"](),
    ["on_player_knocked"] = signal["new"](),
    ["on_local_knocked"] = signal["new"](),
    ["on_local_reload"] = signal["new"](),
    ["on_player_added"] = signal["new"](),
    ["on_player_died"] = signal["new"](),
    ["on_local_character_loaded"] = signal["new"](),
    ["on_local_character_added"] = signal["new"](),
    ["on_bounty_placed"] = signal["new"](),
    ["on_shot_at"] = signal["new"](),
    ["on_player_character_added_quick"] = signal["new"](),
    ["on_rpg_fired"] = signal["new"](),
    ["on_player_role_changed"] = signal["new"](),
    ["on_local_ammo_changed"] = signal["new"](),
    ["on_stomp"] = signal["new"](),
    ["on_vehicle_sat_in"] = signal["new"](),
}

local body_parts = {
    "Head",
    "UpperTorso",
    "LowerTorso",
    "LeftUpperArm",
    "LeftLowerArm",
    "LeftHand",
    "RightUpperArm",
    "RightLowerArm",
    "RightHand",
    "LeftUpperLeg",
    "LeftLowerLeg",
    "LeftFoot",
    "RightUpperLeg",
    "RightLowerLeg",
    "RightFoot"
}

-- > ( cheat variables )

local workspace = game:GetService("Workspace")
    local camera = workspace["CurrentCamera"]
local replicated_storage = cloneref(game:GetService("ReplicatedStorage"))
local teleport_service = cloneref(game:GetService("TeleportService"))
local run_service = cloneref(game:GetService("RunService"))
local core_gui = cloneref(game:GetService("CoreGui"))

local find_first_child_of_class = workspace["FindFirstChildOfClass"]
local world_to_viewport_point = camera["WorldToViewportPoint"]
local find_first_child = workspace["FindFirstChild"]
local wait_for_child = workspace["WaitForChild"]
local get_children = workspace["GetChildren"]
local render_stepped = run_service["RenderStepped"]
local render_stepped_wait = render_stepped["Wait"]
local vector3_new = Vector3["new"]
local cframe_new = CFrame["new"]
local vector3_zero = Vector3["zero"]
local cos = math["cos"]
local abs = math["abs"]
local pi = math["pi"]

local last_description = nil
local inventory = nil
local legitbot_target = nil
local ragebot_target = nil
local custom_ragebot_aim_position = nil
local ragebot_aim_position = nil
local local_knocked = false
local ragebot_force_position = nil
local in_void = false
local stomping = false

local real_drawing = getgenv()["Drawing"]
local fake_drawing = getgenv()["fake_drawing"]

local event = replicated_storage["MainEvent"]
local clone = workspace["Clone"]
local bush = workspace["Bush"]
local vehicles = workspace["Vehicles"]

local ignored = workspace["Ignored"]
local destroy = game["Destroy"]

local ragebot_targets = {}
local player_data = {}
local local_guns = {}
local anti_aim = {}


-- > ( cheat functions )

local create_real_drawing = LPH_NO_VIRTUALIZE(function(class, properties)
    local object = real_drawing["new"](class)

    for property, value in properties do
        object[property] = value
    end

    return object
end)

local create_fake_drawing = LPH_NO_VIRTUALIZE(function(class, properties)
    local object = fake_drawing["new"](class)

    for property, value in properties do
        object[property] = value
    end

    return object
end)

local new_notification = menu["new_notification"]
local set_ragebot_target = nil
local set_legitbot_target = nil
local is_defensive_active = nil
local vehicle_spawner = nil
local vehicle_blocked = nil
local get_vehicle = nil

do 
    vehicle_spawner = find_first_child(workspace, "VehicleSpawner")

    if vehicle_spawner then
        for _, descendant in vehicle_spawner["GetDescendants"](vehicle_spawner) do
            if descendant["ClassName"] == "ProximityPrompt" then
                vehicle_spawner = {descendant, descendant["Parent"]["CFrame"] - vector3_new(0, 5, 0)}
                break
            end
        end
    end
end

local get_bullet_result = nil
local purchase_item = nil
local force_aim_position = nil

-- > ( client stuff )

local local_server_position = cframe_new()
local local_client_position = cframe_new()
local local_bought_count = 0
local local_character = local_player["Character"]
local local_reloading = false
local local_armor = 0
local local_parts = {}
local local_tool = nil
local local_cash = 0
local local_ping = 50
local local_fps = 200
local local_gun = nil
local local_following = false

local purchasing = nil
local vehicle_data = {}
local vehicle = nil

do
    local function apply_hrp_fix(hrp)
        local old = getrawmetatable(hrp)
        local old_index = old["__index"]

        local new = {
            ["__index"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, index)
                if not checkcaller() and self and index == "CFrame" and (#anti_aim ~= 0 or purchasing) and not vehicle then
                    return local_client_position
                end
                return old_index(self, index)
            end))
        }

        for _, v in old do
            if not new[_] then
                new[_] = v
            end
        end

        setrawmetatable(hrp, new)
    end

    local function hook_humanoid(humanoid)
        local old = getrawmetatable(humanoid)
        local old_index = old["__index"]
        local old_newindex = old["__newindex"]

        local s = {
            ["WalkSpeed"] = humanoid["WalkSpeed"],
            ["JumpPower"] = humanoid["JumpPower"]
        }

        local new = {
            ["__index"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, index)
                if not checkcaller() and self and index == "WalkSpeed" or index == "JumpPower" then
                    return s[index]
                end
                return old_index(self, index)
            end)),
            ["__newindex"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, index, value)
                if not checkcaller() and self then
                    if index == "WalkSpeed" and flags["remove_slowdowns"] and value < 16 then
                        s[index] = value
                        if flags["remove_slowdowns"] then
                            return
                        end
                    elseif index == "JumpPower" then
                        if flags["remove_jump_cooldown"] and value == 0 then
                            s[index] = 0
                            return
                        else
                            value = flags["jump_power"] and flags["jump_power_value"] or value
                        end
                    end
                end
                return old_newindex(self, index, value)
            end))
        }

        for _, v in old do
            if not new[_] then
                new[_] = v
            end
        end

        setrawmetatable(humanoid, new)
    end

    local ammo_signal = signals["on_local_ammo_changed"]

    local on_child_added = LPH_NO_VIRTUALIZE(function(child)
        local_parts[child["Name"]] = child
        if child["ClassName"] == "Tool" then
            local handle = find_first_child(child, "Handle")

            if handle then
                local_tool = child

                signals["on_local_tool_equipped"]:Fire(child)

                local range = find_first_child(child, "Range")
                local ammo = find_first_child(child, "Ammo")

                local new_local_gun = {}

                if range then
                    local_gun = range["Value"]

                    new_local_gun = {handle, local_gun, ammo["Value"]}
                end

                if ammo and range then
                    new_local_gun[4] = create_connection(ammo:GetPropertyChangedSignal("Value"), function()
                        local ammo = ammo["Value"]
                        new_local_gun[3] = ammo
                        ammo_signal:Fire(local_guns[handle], ammo)
                    end)

                    local_guns[handle] = new_local_gun
                end
            end
        end
    end)

    local on_child_removed = LPH_NO_VIRTUALIZE(function(child)
        local_parts[child["Name"]] = nil
        if child["ClassName"] == "Tool" then
            signals["on_local_tool_equipped"]:Fire(false, child)

            local handle = find_first_child(child, "Handle")

            if handle then
                local old = local_guns[handle]
                if old then
                    local connection = old[4]
                    if connection then
                        connection:Disconnect()
                    end
                    local_guns[handle] = nil
                end
            end

            local found = nil
            for _, b in local_guns do
                found = _
                break
            end

            local_gun = found and local_gun or nil
            local_tool = found and found["Parent"] or nil
        end
    end)

    local on_character_added = LPH_NO_VIRTUALIZE(function(character)
        vehicle = nil
        local_gun = nil
        local_tool = nil
        local_guns = {}

        local hrp = wait_for_child(character, "HumanoidRootPart", 5)

        apply_hrp_fix(hrp)

        local_parts = {
            ["HumanoidRootPart"] = hrp
        }

        local humanoid = wait_for_child(character, "Humanoid", 5)

        create_connection(humanoid:GetPropertyChangedSignal("Health"), function()
            signals["on_local_health_changed"]:Fire(humanoid["Health"])
        end)

        hook_humanoid(humanoid)

        wait_for_child(character, "Head", 5)

        local children = get_children(character)
        for i = 1, #children do
            local child = children[i]
            local_parts[child["Name"]] = child

            if child["ClassName"] == "Tool" then
                on_child_added(child)
            end
        end

        create_connection(character["ChildAdded"], on_child_added)
        create_connection(character["ChildRemoved"], on_child_removed)

        local_character = character

        signals["on_local_character_added"]:Fire(1)

        wait_for_child(character, "FULLY_LOADED_CHAR", 9e9)

        local body_effects = wait_for_child(character, "BodyEffects", 9e9)
        local knocked = wait_for_child(body_effects, "K.O", 9e9)
        local reload = wait_for_child(body_effects, "Reload", 9e9)
        local armor = wait_for_child(body_effects, "Armor", 9e9)

        create_connection(armor:GetPropertyChangedSignal("Value"), function()
            local_armor = armor["Value"]
            signals["on_local_armor_changed"]:Fire(local_armor)
        end)

        create_connection(knocked:GetPropertyChangedSignal("Value"), function()
            signals["on_local_knocked"]:Fire(knocked["Value"])
            local_knocked = knocked["Value"]
        end)

        create_connection(reload:GetPropertyChangedSignal("Value"), function()
            signals["on_local_reload"]:Fire(local_tool)
            local_reloading = reload["Value"]
        end)

        local_reloading = false
        local_armor = armor["Value"]
        local_knocked = knocked["Value"]

        signals["on_local_character_loaded"]:Fire(true)
    end)

    if local_character then
        spawn(on_character_added, local_character)
    end

    create_connection(local_player["CharacterAdded"], on_character_added)
end

-- >> ( vehicles )

do
    local name = local_player["Name"]
    local signal = signals["on_vehicle_sat_in"]
        
    local on_vehicle_removed = LPH_JIT_MAX(function(new_vehicle, new_player)
        for i = 1, #vehicle_data do
            if vehicle_data[i][1] == new_vehicle then
                local player = new_player or vehicle_data[3]

                if player == local_player then
                    vehicle = nil
                    signal["Fire"](signal, nil)
                    if new_player then
                        vehicle_blocked = true
                        delay(5, function()
                            vehicle_blocked = false
                        end)
                    end
                elseif player then
                    local data = player_data[player]

                    if data then
                        data[19] = nil
                    end
                end

                remove(vehicle_data, i)
                break
            end
        end
    end)

    local on_vehicle_added = LPH_JIT_MAX(function(new_vehicle)
        local data = {
            new_vehicle,
            wait_for_child(new_vehicle, "Ride", 9e9),
            find_first_child(players_service, new_vehicle["Name"])
        }
        vehicle_data[#vehicle_data+1] = data

        local humanoid = nil

        new_vehicle["GetPropertyChangedSignal"](new_vehicle, "Name"):Connect(function()
            local player = find_first_child(players_service, new_vehicle["Name"])
            local old_player = data[3]

            if old_player then
                local data = player_data[old_player]

                if data then
                    data[19] = nil
                end
            end

            if player == local_player then
                vehicle = new_vehicle
                signal["Fire"](signal, vehicle)
            elseif data[3] == local_player then
                vehicle = nil
                signal["Fire"](signal, nil)
            end
            
            if player then
                local data = player_data[player]

                if data then
                    data[19] = new_vehicle
                end
            end

            data[3] = player
        end)

        humanoid = wait_for_child(new_vehicle, "Humanoid", 5)

        if humanoid then
            local health = humanoid["GetAttribute"](humanoid, "Health")

            if health and health <= 0 then
                on_vehicle_removed(new_vehicle, data)
            end

            create_connection(humanoid["GetAttributeChangedSignal"](humanoid, "Health"), function()
                local health = humanoid["GetAttribute"](humanoid, "Health")

                if health and health <= 0 then
                    on_vehicle_removed(new_vehicle, data[3])
                end
            end)
        end
    end)

    create_connection(vehicles["ChildAdded"], on_vehicle_added)
    create_connection(vehicles["ChildRemoved"], on_vehicle_removed)

    for _, part in get_children(vehicles) do
        spawn(on_vehicle_added, part)
    end
end

-- > ( hit detection )

local shot_count = 0

do
    -- >> ( variables )

    local setthreadidentity = setthreadidentity
    local getnamecallmethod = getnamecallmethod
    local checkcaller = checkcaller
    local tostring = tostring

    local older_health = nil
    local older_data = nil

    -- >> ( event setup )

    get_bullet_result = LPH_JIT_MAX(function(player, part, old_server_position, aim_position, target_velocity, did_defensive)
        setthreadidentity(8)

        local data = player_data[player]

        if not data then
            return
        end

        local old_count = shot_count
        local old_health = data[9]

        local start = clock()
        repeat wait() until clock() - start > 0.25 + local_ping/1000 or shot_count > old_count

        if data and older_health ~= data[9] or older_data ~= data then
            older_health = data[9]
            older_data = data

            local message = old_server_position and " (pred miss: "..tostring(round((aim_position-part["Position"])["Magnitude"], 1))..") (velocity: "..tostring(round((target_velocity or vector3_zero)["Magnitude"], 1))..(did_defensive and ") (defensive: true)" or ") (defensive: false)")

            if shot_count == old_count then
                return signals["on_local_bullet_failed"]:Fire(player, part, not local_parts["Head"] and "death" or "unknown"..(message or ""), shot_count)
            end

            local new_health = data[9]

            if new_health < old_health then
                return signals["on_local_bullet_confirmed"]:Fire(player, part, tostring(floor(new_health-old_health)), shot_count, message)
            else
                return signals["on_local_bullet_failed"]:Fire(player, part, "unknown"..(message or ""), shot_count)
            end
        end
    end)

    -- >> ( remote hook )

    local game_on_client_event = nil

    for _, v in getconnections(event["OnClientEvent"]) do
        local func = v["Function"]
        if func then
            local info = getinfo(func)
            if info then
                for _, constant in getconstants(func) do
                    if tostring(constant) == "ShootingRecoil" then
                        game_on_client_event = func
                        v:Disable()
                        break
                    end
                end
            end
        end
    end

    local old = getrawmetatable(event)
    local old_namecall = old["__namecall"]
    local o_i = old["__index"]
    local f = {
        Connect = function(_, callback)
            game_on_client_event = callback
            return {
                Disconnect = function() end
            }
        end
    }

    f["connect"] = f["Connect"]

    local last_client_bullet_position = vector3_zero
    local last_client_bullet_shooter = nil
    local on_shot_at = signals["on_shot_at"]

    create_connection(event["OnClientEvent"], LPH_JIT_MAX(function(packet, ...)
        if packet == "ShootingRecoil" then
            shot_count += 1
            if flags["remove_recoil"] then
                return
            end
        elseif packet == "FLASHBANG" and flags["remove_flashbang"] then
            return
        elseif packet == "ClientBullet" then
            local shooter, v350, v351, position, v353, v354 = ...
            last_client_bullet_position = position
            last_client_bullet_shooter = find_first_child(players_service, shooter["Name"])
        elseif packet == "ShotFrom" and last_client_bullet_shooter then
            setthreadidentity(8)
            on_shot_at:Fire(last_client_bullet_shooter, last_client_bullet_position)
            last_client_bullet_shooter = nil
            last_client_bullet_position = nil
        end
        if game_on_client_event then
            setthreadidentity(4)
            return game_on_client_event(packet, ...)
        end
    end))

    local new = {
        ["__namecall"] = newcclosure(LPH_JIT_MAX(function(self, ...)
            setthreadidentity(4)
            if getnamecallmethod() == "FireServer" then
                local args = {...}
                local packet = args[1]
                
                if packet == "ShootGun" then
                    if ragebot_aim_position then
                        local handle = args[2]

                        local pos = ragebot_aim_position + vector3_new(math_random(101,105)/100,0.008,-0.008)
                        local origin = local_server_position["p"] + vector3_new(0.004,3.0208,-0.048)
                
                        local dir = (origin-pos)["Unit"]
                        local Magnitude = dir["Magnitude"]
                        local part = ragebot_target[4][flags["ragebot_hitbox"][1] == "head" and "Head" or "UpperTorso"]
                        
                        spawn(get_bullet_result, ragebot_target[2], part)

                        return old_namecall(self, "ShootGun", handle, origin, pos, part, (Magnitude <= 0 or Magnitude ~= Magnitude) and (handle["Position"]-pos)["Unit"] or dir)
                    end

                    local part = args[5]

                    if part then
                        local parent = part["Parent"]

                        if parent then
                            local player = find_first_child(players_service, parent["Name"]) or find_first_child(players_service, parent["Parent"]["Name"])

                            if player then
                                if parent["GetAttribute"](parent, "1") then
                                    part = player_data[player][4][part["Name"]]
                                    args[5] = part
                                    spawn(get_bullet_result, player, part)
                                    return old_namecall(self, unpack(args))
                                end

                                spawn(get_bullet_result, player, part)
                            end
                        end
                    end
                elseif packet == "UpdateCursorImage" and flags["unlock_custom_crosshair"] then
                    local value = args[2]
                    inventory["Parent"]["CursorImage"]["Value"] = value
                    return
                elseif packet == "CHECKER_4" or packet == "CalculateShootClient" then
                    print(packet)
                    return
                end
            end
            return old_namecall(self, ...)
        end)),
        ["__index"] = newcclosure(function(s, i)
            if i == "OnClientEvent" and not getfenv(0).closeTop25Button then
                return f
            end
            return o_i(s, i)
        end)
    }

    for _, v in old do
        if not new[_] then
            new[_] = v
        end
    end

    setrawmetatable(event, new)
end

-- > ( shop )

do
    local item_section = menu["groups"]["misc."]:create_panel_section("shop", "items", 1, true)
    menu_references["items_section"] = item_section
    menu_references["panel_section"] = menu["groups"]["misc."]:create_section("shop", "panel", 2, 0.65)
    menu_references["theme_section"] = menu["groups"]["misc."]:create_section("shop", "settings", 2, 0.35, 0.65)

    local guns = {}

    LPH_JIT_MAX(function()
        local armor_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADp1fY4ytpsegAAADxJREFUKFNjZICC/0AAZaIARiAA0UxgHhEArBqXaTAAMpVoEwdQIdHBA1cIAuiKYYqwApBiEIByoYCBAQDF5RgHWWRzJgAAAABJRU5ErkJggg==")
        local food_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADdYAAA3WAZBveZwAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAiF8BAOgDAACIXwEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAAC1cWHl18YwawAAADVJREFUKFNjZACC/0AAonEBRiAAM/AphMkxgXlAABKAAagQCoAYCQQ4FUCthZtICAwjhQwMACtDG/37O63ZAAAAAElFTkSuQmCC")
        local gun_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAADHcBAOgDAAAMdwEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADu6i0YxswAAgAAAEZJREFUKFONzVkOABAMANFy/ztjpG0stbyfkoxK8lAa5jW0CMdwiqBnNwawZgpPEbLOLVr1F1E0bkP6ieBfmyhybIVeAyIVEbcn/IO0R3UAAAAASUVORK5CYII=")
        local misc_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAE2MAABNjAWKDyE4AAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAhewBAOgDAACF7AEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAABl3jZUCVu4HgAAAExJREFUKFOlzksOACEIA1Dw/ndWSoAUPyvfZiBTrSpkmhidmhilhj2UMjx8I/gBsdYFrZpxQzvJ9pB/fSO3EBxvTBz6g2qItTyrO5EF1WUgDM661T4AAAAASUVORK5CYII=")

        local gun_names = get_children(wait_for_child(wait_for_child(replicated_storage, "SkinModules", 9e9), "GunModels", 9e9))

        for i = 1, #gun_names do
            local name = string["lower"](gun_names[i]["Name"]:match("%[(.-)%]"))
            if name ~= "knife" then
                guns[name] = true
            end
        end

        local parts = get_children(ignored["Shop"])

        for i = 1, #parts do
            local shop = parts[i]
            local item = string["lower"](shop["Name"])

            local ammo, name, price = item:match("^(%d*)%s*%[(.-)%]%s*[%-%=]%s*%$(%d+)")

            if price then
                price = tonumber(price)
            end

            if name ~= "flashlight" and name ~= "flowers" and name ~= "antibodies" and name and price and price > 0 then
                local head = find_first_child(shop, "Head")
                local click_detector = find_first_child_of_class(shop, "ClickDetector")

                if head and click_detector then
                    local old = shops[name]
                    local show = old and (old[2] > price)
                    if not old or show then
                        if show then
                            item_section:remove_item(name)
                        end

                        shops[name] = {
                            head["Position"],
                            price,
                            click_detector,
                            tonumber(ammo) or false,
                            false,
                            name,
                            head
                        }
                    end
                end
            end
        end

        for item, shop in shops do
            if item:find("armor") then
                shop[5] = 1
                item_section:add_item({
                    ["text"] = item,
                    ["icons"] = {
                        armor_image_data
                    },
                    ["favoriting"] = true
                })
            end
        end

        for item, shop in shops do
            if guns[item] then
                shop[5] = 1
                item_section:add_item({
                    ["text"] = item,
                    ["icons"] = {
                        gun_image_data
                    },
                    ["favoriting"] = true
                })
            end
        end

        for item, shop in shops do
            if shop[2] < 13 then
                shop[5] = 1
                item_section:add_item({
                    ["text"] = item,
                    ["icons"] = {
                        food_image_data
                    },
                    ["favoriting"] = true
                })
            end
        end

        for item, shop in shops do
            if not shop[5] and not shop[4] then
                item_section:add_item({
                    ["text"] = item,
                    ["icons"] = {
                        misc_image_data
                    },
                    ["favoriting"] = true
                })
            end
        end
    end)()

    -- >> ( purchasing )

    local new_bought_count = 0
    local purchase_count = 1
    local start_time = clock()
    local old_equipped = {}

    local position = nil
    local detector = nil
    local is_ammo = false

    local purchase_function = nil; purchase_function = LPH_JIT_MAX(function(dt, hrp)
        local stop = false
        if flags["safe_purchasing"] and purchasing then
            local avoid_enemy = false
            local avoid_target = false

            local shop_position = purchasing[1]
            for _, option in flags["safe_purchasing_avoid_statuses"] do
                if option == "enemy" then
                    avoid_enemy = true
                elseif option == "target" then
                    avoid_target = true
                end
            end

            for player, data in player_data do
                if not data[7] and not data[18] then
                    local status = data[1]

                    if (status == 3 and avoid_enemy) or (ragebot_target == data and avoid_target) then
                        local hrp = data[4]["HumanoidRootPart"]

                        if hrp and (shop_position-hrp["Position"])["magnitude"] < 50 then
                            stop = true
                            break
                        end
                    end
                end
            end
        end
        
        local didnt_buy = local_bought_count ~= new_bought_count
        local ping = local_ping/1000
        local skip = purchasing and purchasing[6]:find("armor") or not purchasing
        
        if not stop and (didnt_buy and hrp and clock() - start_time < (local_reloading and 2 + ping * 2 or ping*2 + purchase_count*0.36) and (not is_ammo or not local_reloading)) then
            if not skip then
                for gun, data in local_guns do
                    local gun = gun["Parent"]
                    if gun and gun["Parent"] == local_character then
                        setscriptable(gun, "Parent", true)
                        gun["Parent"] = local_player["Backpack"]
                    end
                end
            end

            fireclickdetector(detector)
            local old_cframe = hrp["CFrame"]

            if not in_void then
                hrp["CFrame"] = cframe_new(position - vector3_new(0,8.8,0))
            end

            render_stepped_wait(render_stepped)
            hrp["CFrame"] = old_cframe
        else
            local old_purchasing = purchasing

            spawn(function()
                wait(local_ping/250)
                if local_bought_count < new_bought_count then
                    new_notification(
                        stop and "failed to purchase "..old_purchasing[6].." (due to safe purchasing)" or "failed to purchase "..old_purchasing[6],
                        3
                    )
                else
                    new_notification(
                        "successfully purchased "..old_purchasing[6],
                        1
                    )
                end
            end)

            for i = 1, #anti_aim do
                if anti_aim[i] == purchase_function then
                    remove(anti_aim, i)
                    purchasing = false
                    break
                end
            end

            if not skip then
                if #old_equipped > 0 then
                    for _, tool in old_equipped do
                        setscriptable(tool, "Parent", true)
                        tool["Parent"] = local_character
                    end
                end
            end
        end
    end)

    purchase_item = LPH_JIT_MAX(function(item, ammo)
        local shop = shops[item]
        old_equipped = {}
        if shop then
            if purchasing then
                if not item:find("armor") or purchasing[6]:find("armor") then
                    return
                end
            end

            local item = shop[6]

            new_notification(
                "attempting to purchase "..item,
                2
            )

            start_time = clock()
            local found = false

            for i = 1, #anti_aim do
                if anti_aim[i] == purchase_function then
                    found = true
                end
            end

            is_ammo = item:find("ammo")
            position, detector = shop[1], shop[3]
            new_bought_count = ammo and local_bought_count + ammo or local_bought_count + 1
            purchase_count = ammo or 1
            purchasing = shop
            old_equipped = {local_tool}
            for gun, data in local_guns do
                old_equipped[#old_equipped+1] = gun["Parent"]
            end

            if not found then
                anti_aim[#anti_aim+1] = purchase_function
            end
        end
    end)

    local item_cost = menu_references["panel_section"]:create_element({["name"] = "cost"}, {["info"] = {}})
    item_cost:set_visible(false)
    item_cost:set_info("Color", color3_fromrgb(129, 173, 126))

    create_connection(menu_references["items_section"]["on_selection_change"], function(selected)
        if selected then
            local item = shops[selected]
            local has_ammo = shops[selected.." ammo"] ~= nil
            item_cost:set_info("Text", "$"..item[2])
            item_cost:set_visible(true)
            menu_references["purchase_item"]:set_visible(true)
            menu_references["purchase_ammo"]:set_visible(has_ammo)
            menu_references["ammo_amount"]:set_visible(has_ammo)
        else
            item_cost:set_visible(false)
            menu_references["purchase_item"]:set_visible(false)
            menu_references["purchase_ammo"]:set_visible(false)
            menu_references["ammo_amount"]:set_visible(false)
        end
    end)

    menu_references["purchase_item"] = menu_references["panel_section"]:create_element({["name"] = "purchase item"}, {["button"] = {}})
    create_connection(menu_references["purchase_item"]["on_clicked"], function()
        local selected = menu_references["items_section"]["selected"]["name"]
        if selected then
            local shop = shops[selected]
            if local_cash > shop[2] then
                purchase_item(selected)
            else
                new_notification(
                    "failed to purchase item due to insufficient funds",
                    3
                )
            end
        end
    end)
    menu_references["purchase_item"]:set_visible(false)

    menu_references["ammo_amount"] = menu_references["panel_section"]:create_element({["name"] = "ammo amount"}, {["slider"] = {["min"] = 1, ["max"] = 50, ["suffix"] = "x", ["flag"] = "ammo_amount", ["prefix"] = "", ["default"] = 1}})
    menu_references["ammo_amount"]:set_visible(false)

    menu_references["purchase_ammo"] = menu_references["panel_section"]:create_element({["name"] = "purchase ammo"}, {["button"] = {}})
    menu_references["purchase_ammo"]:set_visible(false)

    create_connection(menu_references["purchase_ammo"]["on_clicked"], LPH_JIT_MAX(function()
        local selected = menu_references["items_section"]["selected"]["name"]
        if selected then
            local ammo_name = selected.." ammo"
            local shop = shops[ammo_name]
            local ammo = flags["ammo_amount"]
            if local_cash > shop[2] * ammo then
                local has = false
                local name = selected.."]"
                for _, tool in get_children(local_player["Backpack"]) do
                    if string.find(tool["Name"]:lower(), name, 1, true) then
                        has = true
                        break
                    end
                end

                if local_tool and not has then
                    has = local_tool["Name"]:lower():find(selected)
                end

                if has then
                    purchase_item(ammo_name, ammo)
                else
                    new_notification(
                        "failed to purchase ammo due to missing gun",
                        3
                    )
                end
            else
                new_notification(
                    "failed to purchase ammo due to insufficient funds",
                    3
                )
            end
        end
    end))
end

-- > ( movement )

do
    menu_references["movement_section"] = menu["groups"]["misc."]:create_section("main", "movement", 1, 0.6, 0)

    -- >> ( removals )

    menu_references["remove_jump_cooldown"] = menu_references["movement_section"]:create_element({["name"] = "remove jump cooldown"}, {["toggle"] = {["flag"] = "remove_jump_cooldown"}})
    menu_references["remove_slowdowns"] = menu_references["movement_section"]:create_element({["name"] = "remove slowdowns"}, {["toggle"] = {["flag"] = "remove_slowdowns"}})

    -- >> ( jump power )

    menu_references["jump_power"] = menu_references["movement_section"]:create_element({["name"] = "jump power"}, {["toggle"] = {["flag"] = "jump_power"}})
    menu_references["jump_power_settings"] = menu_references["jump_power"]:create_settings()
    menu_references["jump_power_value"] = menu_references["jump_power_settings"]:create_element({["name"] = "power"}, {["slider"] = {["flag"] = "jump_power_value", ["min"] = 0, ["max"] = 1000, ["default"] = 50}})

    -- >> ( anti sit )

    menu_references["anti_trip"] = menu_references["movement_section"]:create_element({["name"] = "anti trip"}, {["toggle"] = {["flag"] = "anti_trip"}})

    local anti_trip_sat_connection = nil
    local anti_trip_character_added_connection = nil

    local do_anti_trip = LPH_NO_VIRTUALIZE(function()
        if anti_trip_sat_connection then
            anti_trip_sat_connection:Disconnect()
            anti_trip_sat_connection = nil
        end

        local humanoid = local_parts["Humanoid"]

        if humanoid then
            humanoid:SetStateEnabled(Enum["HumanoidStateType"]["FallingDown"], false)
        end
    end)

    create_connection(menu_references["anti_trip"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
        if anti_trip_sat_connection then
            anti_trip_sat_connection:Disconnect()
            anti_trip_sat_connection = nil
        end

        if anti_trip_character_added_connection then
            anti_trip_character_added_connection:Disconnect()
            anti_trip_character_added_connection = nil
        end

        local humanoid = local_parts["Humanoid"]

        if humanoid then
            humanoid:SetStateEnabled(Enum["HumanoidStateType"]["FallingDown"], true)
        end

        if value then
            anti_trip_character_added_connection = create_connection(signals["on_local_character_added"], do_anti_trip)

            if local_character then
                do_anti_trip()
            end
        end
    end))

    -- >> ( anti sit )

    menu_references["anti_sit"] = menu_references["movement_section"]:create_element({["name"] = "anti sit"}, {["toggle"] = {["flag"] = "anti_sit"}})

    local anti_sit_sat_connection = nil
    local anti_sit_character_added_connection = nil

    local do_anti_sit = LPH_NO_VIRTUALIZE(function()
        if anti_sit_sat_connection then
            anti_sit_sat_connection:Disconnect()
            anti_sit_sat_connection = nil
        end

        local humanoid = local_parts["Humanoid"]

        if humanoid then
            humanoid:SetStateEnabled(Enum["HumanoidStateType"]["Seated"], false)

            anti_sit_sat_connection = create_connection(humanoid:GetPropertyChangedSignal("Sit"), function()
                if humanoid["Sit"] then
                    delay(0, function()
                        humanoid["Sit"] = false
                        humanoid:SetStateEnabled(Enum["HumanoidStateType"]["Seated"], false)
                    end)
                end
            end)
        end
    end)

    create_connection(menu_references["anti_sit"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
        if anti_sit_sat_connection then
            anti_sit_sat_connection:Disconnect()
            anti_sit_sat_connection = nil
        end

        if anti_sit_character_added_connection then
            anti_sit_character_added_connection:Disconnect()
            anti_sit_character_added_connection = nil
        end

        local humanoid = local_parts["Humanoid"]

        if humanoid then
            humanoid:SetStateEnabled(Enum["HumanoidStateType"]["Seated"], true)
        end

        if value then
            anti_sit_character_added_connection = create_connection(signals["on_local_character_added"], do_anti_sit)

            if local_character then
                do_anti_sit()
            end
        end
    end))

    -- >> ( noclip )

    menu_references["noclip"] = menu_references["movement_section"]:create_element({["name"] = "noclip"}, {["toggle"] = {["flag"] = "noclip"}})

    local noclip_renderstepped_connection = nil

    local do_noclip = LPH_NO_VIRTUALIZE(function()
        for _, part in local_parts do
            local name = part["ClassName"]
            if name == "MeshPart" or name == "Part" then
                part["CanCollide"] = false
            end
        end
    end)

    create_connection(menu_references["noclip"]["on_toggle_change"], function(value)
        if noclip_renderstepped_connection then
            noclip_renderstepped_connection:Disconnect()
            noclip_renderstepped_connection = nil
        end

        if value then
            noclip_renderstepped_connection = create_connection(run_service["Stepped"], do_noclip)
        end
    end)

    -- >> ( speed )

    local is_key_down = user_input_service["IsKeyDown"]

    local w = Enum["KeyCode"]["W"]
    local s = Enum["KeyCode"]["S"]
    local space = Enum["KeyCode"]["Space"]
    local a = Enum["KeyCode"]["A"]
    local d = Enum["KeyCode"]["D"]

    local multiplier = 560
    local style = "normal"
    local running = Enum["HumanoidStateType"]["Running"]
    local jumping = Enum["HumanoidStateType"]["Jumping"]

    local slippery_velocity = vector3_zero
    local slippery_stop_in_air = true

    local do_speed = LPH_JIT_MAX(function(dt, hrp)
        if not hrp then
            return
        end

        local humanoid = local_parts["Humanoid"]

        if not humanoid then
            return
        end

		local move_direction = humanoid["MoveDirection"]

        if style == "normal" then
            hrp["CFrame"]+=((vector3_new(move_direction["X"],0,move_direction["Z"])*dt)*multiplier)
        elseif style == "bhop" then
            hrp["CFrame"]+=((vector3_new(move_direction["X"],0,move_direction["Z"])*dt)*multiplier)
            if humanoid:GetState() == running and (is_key_down(user_input_service, w) or is_key_down(user_input_service, s) or is_key_down(user_input_service, a) or is_key_down(user_input_service, d)) then
                humanoid:ChangeState(jumping)
            end
        elseif style == "minecraft" then
            hrp["CFrame"]+=((vector3_new(move_direction["X"],0,move_direction["Z"])*dt)*multiplier)
            if humanoid:GetState() == running and (is_key_down(user_input_service, w) or is_key_down(user_input_service, s) or is_key_down(user_input_service, a) or is_key_down(user_input_service, d)) then
                humanoid:ChangeState(jumping)
                hrp["Velocity"]*=vector3_new(1,1.5,1)
                wait(humanoid["JumpPower"]/500)
                hrp["Velocity"]*=vector3_new(1,-1.1,1)
            end
        else
            local old = hrp["Velocity"]
            local stop = (not slippery_stop_in_air or humanoid:GetState() == running)
            if move_direction["Magnitude"] > 0 and stop then
                slippery_velocity = slippery_velocity:Lerp(move_direction*dt*multiplier*150, 0.35 * get_value(tween_service, dt, exponential, out))*(1+dt)
            elseif not stop then
                slippery_velocity*=(1-(dt*4))
            end
            hrp["Velocity"] = vector3_new(slippery_velocity["X"], old["Y"], slippery_velocity["Z"])
        end
    end)

    menu_references["speed"] = menu_references["movement_section"]:create_element({["name"] = "speed"}, {["toggle"] = {["flag"] = "speed"}})
    menu_references["speed_settings"] = menu_references["speed"]:create_settings()
    menu_references["speed_value"] = menu_references["speed_settings"]:create_element({["name"] = "speed value"}, {["slider"] = {["default"] = 35, ["min"] = 0, ["max"] = 100, ["suffix"] = "%", ["flag"] = "speed_value", ["prefix"] = ""}})
    menu_references["speed_style"] = menu_references["speed_settings"]:create_element({["name"] = "style"}, {["dropdown"] = {["default"] = {"normal"}, ["options"] = {"minecraft", "slippery", "normal", "bhop"}, ["flag"] = "speed_style", ["requires_one"] = true}})
    menu_references["slippery_stop_in_air"] = menu_references["speed_settings"]:create_element({["name"] = "stop in air"}, {["toggle"] = {["default"] = true, ["flag"] = "slippery_stop_in_air"}})
    menu_references["slippery_stop_in_air"]:set_visible(false)

    create_connection(menu_references["speed"]["on_toggle_change"], function(value)
        slippery_velocity = vector3_zero
        for i = 1, #heartbeat do
            if heartbeat[i] == do_speed then
                remove(heartbeat, i)
                break
            end
        end

        if value then
            heartbeat[#heartbeat+1] = do_speed
        end
    end)

    create_connection(menu_references["speed_value"]["on_slider_change"], function(value)
        multiplier = value*16
    end)

    create_connection(menu_references["speed_style"]["on_dropdown_change"], function(value)
        slippery_velocity = vector3_zero

        style = value[1]

        menu_references["slippery_stop_in_air"]:set_visible(style == "slippery")
    end)

    create_connection(menu_references["slippery_stop_in_air"]["on_toggle_change"], function(value)
        slippery_stop_in_air = value
    end)

    -- >> ( flight )

    local float_velocity = vector3_new(0, pi - 2, 0)

    local multiplier = 1750

    local do_flight = LPH_NO_VIRTUALIZE(function(dt, hrp)
        if not hrp then
            return
        end

        local humanoid = local_parts["Humanoid"]

        if not humanoid then
            return
        end

		local move_direction = humanoid["MoveDirection"]
        hrp["Velocity"] = float_velocity
        hrp["CFrame"]+=((vector3_new(move_direction["X"], is_key_down(user_input_service, space) and 1 or ((is_key_down(user_input_service, s) and -camera["CFrame"]["lookVector"]["Y"]) or (is_key_down(user_input_service, w) and camera["CFrame"]["lookVector"]["Y"]) or 0) * clamp(move_direction["Magnitude"], 0, 1), move_direction["Z"])*dt)*multiplier)
    end)

    menu_references["flight"] = menu_references["movement_section"]:create_element({["name"] = "flight"}, {["toggle"] = {["flag"] = "flight"}})
    menu_references["flight_settings"] = menu_references["flight"]:create_settings()
    menu_references["flight_speed"] = menu_references["flight_settings"]:create_element({["name"] = "flight speed"}, {["slider"] = {["default"] = 35, ["min"] = 1, ["max"] = 100, ["suffix"] = "%", ["flag"] = "flight_value", ["prefix"] = ""}})

    create_connection(menu_references["flight"]["on_toggle_change"], function(value)
        for i = 1, #heartbeat do
            if heartbeat[i] == do_flight then
                remove(heartbeat, i)
                break
            end
        end

        if value then
            heartbeat[#heartbeat+1] = do_flight
        end
    end)

    create_connection(menu_references["flight_speed"]["on_slider_change"], function(value)
        multiplier = value*50
    end)

    menu_references["other_section"] = menu["groups"]["misc."]:create_section("main", "other", 1, 0.4, 0.6)

    -- >> ( animation breaker )

    menu_references["animation_breaker"] = menu_references["other_section"]:create_element({["name"] = "animation breaker"}, {["toggle"] = {["flag"] = "animation_breaker"}})
    menu_references["animation_breaker_settings"] = menu_references["animation_breaker"]:create_settings()
    menu_references["animation_breaker_lag"] = menu_references["animation_breaker_settings"]:create_element({["name"] = "lag"}, {["slider"] = {["default"] = 0, ["min"] = 0, ["max"] = 100, ["suffix"] = "%", ["min_text"] = "off", ["flag"] = "animation_breaker_lag_amount", ["prefix"] = ""}})
    menu_references["animation_breaker_jitter"] = menu_references["animation_breaker_settings"]:create_element({["name"] = "jitter"}, {["slider"] = {["default"] = 0, ["min"] = 0, ["max"] = 100, ["suffix"] = "%", ["min_text"] = "off", ["flag"] = "animation_breaker_jitter_amount", ["prefix"] = ""}})

    local animation_data = {}
    local time_data = {}
    local last_freeze_tick = clock()
    local last_update = clock()
    local last_freeze = clock()
    local lag_amount = nil
    local freeze = nil
    local jitter = nil

    local do_animation_breaker = LPH_JIT_MAX(function(dt)
        local humanoid = local_parts["Humanoid"]

        if not humanoid then
            return
        end

        local tick = clock()

        if tick - last_update > 0.028 then
            last_update = tick

            local animations = humanoid:GetPlayingAnimationTracks()

            if lag_amount then
                if tick - last_freeze_tick > lag_amount then
                    last_freeze_tick = tick
                    delay(0, function()
                        last_freeze = clock()
                    end)
                    freeze = false
                else
                    freeze = true
                end

                for i = 1, #animations do
                    local animation = animations[i]
                    if not freeze then
                        animation_data[animation] = animation["TimePosition"] + tick - last_freeze
                    else
                        animation["TimePosition"] = (animation_data[animation] or 0)
                    end
                end
            end

            for i = 1, #animations do
                local animation = animations[i]

                if not animation["Looped"] then
                    local time = time_data[animation]

                    if not time then
                        time_data[animation] = clock()
                    else
                        if tick - time > animation["Length"] then
                            animation:Stop()
                            time_data[animation] = nil
                        end
                    end
                end
            end

            if jitter then
                for i = 1, #animations do
                    animations[i]["TimePosition"]*=-math_random(1 + jitter/4, 1.5 + jitter*4)
                end
            end
        end
    end)

    create_connection(menu_references["animation_breaker"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
        animation_data = {}
        time_data = {}
		last_update = clock()

        for i = 1, #heartbeat do
            if heartbeat[i] == do_animation_breaker then
                remove(heartbeat, i)
                break
            end
        end

        if value then
            heartbeat[#heartbeat+1] = do_animation_breaker
        end
    end))

    create_connection(menu_references["animation_breaker_lag"]["on_slider_change"], LPH_NO_VIRTUALIZE(function(value)
        lag_amount = value ~= 0 and value/150 or nil
    end))

    create_connection(menu_references["animation_breaker_jitter"]["on_slider_change"], LPH_NO_VIRTUALIZE(function(value)
        jitter = value ~= 0 and value/100 or nil
    end))

    -- >> ( animation player )

    menu_references["animation_player"] = menu_references["other_section"]:create_element({["name"] = "animation player"}, {["toggle"] = {["flag"] = "animation_player"}})
        menu_references["animation_player_settings"] = menu_references["animation_player"]:create_settings()
        menu_references["animation_player_animation"] = menu_references["animation_player_settings"]:create_element({["name"] = "animation"}, {["dropdown"] = {["default"] = {"sleep"}, ["options"] = {"custom", "sleep", "floss", "hype"}, ["flag"] = "animation_player_animation"}})
        menu_references["animation_player_asset_id"] = menu_references["animation_player_settings"]:create_element({["name"] = "asset id"}, {["textbox"] = {["default"] = "15609995579", ["flag"] = "animation_player_asset_id"}})
        menu_references["animation_player_asset_id"]:set_visible(false)

    local animation_player_connection = nil
    local loaded_animation = nil
    local animation = nil

    local animation_id = "rbxassetid://10714360343"

    local load_animation = LPH_NO_VIRTUALIZE(function()
        wait()

        if not local_player:HasAppearanceLoaded() then
            local_player["CharacterAppearanceLoaded"]:Wait()
        end

        if animation then
            animation["AnimationId"] = animation_id

            if loaded_animation then
                loaded_animation:Stop()
                loaded_animation = nil
            end

            local humanoid = local_parts["Humanoid"]

            if humanoid then
                loaded_animation = humanoid:LoadAnimation(animation)
                loaded_animation:Play()
            end
        end
    end)

    create_connection(menu_references["animation_player"]["on_toggle_change"], function(value)
        if animation_player_connection then
            animation_player_connection:Disconnect()
            animation_player_connection = nil
        end

        if loaded_animation then
            loaded_animation:Stop()
            loaded_animation = nil
        end

        if animation then
            destroy(animation)
            animation = nil
        end

        if value then
            animation = create_instance("Animation", {
                ["AnimationId"] = animation_id
            })

            load_animation()
            animation_player_connection = create_connection(signals["on_local_character_loaded"], load_animation)
        end
    end)

    create_connection(menu_references["animation_player_animation"]["on_dropdown_change"], function(value)
        local value = value[1]
        animation_id = value == "custom" and "rbxassetid://"..flags["animation_player_asset_id"] or value == "floss" and "rbxassetid://10714340543" or value == "hype" and "rbxassetid://10714369624" or value == "sleep" and "rbxassetid://10714360343"
        menu_references["animation_player_asset_id"]:set_visible(value == "custom")

        if animation_player_connection then
            load_animation()
        end
    end)

    create_connection(menu_references["animation_player_asset_id"]["on_textbox_change"], function(value)
        if #value > 6 then
            if animation_player_connection and flags["animation_player_animation"][1] == "custom" then
                local s, err = pcall(game["GetObjects"], game, "rbxassetid://"..value)

                if s then
                    if err and typeof(err) == "Instance" then
                        destroy(err)
                    end
                    
                    animation_id = "rbxassetid://"..value
                    load_animation()
                end
            end
        end
    end)

    -- >> ( trash talk )
    
    do
        local event = find_first_child(replicated_storage, "DefaultChatSystemChatEvents")
        
        if event then
            event = find_first_child(event, "SayMessageRequest")
        end

        if event then
            menu_references["trash_talk"] = menu_references["other_section"]:create_element({["name"] = "trash talk"}, {["toggle"] = {["flag"] = "trash_talk"}})
            menu_references["trash_talk_settings"] = menu_references["trash_talk"]:create_settings()
            menu_references["trash_talk_list"] = menu_references["trash_talk_settings"]:create_element({["name"] = "message list"}, {["dropdown"] = {["flag"] = "trash_talk_list", ["options"] = {}, ["use_custom_extensions"] = {"json", "txt"}, ["default"] = {"spam.json"}, ["requires_one"] = true}})
            menu_references["trash_talk_always"] = menu_references["trash_talk_settings"]:create_element({["name"] = "always"}, {["toggle"] = {["flag"] = "trash_talk_always", ["default"] = true}})
            menu_references["trash_talk_activate_when"] = menu_references["trash_talk_settings"]:create_element({["name"] = "activate when"}, {["dropdown"] = {["flag"] = "trash_talk_activate_when", ["options"] = {"player stomped"}, ["multi"] = true}})
            menu_references["trash_talk_activate_when"]:set_visible(false)

            local trash_talk_list = {}
            local do_trashtalk_on_stomp = false
            local do_trashtalk_on_dead = false
            local last_chat = clock()
            local stomped_connection = nil

            local do_trashtalk = LPH_JIT_MAX(function()
                local count = #trash_talk_list
                if count > 0 then
                    event["FireServer"](event, count == 1 and trash_talk_list[1] or trash_talk_list[math_random(1, count)], "All")
                end
            end)

            local do_trashtalk_spam = LPH_JIT_MAX(function()
                if (workspace["GetServerTimeNow"](workspace)*1.1) % 2.35 < 0.1 and (clock() - last_chat > 0.15) then
                    last_chat = clock()
                    local count = #trash_talk_list
                    if count > 0 then
                        event["FireServer"](event, count == 1 and trash_talk_list[1] or trash_talk_list[math_random(1, count)], "All")
                    end
                end
            end)

            create_connection(menu_references["trash_talk"]["on_toggle_change"], function(bool)
                local path = "juju recode/custom/"..flags["trash_talk_list"][1]
                if isfile(path) then 
                    local s, err = pcall(function()
                        trash_talk_list = http_service:JSONDecode(readfile(path))
                    end)

                    if err then
                        new_notification(
                            "failed to load trash talk list due to invalid json",
                            3
                        )
                    end 
                end

                for i = 1, #heartbeat do 
                    if heartbeat[i] == do_trashtalk_spam then
                        remove(heartbeat, i)
                        break
                    end
                end

                if stomped_connection then
                    stomped_connection:Disconnect()
                    stomped_connection = nil
                end

                if bool then
                    if flags["trash_talk_always"] then
                        heartbeat[#heartbeat + 1] = do_trashtalk_spam
                    else
                        if do_trashtalk_on_stomp then
                            stomped_connection = create_connection(signals["on_stomp"], do_trashtalk)
                        end
                    end
                end
            end)

            create_connection(menu_references["trash_talk_list"]["on_dropdown_change"], function(value)
                local path = "juju recode/custom/"..flags["trash_talk_list"][1]
                if isfile(path) then 
                    local s, err = pcall(function()
                        trash_talk_list = http_service:JSONDecode(readfile(path))
                    end)

                    if err then
                        new_notification(
                            "failed to load trash talk list due to invalid json",
                            3
                        )
                    end 
                end
            end)

            create_connection(menu_references["trash_talk_always"]["on_toggle_change"], function(value)
                if stomped_connection then
                    stomped_connection:Disconnect()
                    stomped_connection = nil
                end             
                
                for i = 1, #heartbeat do 
                    if heartbeat[i] == do_trashtalk_spam then
                        remove(heartbeat, i)
                        break
                    end
                end

                menu_references["trash_talk_activate_when"]:set_visible(not value)

                if flags["trash_talk"] then
                    if value then
                        heartbeat[#heartbeat + 1] = do_trashtalk_spam
                    else
                        if do_trashtalk_on_stomp then
                            stomped_connection = create_connection(signals["on_stomp"], do_trashtalk)
                        end
                    end
                end
            end)

            create_connection(menu_references["trash_talk_activate_when"]["on_dropdown_change"], function(value)
                if stomped_connection then
                    stomped_connection:Disconnect()
                    stomped_connection = nil
                end
 

                for i = 1, #value do
                    local value = value[i]
                    if value == "player stomped" then
                        do_trashtalk_on_stomp = true
                    end
                end

                if flags["trash_talk"] and not flags["trash_talk_always"] then
                    if do_trashtalk_on_stomp then
                        stomped_connection = create_connection(signals["on_stomp"], do_trashtalk)
                    end
                end
            end)
        end
    end 

    -- >> ( spinbot )

    local spinbot_speed = 50

    menu_references["spinbot"] = menu_references["other_section"]:create_element({["name"] = "spinbot"}, {["toggle"] = {["flag"] = "spinbot"}})
    menu_references["spinbot_settings"] = menu_references["spinbot"]:create_settings()
    menu_references["spinbot_speed"] = menu_references["spinbot_settings"]:create_element({["name"] = "speed"}, {["slider"] = {["flag"] = "spinbot_speed", ["min"] = 1, ["max"] = 100, ["suffix"] = "%", ["default"] = spinbot_speed}})

    local cframe_fromeuleranglesxyz = CFrame["fromEulerAnglesXYZ"]

    local do_spinbot = LPH_NO_VIRTUALIZE(function(dt, hrp)
        if not hrp then
            return
        end

        local humanoid = local_parts["Humanoid"]
        if humanoid then
            humanoid["AutoRotate"] = false
        end

        hrp["CFrame"] *= cframe_fromeuleranglesxyz(0, spinbot_speed * dt, 0)
    end)

    create_connection(menu_references["spinbot"]["on_toggle_change"], function(value)
        for i = 1, #heartbeat do
            if heartbeat[i] == do_spinbot then
                remove(heartbeat, i)
                break
            end
        end

        if value then
            heartbeat[#heartbeat+1] = do_spinbot
        end

        wait()

        local humanoid = local_parts["Humanoid"]
        if humanoid then
            humanoid["AutoRotate"] = user_input_service["MouseBehavior"] == Enum["MouseBehavior"]["Default"]
        end
    end)

    create_connection(menu_references["spinbot_speed"]["on_slider_change"], LPH_NO_VIRTUALIZE(function(value)
        spinbot_speed = value * (1/3)
    end))
end

-- > ( misc )

do
    menu_references["utility_section"] = menu["groups"]["misc."]:create_section("main", "utility", 2, 0.7, 0)

    -- >> ( remove flintlock knockback )

    do
        local function check_connection(connection)
            local f = connection["Function"]
                
            if f then
                for _, v in getupvalues(f) do
                    if type(v) == "function" and not isourclosure(v) and getinfo(v)["name"] == "applyBlast" then
                        return _, f, v
                    end
                end
            end

            return false
        end

        menu_references["remove_flintlock_knockback"] = menu_references["utility_section"]:create_element({["name"] = "remove flintlock knockback"}, {["toggle"] = {["flag"] = "remove_flintlock_knockback"}})
        
        local flintlock = nil
        local connection = nil

        local update_flintlock = function(tool)
            if flintlock then
                local f = flintlock[1]
                if f then
                    setupvalue(f, flintlock[2], flintlock[3])
                end
                flintlock = nil
                return
            end

            if not tool then
                return
            end

            if tool.Name ~= "[Flintlock]" then
                return
            end
    
            for i,v in getconnections(tool["Activated"]) do
                local index, f, original = check_connection(v)

                if index then
                    setupvalue(f, index, function()
                        
                    end)

                    flintlock = {f, index, original}
                end
            end
        end

        create_connection(menu_references["remove_flintlock_knockback"]["on_toggle_change"], function(value)
            if connection then
                connection:Disconnect()
                connection = nil
            end

            update_flintlock()

            if value then
                connection = create_connection(signals["on_local_tool_equipped"], update_flintlock)
            end
        end)
    end

    -- >> ( unlock custom crosshair )

    menu_references["unlock_custom_crosshair"] = menu_references["utility_section"]:create_element({["name"] = "unlock custom crosshair"}, {["toggle"] = {["flag"] = "unlock_custom_crosshair"}})

    local update_cursor_icon = nil

    local gc = getgc()
    for i = 1, #gc do
        local obj = gc[i]
        if type(obj) == "function" and islclosure(obj) then
            local info = getinfo(obj)

            if info["source"]:find("Framework") and info["name"] == "UpdateCursorIcon" then
                update_cursor_icon = obj
                break
            end
        end
    end

    create_connection(menu_references["unlock_custom_crosshair"]["on_toggle_change"], function(value)
        wait(0.03)
        if inventory then
            local gc = getgc()
            for i = 1, #gc do
                local obj = gc[i]
                if type(obj) == "function" and islclosure(obj) then
                    local info = getinfo(obj)

                    if info["source"]:find("Framework") and info["name"] == "UpdateCursorIcon" then
                        update_cursor_icon = obj
                        break
                    end
                end
            end

            local image = value and flags["cursor_image"] or nil
            inventory["Parent"]["CursorImage"]["Value"] = value and image or ""

            if value and update_cursor_icon then
                update_cursor_icon(image)
            end
        end
    end)

    -- >> ( unlock animation packs )

    menu_references["unlock_animation_packs"] = menu_references["utility_section"]:create_element({["name"] = "unlock animation packs"}, {["toggle"] = {["flag"] = "unlock_animation_packs"}})

    local unlock_animation_packs_connections = nil
    local unlock_animation_instances = nil
    local animations = {
        ["Chest Pump"] = "rbxassetid://3189779152",
        ["Praying"] = "rbxassetid://3487719500",
        ["Greet"] = "rbxassetid://3189777795",
        ["Dance2"] = "rbxassetid://3189776546",
        ["Dance1"] = "rbxassetid://3189773368",
        ["Lay"] = "rbxassetid://3152378852",
        ["Lean"] = "rbxassetid://3152375249",
        ["T Pose"] = "rbxassetid://11710524200",
        ["Speed Blitz"] = "rbxassetid://11710541744",
        ["Griddy"] = "rbxassetid://11710529220",
        ["Rossy"] = "rbxassetid://11710527244",
        ["Sturdy"] = "rbxassetid://11710524717",
        ["The Default"] = "rbxassetid://11710522278"
    }

    local play_animation = function(animation)
        local humanoid = local_parts["Humanoid"]

        if humanoid then
            local old = create_instance("Animation", {
                ["AnimationId"] = animations[animation]
            })
            local loaded = humanoid:LoadAnimation(old)
            loaded["Looped"] = (animation ~= "Chest Pump" and animation ~= "Praying" and animation ~= "Greet") or false
            loaded:Play()
            destroy(old)

            local move_connection = nil; move_connection = create_connection(humanoid:GetPropertyChangedSignal("MoveDirection"), function()
                loaded:Stop()
                if move_connection then
                    move_connection:Disconnect()
                    move_connection = nil
                end
            end)

            delay((loaded["Length"] + 0.5) or 2, function()
                if move_connection and not loaded["IsPlaying"] then
                    move_connection:Disconnect()
                    move_connection = nil
                    loaded:Stop()
                end
            end)
        end
    end

    local lock_animation_packs = function()
        local gui = local_player["PlayerGui"]

        if gui then
            local main_screen_gui = wait_for_child(gui, "MainScreenGui", 5)

            if main_screen_gui then
                local animation_pack = wait_for_child(main_screen_gui, "AnimationPack", 5)
                local animation_plus_pack = wait_for_child(main_screen_gui, "AnimationPlusPack", 5)

                if animation_pack and animation_plus_pack then
                    animation_pack["Visible"] = true
                    animation_plus_pack["Visible"] = false
                end
            end
        end
    end

    local unlock_animation_packs = LPH_JIT_MAX(function()
        local gui = local_player["PlayerGui"]

        if gui then
            local main_screen_gui = wait_for_child(gui, "MainScreenGui", 5)

            if main_screen_gui then
                local animation_pack = wait_for_child(main_screen_gui, "AnimationPack", 5)
                local animation_plus_pack = wait_for_child(main_screen_gui, "AnimationPlusPack", 5)

                if animation_pack and animation_plus_pack then
                    animation_pack["Visible"] = true

                    unlock_animation_packs_connections[#unlock_animation_packs_connections+1] = create_connection(animation_pack["MouseButton1Click"], function()
                        animation_pack["ScrollingFrame"]["Visible"] = true
                        animation_pack["CloseButton"]["Visible"] = true
                        main_screen_gui["AnimationPlusPack"]["Position"] = udim2_new(-1, 0, 0.5, 12)
                    end)

                    unlock_animation_packs_connections[#unlock_animation_packs_connections+1] = create_connection(animation_pack["CloseButton"]["MouseButton1Click"], function()
                        animation_pack["ScrollingFrame"]["Visible"] = false
                        animation_pack["CloseButton"]["Visible"] = false
                        main_screen_gui["AnimationPlusPack"]["Position"] = udim2_new(0, 0, 0.5, 12)
                    end)

                    for _, v in get_children(animation_pack["ScrollingFrame"]) do
                        if v["ClassName"] == "TextButton" then
                            local animation = v["Text"]
                            unlock_animation_packs_connections[#unlock_animation_packs_connections+1] = create_connection(v["MouseButton1Click"], function()
                                play_animation(animation)
                            end)
                        end
                    end

                    animation_plus_pack["Visible"] = true

                    unlock_animation_packs_connections[#unlock_animation_packs_connections+1] = create_connection(animation_plus_pack["MouseButton1Click"], function()
                        animation_plus_pack["ScrollingFrame"]["Visible"] = true
                        animation_plus_pack["CloseButton"]["Visible"] = true
                        animation_pack["Position"] = udim2_new(-1, 0, 0.5, -12)
                    end)

                    unlock_animation_packs_connections[#unlock_animation_packs_connections+1] = create_connection(animation_plus_pack["CloseButton"]["MouseButton1Click"], function()
                        animation_plus_pack["ScrollingFrame"]["Visible"] = false
                        animation_plus_pack["CloseButton"]["Visible"] = false
                        animation_pack["Position"] = udim2_new(0, 0, 0.5, -12)
                    end)

                    for _, v in get_children(animation_plus_pack["ScrollingFrame"]) do
                        if v["ClassName"] == "TextButton" then
                            local animation = v["Text"]
                            unlock_animation_packs_connections[#unlock_animation_packs_connections+1] = create_connection(v["MouseButton1Click"], function()
                                play_animation(animation)
                            end)
                        end
                    end
                end
            end
        end
    end)

    create_connection(menu_references["unlock_animation_packs"]["on_toggle_change"], function(value)
        if unlock_animation_packs_connections then
            for i = 1, #unlock_animation_packs_connections do
                unlock_animation_packs_connections[i]:Disconnect()
            end
            unlock_animation_packs_connections = nil
        end

        if unlock_animation_instances then
            for _, animation in unlock_animation_instances do
                destroy(animation)
            end
            unlock_animation_instances = nil
        end

        if value then
            unlock_animation_instances = {}
            unlock_animation_packs_connections = {}
            unlock_animation_packs_connections[#unlock_animation_packs_connections+1] = create_connection(signals["on_local_character_loaded"], unlock_animation_packs)

            unlock_animation_packs()
        else
            lock_animation_packs()
        end
    end)
    
    -- >> ( unlock camera distance )

    menu_references["unlock_camera_distance"] = menu_references["utility_section"]:create_element({["name"] = "unlock camera distance"}, {["toggle"] = {["flag"] = "unlock_camera_distance"}})

    local old_distance = local_player["CameraMaxZoomDistance"]

    create_connection(menu_references["unlock_camera_distance"]["on_toggle_change"], function(bool)
        local_player["CameraMaxZoomDistance"] = bool and 9e9 or old_distance
    end)

    -- >> ( remove anti gun macro )

    menu_references["remove_anti_gun_macro"] = menu_references["utility_section"]:create_element({["name"] = "remove anti gun macro"}, {["toggle"] = {["flag"] = "remove_anti_gun_macro"}})

    local remove_anti_gun_macro_connection = nil

    local do_remove = LPH_JIT_MAX(function()
		local new_constant = flags["remove_anti_gun_macro"] and "_!_" or "HoldGunBool"
		local gc = getgc()
		for i = 1, #gc do
			local obj = gc[i]
			if type(obj) == "function" and islclosure(obj) then
				local info = getinfo(obj)
				if info and info["source"]:find("BaseCamera") then
					for _, constant in getconstants(obj) do
						if constant == "HoldGunBool" or constant == "_!_" then
							setconstant(obj, _, new_constant)
						end
					end
				end
			end
		end
    end)

    create_connection(menu_references["remove_anti_gun_macro"]["on_toggle_change"], LPH_JIT_MAX(function(value)
        if remove_anti_gun_macro_connection then
            remove_anti_gun_macro_connection:Disconnect()
            remove_anti_gun_macro_connection = nil
        end

        if value then
            remove_anti_gun_macro_connection = create_connection(signals["on_local_character_added"], do_remove)
        end

        do_remove(value)
	end))

    menu_references["remove_flashbang"] = menu_references["utility_section"]:create_element({["name"] = "remove flashbang"}, {["toggle"] = {["flag"] = "remove_flashbang"}})
    menu_references["automatic_guns"] = menu_references["utility_section"]:create_element({["name"] = "automatic guns"}, {["toggle"] = {["flag"] = "automatic_guns"}})
    menu_references["remove_recoil"] = menu_references["utility_section"]:create_element({["name"] = "remove recoil"}, {["toggle"] = {["flag"] = "remove_recoil"}})

    -- >> ( automatic guns )

    do
        local connection = nil

        local on_m1_input = LPH_NO_VIRTUALIZE(function(input, processed)
            if input["UserInputType"] == Enum["UserInputType"]["MouseButton1"] and input["UserInputState"] == Enum["UserInputState"]["Begin"] and local_gun and not menu["is_menu_open"]() then
                while user_input_service["IsMouseButtonPressed"](user_input_service, Enum["UserInputType"]["MouseButton1"]) and not menu["is_menu_open"]() do
                    if local_tool and local_gun then
                        for _, connection in getconnections(local_tool["Activated"]) do
                            setthreadidentity(5)
                            connection:Fire()
                            setthreadidentity(8)
                            break
                        end
                    end
                    wait(0.03)
                end
            end
        end)

        create_connection(menu_references["automatic_guns"]["on_toggle_change"], function(value)
            if connection then
                connection:Disconnect()
                connection = nil
            end
            
            if value then
                connection = create_connection(user_input_service["InputBegan"], on_m1_input)
            end
        end)
    end

    -- >> ( auto vehicle )

    do
        local packet_receiver = replicated_storage.Bike.Events.PacketReceiver
        local do_auto_vehicle = LPH_NO_VIRTUALIZE(function(dt, hrp)
            if vehicle == nil then
                for i = 1, #anti_aim do
                    if anti_aim[i] == get_vehicle then
                        return
                    end
                end
                get_vehicle()
                anti_aim[#anti_aim+1] = get_vehicle
            end
        end)

        menu_references["auto_vehicle"] = menu_references["utility_section"]:create_element({["name"] = "auto vehicle"}, {["toggle"] = {["flag"] = "auto_vehicle"}})

        create_connection(menu_references["auto_vehicle"]["on_toggle_change"], function(bool)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_auto_vehicle then
                    remove(heartbeat, i)
                    break
                end
            end

            for i = 1, #anti_aim do
                if anti_aim[i] == get_vehicle then
                    remove(anti_aim, i)
                    break
                end
            end

            if bool then
                heartbeat[#heartbeat+1] = do_auto_vehicle
            end
        end)
        
        menu_references["auto_vehicle_godmode"] = menu_references["utility_section"]:create_element({["name"] = "semi god"}, {["toggle"] = {["flag"] = "auto_vehicle_godmode"}})

        local old_cframe = nil
        local timer = clock()

        local do_auto_vehicle_godmode = LPH_JIT(function(dt, hrp)
            if not hrp then
                timer = clock()
                old_cframe = nil
                return
            end
            
            local right_upper_leg = local_parts["RightUpperLeg"]
            local left_upper_leg = local_parts["LeftUpperLeg"]

            if clock() - timer > 4 then
                if vehicle then
                    packet_receiver["FireServer"](packet_receiver, "GetOff")
                elseif old_cframe and clock() - timer > 7 then
                    hrp["CFrame"] = old_cframe
                    hrp["Velocity"] = vector3_zero
                    render_stepped_wait(render_stepped)
                    hrp["CFrame"] = old_cframe
                    hrp["Velocity"] = vector3_zero
                end

                if clock() - timer > 8 then
                    old_cframe = nil
                    timer = clock()
                    for i = 1, #anti_aim do
                        if anti_aim[i] == get_vehicle then
                            remove(anti_aim, i)
                            break
                        end
                    end
                end
            end

            if (right_upper_leg and right_upper_leg["CFrame"] ~= right_upper_leg["CFrame"]) and (left_upper_leg and left_upper_leg["CFrame"] ~= left_upper_leg["CFrame"]) then
                return
            end

            local old_velocity = hrp["Velocity"]
            hrp["AssemblyLinearVelocity"] = vector3_new(math_random(-9223372036854775808, 9223372036854775807), math_random(-9223372036854775808, 9223372036854775807), math_random(-9223372036854775808, 9223372036854775807))
            render_stepped_wait(render_stepped)
            hrp["AssemblyLinearVelocity"] = old_velocity
            
            if vehicle == nil then
                timer = clock()
                if not old_cframe then
                    old_cframe = hrp["CFrame"]
                end
                for i = 1, #anti_aim do
                    if anti_aim[i] == get_vehicle then
                        return
                    end
                end
                anti_aim[#anti_aim+1] = get_vehicle
            end
        end)

        local connection = nil

        create_connection(menu_references["auto_vehicle_godmode"]["on_toggle_change"], function(bool)
            if connection then
                connection["Disconnect"](connection)
                connection = nil
            end

            for i = 1, #anti_aim do
                if anti_aim[i] == do_auto_vehicle_godmode then
                    remove(anti_aim, i)
                    break
                end
            end

            for i = 1, #anti_aim do
                if anti_aim[i] == get_vehicle then
                    remove(anti_aim, i)
                    break
                end
            end

            old_cframe = nil
            timer = clock()

            if bool then
                anti_aim[#anti_aim+1] = do_auto_vehicle_godmode

                connection = create_connection(signals["on_local_character_added"], function(character)
                    old_cframe = nil
                    timer = clock()
                end)
            end
        end)
    end

    -- >> ( auto reload )

    menu_references["auto_reload"] = menu_references["utility_section"]:create_element({["name"] = "auto reload"}, {["toggle"] = {["flag"] = "auto_reload"}})
        menu_references["auto_reload_settings"] = menu_references["auto_reload"]:create_settings()
        menu_references["auto_reload_activate_when"] = menu_references["auto_reload_settings"]:create_element({["name"] = "activate when"}, {["dropdown"] = {["flag"] = "auto_reload_activate_when", ["options"] = {"rifle has 1/3", "target knocked", "target died", "clip empty"}, ["multi"] = true, ["default"] = {"rifle has 1/3", "target died", "clip empty"}}})

    local auto_reload_connection = nil
    local auto_reload_connection2 = nil
    local do_auto_reload_target_knocked = false
    local do_auto_reload_target_died = true
    local do_auto_reload_clip_empty = true
    local do_auto_reload_rifle = true

    local do_reload = function(dead, b)
        if dead == ragebot_target and (b == true or b == nil) then
            for gun, data in local_guns do
                local gun = gun["Parent"]
                if gun["Name"] == "[Rifle]" and data[3] < 3 then
                    event:FireServer("Reload", gun)
                    return
                end
            end
            for gun, data in local_guns do
                event:FireServer("Reload", gun["Parent"])
                break
            end
        end
    end

    local do_auto_reload = LPH_NO_VIRTUALIZE(function()
        if not local_reloading and do_auto_reload_clip_empty then
            if do_auto_reload_rifle then
                for gun, data in local_guns do
                    local gun = gun["Parent"]
                    if gun and gun["Name"] == "[Rifle]" and data[3] <= 1 then
                        event:FireServer("Reload", gun)
                        return
                    end
                end
            end
            for gun, data in local_guns do
                if data[3] == 0 then
                    event:FireServer("Reload", gun["Parent"])
                    break
                end
            end
        end
    end)

    create_connection(menu_references["auto_reload"]["on_toggle_change"], function(bool)
        if auto_reload_connection then
            auto_reload_connection:Disconnect()
            auto_reload_connection = nil
        end

        if auto_reload_connection2 then
            auto_reload_connection2:Disconnect()
            auto_reload_connection2 = nil
        end

        for i = 1, #heartbeat do
            if heartbeat[i] == do_auto_reload then
                remove(heartbeat, i)
                break
            end
        end

        if bool then
            if do_auto_reload_target_knocked then
                auto_reload_connection = create_connection(signals["on_player_knocked"], do_reload)
            end
            if do_auto_reload_target_died then
                auto_reload_connection2 = create_connection(signals["on_player_died"], do_reload)
            end
            heartbeat[#heartbeat+1] = do_auto_reload
        end
    end)

    create_connection(menu_references["auto_reload_activate_when"]["on_dropdown_change"], function(value)
        if auto_reload_connection then
            auto_reload_connection:Disconnect()
            auto_reload_connection = nil
        end

        if auto_reload_connection2 then
            auto_reload_connection2:Disconnect()
            auto_reload_connection2 = nil
        end

        do_auto_reload_target_knocked = false
        do_auto_reload_target_died = false
        do_auto_reload_clip_empty = false
        do_auto_reload_rifle = false
        for i = 1, #value do
            local value = value[i]
            if value == "target knocked" then
                do_auto_reload_target_knocked = true
            elseif value == "target died" then
                do_auto_reload_target_died = true
            elseif value == "clip empty" then
                do_auto_reload_clip_empty = true
            elseif value == "rifle has 1/3" then
                do_auto_reload_rifle = true
            end
        end

        if flags["auto_reload"] then
            if do_auto_reload_target_knocked then
                auto_reload_connection = create_connection(signals["on_player_knocked"], do_reload)
            end
            if do_auto_reload_target_died then
                auto_reload_connection2 = create_connection(signals["on_player_died"], do_reload)
            end
        end
    end)

    -- >> ( detect staff )

    menu_references["detect_staff"] = menu_references["utility_section"]:create_element({["name"] = "detect staff"}, {["toggle"] = {["default"] = true, ["flag"] = "detect_staff"}, ["dropdown"] = {["options"] = {"notify", "kick"}, ["flag"] = "detect_staff_options", ["default"] = {"notify"}, ["requires_one"] = true, ["multi"] = true}})

    local do_notify = true
    local do_kick = false

    local detect_staff = function(data, no_notify)
        local role = data[16]
        
        if role then
            local player = data[2]["Name"]:lower()
            local role = role:lower()
            if do_notify and not no_notify then
                new_notification(
                    "player "..player.." is roled "..role,
                    2
                )
            end
            if do_kick then
                local_player:Kick("[juju anti staff]\n > detected "..player.." roled as "..role)
                delay(0, getgenv()["_JUJU"])
            end
        end
    end

    local player_added_connection = create_connection(signals["on_player_role_changed"], detect_staff)

    create_connection(menu_references["detect_staff"]["on_toggle_change"], function(value)
        if player_added_connection then
            player_added_connection:Disconnect()
            player_added_connection = nil
        end

        if value then
            player_added_connection = create_connection(signals["on_player_role_changed"], detect_staff)

            for player, data in player_data do
                detect_staff(data, true)
            end
        end
    end)

    create_connection(menu_references["detect_staff"]["on_dropdown_change"], function(value)
        do_notify = false
        do_kick = false
        for i = 1, #value do
            if value[i] == "notify" then
                do_notify = true
            else
                do_kick = true
            end
        end

        if player_added_connection then
            for player, data in player_data do
                detect_staff(data, true)
            end
        end
    end)


    -- >> ( redeem codes )

    create_connection(menu_references["utility_section"]:create_element({["name"] = "redeem codes"}, {["button"] = {}})["on_clicked"], function()
        local html = game:HttpGet("https://gamerant.com/roblox-da-hood-codes/")
        local html = html:sub(html:find("All Active Da Hood Codes"), html:find("All Expired Da Hood Codes") - 1)

        local codes = {}
        for code in html:gmatch("<strong>(.-)</strong>") do
            if not code:find("%(") then
                codes[#codes+1] = code:gsub("%s+$", "")
            end
        end

        for i = 1, #codes do
            event:FireServer("EnterPromoCode", codes[i])
            wait(6)
        end
    end)

    -- >> ( get vehicle )

    do
        local old_cframe = nil
        local vehicle_tick = nil
        local started = nil

        local function reset()
            for i = 1, #anti_aim do
                if anti_aim[i] == get_vehicle then
                    remove(anti_aim, i)
                    break
                end
            end
            old_cframe, vehicle_tick, started = nil, nil, nil
        end

        get_vehicle = LPH_JIT_MAX(function(dt, hrp)
            if not dt then
                reset()
                return
            end
        
            if not started then
                started = clock()
            end
        
            if not hrp or vehicle_blocked or (clock() - started > 1) then
                reset()
                return
            end
        
            if local_player["GetAttribute"](local_player, "ServerDebounceVGM") then
                return
            end
        
            if vehicle then
                vehicle_tick = vehicle_tick or clock()
                if clock() - vehicle_tick > local_ping / 500 then
                    reset()
                end
                return
            end
        
            if not vehicle_blocked then
                local set_vehicle = nil
                for _, new_vehicle in vehicle_data do
                    local part = new_vehicle[1]
                    if part and not new_vehicle[3] and part["Position"]["Magnitude"] < 1e6 then
                        set_vehicle = new_vehicle
                        break
                    end
                end
        
                if not set_vehicle then
                    old_cframe = old_cframe or hrp["CFrame"]
                    hrp["CFrame"] = vehicle_spawner[2]
                    fireproximityprompt(vehicle_spawner[1], 1)
                    render_stepped_wait(render_stepped)
                    hrp["CFrame"] = old_cframe
                else
                    local part, ride = set_vehicle[1], set_vehicle[2]
                    if part and ride and not in_void then
                        fireproximityprompt(ride, 1)
                        local current_cframe = hrp["CFrame"]
                        hrp["CFrame"] = part["CFrame"] - vector3_new(0, 5, 0)
                        render_stepped_wait(render_stepped)
                        hrp["CFrame"] = current_cframe
                    end
                end
            end
        end)

        create_connection(menu_references["utility_section"]:create_element({["name"] = "get vehicle"}, {["button"] = {}})["on_clicked"], function()
            for i = 1, #anti_aim do
                if anti_aim[i] == get_vehicle then
                    return
                end
            end
            get_vehicle()
            anti_aim[#anti_aim+1] = get_vehicle
        end)
    end

    create_connection(menu_references["utility_section"]:create_element({["name"] = "force reset"}, {["button"] = {}})["on_clicked"], function()
        local humanoid = local_parts["Humanoid"]

        if humanoid then
            humanoid["Health"] = 0
        end
    end)

    -- >> ( tools )

    menu_references["server_section"] = menu["groups"]["misc."]:create_section("main", "server", 2, 0.3, 0.7)
    create_connection(menu_references["server_section"]:create_element({["name"] = "copy join script"}, {["button"] = {}})["on_clicked"], function()
        setclipboard("cloneref(game:GetService(\"TeleportService\")):TeleportToPlaceInstance("..game["PlaceId"]..", \""..game["JobId"].."\")")
        new_notification("copied join script to clipboard", 1)
    end)

    create_connection(menu_references["server_section"]:create_element({["name"] = "rejoin server"}, {["button"] = {}})["on_clicked"], function()
        local_player:Kick("R..")

        teleport_service:TeleportToPlaceInstance(game["PlaceId"], game["JobId"])
    end)

    create_connection(menu_references["server_section"]:create_element({["name"] = "hop servers"}, {["button"] = {}})["on_clicked"], function()
        local servers = http_service:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/"..game["PlaceId"].."/servers/Public?sortOrder=Asc&limit=100"))["data"]
        local cursor = servers["nextPageCursor"]

        if cursor and cursor ~= "null" and cursor ~= "" then
            servers = http_service:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/"..game["PlaceId"].."/servers/Public?sortOrder=Asc&limit=100&cursor="..cursor))["data"]
        end

        local lowest_ping = 9e9
        local most_players = 0
        local best_server
        local max_players = tonumber(servers[1]["maxPlayers"])
        local half = max_players / 2
        for i = 1, #servers do
            local server = servers[i]
            local players = tonumber(server["playing"])
            local ping = tonumber(server["ping"])
            if players ~= max_players and players > half and ping < lowest_ping then
                lowest_ping = ping
                most_players = players
                best_server = server["id"]
            end
        end

        if best_server then
            local_player:Kick("H..")
            teleport_service:TeleportToPlaceInstance(game["PlaceId"], best_server)
        else
            new_notification("failed to find server", 3)
        end
    end)
end

-- > ( player data )

local local_crew = nil

do
    local saved_statuses = {}

    local players = menu["groups"]["misc."]:create_panel_section("players", "players", 1)
    local player_editor = menu["groups"]["misc."]:create_section("players", "player editor", 2, 0.4, 0)

    local player_wanted = player_editor:create_element({["name"] = "wanted"}, {["info"] = {}})
    player_wanted:set_info("Color", color3_fromrgb(122, 47, 52))
    player_wanted:set_visible(false)
    local player_status = player_editor:create_element({["name"] = "status"}, {["dropdown"] = {["flag"] = "0", ["options"] = {"friendly", "neutral", "enemy"}, ["default"] = {"neutral"}, ["requires_one"] = true}})
    local teleport_to = player_editor:create_element({["name"] = "teleport to"}, {["button"] = {}})
    local set_ragebot_target_button = player_editor:create_element({["name"] = "set ragebot target"}, {["button"] = {["fake"] = true}})

    create_connection(signals["on_player_status_changed"], function(data, status)
        saved_statuses[data[2]["Name"]] = status
    end)

    -- >> ( player editor )

    local selected_player = nil

    create_connection(players["on_selection_change"], function(player)
        selected_player = player and find_first_child(players_service, player) or nil

        if selected_player then
            player_wanted:set_visible(true)
            local data = player_data[selected_player]
            local status = data[1]
            local information = data[17]

            player_wanted:set_info("Text", information and information["Wanted"]["Value"] or "?")
            player_status:set_dropdown({status == 1 and "neutral" or status == 2 and "friendly" or status == 3 and "enemy"}, false, true)
        else
            player_wanted:set_visible(false)
        end
    end)

    create_connection(player_status["on_dropdown_change"], function(value)
        if selected_player then
            local data = player_data[selected_player]
            local value = value[1]
            local status = value == "neutral" and 1 or value == "friendly" and 2 or 3

            if data[1] ~= status then
                data[1] = status
                signals["on_player_status_changed"]:Fire(data, status)

                new_notification(
                    "set "..selected_player["Name"].."'s status to "..(status == 1 and "neutral" or status == 2 and "friendly" or "enemy"),
                    1
                )
            end
        end
    end)

    create_connection(player_editor:create_element({["name"] = "copy crew link"}, {["button"] = {}})["on_clicked"], function()
        if selected_player then
            local information = player_data[selected_player][17]

            if information then
                local crew = find_first_child(information, "Crew")

                if crew and #crew["Value"] ~= 0 then
                    setclipboard("https://www.roblox.com/communities/"..crew["Value"].."#!/juju")

                    new_notification(
                        "copied "..selected_player["Name"].."'s crew group link to your clipboard",
                        1
                    )
                else
                    new_notification(
                        selected_player["Name"].." is not in a crew",
                        3
                    )
                end
            end
        end
    end)

    create_connection(player_editor:create_element({["name"] = "copy profile link"}, {["button"] = {}})["on_clicked"], function()
        if selected_player then
            setclipboard("https://www.roblox.com/users/"..selected_player["UserId"].."/profile#!/juju")
            new_notification(
                "copied "..selected_player["Name"].."'s profile link to your clipboard",
                1
            )
        end
    end)

    create_connection(teleport_to["on_clicked"], function()
        if selected_player then
            local data = player_data[selected_player]
            local torso = data[4]["HumanoidRootPart"]

            if torso then
                local hrp = local_parts["HumanoidRootPart"]

                if hrp then
                    for i = 1, 2 do
                        hrp["CFrame"] = torso["CFrame"] + vector3_new(0,5,0)
                        wait()
                    end
                end
            end
        end
    end)

    create_connection(set_ragebot_target_button["on_clicked"], function()
        if selected_player and flags["ragebot"] then
            local data = player_data[selected_player]

            if data then
                set_ragebot_target(data, "successfully ragebot target set to "..selected_player["Name"])
            end
        end
    end)

    -- >> ( player interactions )

    local player_interactions = menu["groups"]["misc."]:create_section("players", "player interactions", 2, 0.6, 0.4)
        menu_references["auto_save_friendlies"] = player_interactions:create_element({["name"] = "auto save friendlies"}, {["toggle"] = {["flag"] = "auto_save_friendlies"}})
        menu_references["auto_save_friendlies_settings"] = menu_references["auto_save_friendlies"]:create_settings()
        menu_references["auto_save_friendlies_ignore_range"] = menu_references["auto_save_friendlies_settings"]:create_element({["name"] = "ignore range"}, {["slider"] = {["flag"] = "auto_save_friendlies_ignore_range", ["min"] = 8, ["max"] = 10000, ["suffix"] = " studs", ["default"] = 50}})

        menu_references["auto_set_statuses"] = player_interactions:create_element({["name"] = "auto set statuses"}, {["toggle"] = {["flag"] = "auto_set_statuses"}})
        menu_references["auto_set_statuses_settings"] = menu_references["auto_set_statuses"]:create_settings()
        menu_references["set_friendly_if"] = menu_references["auto_set_statuses_settings"]:create_element({["name"] = "set friendly if"}, {["dropdown"] = {["flag"] = "set_friendly_if", ["options"] = {"in same crew", "is a friend"}, ["default"] = {"is a friend"}, ["multi"] = true}})
        menu_references["set_enemy_if"] = menu_references["auto_set_statuses_settings"]:create_element({["name"] = "set enemy if"}, {["dropdown"] = {["flag"] = "set_enemy_if", ["options"] = {"friends with an enemy", "in an enemy's crew"}, ["default"] = {"in an enemy's crew"}, ["multi"] = true}})
        menu_references["auto_set_statuses_notifications"] = menu_references["auto_set_statuses_settings"]:create_element({["name"] = "notifications"}, {["toggle"] = {["flag"] = "auto_set_statuses_notifications"}})

    local do_friendly_is_friend = true
    local do_friendly_is_same_crew = true
    local do_enemy_is_mutual_friend = true
    local do_enemy_is_mutual_crew = false

    local auto_set_statuses_connection = nil
    local auto_set_status = LPH_JIT_MAX(function(data)
        local old_status = data[1]
        local new_status = nil
        local da_player = data[2]
        local crew = nil

        if data[17] then
            crew = find_first_child(data[17], "Crew")

            if crew then
                local value = crew["Value"]

                if value and #value ~= 0 then
                    crew = value
                end
            end
        end

        if do_friendly_is_same_crew and crew and local_crew == crew then
            new_status = 2
        elseif do_friendly_is_friend then
            local _, s = pcall(da_player["IsFriendsWith"], da_player, local_player["UserId"])
            if _ and s then
                new_status = 2
            end
        elseif do_enemy_is_mutual_friend then
            for player, data in player_data do
                if player ~= da_player and data[1] == 3 and data[17] then
                    local s, friends = pcall(function()
                        return da_player:IsFriendsWith(player["UserId"])
                    end)

                    if s and friends then
                        new_status = 3
                        break
                    end
                end
            end
        elseif do_enemy_is_mutual_crew and crew then
            for player, data in player_data do
                if player ~= da_player and data[1] == 3 and data[17] then
                    local new_crew = find_first_child(data[17], "Crew")

                    if crew and new_crew and new_crew["Value"] == crew then
                        new_status = 3
                        break
                    end
                end
            end
        end

        if new_status and old_status ~= new_status then
            if flags["auto_set_statuses_notifications"] then
                new_notification(
                    "auto set "..da_player["Name"].."'s status to "..(new_status == 2 and "friendly" or "enemy"),
                    1
                )
            end
            data[1] = new_status
            signals["on_player_status_changed"]:Fire(data, new_status)
        end
    end)

    create_connection(menu_references["auto_set_statuses"]["on_toggle_change"], function(value)
        if auto_set_statuses_connection then
            auto_set_statuses_connection:Disconnect()
            auto_set_statuses_connection = nil
        end

        if value then
            for player, data in player_data do
                spawn(auto_set_status, data)
            end

            auto_set_statuses_connection = create_connection(signals["on_player_added"], auto_set_status)
        end
    end)

    create_connection(menu_references["set_friendly_if"]["on_dropdown_change"], function(value)
        local found_in_same_crew = false
        local found_roblox_friend = false

        for i = 1, #value do
            local value = value[i]
            if value == "in same crew" then
                found_in_same_crew = true
            elseif value == "is a friend" then
                found_roblox_friend = true
            end
        end

        do_friendly_is_same_crew = found_in_same_crew
        do_friendly_is_friend = found_roblox_friend
    end)

    create_connection(menu_references["set_enemy_if"]["on_dropdown_change"], function(value)
        if value[1] then
            local found_in_mutual_crew = false
            local found_roblox_friend = false

            for i = 1, #value do
                local value = value[i]
                if value == "in an enemy's crew" then
                    found_in_mutual_crew = true
                elseif value == "friends with an enemy" then
                    found_roblox_friend = true
                end
            end

            do_enemy_is_mutual_crew = found_in_mutual_crew
            do_enemy_is_mutual_friend = found_roblox_friend
        end
    end)

    -- >> ( player data creation )

    local blank_player_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAAAMdwEA6AMAAAx3AQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAO7qLRjGzAACAAAAI0lEQVQYV2NgZGRkAAIQBWGB2DiZSGphAEUBhAVkY2MyMAIACxYALVlZOREAAAAASUVORK5CYII=")
    local staff_player_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADdUAAA3VAT3WWPEAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAbl8BAOgDAABuXwEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADGgMOKJmQafQAAAE5JREFUKFOVjsEOgDAMQsdu/v/HetTRoKm0yeI7lI4UsuFcQs+XKd0CaeBNWGj9kg9LiCObT4t7//6Y0x1sRHN0SE9pUA4Zphafw00HAG7iXzDzhK35MgAAAABJRU5ErkJggg==")

    local on_character_added = LPH_NO_VIRTUALIZE(function(character)
        local humanoid = wait_for_child(character, "Humanoid", 5)
        local head = wait_for_child(character, "Head", 5)

        if not humanoid then
            return
        end
        
        local player = find_first_child(players_service, character["Name"])
        local data = player_data[player]
        data[3] = character

        signals["on_player_character_added_quick"]:Fire(character, head["Position"])

        local data_parts = data[4]

        for part, _ in data_parts do
            data_parts[part] = nil
        end

        local children = get_children(character)

        for i = 1, #children do
            local child = children[i]
            data_parts[child["Name"]] = child

            if child["ClassName"] == "Tool" then
                data[13] = child
                signals["on_player_tool_equipped"]:Fire(data, child)
            end
        end

        create_connection(character["ChildAdded"], function(child)
            data_parts[child["Name"]] = child

            if child["ClassName"] == "Tool" then
                data[13] = child
                signals["on_player_tool_equipped"]:Fire(data, child)
            end
        end)

        create_connection(character["ChildRemoved"], function(child)
            data_parts[child["Name"]] = nil

            if child["ClassName"] == "Tool" then
                data[13] = nil
                signals["on_player_tool_equipped"]:Fire(data, nil)
            end
        end)

        local old_health = floor(humanoid["Health"])

        create_connection(humanoid:GetPropertyChangedSignal("Health"), function()
            local health = floor(humanoid["Health"])
            data[9] = health

            signals["on_player_health_changed"]:Fire(data, health, old_health - health)
            old_health = health
        end)

        create_connection(humanoid:GetPropertyChangedSignal("MaxHealth"), function()
            data[10] = floor(humanoid["MaxHealth"])
        end)

        data[9] = old_health
        data[10] = floor(humanoid["MaxHealth"])
        data[11] = old_health

        signals["on_player_character_added"]:Fire(data, character)
        signals["on_player_health_changed"]:Fire(data, old_health, -old_health)

        local body_effects = wait_for_child(character, "BodyEffects", 9e9)
        local really_dead = wait_for_child(body_effects, "SDeath", 9e9)
        local dead = wait_for_child(body_effects, "Dead", 9e9)

        local armor = wait_for_child(body_effects, "Armor", 9e9)
        local knocked = wait_for_child(body_effects, "K.O", 9e9)

        local old_armor = armor["Value"]

        local function do_death()
            signals["on_player_died"]:Fire(data)
            signals["on_player_health_changed"]:Fire(data, 0, old_health - 0)
            signals["on_player_tool_equipped"]:Fire(data, nil)
            signals["on_player_armor_changed"]:Fire(data, 0, old_armor - 0)
        end

        if head then
            create_connection(head:GetPropertyChangedSignal("Parent"), function()
                if head["Parent"] == nil then
                    data[7] = true
                    do_death()
                end
            end)
        end
        create_connection(dead:GetPropertyChangedSignal("Value"), function()
            do_death()
        end)
        create_connection(really_dead:GetPropertyChangedSignal("Value"), function()
            data[7] = true
        end)

        create_connection(knocked:GetPropertyChangedSignal("Value"),function()
            data[18] = knocked["Value"]
            signals["on_player_knocked"]:Fire(data, knocked["Value"])
        end)

        create_connection(armor:GetPropertyChangedSignal("Value"), function()
            local armor = floor(armor["Value"])
            data[14] = armor

            signals["on_player_armor_changed"]:Fire(data, armor, old_armor - armor)
            old_armor = armor
        end)

        signals["on_player_armor_changed"]:Fire(data, old_armor, -old_armor)

        data[7] = really_dead["Value"]
        data[14] = old_armor
        data[15] = old_armor
        data[18] = knocked["Value"]
    end)

    local register_player = LPH_JIT_MAX(function(player)
        local status = saved_statuses[player["Name"]]
        local new_data = {
            [1] = status or 1, -- >> status
            [2] = player, -- >> player
            [3] = player["Character"], -- >> character
            [4] = { -- >> parts
                ["Head"] = nil,
                ["UpperTorso"] = nil,
                ["LowerTorso"] = nil,
                ["LeftUpperArm"] = nil,
                ["LeftLowerArm"] = nil,
                ["LeftHand"] = nil,
                ["RightUpperArm"] = nil,
                ["RightLowerArm"] = nil,
                ["RightHand"] = nil,
                ["LeftUpperLeg"] = nil,
                ["LeftLowerLeg"] = nil,
                ["LeftFoot"] = nil,
                ["RightUpperLeg"] = nil,
                ["RightLowerLeg"] = nil,
                ["RightFoot"] = nil,
                ["ForceField"] = nil
            },
            [5] = { -- >> drawings
                [1] = nil,
                [2] = nil,
                [3] = nil,
                [4] = nil,
                [5] = nil,
                [6] = nil,
                [7] = nil,
                [8] = nil,
                [9] = nil,
                [10] = nil,
                [11] = nil,
                [12] = nil,
                [13] = nil,
                [14] = nil
            },
            [6] = false, -- >> rendering
            [7] = false, -- >> dead
            [8] = nil, -- >> highlight
            [9] = 100, -- >> health
            [10] = 100, -- >> max health
            [11] = 100, -- >> fake health
            [12] = {}, -- >> chams
            [13] = nil, -- >> tool
            [14] = 0, -- >> armor
            [15] = 0, -- >> fake armor
            [16] = nil, -- >> role
            [17] = nil, -- >> information folder
            [18] = nil, -- >> ragdolled
            [19] = nil -- >> vehicle
        }

        spawn(function()
            local role = nil

            pcall(function()
                local new_role = player:GetRoleInGroup(10604500)

                if new_role ~= "Guest" and new_role ~= "Member" and new_role ~= "Members" then
                    role = new_role
                end
            end)

            if not role then
                pcall(function()
                    local new_role = player:GetRoleInGroup(17215700)

                    if new_role ~= "Guest" and new_role ~= "Member" and new_role ~= "Members" then
                        role = new_role
                    end
                end)
            end

            if not role then
                local id = player["UserId"]

                if id == 163721789 or id == 93101606 or id == 439942262 or id == 29242182 or id == 1830168970 or id == 2371804259 then
                    role = "admin"
                end
            end

            players:add_item({
                ["text"] = player["Name"],
                ["icons"] = role and
                {
                    staff_player_image_data,
                    blank_player_image_data
                } or {blank_player_image_data},
                ["text2"] = player["DisplayName"]
            })

            if role then
                new_data[16] = role:lower()
                signals["on_player_role_changed"]:Fire(new_data)
            end
        end)

        player_data[player] = new_data

        if player["Character"] then
            spawn(on_character_added, player["Character"])
        end

        create_connection(player["CharacterAdded"], on_character_added)
        signals["on_player_added"]:Fire(new_data)

        if status then
            signals["on_player_status_changed"]:Fire(new_data, status)
        end

        new_data[17] = wait_for_child(wait_for_child(player, "DataFolder", 9e9), "Information", 9e9)
    end)

    local remove_player = LPH_JIT_MAX(function(player)
        if player == local_player then
            return
        end

        players:remove_item(player["Name"])

        local data = player_data[player]
        local drawings = data[5]
        data[3] = nil

        for _, drawing in drawings do
            drawing:Destroy()
            drawings[_] = nil
        end

        local highlight = data[8]

        if highlight then
            destroy(highlight)
        end

        local chams = data[12]

        if chams then
            for i = 1, #chams do
                destroy(chams[i])
                chams[i] = nil
            end
            data[12] = nil
        end

        if ragebot_target == data then
            set_ragebot_target(nil, "ragebot target "..player["Name"].." has left")
        end

        if legitbot_target and legitbot_target[1] == data then
            set_legitbot_target(nil, "legitbot target "..player["Name"].." has left")
        end

        if ragebot_targets[data] then
            ragebot_targets[data] = nil
        end

        player_data[player] = nil
    end)

    local all_players = players_service:GetPlayers()
    for i = 1, #all_players do
        local player = all_players[i]
        if player ~= local_player then
            spawn(register_player, player)
        end
    end

    create_connection(players_service["PlayerAdded"], register_player)
    create_connection(players_service["PlayerRemoving"], remove_player)

    -- >> ( auto save friendlies )

    do
        local auto_save_offset = vector3_new(0,2.5,0)
        local auto_save_tick = clock()
        local last_position = nil

        local do_auto_save = LPH_JIT_MAX(function(dt, hrp)
            local tick = clock()
            local constraint = local_parts["GRABBING_CONSTRAINT"]
            local ignore_range = flags["auto_save_friendlies_ignore_range"]
            local local_client_position =local_client_position["p"]
            if hrp and not purchasing and not local_reloading and not constraint and not local_knocked then
                for player, data in player_data do
                    if data[1] == 2 and data[18] and not data[7] then
                        local parts = data[4]

                        if not parts["GRABBING_CONSTRAINT"] then
                            local torso = parts["UpperTorso"]
                            if torso and torso["Velocity"]["Magnitude"] < 100 and (torso["Position"]-local_client_position)["Magnitude"] > ignore_range then
                                if tick - auto_save_tick > 0.03 then
                                    auto_save_tick = tick
                                    event:FireServer("Grabbing")
                                end

                                local old_cframe = hrp["CFrame"]
                                if not last_position then
                                    last_position = old_cframe
                                end

                                local old_velocity = hrp["Velocity"]
                                hrp["Velocity"] = vector3_zero
                                hrp["CFrame"] = torso["CFrame"] + auto_save_offset
                                render_stepped_wait(render_stepped)

                                hrp["Velocity"] = old_velocity
                                hrp["CFrame"] = old_cframe

                                return
                            end
                        end
                    end
                end
            end

            if last_position then
                hrp["CFrame"] = last_position
                render_stepped_wait(render_stepped)
                if last_position then
                    hrp["CFrame"] = last_position
                end
                wait(0.05 + (local_ping/250))
                last_position = nil
                event:FireServer("Grabbing")
            end
        end)

        create_connection(menu_references["auto_save_friendlies"]["on_toggle_change"], function(value)
            for i = 1, #anti_aim do
                if anti_aim[i] == do_auto_save then
                    remove(anti_aim, i)
                    break
                end
            end

            if value then
                anti_aim[#anti_aim + 1] = do_auto_save
            end
        end)
    end
end

-- > ( world visuals )

do
    local lighting = game:GetService("Lighting")
    local sky = find_first_child_of_class(lighting, "Sky")

    local original = {
        ["ClockTime"] = lighting["ClockTime"],
        ["Technology"] = lighting["Technology"],
        ["TimeOfDay"] = lighting["TimeOfDay"],
        ["Ambient"] = lighting["Ambient"],
        ["OutdoorAmbient"] = lighting["OutdoorAmbient"],
    }
    local spoofing = {
        ["ClockTime"] = nil,
        ["TimeOfDay"] = nil,
        ["Technology"] = nil,
        ["Ambient"] = false,
        ["OutdoorAmbient"] = false,
    }

    do -- > ( spoof properties)
        local metatable = getrawmetatable(lighting)
            local old_new_index = metatable["__newindex"]
            local old_index = metatable["__index"]

        local fake_metatable = {
            ["__newindex"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, property, value)
                if self then
                    if not checkcaller() and spoofing[property] then
                        original[property] = value
                        return
                    end
                end
                return old_new_index(self, property, value)
            end)),
            ["__index"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, property)
                if self then
                    if not checkcaller() then
                        return spoofing[property] and original[property] or old_index(self, property)
                    end
                end
                return old_index(self, property)
            end))
        }

        for _, metamethod in metatable do
            if not fake_metatable[_] then
                fake_metatable[_] = metamethod
            end
        end

        setrawmetatable(lighting, fake_metatable)
    end

    menu_references["lighting_section"] = menu["groups"]["visuals"]:create_section("general", "world", 1, 0.65, 0)

    -- >> ( background noise )

    do
        local sounds = {
            ["windy winter"] = "rbxassetid://6046340391",
            ["light rain"] = "rbxassetid://18862087062",
            ["thunderstorm"] = "rbxassetid://4305545740",
            ["night"] = "rbxassetid://179507208",
            ["day"] = "rbxassetid://6189453706"
        }
        local sound = nil

        menu_references["background_noise"] = menu_references["lighting_section"]:create_element({["name"] = "background noise"}, {["toggle"] = {["flag"] = "background_noise"}})
            menu_references["background_noise_settings"] = menu_references["background_noise"]:create_settings()
            menu_references["background_noise_sound"] = menu_references["background_noise_settings"]:create_element({["name"] = "sound"}, {["dropdown"] = {["flag"] = "background_noise_sound", ["requires_one"] = true, ["options"] = {"windy winter", "thunderstorm", "light rain", "night", "day"}, ["use_custom_extensions"] = {"mp3", "ogg", "wav"}, ["default"] = {"night"}}})
            menu_references["background_noise_volume"] = menu_references["background_noise_settings"]:create_element({["name"] = "volume"}, {["slider"] = {["flag"] = "background_noise_volume", ["min"] = 0, ["max"] = 100, ["default"] = 25, ["suffix"] = "%"}})
        
        create_connection(menu_references["background_noise"]["on_toggle_change"], function(value)
            if sound then
                destroy(sound)
                sound = nil
            end

            if value then
                sound = create_instance("Sound", {
                    ["SoundId"] = sounds[flags["background_noise_sound"][1]],
                    ["Volume"] = flags["background_noise_volume"]/65,
                    ["Looped"] = true,
                    ["Name"] = "\0",
                    ["Parent"] = hui
                })

                sound["Play"](sound)
            end
        end)

        create_connection(menu_references["background_noise_volume"]["on_slider_change"], function(value)
            if sound then
                sound["Volume"] = value/65
            end
        end)

        create_connection(menu_references["background_noise_sound"]["on_dropdown_change"], function(value)
            local value = value[1]

            local new_sound = sounds[value]

            if not new_sound then
                local path = "juju recode/custom/"..value

                if isfile(path) then
                    local s, data = pcall(getcustomasset, path)

                    if not s then
                        new_notification(
                            "failed to load background noise "..value,
                            3
                        )
                    else
                        new_sound = data
                    end

                    sounds[value] = new_sound
                end
            end

            if sound then
                sound["SoundId"] = new_sound
                sound["Stop"](sound)
                sound["Play"](sound)
            end
        end)
    end

    -- >> ( lighting mode )

    menu_references["lighting_mode"] = menu_references["lighting_section"]:create_element({["name"] = "lighting mode"}, {["toggle"] = {["flag"] = "lighting_mode"}, ["dropdown"] = {["flag"] = "lighting_mode_value", ["options"] = {"compatibility", "shadowmap", "unified", "future", "legacy", "voxel"}, ["default"] = {lighting["Technology"]["Name"]:lower()}, ["requires_one"] = true}})

    create_connection(menu_references["lighting_mode"]["on_toggle_change"], function(value)
        if value then
            local value = flags["lighting_mode_value"][1]

            spoofing["Technology"] = true
            lighting["Technology"] = Enum["Technology"][value == "shadowmap" and "ShadowMap" or value:gsub("^.", string["upper"])]
        else
            spoofing["Technology"] = nil
            lighting["Technology"] = original["Technology"]
        end
    end)

    create_connection(menu_references["lighting_mode"]["on_dropdown_change"], function(value)
        if flags["lighting_mode"] then
            local value = value[1]
            lighting["Technology"] = Enum["Technology"][value == "shadowmap" and "ShadowMap" or value:gsub("^.", string["upper"])]
        end
    end)

    menu_references["world_time"] = menu_references["lighting_section"]:create_element({["name"] = "world time"}, {["toggle"] = {["flag"] = "world_time"}, ["slider"] = {["flag"] = "world_time_value", ["min"] = 0, ["max"] = 24, ["decimals"] = 1, ["suffix"] = "", ["prefix"] = "hour ", ["default"] = 4.5}})

    create_connection(menu_references["world_time"]["on_toggle_change"], function(value)
        if value then
            local time = flags["world_time_value"]
            spoofing["ClockTime"] = true
            spoofing["TimeOfDay"] = true
            lighting["ClockTime"] = time
        else
            spoofing["ClockTime"] = nil
            spoofing["TimeOfDay"] = nil
            lighting["ClockTime"] = original["ClockTime"]
        end
    end)

    create_connection(menu_references["world_time"]["on_slider_change"], function(value)
        if flags["world_time"] then
            lighting["ClockTime"] = value
        end
    end)

    -- >> ( atmosphere )

    menu_references["atmosphere"] = menu_references["lighting_section"]:create_element({["name"] = "atmosphere"}, {["toggle"] = {["flag"] = "atmosphere"}})
        menu_references["atmosphere_settings"] = menu_references["atmosphere"]:create_settings()
        menu_references["atmosphere_color"] = menu_references["atmosphere_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "atmosphere_color", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0, ["transparency_flag"] = "atmosphere_transparency"}})
        menu_references["atmosphere_decay"] = menu_references["atmosphere_settings"]:create_element({["name"] = "decay"}, {["colorpicker"] = {["color_flag"] = "decay_color", ["default_color"] = color3_fromrgb(120, 120, 120), ["default_transparency"] = 0, ["transparency_flag"] = "decay_transparency"}})
        menu_references["atmosphere_haze"] = menu_references["atmosphere_settings"]:create_element({["name"] = "haze"}, {["slider"] = {["flag"] = "haze", ["min"] = 0, ["max"] = 10, ["decimals"] = 3, ["suffix"] = "", ["prefix"] = "", ["default"] = 1}})
        menu_references["atmosphere_glare"] = menu_references["atmosphere_settings"]:create_element({["name"] = "glare"}, {["slider"] = {["flag"] = "glare", ["min"] = 0, ["max"] = 10, ["decimals"] = 3, ["suffix"] = "", ["prefix"] = "", ["default"] = 10}})
        menu_references["atmosphere_offset"] = menu_references["atmosphere_settings"]:create_element({["name"] = "offset"}, {["slider"] = {["flag"] = "offset", ["min"] = 0, ["max"] = 1, ["decimals"] = 3, ["suffix"] = "", ["prefix"] = "", ["default"] = 0}})
        menu_references["atmosphere_density"] = menu_references["atmosphere_settings"]:create_element({["name"] = "density"}, {["slider"] = {["flag"] = "density", ["min"] = 0, ["max"] = 1, ["decimals"] = 3, ["suffix"] = "", ["prefix"] = "", ["default"] = 0.35}})

    local atmosphere = nil

    create_connection(menu_references["atmosphere"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
        if atmosphere then
            destroy(atmosphere)
            atmosphere = nil
        end

        if value then
            atmosphere = create_instance("Atmosphere", {
                ["Color"] = flags["atmosphere_color"],
                ["Density"] = flags["density"],
                ["Glare"] = flags["glare"],
                ["Haze"] = flags["haze"],
                ["Offset"] = flags["offset"],
                ["Decay"] = flags["decay_color"],
                ["Parent"] = lighting
            })
        end
    end))

    create_connection(menu_references["atmosphere_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(value)
        if atmosphere then
            atmosphere["Color"] = value
        end
    end))

    create_connection(menu_references["atmosphere_decay"]["on_color_change"], function(value)
        if atmosphere then
            atmosphere["Decay"] = value
        end
    end)

    create_connection(menu_references["atmosphere_haze"]["on_slider_change"], LPH_NO_VIRTUALIZE(function(value)
        if atmosphere then
            atmosphere["Haze"] = value
        end
    end))

    create_connection(menu_references["atmosphere_glare"]["on_slider_change"], LPH_NO_VIRTUALIZE(function(value)
        if atmosphere then
            atmosphere["Glare"] = value
        end
    end))

    create_connection(menu_references["atmosphere_offset"]["on_slider_change"], LPH_NO_VIRTUALIZE(function(value)
        if atmosphere then
            atmosphere["Offset"] = value
        end
    end))

    create_connection(menu_references["atmosphere_density"]["on_slider_change"], function(value)
        if atmosphere then
            atmosphere["Density"] = value
        end
    end)

    -- >> ( saturation )

    local color_correction = find_first_child_of_class(lighting, "ColorCorrectionEffect")

    menu_references["saturation"] = menu_references["lighting_section"]:create_element({["name"] = "saturation"}, {["toggle"] = {["flag"] = "saturation"}, ["slider"] = {["min"] = -1, ["max"] = 1, ["decimals"] = 2, ["default"] = round(color_correction["Saturation"], 2), ["flag"] = "saturation_value"}})

    create_connection(menu_references["saturation"]["on_toggle_change"], function(value)
        if color_correction then
            color_correction["Saturation"] = value and flags["saturation_value"] or 0.1
        end
    end)

    create_connection(menu_references["saturation"]["on_slider_change"], function(value)
        if color_correction and flags["saturation"] then
            color_correction["Saturation"] = value
        end
    end)

    -- >> ( contrast )

    menu_references["contrast"] = menu_references["lighting_section"]:create_element({["name"] = "contrast"}, {["toggle"] = {["flag"] = "contrast"}, ["slider"] = {["min"] = -1, ["max"] = 1, ["decimals"] = 2, ["default"] = round(color_correction["Contrast"], 2), ["flag"] = "contrast_value"}})

    create_connection(menu_references["contrast"]["on_toggle_change"], function(value)
        if color_correction then
            color_correction["Contrast"] = value and flags["contrast_value"] or 0.05
        end
    end)

    create_connection(menu_references["contrast"]["on_slider_change"], function(value)
        if color_correction and flags["contrast"] then
            color_correction["Contrast"] = value
        end
    end)

    -- >> ( textures )

    local textures_connection = nil
    local material_service = cloneref(game:GetService("MaterialService"))

    local texture_packs = {
        ["minecraft"] = {
            ["Slate"] = "http://www.roblox.com/asset/?id=8676746437",
            ["Grass"] = "http://www.roblox.com/asset/?id=9267183930",
            ["Sand"] = "http://www.roblox.com/asset/?id=12624140843",
            ["Wood"] = "http://www.roblox.com/asset/?id=3258599312",
            ["Brick"] = "http://www.roblox.com/asset/?id=10777285622",
            ["Concrete"] = "http://www.roblox.com/asset/?id=15622710576",
            ["CorrodedMetal"] = "rbxassetid://78612695839404",
            ["Metal"] = "http://www.roblox.com/asset/?id=121650613091353",
            ["WoodPlanks"] = "http://www.roblox.com/asset/?id=8676581022"
        },
    }
    local restores = {}
    local textures = texture_packs["minecraft"]
    local variants = {}

    menu_references["textures"] = menu_references["lighting_section"]:create_element({["name"] = "textures"}, {["toggle"] = {["flag"] = "textures"}})
        menu_references["textures_settings"] = menu_references["textures"]:create_settings()
        menu_references["textures_pack"] = menu_references["textures_settings"]:create_element({["name"] = "pack"}, {["dropdown"] = {["flag"] = "textures_pack", ["options"] = {"minecraft"}, ["default"] = {"minecraft"}, ["use_custom_extensions"] = {"json", "txt", "ink", "textures"}, ["requires_one"] = true}})

    local apply_texture = LPH_NO_VIRTUALIZE(function(descendant)
        local class_name = descendant["ClassName"]
        local white = color3_fromrgb(254, 253, 255)

        if class_name == "MeshPart" or class_name == "Part" then
            local texture = textures[descendant["Material"]["Name"]]

            if (texture or descendant["Color"] == white) and descendant["Transparency"] < 0.8 then
                if not restores[descendant] then
                    restores[descendant] = descendant["Color"]

                    descendant["Color"] = white
                end
            end
        end
    end)

    local apply_textures = LPH_NO_VIRTUALIZE(function()
        for i = 1, #variants do
            destroy(variants[i])
            variants[i] = nil
        end

        for name, id in textures do
            if name ~= "Glass" then
                local material = create_instance("MaterialVariant", {
                    ["MetalnessMap"] = id,
                    ["NormalMap"] = id,
                    ["BaseMaterial"] = Enum["Material"][name],
                    ["Name"] = name,
                    ["StudsPerTile"] = 5,
                    ["RoughnessMap"] = id,
                    ["Parent"] = material_service,
                    ["ColorMap"] = id,
                })
                variants[#variants+1] = material
            end
        end

        local descendants = workspace["MAP"]:GetDescendants()

        for i = 1, #descendants do
            apply_texture(descendants[i])
        end
    end)

    local get_textures = LPH_JIT_MAX(function(value)
        local path = "juju recode/custom/"..value

        if isfile(path) then
            local s, data = pcall(function()
                return http_service:JSONDecode(readfile(path))
            end)

            if s and data then
                local texture_pack = {}

                for property, value in data do
                    texture_pack[property] = value
                end

                texture_packs[value] = texture_pack

                textures = texture_pack
                if textures_connection then
                    apply_textures()
                end
            else
                new_notification(
                    "failed to load file "..value,
                    3
                )
            end
        end
    end)

    create_connection(menu_references["textures"]["on_toggle_change"], LPH_JIT_MAX(function(value)
        if textures_connection then
            textures_connection:Disconnect()
            textures_connection = nil
        end

        if value then
            textures_connection = create_connection(workspace["MAP"]["DescendantAdded"], apply_texture)
            apply_textures()
        else
            for i = 1, #variants do
                destroy(variants[i])
                variants[i] = nil
            end
            for part, data in restores do
                part["Color"] = data
                restores[part] = nil
            end
        end
    end))

    create_connection(menu_references["textures_pack"]["on_dropdown_change"], LPH_NO_VIRTUALIZE(function(value)
        local value = value[1]
        textures = texture_packs[value]

        if not textures then
            get_textures(value)
            textures = texture_packs[value]
        end

        textures = texture_packs[value]
    end))

    -- >> ( ambient )

    menu_references["ambient"] = menu_references["lighting_section"]:create_element({["name"] = "ambient"}, {["toggle"] = {["flag"] = "ambient"}})
        menu_references["ambient_settings"] = menu_references["ambient"]:create_settings()
        menu_references["ambient_outdoor_color"] = menu_references["ambient_settings"]:create_element({["name"] = "outdoor color"}, {["colorpicker"] = {["color_flag"] = "outdoor_color", ["default_color"] = lighting["OutdoorAmbient"], ["default_transparency"] = 0, ["transparency_flag"] = "outdoor_transparency"}})
        menu_references["ambient_color"] = menu_references["ambient_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "ambient_color", ["default_color"] = lighting["Ambient"], ["default_transparency"] = 0, ["transparency_flag"] = "ambient_transparency"}})

    create_connection(menu_references["ambient"]["on_toggle_change"], function(value)
        if value then
            spoofing["Ambient"] = true
            lighting["Ambient"] = flags["ambient_color"]
            spoofing["OutdoorAmbient"] = true
            lighting["OutdoorAmbient"] = flags["outdoor_color"]
        else
            spoofing["Ambient"] = false
            spoofing["OutdoorAmbient"] = false
            lighting["Ambient"] = original["Ambient"]
            lighting["OutdoorAmbient"] = original["OutdoorAmbient"]
        end
    end)

    create_connection(menu_references["ambient_color"]["on_color_change"], function(color)
        if flags["ambient"] then
            lighting["Ambient"] = color
        end
    end)

    create_connection(menu_references["ambient_outdoor_color"]["on_color_change"], function(color)
        if flags["ambient"] then
            lighting["OutdoorAmbient"] = color
        end
    end)

    -- >> ( weather )

    menu_references["weather"] = menu_references["lighting_section"]:create_element({["name"] = "weather"}, {["toggle"] = {["flag"] = "weather"}})
        menu_references["weather_settings"] = menu_references["weather"]:create_settings()
        menu_references["weather_type"] = menu_references["weather_settings"]:create_element({["name"] = "type"}, {["dropdown"] = {["flag"] = "weather_type", ["options"] = {"light rain", "rain", "snow"}, ["default"] = {"rain"}, ["requires_one"] = true}})
        menu_references["weather_color"] = menu_references["weather_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "weather_color", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0, ["transparency_flag"] = "weather_transparency"}})
        menu_references["weather_rate"] = menu_references["weather_settings"]:create_element({["name"] = "rate"}, {["slider"] = {["flag"] = "weather_rate", ["min"] = 1, ["max"] = 100, ["default"] = 100, ["suffix"] = "%"}})

    local weather_part = nil
    local weather_particle = nil

    local weather_types = {
        ["rain"] = {
            ["Speed"] = NumberRange.new(60, 60),
            ["LockedToPart"] = true,
            ["Rate"] = 600,
            ["Texture"] = "rbxassetid://1822883048",
            ["EmissionDirection"] = Enum.NormalId.Bottom,
            ["Transparency"] = NumberSequence.new{
            NumberSequenceKeypoint.new(0, 1),
            NumberSequenceKeypoint.new(0.25, 0.7842668294906616),
            NumberSequenceKeypoint.new(0.75, 0.7842668294906616),
            NumberSequenceKeypoint.new(1, 1)
            },
            ["Lifetime"] = NumberRange.new(0.800000011920929, 0.800000011920929),
            ["LightEmission"] = 0.05000000074505806,
            ["LightInfluence"] = 0.8999999761581421,
            ["Orientation"] = Enum.ParticleOrientation.FacingCameraWorldUp,
            ["Size"] = NumberSequence.new{
            NumberSequenceKeypoint.new(0, 10),
            NumberSequenceKeypoint.new(1, 10)
            }
        },
        ["snow"] = {
            ["Transparency"] = NumberSequence.new{
                NumberSequenceKeypoint.new(0, 0.7374999523162842),
                NumberSequenceKeypoint.new(0.973, 0.768750011920929),
                NumberSequenceKeypoint.new(1, 1)
            },
            ["Texture"] = "http://www.roblox.com/asset/?id=99851851",
            ["SpreadAngle"] = Vector2.new(50, 50),
            ["Speed"] = NumberRange.new(30, 30),
            ["LightEmission"] = 0.5,
            ["Rate"] = 1000,
            ["EmissionDirection"] = Enum.NormalId.Bottom,
            ["Size"] = NumberSequence.new{
                NumberSequenceKeypoint.new(0, 0.33096909523010254),
                NumberSequenceKeypoint.new(0.551, 0.40189146995544434),
                NumberSequenceKeypoint.new(1, 0.33096909523010254)
            }
        },
        ["light rain"] = {
            ["LockedToPart"] = true,
            ["Rate"] = 500,
                ["Squash"] = NumberSequence.new{
                NumberSequenceKeypoint.new(0, 3),
                NumberSequenceKeypoint.new(1, 3)
            },
                ["LightInfluence"] = 0.30000001192092896,
                ["Transparency"] = NumberSequence.new{
                NumberSequenceKeypoint.new(0, 0),
                NumberSequenceKeypoint.new(0.435, 0),
                NumberSequenceKeypoint.new(1, 0)
            },
            ["Texture"] = "rbxasset://textures/particles/sparkles_main.dds",
            ["Speed"] = NumberRange.new(30, 50),
            ["Lifetime"] = NumberRange.new(9, 9),
            ["LightEmission"] = 0.5,
            ["Brightness"] = 2,
            ["EmissionDirection"] = Enum.NormalId.Bottom,
            ["Orientation"] = Enum.ParticleOrientation.FacingCameraWorldUp,
            ["Size"] = NumberSequence.new{
                NumberSequenceKeypoint.new(0, 0.20000000298023224),
                NumberSequenceKeypoint.new(1, 0.20000000298023224)
            }
        }
    }

    local offset = vector3_new(0, 20, 0)

    local do_weather = LPH_NO_VIRTUALIZE(function(dt, hrp)
        weather_part["CFrame"] = cframe_new(camera["CFrame"]["p"]) + offset
    end)

    local ignored = ignored["Siren"]["Radius"]

    create_connection(menu_references["weather"]["on_toggle_change"], function(value)
        if weather_part then
            destroy(weather_part)
            weather_part = nil
            weather_particle = nil
        end

        for i = 1, #heartbeat do
            if heartbeat[i] == do_weather then
                remove(heartbeat, i)
                break
            end
        end

        if value then
            weather_part = create_instance("Part", {
                ["Size"] = vector3_new(40, 40, 85),
                ["CanCollide"] = false,
                ["Massless"] = true,
                ["CastShadow"] = false,
                ["Transparency"] = 1,
                ["Anchored"] = true,
                ["Name"] = "\0",
                ["Parent"] = ignored
            })

            local data = weather_types[flags["weather_type"][1]]
            local color = ColorSequence.new(flags["weather_color"])
            weather_particle = create_instance("ParticleEmitter", data)
            weather_particle["Color"] = color
            weather_particle["Parent"] = weather_part

            heartbeat[#heartbeat+1] = do_weather
        end
    end)

    create_connection(menu_references["weather_type"]["on_dropdown_change"], function(value)
        if weather_particle then
            destroy(weather_particle)
            weather_particle = nil

            weather_particle = create_instance("ParticleEmitter", weather_types[value[1]])
            weather_particle["Color"] = ColorSequence.new(flags["weather_color"])
            weather_particle["Parent"] = weather_part
        end
    end)

    create_connection(menu_references["weather_color"]["on_color_change"], function(color)
        if weather_particle then
            local color = ColorSequence.new(color)
            weather_particle["Color"] = color
        end
    end)

    create_connection(menu_references["weather_rate"]["on_slider_change"], function(value)
        local rate = 1000 * (value/100)

        if weather_particle then
            weather_particle["Rate"] = rate
        end

        for weather, data in weather_types do
            weather_types[weather]["Rate"] = rate
        end
    end)

    -- >> ( skybox )

    local skyboxes = {
        ["default"] = {
            ["SkyboxBk"] = sky["SkyboxBk"],
            ["SkyboxDn"] = sky["SkyboxDn"],
            ["SkyboxFt"] = sky["SkyboxFt"],
            ["SkyboxLf"] = sky["SkyboxLf"],
            ["SkyboxRt"] = sky["SkyboxRt"],
            ["SkyboxUp"] = sky["SkyboxUp"],
            ["SunTextureId"] = sky["SunTextureId"],
            ["MoonTextureId"] = sky["MoonTextureId"]
        },
        ["stormy"] = {
            ["SkyboxUp"] = "http://www.roblox.com/asset/?id=18703232671",
            ["SkyboxBk"] = "http://www.roblox.com/asset/?id=18703245834",
            ["SkyboxLf"] = "http://www.roblox.com/asset/?id=18703237556",
            ["SkyboxDn"] = "http://www.roblox.com/asset/?id=18703243349",
            ["SkyboxFt"] = "http://www.roblox.com/asset/?id=18703240532",
            ["SkyboxRt"] = "http://www.roblox.com/asset/?id=18703235430",
            ["SunTextureId"] = sky["SunTextureId"],
            ["MoonTextureId"] = sky["MoonTextureId"]
        },
        ["blue space"] = {
            ["SkyboxLf"] = "rbxassetid://15536114370",
            ["SkyboxUp"] = "rbxassetid://15536117282",
            ["SkyboxRt"] = "rbxassetid://15536118762",
            ["SkyboxFt"] = "rbxassetid://15536116141",
            ["SkyboxDn"] = "rbxassetid://15536112543",
            ["SkyboxBk"] = "rbxassetid://15536110634",
            ["SunTextureId"] = sky["SunTextureId"],
            ["MoonTextureId"] = sky["MoonTextureId"]
        },
        ["pink"] = {
            ["SkyboxUp"] = "rbxassetid://12216108877",
            ["SkyboxLf"] = "rbxassetid://12216110170",
            ["SkyboxRt"] = "rbxassetid://12216110471",
            ["SkyboxFt"] = "rbxassetid://12216109489",
            ["SkyboxBk"] = "rbxassetid://12216109205",
            ["SkyboxDn"] = "rbxassetid://12216109875",
            ["SunTextureId"] = sky["SunTextureId"],
            ["MoonTextureId"] = sky["MoonTextureId"]
        },
        ["black storm"] = {
            ["SkyboxLf"] = "rbxassetid://15502507918",
            ["SkyboxUp"] = "rbxassetid://15502511911",
            ["SkyboxRt"] = "rbxassetid://15502509398",
            ["SkyboxFt"] = "rbxassetid://15502510289",
            ["SkyboxDn"] = "rbxassetid://15502508460",
            ["SkyboxBk"] = "rbxassetid://15502511288",
            ["SunTextureId"] = sky["SunTextureId"],
            ["MoonTextureId"] = sky["MoonTextureId"]
        },
        ["realistic"] = {
            ["SkyboxUp"] = "rbxassetid://653719321",
            ["SkyboxDn"] = "rbxassetid://653718790",
            ["SkyboxLf"] = "rbxassetid://653719190",
            ["SkyboxFt"] = "rbxassetid://653719067",
            ["SkyboxRt"] = "rbxassetid://653718931",
            ["SkyboxBk"] = "rbxassetid://653719502",
            ["SunTextureId"] = sky["SunTextureId"],
            ["MoonTextureId"] = sky["MoonTextureId"]
        }
    }

    menu_references["skybox"] = menu_references["lighting_section"]:create_element({["name"] = "skybox"}, {["toggle"] = {["flag"] = "skybox"}})
        menu_references["skybox_settings"] = menu_references["skybox"]:create_settings()
        menu_references["skybox_value"] = menu_references["skybox_settings"]:create_element({["name"] = "sky"}, {["dropdown"] = {["flag"] = "skybox_value", ["requires_one"] = true, ["options"] = {"black storm", "blue space", "realistic", "stormy", "pink"}, ["use_custom_extensions"] = {"rbxm"}, ["default"] = {"black storm"}}})

    local apply_skybox = LPH_NO_VIRTUALIZE(function(skybox)
        local ids = skyboxes[skybox]

        sky["SkyboxBk"] = ids["SkyboxBk"]
        sky["SkyboxDn"] = ids["SkyboxDn"]
        sky["SkyboxFt"] = ids["SkyboxFt"]
        sky["SkyboxLf"] = ids["SkyboxLf"]
        sky["SkyboxRt"] = ids["SkyboxRt"]
        sky["SkyboxUp"] = ids["SkyboxUp"]
        sky["SunTextureId"] = ids["SunTextureId"]
        sky["MoonTextureId"] = ids["MoonTextureId"]
    end)

    create_connection(menu_references["skybox"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
        apply_skybox(value and flags["skybox_value"][1] or "default")
    end))

    create_connection(menu_references["skybox_value"]["on_dropdown_change"], LPH_JIT_MAX(function(value)
        local value = value[1]

        if not skyboxes[value] then
            local new_skybox = game:GetObjects(getcustomasset("juju recode/custom/"..value))[1]
            skyboxes[value] = new_skybox
        end

        if flags["skybox"] then
            apply_skybox(value)
        end
    end))

    -- >> ( tint )

    menu_references["tint"] = menu_references["lighting_section"]:create_element({["name"] = "tint"}, {["toggle"] = {["flag"] = "tint"}, ["colorpicker"] = {["color_flag"] = "tint_color", ["default_color"] = color_correction["TintColor"], ["transparency_flag"] = "tint_transparency", ["default_transparency"] = 0}})

    create_connection(menu_references["tint"]["on_toggle_change"], function(value)
        if color_correction then
            color_correction["TintColor"] = value and flags["tint_color"] or color3_fromrgb(255,255,255)
        end
    end)

    create_connection(menu_references["tint"]["on_color_change"], function(value)
        if flags["tint"] and color_correction then
            color_correction["TintColor"] = value
        end
    end)
end

-- >> ( game )

do
    local numbersequencekeypointnew = NumberSequenceKeypoint["new"]
    local numbersequencenew = NumberSequence["new"]
    local get_attribute = local_player["GetAttribute"]
    local local_name = local_player["Name"]

    local on_player_bullet_fired = signals["on_player_bullet_fired"]
    local on_local_bullet_fired = signals["on_local_bullet_fired"]
    local on_rpg_fired = signals["on_rpg_fired"]

    create_connection(ignored["Siren"]["Radius"]["ChildAdded"], LPH_NO_VIRTUALIZE(function(object)
        wait()
        local name = object["Name"]
        if name == "BULLET_RAYS" then
            local beam = find_first_child_of_class(object, "Beam")
            if beam then
                local cframe = beam["Attachment1"]["WorldCFrame"]
                if get_attribute(object, "OwnerCharacter") == local_name then
                    on_local_bullet_fired:Fire(object, beam, cframe, true)
                else
                    on_player_bullet_fired:Fire(object, beam, cframe, false)
                end
            end
        end
    end))

    create_connection(ignored["ChildAdded"], LPH_NO_VIRTUALIZE(function(object)
        wait()
        if object["Name"] == "Model" then
            local launcher = wait_for_child(object, "Launcher", 5)

            if launcher then
                on_rpg_fired:Fire(launcher, launcher["CFrame"]["lookVector"]*-1000)
            end
        end
    end))

    menu_references["hud_section"] = menu["groups"]["visuals"]:create_section("general", "hud", 1, 0.35, 0.65)
        menu_references["server_position_indicator"] = menu_references["hud_section"]:create_element({["name"] = "server position indicator"}, {["toggle"] = {["flag"] = "server_position_indicator"}})
        menu_references["server_position_indicator_settings"] = menu_references["server_position_indicator"]:create_settings()
        menu_references["smooth_server_position_indicator"] = menu_references["server_position_indicator_settings"]:create_element({["name"] = "smooth"}, {["toggle"] = {["flag"] = "smooth_server_position_indicator"}})
        menu_references["server_position_indicator_icon_color"] = menu_references["server_position_indicator_settings"]:create_element({["name"] = "icon color"}, {["colorpicker"] = {["color_flag"] = "server_position_indicator_icon_color", ["default_color"] = color3_fromrgb(193, 247, 255), ["default_transparency"] = 0.89, ["transparency_flag"] = "server_position_indicator_icon_transparency"}})
        menu_references["server_position_indicator_glow_color"] = menu_references["server_position_indicator_settings"]:create_element({["name"] = "glow color"}, {["colorpicker"] = {["color_flag"] = "server_position_indicator_glow_color", ["default_color"] = color3_fromrgb(193, 247, 255), ["default_transparency"] = 0.9, ["transparency_flag"] = "server_position_indicator_glow_transparency"}})
        menu_references["server_position_indicator_background_color"] = menu_references["server_position_indicator_settings"]:create_element({["name"] = "background color"}, {["colorpicker"] = {["color_flag"] = "server_position_indicator_background_color", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0.89, ["transparency_flag"] = "server_position_indicator_background_transparency"}})
        menu_references["crosshair_animations"] = menu_references["hud_section"]:create_element({["name"] = "crosshair animations"}, {["toggle"] = {["flag"] = "crosshair_animations"}})
        menu_references["crosshair_animations_settings"] = menu_references["crosshair_animations"]:create_settings()
        menu_references["crosshair_animations_fade_in_and_out"] = menu_references["crosshair_animations_settings"]:create_element({["name"] = "fade in and out"}, {["toggle"] = {["flag"] = "crosshair_animations_fade_in_and_out"}})
        menu_references["crosshair_animations_spin"] = menu_references["crosshair_animations_settings"]:create_element({["name"] = "spin"}, {["toggle"] = {["flag"] = "crosshair_animations_spin"}, ["dropdown"] = {["options"] = {"constant", "ease"}, ["flag"] = "crosshair_animations_spin_type", ["multi"] = false, ["requires_one"] = true, ["default"] = {"ease"}}})
        menu_references["crosshair_animations_spin_speed"] = menu_references["crosshair_animations_settings"]:create_element({["name"] = "speed"}, {["slider"] = {["flag"] = "crosshair_animations_spin_speed", ["min"] = 1, ["max"] = 100, ["suffix"] = "%", ["default"] = 15}})
        menu_references["crosshair_animations_spin_speed"]:set_visible(false)
        menu_references["drawing_crosshair"] = menu_references["hud_section"]:create_element({["name"] = "drawing crosshair"}, {["toggle"] = {["flag"] = "drawing_crosshair"}})
        menu_references["drawing_crosshair_settings"] = menu_references["drawing_crosshair"]:create_settings()
        menu_references["drawing_crosshair_follow_target"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "follow target"}, {["toggle"] = {["flag"] = "drawing_crosshair_follow_target"}})
        menu_references["drawing_crosshair_animation"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "animation style"}, {["dropdown"] = {["flag"] = "drawing_crosshair_animation", ["requires_one"] = true, ["options"] = {"expand", "spiral", "glitch", "ripple", "none"}, ["default"] = {"none"}}})
        menu_references["drawing_crosshair_animation_speed"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "speed"}, {["slider"] = {["flag"] = "drawing_crosshair_animation_speed", ["min"] = 1, ["max"] = 100, ["suffix"] = "%"}})
        menu_references["drawing_crosshair_target_outline_color"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "target outline color"}, {["colorpicker"] = {["color_flag"] = "drawing_crosshair_target_outline_color", ["default_color"] = color3_fromrgb(193, 222, 222), ["default_transparency"] = 0, ["transparency_flag"] = "drawing_crosshair_target_outline_transparency"}})
        menu_references["drawing_crosshair_target_line_color"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "target line color"}, {["colorpicker"] = {["color_flag"] = "drawing_crosshair_target_line_color", ["default_color"] = color3_fromrgb(193, 222, 222), ["default_transparency"] = 0, ["transparency_flag"] = "drawing_crosshair_target_line_transparency"}})
        menu_references["drawing_crosshair_outline_color"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "outline color"}, {["colorpicker"] = {["color_flag"] = "drawing_crosshair_outline_color", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0, ["transparency_flag"] = "drawing_crosshair_outline_transparency"}})
        menu_references["drawing_crosshair_line_color"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "line color"}, {["colorpicker"] = {["color_flag"] = "drawing_crosshair_line_color", ["default_color"] = color3_fromrgb(193, 247, 255), ["default_transparency"] = 0, ["transparency_flag"] = "drawing_crosshair_line_transparency"}})
        menu_references["drawing_crosshair_line_thickness"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "line thickness"}, {["slider"] = {["flag"] = "drawing_crosshair_line_thickness", ["min"] = 1, ["max"] = 4, ["suffix"] = "px", ["default"] = 2}})
        menu_references["drawing_crosshair_line_size"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "line size"}, {["slider"] = {["flag"] = "drawing_crosshair_line_size", ["min"] = 4, ["max"] = 30, ["suffix"] = "px", ["default"] = 5}})
        menu_references["drawing_crosshair_gap_size"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "gap size"}, {["slider"] = {["flag"] = "drawing_crosshair_gap_size", ["min"] = 1, ["max"] = 30, ["suffix"] = "px", ["default"] = 2}})
        menu_references["drawing_crosshair_rotation"] = menu_references["drawing_crosshair_settings"]:create_element({["name"] = "rotating"}, {["slider"] = {["flag"] = "drawing_crosshair_rotation", ["min"] = 0, ["max"] = 100, ["suffix"] = "%", ["min_text"] = "off"}})
        menu_references["center_panel"] = menu_references["hud_section"]:create_element({["name"] = "center panel"}, {["toggle"] = {["flag"] = "center_panel"}})
        menu_references["center_panel_settings"] = menu_references["center_panel"]:create_settings()
        menu_references["center_panel_show_state"] = menu_references["center_panel_settings"]:create_element({["name"] = "show state"}, {["toggle"] = {["flag"] = "center_panel_show_state"}})
        menu_references["center_panel_primary_color"] = menu_references["center_panel_settings"]:create_element({["name"] = "primary color"}, {["colorpicker"] = {["color_flag"] = "center_panel_primary_color", ["default_color"] = color3_fromrgb(220, 214, 255), ["default_transparency"] = 0, ["transparency_flag"] = "center_panel_primary_transparency"}})
        menu_references["center_panel_secondary_color"] = menu_references["center_panel_settings"]:create_element({["name"] = "secondary color"}, {["colorpicker"] = {["color_flag"] = "center_panel_secondary_color", ["default_color"] = color3_fromrgb(230, 230, 230), ["default_transparency"] = 0, ["transparency_flag"] = "center_panel_secondary_transparency"}})
        menu_references["aspect_ratio"] = menu_references["hud_section"]:create_element({["name"] = "aspect ratio"}, {["toggle"] = {["flag"] = "aspect_ratio"}, ["slider"] = {["flag"] = "aspect_ratio_value", ["min"] = 0.1, ["max"] = 1.2, ["default"] = 1, ["decimals"] = 2, ["suffix"] = "x"}})
        menu_references["show_chat"] = menu_references["hud_section"]:create_element({["name"] = "show chat"}, {["toggle"] = {["flag"] = "show_chat"}})
        --menu_references["statistics_window"] = menu_references["hud_section"]:create_element({["name"] = "statistics window"}, {["toggle"] = {["flag"] = "statistics_window"}})

    -- >> show chat

    do
        local text_chat_service = cloneref(game["GetService"](game, "TextChatService"))

        create_connection(menu_references["show_chat"]["on_toggle_change"], function(value)
            text_chat_service["ChatWindowConfiguration"]["Enabled"] = value
        end)
    end

    -- >> ( aspect ratio )

    local multiplier = cframe_new(0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1)
    local last_tween_value = 0

    local tween_function = nil

    local do_aspect_ratio = LPH_NO_VIRTUALIZE(function(dt)
        render_stepped_wait(render_stepped)
        camera["CFrame"]*=multiplier
    end)

    local tween_ratio = LPH_JIT_MAX(function(new_value, force)
        if tween_function then
            for i = 1, #heartbeat do
                if heartbeat[i] == tween_function then
                    remove(heartbeat, i)
                    break
                end
            end
        end

        local elapsed_time = 0
        local old_last_tween_value = last_tween_value

        local new_tween_function = function(dt)
            elapsed_time+=dt
            last_tween_value = old_last_tween_value + (new_value - old_last_tween_value) * get_value(tween_service, elapsed_time/0.16, circular, out)
            multiplier = cframe_new(0, 0, 0, 1, 0, 0, 0, last_tween_value, 0, 0, 0, 1)
            if force then
                render_stepped_wait(render_stepped)
                camera["CFrame"]*=multiplier
            end
        end

        tween_function = new_tween_function

        multiplier = cframe_new(0, 0, 0, 1, 0, 0, 0, last_tween_value, 0, 0, 0, 1)

        heartbeat[#heartbeat+1] = tween_function

        delay(0.16, function()
            for i = 1, #heartbeat do
                if heartbeat[i] == new_tween_function then
                    remove(heartbeat, i)
                    multiplier = cframe_new(0, 0, 0, 1, 0, 0, 0, new_value, 0, 0, 0, 1)
                    break
                end
            end
        end)
    end)

    create_connection(menu_references["aspect_ratio"]["on_toggle_change"], function(value)
        for i = 1, #heartbeat do
            if heartbeat[i] == do_aspect_ratio then
                remove(heartbeat, i)
                break
            end
        end

        if value then
            last_tween_value = 1
            multiplier = cframe_new(0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1)
            tween_ratio(flags["aspect_ratio_value"])
            heartbeat[#heartbeat+1] = do_aspect_ratio
        else
            tween_ratio(1, true)
        end
    end)

    create_connection(menu_references["aspect_ratio"]["on_slider_change"], function(value)
        tween_ratio(value)
    end)

    -- >> ( center panel )

    do
        local heart_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAA2XYBAOgDAADZdgEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACnKL6u+xXB7AAAAEZJREFUKFONj1sOADAEBOn976xWENVHOglWMh9QQbxAzcQ+RbHAzFgy29CWwgmIw/OTL2m7qVJvChYxBFsaEGHeP3GaQDQBlXYd/dTBOJ0AAAAASUVORK5CYII=")
        local heart_overlay_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAA8nYBAOgDAADydgEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACOO8FX0xe8TgAAADpJREFUKFNjgIH/UIDOBgFGEIEsgA4YQQCfAhhggtJ4AVGKiHMTlI1VIUwerggEkBUiG4ABME1kYAAAII4n8u04np4AAAAASUVORK5CYII=")

        local text = nil
        local text2 = nil
        local text3 = nil
        local heart = nil
        local shadow = nil
        local heart_overlay = nil

        local center_panel_mouse_behavior_connection = nil
        local center_panel_viewport_size_connection = nil
        local last_beat = clock()
        local linear = Enum["EasingStyle"]["Linear"]

        local update_center_panel = LPH_JIT_MAX(function(bypass)
            local screen_size = camera["ViewportSize"]/2
            local x_size = screen_size["X"] - 4
            local y_size = screen_size["Y"] - 2

            local juju_textbounds = text["TextBounds"]
            local build_textbounds = text2["TextBounds"]

            local total_size = juju_textbounds["X"] + build_textbounds["X"] + 13
            local do_offset = user_input_service["MouseBehavior"] ~= Enum["MouseBehavior"]["Default"]
            local offset = do_offset and total_size/2 + 5 or 0

            y_size = do_offset and y_size + 5 or y_size - juju_textbounds["Y"]/2

            local shadow_size = floor(total_size/11)

            local new_text_position = vector2_new(x_size - juju_textbounds["X"] + offset - 3, y_size + 1)
            local new_text2_position = vector2_new(x_size + 12 + offset, y_size + 1)
            local new_heart_position = vector2_new(x_size + offset, y_size + 3)
            local new_text3_position = vector2_new(x_size + offset + 5, y_size + 14)

            local new_shadow_position = new_text_position - vector2_new(shadow_size / 2, 0)

            shadow["Size"] = vector2_new(total_size + shadow_size, 14)
            if bypass == 1 then
                text["Position"] = new_text_position
                text2["Position"] = new_text2_position
                text3["Position"] = new_text3_position
                heart["Position"] = new_heart_position
                shadow["Position"] = new_shadow_position
                heart_overlay["Position"] = new_heart_position
            elseif flags["center_panel"] then
                tween(text, {Position = new_text_position}, circular, out, 0.12)
                tween(text2, {Position = new_text2_position}, circular, out, 0.12)
                tween(text3, {Position = new_text3_position}, circular, out, 0.12)
                tween(heart, {Position = new_heart_position}, circular, out, 0.12)
                tween(shadow, {Position = new_shadow_position}, circular, out, 0.12)
                tween(heart_overlay, {Position = new_heart_position}, circular, out, 0.12)
            end
        end)

        local do_center_panel = LPH_JIT_MAX(function(dt)
            local old = text3["Text"]
            local new = local_reloading and "reloading" or local_following and "following" or stomping and "stomping" or purchasing and "purchasing" or (in_void or in_void == nil) and "void" or "unsafe" or local_parts["ForceField"] and "invulnerable"
            text3["Text"] = new
            if old ~= new then
                tween(text3, {["Transparency"] = 0.35}, linear, out, 0.09)
                if new ~= "void" then
                    delay(0.07, tween, text3, {["Transparency"] = 0.7}, linear, out, 0.09)
                end
            end
            local tick = clock()
            if tick - last_beat > 0.8 then
                last_beat = tick
                local heart_position = heart["Position"]

                heart_overlay["Transparency"] = 0.65
                heart_overlay["Size"] = vector2_new(9, 9)
                heart_overlay["Position"] = heart_position

                tween(heart, {Size = vector2_new(7, 7)}, linear, out, 0.08)
                local new_position = heart_position + vector2_new(1, 1)
                heart["Position"] = new_position
                tween(heart_overlay, {Size = vector2_new(24, 24), Transparency = 0, Position = heart_position - vector2_new(7, 7)}, linear, out, 0.5)
                wait(0.08)
                tween(heart, {Size = vector2_new(9, 9)}, linear, out, 0.08)
                if heart["Position"] == new_position then
                    heart["Position"] = heart_position
                end
            end
        end)

        create_connection(menu_references["center_panel"]["on_toggle_change"], LPH_JIT_MAX(function(value)
            if text then
                text:Destroy()
                text = nil
            end

            if text2 then
                text2:Destroy()
                text2 = nil
            end

            if text3 then
                text3:Destroy()
                text3 = nil
            end

            if heart then
                heart:Destroy()
                heart = nil
            end

            if shadow then
                shadow:Destroy()
                shadow = nil
            end

            if heart_overlay then
                heart_overlay:Destroy()
                heart_overlay = nil
            end

            if center_panel_viewport_size_connection then
                center_panel_viewport_size_connection:Disconnect()
                center_panel_viewport_size_connection = nil
            end

            if center_panel_mouse_behavior_connection then
                center_panel_mouse_behavior_connection:Disconnect()
                center_panel_mouse_behavior_connection = nil
            end

            for i = 1, #heartbeat do
                if heartbeat[i] == do_center_panel then
                    remove(heartbeat, i)
                    break
                end
            end

            last_beat = clock()

            if value then
                heartbeat[#heartbeat+1] = do_center_panel
                center_panel_viewport_size_connection = create_connection(camera:GetPropertyChangedSignal("ViewportSize"), update_center_panel)
                center_panel_mouse_behavior_connection = create_connection(user_input_service:GetPropertyChangedSignal("MouseBehavior"), update_center_panel)
                text = create_real_drawing("Text", {
                    ["Color"] = flags["center_panel_secondary_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 2,
                    ["Visible"] = true,
                    ["Text"] = "juju",
                    ["Size"] = 12,
                    ["Font"] = 2,
                    ["Outline"] = true,
                    ["Position"] = vector2_new(0, 0),
                })

                text2 = create_real_drawing("Text", {
                    ["Color"] = flags["center_panel_secondary_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 2,
                    ["Visible"] = true,
                    ["Text"] = (LRM_ScriptName == "da hood" or LRM_ScriptName == "da hood copies") and "live" or "private",
                    ["Size"] = 12,
                    ["Font"] = 2,
                    ["Outline"] = true,
                    ["Position"] = vector2_new(0, 0),
                })

                text3 = create_real_drawing("Text", {
                    ["Color"] = flags["center_panel_secondary_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 2,
                    ["Center"] = true,
                    ["Text"] = "void",
                    ["Size"] = 12,
                    ["Visible"] = flags["center_panel_show_state"],
                    ["Font"] = 2,
                    ["Outline"] = true,
                    ["Position"] = vector2_new(0, 0),
                })

                shadow = create_real_drawing("Image", {
                    ["Color"] = flags["center_panel_primary_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 3,
                    ["Visible"] = true,
                    ["Data"] = shadow_image_data,
                    ["Position"] = vector2_new(0, 0),
                    ["Size"] = vector2_new(76, 18),
                })

                heart = create_real_drawing("Image", {
                    ["Color"] = flags["center_panel_primary_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 2,
                    ["Visible"] = true,
                    ["Data"] = heart_image_data,
                    ["Position"] = vector2_new(0, 0),
                    ["Size"] = vector2_new(9, 9),
                })

                heart_overlay = create_real_drawing("Image", {
                    ["Color"] = flags["center_panel_primary_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 1,
                    ["Visible"] = true,
                    ["Data"] = heart_overlay_image_data,
                    ["Position"] = vector2_new(0, 0),
                    ["Size"] = vector2_new(9, 9),
                })

                local transparency = {["Transparency"] = 1}

                tween(text, transparency, quad, out, 0.3)
                tween(shadow, {["Transparency"] = 0.2}, quad, out, 0.3)
                tween(heart, transparency, quad, out, 0.3)
                tween(text2, transparency, quad, out, 0.3)
                tween(text3, {["Transparency"] = 0.5}, quad, out, 0.3)

                update_center_panel(1)
            end
        end))

        create_connection(menu_references["center_panel_primary_color"]["on_color_change"], function(color)
            if heart_overlay then
                heart["Color"] = color
                shadow["Color"] = color
                heart_overlay["Color"] = color
            end
        end)

        create_connection(menu_references["center_panel_secondary_color"]["on_color_change"], function(color)
            if text then
                text["Color"] = color
                text2["Color"] = color
                text3["Color"] = color
            end
        end)

        create_connection(menu_references["center_panel_show_state"]["on_toggle_change"], function(value)
            if text3 then
                text3["Visible"] = value
            end
        end)
    end


    -- >> ( custom crosshair )

    do
        local lines = {}

        local gap_offset, length, rot = 10, 6, 0
        local cos = math["cos"]
        local sin = math["sin"]
        local pi = math["pi"]
        local rad = pi / 180

        local rotation = 0
        local thickness = 2
        local animation_speed = 1

        local old_position = nil
        local animation = "none"
        local connection = nil

        local do_drawing_crosshair = LPH_JIT_MAX(function(dt)
            local new_position = nil
            
            if flags["drawing_crosshair_follow_target"] and ragebot_target then
                local hrp = ragebot_target[4]["UpperTorso"]

                if hrp then
                    local pos, on_screen = world_to_viewport_point(camera, hrp["Position"])
                    
                    if on_screen then
                        new_position = vector2_new(pos["X"], pos["Y"])
                    end
                end
            end
            if not new_position then
                new_position = get_mouse_location(user_input_service)
            end

            if not old_position then
                old_position = new_position
            end
    
            local position = old_position + (new_position - old_position) * dt * 16
            local px = position["X"]
            local py = position["Y"]
    
            local anim_time = clock()
    
            local current_gap = gap_offset
            local current_len = length
    
            local current_effective_rotation_speed = 0
            local current_oscillation_offset = 0
    
            if rotation == 0 then
                rot = 0
            else
                current_effective_rotation_speed = rotation
            end
    
            if animation == "none" then
    
            elseif animation == "ripple" then
                current_gap = gap_offset + sin(anim_time * (10 * animation_speed)) * 2
                current_len = length + sin(anim_time * (10 * animation_speed) + pi/2) * 2
                if rotation > 0 then
                    current_oscillation_offset = sin(anim_time * (15 * animation_speed)) * 5
                end
            elseif animation == "expand" then
                local expand_factor = (sin(anim_time * (8 * animation_speed)) + 1) / 2
                current_len = length + 20 * expand_factor
                current_gap = gap_offset + 10 * expand_factor
                if rotation > 0 then
                    current_effective_rotation_speed = current_effective_rotation_speed + (300 * expand_factor * animation_speed)
                end
            elseif animation == "glitch" then
                current_gap = gap_offset + sin(anim_time * (50 * animation_speed)) * 5
                current_len = length + cos(anim_time * (50 * animation_speed)) * 5
                if rotation > 0 then
                    current_oscillation_offset = sin(anim_time * (70 * animation_speed)) * 30
                end
            elseif animation == "spiral" then
                if rotation > 0 then
                    current_effective_rotation_speed = current_effective_rotation_speed + (15 * animation_speed)
                end
                current_gap = gap_offset + sin(anim_time * (3 * animation_speed)) * 5
                local effective_angle_for_len = (rot + dt * current_effective_rotation_speed) * rad
                current_len = length + 10 * ( (sin(effective_angle_for_len * 4) + 1) / 2 )
            end
    
            rot = (rot + dt * current_effective_rotation_speed) % 360
    
            rot = rot + current_oscillation_offset
    
            local rot_rad = rot * rad
            local gap = current_gap
            local len = current_len
    
            local angles = {rot_rad, pi / 2 + rot_rad, pi + rot_rad, 3 * pi / 2 + rot_rad}
    
            for i = 1, 4 do
                local angle = angles[i]
                local idx_base = (i - 1) * 2 + 1
                local idx_outline = idx_base + 1
    
                local sx = px + gap * cos(angle)
                local sy = py + gap * sin(angle)
                local ex = px + (gap + len) * cos(angle)
                local ey = py + (gap + len) * sin(angle)
    
                local osx = px + (gap - 1) * cos(angle)
                local osy = py + (gap - 1) * sin(angle)
                local oex = px + (gap + len + 1) * cos(angle)
                local oey = py + (gap + len + 1) * sin(angle)
    
                lines[idx_base]["From"] = vector2_new(sx, sy)
                lines[idx_base]["To"] = vector2_new(ex, ey)
                lines[idx_outline]["From"] = vector2_new(osx, osy)
                lines[idx_outline]["To"] = vector2_new(oex, oey)
            end
    
            old_position = position
        end)

        local update_fov_color = function()
            local outline_tween = {["Color"] = ragebot_target and flags["drawing_crosshair_target_outline_color"] or flags["drawing_crosshair_outline_color"], ["Transparency"] = ragebot_target and -flags["drawing_crosshair_target_outline_transparency"]+1 or -flags["drawing_crosshair_outline_transparency"]+1}
            local line_tween = {["Color"] = ragebot_target and flags["drawing_crosshair_target_line_color"] or flags["drawing_crosshair_line_color"], ["Transparency"] = ragebot_target and -flags["drawing_crosshair_target_line_transparency"]+1 or -flags["drawing_crosshair_line_transparency"]+1}
            for i = 1, 8 do
                tween(lines[i], i % 2 == 0 and outline_tween or line_tween, quad, out, 0.11)
            end
        end

        create_connection(menu_references["drawing_crosshair"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_drawing_crosshair then
                    remove(heartbeat, i)
                    break
                end
            end

            if connection then
                connection:Disconnect()
                connection = nil
            end

            old_position = nil

            for i = 1, #lines do
                lines[i]:Destroy()
                lines[i] = nil
            end

            if value then
                connection = create_connection(signals["on_ragebot_target_changed"], update_fov_color)

                local line_transparency = ragebot_target and -flags["drawing_crosshair_target_line_transparency"]+1 or -flags["drawing_crosshair_line_transparency"]+1
                local outline_transparency = ragebot_target and -flags["drawing_crosshair_target_outline_transparency"]+1 or -flags["drawing_crosshair_outline_transparency"]+1
                local line_color = ragebot_target and flags["drawing_crosshair_target_line_color"] or flags["drawing_crosshair_line_color"]
                local outline_color = ragebot_target and flags["drawing_crosshair_target_outline_color"] or flags["drawing_crosshair_outline_color"]

                for i = 1, 8 do
                    lines[i] = create_real_drawing("Line", {
                        ["Color"] = i % 2 == 0 and outline_color or line_color,
                        ["Thickness"] = i % 2 == 0 and thickness+2 or thickness,
                        ["Visible"] = true,
                        ["ZIndex"] = i % 2 == 0 and 15 or 16,
                        ["Transparency"] = i % 2 == 0 and outline_transparency or line_transparency
                    })
                end

                heartbeat[#heartbeat+1] = do_drawing_crosshair
            end
        end)

        create_connection(menu_references["drawing_crosshair_line_color"]["on_color_change"], function(value)
            local line1 = lines[1]

            if line1 and not ragebot_target then
                line1["Color"] = value
                lines[3]["Color"] = value
                lines[5]["Color"] = value
                lines[7]["Color"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_outline_color"]["on_color_change"], function(value)
            local line2 = lines[2]

            if line2 and not ragebot_target then
                line2["Color"] = value
                lines[4]["Color"] = value
                lines[6]["Color"] = value
                lines[8]["Color"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_line_color"]["on_transparency_change"], function(value)
            local line1 = lines[1]

            if line1 and not ragebot_target then
                local value = -value+1
                line1["Transparency"] = value
                lines[3]["Transparency"] = value
                lines[5]["Transparency"] = value
                lines[7]["Transparency"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_outline_color"]["on_transparency_change"], function(value)
            local line2 = lines[2]

            if line2 and not ragebot_target then
                local value = -value+1
                line2["Transparency"] = value
                lines[4]["Transparency"] = value
                lines[6]["Transparency"] = value
                lines[8]["Transparency"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_target_line_color"]["on_color_change"], function(value)
            local line1 = lines[1]

            if line1 and ragebot_target then
                line1["Color"] = value
                lines[3]["Color"] = value
                lines[5]["Color"] = value
                lines[7]["Color"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_target_outline_color"]["on_color_change"], function(value)
            local line2 = lines[2]

            if line2 and ragebot_target then
                line2["Color"] = value
                lines[4]["Color"] = value
                lines[6]["Color"] = value
                lines[8]["Color"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_target_line_color"]["on_transparency_change"], function(value)
            local line1 = lines[1]

            if line1 and ragebot_target then
                local value = -value+1
                line1["Transparency"] = value
                lines[3]["Transparency"] = value
                lines[5]["Transparency"] = value
                lines[7]["Transparency"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_target_line_color"]["on_transparency_change"], function(value)
            local line2 = lines[2]

            if line2 and ragebot_target then
                local value = -value+1
                line2["Transparency"] = value
                lines[4]["Transparency"] = value
                lines[6]["Transparency"] = value
                lines[8]["Transparency"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_line_size"]["on_slider_change"], function(value)
            length = value
        end)

        create_connection(menu_references["drawing_crosshair_gap_size"]["on_slider_change"], function(value)
            gap_offset = value
        end)

        create_connection(menu_references["drawing_crosshair_rotation"]["on_slider_change"], function(value)
            rotation = value*5
        end)

        create_connection(menu_references["drawing_crosshair_animation_speed"]["on_slider_change"], function(value)
            animation_speed = value/100
        end)

        create_connection(menu_references["drawing_crosshair_line_thickness"]["on_slider_change"], function(value)
            thickness = value

            local line2 = lines[2]

            if line2 then
                local new_thickness = value + 2
                line2["Thickness"] = new_thickness
                lines[4]["Thickness"] = new_thickness
                lines[6]["Thickness"] = new_thickness
                lines[8]["Thickness"] = new_thickness
                lines[1]["Thickness"] = value
                lines[3]["Thickness"] = value
                lines[5]["Thickness"] = value
                lines[7]["Thickness"] = value
            end
        end)

        create_connection(menu_references["drawing_crosshair_animation"]["on_dropdown_change"], function(value)
            animation = value and value[1] or nil
            menu_references["drawing_crosshair_animation_speed"]:set_visible(value ~= "none")
        end)
    end

    -- >> ( crosshair animations )

    do
        -- >> ( variables )

        local crosshair_animations_tool_added_connection = nil
        local crosshair_animations_update_connection = nil

        -- >> ( fake metatable )

        local aim_frame = nil
        local old_metatable = getrawmetatable(game)
        local old_new_index = old_metatable["__newindex"]

        local fake_frame = {
            ["__newindex"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, key, value)
                if not checkcaller() and (key == "Visible" or key == "BackgroundTransparency") and crosshair_animations_tool_added_connection then
                    return
                end
                return old_new_index(self, key, value)
            end))
        }

        for _, v in old_metatable do
            if _ ~= "__newindex" then
                fake_frame[_] = v
            end
        end

        -- >> ( core )

        local fade_aim_frame = function(show)
            if aim_frame then
                local transparency = show and 0 or 1
                local children = get_children(aim_frame)
                local cursor_image = nil
                for i = 1, #children do
                    local child = children[i]
                    if child["Name"] == "CursorImage" then
                        cursor_image = child
                        break
                    end
                end
                local frame_transparency = {["BackgroundTransparency"] = (cursor_image and cursor_image["Visible"]) and 1 or transparency}
                for i = 1, #children do
                    local frame = children[i]
                    if frame["ClassName"] == "ImageLabel" then
                        tween(frame, {["ImageTransparency"] = transparency, ["BackgroundTransparency"] = 1}, exponential, out, 0.25)
                    else
                        tween(frame, frame_transparency, exponential, out, 0.25)
                    end
                end
                tween(aim_frame, frame_transparency, exponential, out, 0.25)
                aim_frame["Visible"] = true
                if not show then
                    delay(0.26, function()
                        if not local_tool then
                            aim_frame["Visible"] = false
                        end
                    end)
                end
            end
        end

        local get_aim_frame = function()
            local player_gui = local_player["PlayerGui"]

            if player_gui then
                local main_screen_gui = wait_for_child(player_gui, "MainScreenGui", 5)

                if main_screen_gui then
                    aim_frame = wait_for_child(main_screen_gui, "Aim", 5)

                    setrawmetatable(aim_frame, fake_frame)
                end
            end
        end

        local spin_speed = 1*((101-15)/100)
        local spin_type = "ease"
        local do_crosshair_spin = LPH_NO_VIRTUALIZE(function(dt)
            if aim_frame then
                local time = (clock() % spin_speed) / spin_speed

                aim_frame["Rotation"] = spin_type == "ease" and (time * time * (3 - 2 * time)) * 360 or time * 360
            end
        end)

        create_connection(menu_references["crosshair_animations"]["on_toggle_change"], function(value)
            if flags["hide_game_crosshair"] then
                menu_references["hide_game_crosshair"]:set_toggle(false)
            end

            if crosshair_animations_tool_added_connection then
                crosshair_animations_tool_added_connection:Disconnect()
                crosshair_animations_tool_added_connection = nil
            end

            if crosshair_animations_update_connection then
                crosshair_animations_update_connection:Disconnect()
                crosshair_animations_update_connection = nil
            end

            for i = 1, #heartbeat do
                if heartbeat[i] == do_crosshair_spin then
                    remove(heartbeat, i)
                    break
                end
            end

            if value then
                get_aim_frame()

                crosshair_animations_update_connection = create_connection(signals["on_local_character_added"], get_aim_frame)

                if flags["crosshair_animations_fade_in_and_out"] then
                    crosshair_animations_tool_added_connection = create_connection(signals["on_local_tool_equipped"], fade_aim_frame)
                end

                if flags["crosshair_animations_spin"] then
                    heartbeat[#heartbeat+1] = do_crosshair_spin
                end
            elseif aim_frame then
                aim_frame["Visible"] = local_tool ~= nil
                local children = get_children(aim_frame)
                for i = 1, #children do
                    local child = children[i]
                    if child["ClassName"] == "ImageLabel" then
                        child["ImageTransparency"] = 0
                    else
                        child["BackgroundTransparency"] = 0
                    end
                end
                aim_frame["BackgroundTransparency"] = 0
                if old_metatable then
                    setrawmetatable(aim_frame, old_metatable)
                end
                delay(0, function()
                    if aim_frame then
                        aim_frame["Rotation"] = 0
                        aim_frame = nil
                    end
                end)
            end
        end)

        create_connection(menu_references["crosshair_animations_fade_in_and_out"]["on_toggle_change"], function(value)
            if value and aim_frame then
                crosshair_animations_tool_added_connection = create_connection(signals["on_local_tool_equipped"], fade_aim_frame)
            end
        end)

        create_connection(menu_references["crosshair_animations_spin"]["on_toggle_change"], function(value)
            menu_references["crosshair_animations_spin_speed"]:set_visible(value)

            for i = 1, #heartbeat do
                if heartbeat[i] == do_crosshair_spin then
                    remove(heartbeat, i)
                    break
                end
            end

            if value then
                heartbeat[#heartbeat+1] = do_crosshair_spin
            elseif aim_frame then
                delay(0, function()
                    if aim_frame then
                        aim_frame["Rotation"] = 0
                    end
                end)
            end
        end)

        create_connection(menu_references["crosshair_animations_spin_speed"]["on_slider_change"], function(value)
            spin_speed = 1*((101-value)/100)
        end)

        create_connection(menu_references["crosshair_animations_spin"]["on_dropdown_change"], function(value)
            spin_type = value[1]
        end)
    end

    -- >> ( server position indicator )

    local visible = false
    local circle = nil
    local image = nil
    local glow = nil
    local shadow_transparency = {["Transparency"] = 0.09}
    local circle_transparency = {["Transparency"] = 0.8}
    local image_transparency = {["Transparency"] = 0.8}
    local offset = vector3_new(0, 0.5, 0)
    local data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAMAAABhTZc9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURQAAAP///wwMDP39/QAAAJn0DigAAAAFdFJOU/////8A+7YOUwAAAAlwSFlzAABLlgAAS5YBPIKNxAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAAD7fwcA6AMAAPt/BwDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAFgdiCkiK10LAAAAZ0lEQVQ4T+XT0QqAMAgF0Gv5/9/cdJrXPYweopeEoe5MGKOgHMDSR/aAiPSNyBaGnT9S4Oi3pnqOtuEqE5kfaiHxG8pYTJoHrMzdzFu1h0qt57oLH58a/YhFfUU/4s967tT/Iv4mVS+LEAmXjonxPAAAAABJRU5ErkJggg==")
    local last_pos = nil
    local do_smooth_server_position_indicator = nil

    local do_server_position_indicator = LPH_JIT_MAX(function(dt)
        if local_client_position ~= local_server_position then
            local local_server_position = local_server_position["p"]
            
            local pos, on_screen = world_to_viewport_point(camera, local_server_position)

            if do_smooth_server_position_indicator then
                if not last_pos then
                    last_pos = pos
                end
                pos = last_pos + (pos - last_pos) * dt*4^2
            end

            last_pos = pos
            if not on_screen and visible then
                tween(glow, hide_transparency, circular, out, 0)
                tween(image, hide_transparency, circular, out, 0)
                tween(circle, hide_transparency, circular, out, 0)
                visible = false
                return
            elseif not visible and on_screen then
                spawn(function()
                    tween(glow, shadow_transparency, circular, out, 0.07)
                    tween(image, image_transparency, circular, out, 0.07)
                    tween(circle, circle_transparency, circular, out, 0.07)
                end)
                visible = true
            elseif not visible and not on_screen then
                visible = false
                return
            end

            local pos2, _ = world_to_viewport_point(camera, local_server_position + offset)

            local size = clamp((pos["Y"]-pos2["Y"])*10, 35, 45)

            local pos = vector2_new(pos["X"], pos["Y"])
            circle["Size"] = vector2_new(size, size)
            circle["Position"] = pos - vector2_new(size/2, size/2)

            local image_size = vector2_new(size*0.6, size*0.6)
            image["Position"] = pos - image_size/2
            image["Size"] = image_size

            local glow_size = vector2_new(size*1.08, size*1.08)
            glow["Position"] = pos - glow_size/2
            glow["Size"] = glow_size
        elseif visible then
            visible = false
            tween(glow, hide_transparency, circular, out, 0.09)
            tween(image, hide_transparency, circular, out, 0.09)
            tween(circle, hide_transparency, circular, out, 0.09)
        end
    end)

    local create_drawing = identifyexecutor() == "Wave" and create_fake_drawing or create_real_drawing

    create_connection(menu_references["smooth_server_position_indicator"]["on_toggle_change"], function(value)
        last_pos = nil
        do_smooth_server_position_indicator = value
    end)

    create_connection(menu_references["server_position_indicator"]["on_toggle_change"], function(value)
        last_pos = nil
        for i = 1, #heartbeat do
            if heartbeat[i] == do_server_position_indicator then
                remove(heartbeat, i)
                break
            end
        end

        visible = false

        if circle then
            circle:Destroy()
            circle = nil
        end

        if image then
            image:Destroy()
            image = nil
        end

        if glow then
            glow:Destroy()
            glow = nil
        end

        visible = false

        if value then
            circle = create_drawing("Image", {
                ["Color"] = flags["server_position_indicator_background_color"],
                ["Transparency"] = 0,
                ["ZIndex"] = 1,
                ["Visible"] = true,
                ["Data"] = pixel_image_data,
                ["Rounding"] = 30,
                ["Position"] = vector2_new(0, 0),
                ["Size"] = vector2_new(65, 65),
            })

            image = create_drawing("Image", {
                ["Color"] = flags["server_position_indicator_icon_color"],
                ["Transparency"] = 0,
                ["ZIndex"] = 2,
                ["Visible"] = true,
                ["Data"] = data,
                ["Position"] = vector2_new(0, 0),
                ["Size"] = vector2_new(29, 29),
            })

            glow = create_drawing("Image", {
                ["Color"] = flags["server_position_indicator_glow_color"],
                ["Transparency"] = 0,
                ["ZIndex"] = 3,
                ["Visible"] = true,
                ["Data"] = shadow_image_data,
                ["Rounding"] = 36,
                ["Position"] = vector2_new(0, 0),
                ["Size"] = vector2_new(73, 73)
            })

            heartbeat[#heartbeat+1] = do_server_position_indicator
        end
    end)

    create_connection(menu_references["server_position_indicator_glow_color"]["on_color_change"], function(value)
        if glow then
            glow["Color"] = value
        end
    end)

    create_connection(menu_references["server_position_indicator_glow_color"]["on_transparency_change"], function(value)
        if glow and visible then
            glow["Transparency"] = -value+1
            shadow_transparency["Transparency"] = {["Transparency"] = -value+1}
        end
    end)

    create_connection(menu_references["server_position_indicator_icon_color"]["on_color_change"], function(value)
        if image then
            image["Color"] = value
        end
    end)

    create_connection(menu_references["server_position_indicator_icon_color"]["on_transparency_change"], function(value)
        if image and visible then
            image["Transparency"] = -value+1
            image_transparency["Transparency"] = {["Transparency"] = -value+1}
        end
    end)

    create_connection(menu_references["server_position_indicator_background_color"]["on_color_change"], function(value)
        if circle then
            circle["Color"] = value
        end
    end)

    create_connection(menu_references["server_position_indicator_background_color"]["on_transparency_change"], function(value)
        if circle and visible then
            circle["Transparency"] = -value+1
            circle_transparency["Transparency"] = {["Transparency"] = -value+1}
        end
    end)

    menu_references["game_section"] = menu["groups"]["visuals"]:create_section("general", "game", 2, 0.65, 0)
    menu_references["player_bullet_volume"] = menu_references["game_section"]:create_element({["name"] = "player bullet volume"}, {["slider"] = {["flag"] = "player_bullet_volume", ["min"] = 0, ["max"] = 100, ["default"] = 100, ["suffix"] = "%", ["max_text"] = "default"}})
    menu_references["player_bullet_tracers"] = menu_references["game_section"]:create_element({["name"] = "player bullet tracers"}, {["toggle"] = {["flag"] = "player_bullet_tracers"}})
        menu_references["player_bullet_tracers_settings"] = menu_references["player_bullet_tracers"]:create_settings()
        menu_references["player_bullet_tracers_type"] = menu_references["player_bullet_tracers_settings"]:create_element({["name"] = "type"}, {["dropdown"] = {["options"] = {"line", "beam"}, ["requires_one"] = true, ["flag"] = "player_bullet_tracers_type", ["default"] = {"beam"}}})
        menu_references["player_bullet_tracers_style"] = menu_references["player_bullet_tracers_settings"]:create_element({["name"] = "style"}, {["dropdown"] = {["options"] = {"laser", "light", "flow"}, ["requires_one"] = true, ["flag"] = "player_bullet_tracers_style", ["default"] = {"laser"}}})
        menu_references["player_bullet_tracers_color"] = menu_references["player_bullet_tracers_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "player_bullet_tracers_color", ["transparency_flag"] = "player_bullet_tracers_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0}})
        menu_references["player_bullet_tracers_outline_color"] = menu_references["player_bullet_tracers_settings"]:create_element({["name"] = "outline color"}, {["colorpicker"] = {["color_flag"] = "player_bullet_tracers_outline_color", ["transparency_flag"] = "player_bullet_tracers_outline_transparency", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0}})
        menu_references["player_bullet_tracers_gradient_color"] = menu_references["player_bullet_tracers_settings"]:create_element({["name"] = "gradient color"}, {["colorpicker"] = {["color_flag"] = "player_bullet_tracers_gradient_color", ["transparency_flag"] = "player_bullet_tracers_gradient_transparency", ["default_color"] = color3_fromrgb(241, 133, 255), ["default_transparency"] = 0}})
        menu_references["player_bullet_tracers_lifetime"] = menu_references["player_bullet_tracers_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "player_bullet_tracers_lifetime", ["min"] = 0.1, ["max"] = 1.5, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = "", ["default"] = 0.8}})
    menu_references["local_bullet_impacts"] = menu_references["game_section"]:create_element({["name"] = "local bullet impacts"}, {["toggle"] = {["flag"] = "local_bullet_impacts"}})
        menu_references["local_bullet_impacts_settings"] = menu_references["local_bullet_impacts"]:create_settings()
        menu_references["local_bullet_impacts_animation"] = menu_references["local_bullet_impacts_settings"]:create_element({["name"] = "animation"}, {["dropdown"] = {["options"] = {"none", "fade", "pop"}, ["requires_one"] = true, ["flag"] = "local_bullet_impacts_animation", ["default"] = {"pop"}}})
        menu_references["local_bullet_impacts_pop_color"] = menu_references["local_bullet_impacts_settings"]:create_element({["name"] = "pop color"}, {["colorpicker"] = {["color_flag"] = "local_bullet_impacts_pop_color", ["transparency_flag"] = "local_bullet_impacts_pop_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0.9}})
        menu_references["local_bullet_impacts_style"] = menu_references["local_bullet_impacts_settings"]:create_element({["name"] = "style"}, {["dropdown"] = {["options"] = {"sphere", "cube"}, ["requires_one"] = true, ["flag"] = "local_bullet_impacts_style", ["default"] = {"sphere"}}})
        menu_references["local_bullet_impacts_color"] = menu_references["local_bullet_impacts_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "local_bullet_impacts_color", ["transparency_flag"] = "local_bullet_impacts_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0.19}})
        menu_references["local_bullet_impacts_outline_color"] = menu_references["local_bullet_impacts_settings"]:create_element({["name"] = "outline color"}, {["colorpicker"] = {["color_flag"] = "local_bullet_impacts_outline_color", ["transparency_flag"] = "local_bullet_impacts_outline_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0.5}})
        menu_references["local_bullet_impacts_lifetime"] = menu_references["local_bullet_impacts_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "local_bullet_impacts_lifetime", ["min"] = 0.1, ["max"] = 1.5, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = "", ["default"] = 0.8}})
    menu_references["override_armor_pop"] = menu_references["game_section"]:create_element({["name"] = "override armor pop"}, {["toggle"] = {["flag"] = "override_armor_pop"}})
        menu_references["override_armor_pop_settings"] = menu_references["override_armor_pop"]:create_settings()
        menu_references["override_armor_pop_color"] = menu_references["override_armor_pop_settings"]:create_element({["name"] = "image color"}, {["colorpicker"] = {["color_flag"] = "override_armor_pop_color", ["transparency_flag"] = "!override_armor_pop_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["override_armor_pop_image"] = menu_references["override_armor_pop_settings"]:create_element({["name"] = "image"}, {["dropdown"] = {["options"] = {"jaydes", "default", "hide"}, ["default"] = {"jaydes"}, ["use_custom_extensions"] = {"png", "jpg", "jpeg", "gif"}, ["requires_one"] = true, ["flag"] = "override_armor_pop_image"}})
    menu_references["local_bullet_tracers"] = menu_references["game_section"]:create_element({["name"] = "local bullet tracers"}, {["toggle"] = {["flag"] = "local_bullet_tracers"}})
        menu_references["local_bullet_tracers_settings"] = menu_references["local_bullet_tracers"]:create_settings()
        menu_references["local_bullet_tracers_type"] = menu_references["local_bullet_tracers_settings"]:create_element({["name"] = "type"}, {["dropdown"] = {["options"] = {"line", "beam"}, ["requires_one"] = true, ["flag"] = "local_bullet_tracers_type", ["default"] = {"beam"}}})
        menu_references["local_bullet_tracers_style"] = menu_references["local_bullet_tracers_settings"]:create_element({["name"] = "style"}, {["dropdown"] = {["options"] = {"laser", "light", "flow"}, ["requires_one"] = true, ["flag"] = "local_bullet_tracers_style", ["default"] = {"laser"}}})
        menu_references["local_bullet_tracers_color"] = menu_references["local_bullet_tracers_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "local_bullet_tracers_color", ["transparency_flag"] = "local_bullet_tracers_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0}})
        menu_references["local_bullet_tracers_outline_color"] = menu_references["local_bullet_tracers_settings"]:create_element({["name"] = "outline color"}, {["colorpicker"] = {["color_flag"] = "local_bullet_tracers_outline_color", ["transparency_flag"] = "local_bullet_tracers_outline_transparency", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0}})
        menu_references["local_bullet_tracers_gradient_color"] = menu_references["local_bullet_tracers_settings"]:create_element({["name"] = "gradient color"}, {["colorpicker"] = {["color_flag"] = "local_bullet_tracers_gradient_color", ["transparency_flag"] = "local_bullet_tracers_gradient_transparency", ["default_color"] = color3_fromrgb(241, 133, 255), ["default_transparency"] = 0}})
        menu_references["local_bullet_tracers_lifetime"] = menu_references["local_bullet_tracers_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "local_bullet_tracers_lifetime", ["min"] = 0.1, ["max"] = 1.5, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = "", ["default"] = 0.8}})
    menu_references["shot_notifications"] = menu_references["game_section"]:create_element({["name"] = "shot notifications"}, {["toggle"] = {["flag"] = "shot_notifications"}})
        menu_references["shot_notifications_settings"] = menu_references["shot_notifications"]:create_settings()
        menu_references["shot_notifications_notify_when"] = menu_references["shot_notifications_settings"]:create_element({["name"] = "notify when"}, {["dropdown"] = {["options"] = {"shot failed", "shot hit"}, ["requires_one"] = false, ["multi"] = true, ["flag"] = "shot_notifications_notify_when", ["default"] = {"shot hit"}}})
        menu_references["shot_notifications_failed_color"] = menu_references["shot_notifications_settings"]:create_element({["name"] = "failed color"}, {["colorpicker"] = {["color_flag"] = "shot_notifications_failed_color", ["transparency_flag"] = "failed_transparency", ["default_color"] = color3_fromrgb(255, 134, 134), ["default_transparency"] = 0}})
        menu_references["shot_notifications_hit_color"] = menu_references["shot_notifications_settings"]:create_element({["name"] = "hit color"}, {["colorpicker"] = {["color_flag"] = "shot_notifications_hit_color", ["transparency_flag"] = "hit_transparency", ["default_color"] = color3_fromrgb(0, 215, 0), ["default_transparency"] = 0}})
    menu_references["local_bullet_sound"] = menu_references["game_section"]:create_element({["name"] = "local bullet sound"}, {["toggle"] = {["flag"] = "local_bullet_sound"}})
        menu_references["local_bullet_sound_settings"] = menu_references["local_bullet_sound"]:create_settings()
        menu_references["local_bullet_sound_in_world"] = menu_references["local_bullet_sound_settings"]:create_element({["name"] = "in world"}, {["toggle"] = {["flag"] = "local_bullet_sound_in_world", ["default"] = true}})
        menu_references["local_bullet_volume"] = menu_references["local_bullet_sound_settings"]:create_element({["name"] = "volume"}, {["slider"] = {["flag"] = "local_bullet_volume", ["min"] = 0, ["max"] = 100, ["default"] = 100, ["suffix"] = "%", ["max_text"] = "default"}})
        menu_references["local_bullet_sound_sound"] = menu_references["local_bullet_sound_settings"]:create_element({["name"] = "sound"}, {["dropdown"] = {["options"] = {"default", "sexy"}, ["default"] = {"sexy"}, ["requires_one"] = true, ["flag"] = "local_bullet_sound_sound", ["use_custom_extensions"] = {"mp3", "ogg", "wav"}}})
    menu_references["damage_number"] = menu_references["game_section"]:create_element({["name"] = "damage number"}, {["toggle"] = {["flag"] = "damage_number"}})
        menu_references["damage_number_settings"] = menu_references["damage_number"]:create_settings()
        menu_references["damage_number_font"] = menu_references["damage_number_settings"]:create_element({["name"] = "font"}, {["dropdown"] = {["flag"] = "damage_number_font", ["default"] = {"2"}, ["options"] = {"0", "1", "2", "3"}, ["requires_one"] = true}})
        menu_references["damage_number_lifetime"] = menu_references["damage_number_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "damage_number_lifetime", ["min"] = 0.7, ["max"] = 2, ["default"] = 0.7, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = ""}})
        menu_references["damage_number_color"] = menu_references["damage_number_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "damage_number_color", ["transparency_flag"] = "damage_number_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["damage_number_lethal_color"] = menu_references["damage_number_settings"]:create_element({["name"] = "lethal color"}, {["colorpicker"] = {["color_flag"] = "damage_number_lethal_color", ["transparency_flag"] = "damage_number_lethal_transparency", ["default_color"] = color3_fromrgb(255, 55, 55), ["default_transparency"] = 0}})
        menu_references["damage_number_outline_color"] = menu_references["damage_number_settings"]:create_element({["name"] = "outline color"}, {["colorpicker"] = {["color_flag"] = "damage_number_outline_color", ["transparency_flag"] = "damage_number_outline_transparency", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0}})
        menu_references["damage_number_show_ragebot_data"] = menu_references["damage_number_settings"]:create_element({["name"] = "show ragebot data"}, {["toggle"] = {["flag"] = "damage_number_show_ragebot_data"}})
    menu_references["d3_hit_marker"] = menu_references["game_section"]:create_element({["name"] = "3d hit marker"}, {["toggle"] = {["flag"] = "d3_hit_marker"}})
        menu_references["d3_hit_marker_settings"] = menu_references["d3_hit_marker"]:create_settings()
        menu_references["d3_hit_marker_lifetime"] = menu_references["d3_hit_marker_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "d3_hit_marker_lifetime", ["min"] = 0.1, ["max"] = 2, ["default"] = 0.7, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = ""}})
        menu_references["d3_hit_marker_thickness"] = menu_references["d3_hit_marker_settings"]:create_element({["name"] = "thickness"}, {["slider"] = {["flag"] = "d3_hit_marker_thickness", ["min"] = 0, ["max"] = 4, ["default"] = 2, ["decimals"] = 0, ["suffix"] = "px", ["prefix"] = ""}})
        menu_references["d3_hit_marker_color"] = menu_references["d3_hit_marker_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "d3_hit_marker_color", ["transparency_flag"] = "d3_hit_marker_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0}})
        menu_references["d3_hit_marker_lethal_color"] = menu_references["d3_hit_marker_settings"]:create_element({["name"] = "lethal color"}, {["colorpicker"] = {["color_flag"] = "d3_hit_marker_lethal_color", ["transparency_flag"] = "d3_hit_marker_transparency", ["default_color"] = color3_fromrgb(255, 0, 0), ["default_transparency"] = 0}})
        menu_references["d3_hit_marker_outline_color"] = menu_references["d3_hit_marker_settings"]:create_element({["name"] = "outline color"}, {["colorpicker"] = {["color_flag"] = "d3_hit_marker_outline_color", ["transparency_flag"] = "d3_hit_marker_outline_transparency", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0}})
    menu_references["d2_hit_marker"] = menu_references["game_section"]:create_element({["name"] = "2d hit marker"}, {["toggle"] = {["flag"] = "d2_hit_marker"}})
        menu_references["d2_hit_marker_settings"] = menu_references["d2_hit_marker"]:create_settings()
        menu_references["d2_hit_marker_lifetime"] = menu_references["d2_hit_marker_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "d2_hit_marker_lifetime", ["min"] = 0.1, ["max"] = 2, ["default"] = 0.7, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = ""}})
        menu_references["d2_hit_marker_thickness"] = menu_references["d2_hit_marker_settings"]:create_element({["name"] = "thickness"}, {["slider"] = {["flag"] = "d2_hit_marker_thickness", ["min"] = 0, ["max"] = 4, ["default"] = 2, ["decimals"] = 0, ["suffix"] = "px", ["prefix"] = ""}})
        menu_references["d2_hit_marker_color"] = menu_references["d2_hit_marker_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "d2_hit_marker_color", ["transparency_flag"] = "d2_hit_marker_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0}})
        menu_references["d2_hit_marker_lethal_color"] = menu_references["d2_hit_marker_settings"]:create_element({["name"] = "lethal color"}, {["colorpicker"] = {["color_flag"] = "d2_hit_marker_lethal_color", ["transparency_flag"] = "d2_hit_marker_transparency", ["default_color"] = color3_fromrgb(255, 0, 0), ["default_transparency"] = 0}})
        menu_references["d2_hit_marker_outline_color"] = menu_references["d2_hit_marker_settings"]:create_element({["name"] = "outline color"}, {["colorpicker"] = {["color_flag"] = "d2_hit_marker_outline_color", ["transparency_flag"] = "d2_hit_marker_outline_transparency", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0}})
    menu_references["hit_skeleton"] = menu_references["game_section"]:create_element({["name"] = "hit skeleton"}, {["toggle"] = {["flag"] = "hit_skeleton"}})
        menu_references["hit_skeleton_settings"] = menu_references["hit_skeleton"]:create_settings()
        menu_references["hit_skeleton_animation"] = menu_references["hit_skeleton_settings"]:create_element({["name"] = "animation"}, {["dropdown"] = {["flag"] = "hit_skeleton_animation", ["default"] = {"fade"}, ["options"] = {"fade", "none"}, ["requires_one"] = true}})
        menu_references["hit_skeleton_lifetime"] = menu_references["hit_skeleton_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "hit_skeleton_lifetime", ["min"] = 0.1, ["max"] = 1.5, ["default"] = 0.8, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = ""}})
        menu_references["hit_skeleton_thickness"] = menu_references["hit_skeleton_settings"]:create_element({["name"] = "thickness"}, {["slider"] = {["flag"] = "hit_skeleton_thickness", ["min"] = 0.1, ["max"] = 5, ["default"] = 3, ["decimals"] = 1}})
        menu_references["hit_skeleton_color"] = menu_references["hit_skeleton_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "hit_skeleton_color", ["transparency_flag"] = "hit_skeleton_transparency", ["default_color"] = color3_fromrgb(142, 242, 255), ["default_transparency"] = 0.8}})
    menu_references["hit_particle"] = menu_references["game_section"]:create_element({["name"] = "hit particle"}, {["toggle"] = {["flag"] = "hit_particle"}})
        menu_references["hit_particle_settings"] = menu_references["hit_particle"]:create_settings()
        menu_references["hit_particle_behind_walls"] = menu_references["hit_particle_settings"]:create_element({["name"] = "behind walls"}, {["toggle"] = {["flag"] = "hit_particle_behind_walls"}})
        menu_references["hit_particle_lethal_color"] = menu_references["hit_particle_settings"]:create_element({["name"] = "lethal color"}, {["colorpicker"] = {["color_flag"] = "hit_particle_lethal_color", ["transparency_flag"] = "hit_particle_lethal_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0.2}})
        menu_references["hit_particle_color"] = menu_references["hit_particle_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "hit_particle_color", ["transparency_flag"] = "hit_particle_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0.2}})
        menu_references["hit_particle_particle"] = menu_references["hit_particle_settings"]:create_element({["name"] = "particle"}, {["dropdown"] = {["flag"] = "hit_particle_particle", ["default"] = {"sparks"}, ["options"] = {"bubble", "sparks", "orbs", "air"}, ["use_custom_extensions"] = {"rbxm", "rbmx"}}})
    --[[menu_references["rpg_warning"] = menu_references["game_section"]:create_element({["name"] = "rpg warning"}, {["toggle"] = {["flag"] = "rpg_warning"}})
        menu_references["rpg_warning_settings"] = menu_references["rpg_warning"]:create_settings()
        menu_references["hit_overlay_lifetime"] = menu_references["rpg_warning_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "hit_overlay_lifetime", ["min"] = 0.1, ["max"] = 0.8, ["default"] = 0.7, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = ""}})
    --]]
    menu_references["hit_overlay"] = menu_references["game_section"]:create_element({["name"] = "hit overlay"}, {["toggle"] = {["flag"] = "hit_overlay"}})
        menu_references["hit_overlay_settings"] = menu_references["hit_overlay"]:create_settings()
        menu_references["hit_overlay_lifetime"] = menu_references["hit_overlay_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "hit_overlay_lifetime", ["min"] = 0.1, ["max"] = 0.8, ["default"] = 0.7, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = ""}})
        menu_references["hit_overlay_color"] = menu_references["hit_overlay_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "hit_overlay_color", ["transparency_flag"] = "hit_overlay_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0.2}})
        menu_references["hit_overlay_lethal_color"] = menu_references["hit_overlay_settings"]:create_element({["name"] = "lethal color"}, {["colorpicker"] = {["color_flag"] = "hit_overlay_lethal_color", ["transparency_flag"] = "hit_overlay_lethal_transparency", ["default_color"] = color3_fromrgb(255, 55, 55), ["default_transparency"] = 0.2}})
    menu_references["hit_sound"] = menu_references["game_section"]:create_element({["name"] = "hit sound"}, {["toggle"] = {["flag"] = "hit_sound"}})
        menu_references["hit_sound_settings"] = menu_references["hit_sound"]:create_settings()
        menu_references["hit_sound_value"] = menu_references["hit_sound_settings"]:create_element({["name"] = "sound"}, {["dropdown"] = {["flag"] = "hit_sound_value", ["default"] = {"mc bow"}, ["options"] = {"primordial", "neverlose", "sparkle", "mc bow", "skeet", "break", "rust"}, ["requires_one"] = true, ["use_custom_extensions"] = {"mp3", "ogg", "wav"}}})
        menu_references["hit_sound_volume"] = menu_references["hit_sound_settings"]:create_element({["name"] = "volume"}, {["slider"] = {["flag"] = "hit_sound_volume", ["min"] = 0.1, ["max"] = 5, ["default"] = 1, ["decimals"] = 1}})

    -- >> ( local bullet tracers )

    local beams = {
        ["laser"] = create_instance("Beam", {
            ["FaceCamera"] = true,
            ["TextureSpeed"] = 1.5,
            ["Width1"] = 0.25,
            ["TextureLength"] = 2,
            ["Width0"] = 0.25,
            ["LightEmission"] = 3,
            ["Brightness"] = 2.5,
            ["Texture"] = "rbxassetid://12781800668"
        }),
        ["light"] = create_instance("Beam", {
            ["FaceCamera"] = true,
            ["TextureSpeed"] = 2,
            ["Width1"] = 0.25,
            ["LightInfluence"] = 1,
            ["LightEmission"] = 3,
            ["Width0"] = 0.25,
            ["Segments"] = 1,
            ["Texture"] = "http://www.roblox.com/asset/?id=2382169232",
            ["TextureLength"] = 15,
            ["TextureMode"] = Enum["TextureMode"]["Wrap"]
        }),
        ["flow"] = create_instance("Beam", {
            ["FaceCamera"] = true,
            ["TextureSpeed"] = 2.5,
            ["Width1"] = 0.2,
            ["Width0"] = 0.2,
            ["LightEmission"] = 3,
            ["Brightness"] = 5,
            ["Texture"] = "rbxassetid://12788927812"
        })
    }

    local local_bullet_tracers_color = ColorSequence.new{ColorSequenceKeypoint.new(0, flags["local_bullet_tracers_color"]), ColorSequenceKeypoint.new(1, flags["local_bullet_tracers_gradient_color"])}
    local local_bullet_tracers_transparency = NumberSequence.new{NumberSequenceKeypoint.new(0, flags["local_bullet_tracers_transparency"]), NumberSequenceKeypoint.new(1, flags["local_bullet_tracers_gradient_transparency"])}
    local local_bullet_tracers_beam = beams[flags["local_bullet_tracers_style"][1]]

    local player_bullet_tracers_color = ColorSequence.new{ColorSequenceKeypoint.new(0, flags["player_bullet_tracers_color"]), ColorSequenceKeypoint.new(1, flags["player_bullet_tracers_gradient_color"])}
    local player_bullet_tracers_transparency = NumberSequence.new{NumberSequenceKeypoint.new(0, flags["player_bullet_tracers_transparency"]), NumberSequenceKeypoint.new(1, flags["player_bullet_tracers_gradient_transparency"])}
    local player_bullet_tracers_beam = beams[flags["player_bullet_tracers_style"][1]]

    local destroy_beam = function(beam, attachment0, attachment1)
        local elapsed_time = 0
        local keypoints = beam["Transparency"]["Keypoints"]
        local old_beam_transparency = keypoints[1]["Value"]
        local old_beam_gradient_transparency = keypoints[2]["Value"]

        local tween_function = function(dt)
            elapsed_time+=dt
            local value = get_value(tween_service, elapsed_time / 0.2, quad, out)
            beam["Transparency"] = numbersequencenew{numbersequencekeypointnew(0, old_beam_transparency + (1 - old_beam_transparency) * value), numbersequencekeypointnew(1, old_beam_gradient_transparency + (1 - old_beam_gradient_transparency) * value)}
        end

        heartbeat[#heartbeat+1] = tween_function
        delay(0.2, function()
            local found = nil
            for i = 1, #heartbeat do
                if heartbeat[i] == tween_function then
                    found = i
                    break
                end
            end
            if found then
                remove(heartbeat, found)
            end
            destroy(beam)
            destroy(attachment0)
            destroy(attachment1)
        end)
    end

    local terrain = cloneref(workspace["Terrain"])

    local do_beam_bullet_tracer = function(object, beam, position, is_local)
        local new_beam = clone(is_local and local_bullet_tracers_beam or player_bullet_tracers_beam)
        new_beam["Color"] = is_local and local_bullet_tracers_color or player_bullet_tracers_color
        new_beam["Transparency"] = is_local and local_bullet_tracers_transparency or player_bullet_tracers_transparency

        local attachment0 = create_instance("Attachment", {
            ["CFrame"] = object["CFrame"],
            ["Parent"] = terrain
        })
        local attachment1 = create_instance("Attachment", {
            ["CFrame"] = position,
            ["Parent"] = terrain
        })

        new_beam["Attachment0"] = attachment0
        new_beam["Attachment1"] = attachment1
        new_beam["Parent"] = ignored

        destroy(object)
        delay(is_local and flags["local_bullet_tracers_lifetime"] or flags["player_bullet_tracers_lifetime"], destroy_beam, new_beam, attachment0, attachment1)
    end

    local do_line_bullet_tracer = LPH_JIT_MAX(function(object, _, position, is_local)
        local transparency = -(is_local and flags["local_bullet_tracers_transparency"] or flags["player_bullet_tracers_transparency"]) + 1
        local outline = create_real_drawing("Line", {
            ["Color"] = is_local and flags["local_bullet_tracers_outline_color"] or flags["player_bullet_tracers_outline_color"],
            ["Thickness"] = 3,
            ["Transparency"] = 1 - (is_local and flags["local_bullet_tracers_outline_transparency"] or flags["player_bullet_tracers_outline_transparency"]),
            ["Visible"] = true
        })
        local line = create_real_drawing("Line", {
            ["Color"] = is_local and flags["local_bullet_tracers_color"] or flags["player_bullet_tracers_color"],
            ["Thickness"] = 1,
            ["Transparency"] = transparency,
            ["Visible"] = true
        })
        
        local end_position = position["p"]
		local start_position = object["Position"]
        local lifetime = is_local and flags["local_bullet_tracers_lifetime"] or flags["player_bullet_tracers_lifetime"]

        local elapsed_time = 0
        local new_function = function(dt)
            if not line or not outline then
                return
            end

            elapsed_time+=dt

			local pos, on_screen = world_to_viewport_point(camera, start_position)
            local pos2, on_screen2 = world_to_viewport_point(camera, end_position)

            if not on_screen and not on_screen2 then
                line["Visible"] = false
                outline["Visible"] = false
                return
            end

            line["Visible"] = true
            outline["Visible"] = true

            local size = camera["ViewportSize"]
            local x_full = size["X"]
            local y_full = size["Y"]
            local x_half = x_full/2
            local y_half = y_full/2

            if pos["Z"] < 0 then
                pos = vector2_new(clamp(x_half + (x_half - pos["X"]), 0, x_full), clamp(y_half + (y_half - pos["Y"]), 0, y_full))
            end

            if pos2["Z"] < 0 then
                pos2 = vector2_new(clamp(x_half + (x_half - pos2["X"]), 0, x_full), clamp(y_half + (y_half - pos2["Y"]), 0, y_full))
            end

            local to = vector2_new(pos2["X"], pos2["Y"])
            local from = vector2_new(pos["X"], pos["Y"])

            if elapsed_time > lifetime then
                local elapsed_time = elapsed_time - lifetime
                local value = get_value(tween_service, elapsed_time / 0.3, quad, out)
                local new_transparency = transparency + (0 - transparency) * value
                line["Transparency"] = new_transparency
                outline["Transparency"] = new_transparency
                from = from + (line["From"] - from) * value
                line["From"] = from
            else
                line["From"] = from
            end

            line["To"] = to

            local offset = (from-to).unit

            outline["From"] = from + offset
            outline["To"] = to - offset
        end

        heartbeat[#heartbeat+1] = new_function
        destroy(object)
        wait(lifetime + 0.3)
        for i = 1, #heartbeat do
            if heartbeat[i] == new_function then
                remove(heartbeat, i)
                break
            end
        end
        line:Destroy()
        line = nil
    end)

    local local_bullet_tracers_on_local_bullet_fired = nil

    create_connection(menu_references["local_bullet_tracers"]["on_toggle_change"], function(value)
        if local_bullet_tracers_on_local_bullet_fired then
            local_bullet_tracers_on_local_bullet_fired:Disconnect()
            local_bullet_tracers_on_local_bullet_fired = nil
        end

        if value then
            local_bullet_tracers_on_local_bullet_fired = create_connection(signals["on_local_bullet_fired"], flags["local_bullet_tracers_type"][1] == "beam" and do_beam_bullet_tracer or do_line_bullet_tracer)
        end
    end)

    create_connection(menu_references["local_bullet_tracers_type"]["on_dropdown_change"], function(value)
        local is_beam = value[1] == "beam"

        menu_references["local_bullet_tracers_gradient_color"]:set_visible(is_beam)
        menu_references["local_bullet_tracers_outline_color"]:set_visible(not is_beam)

        menu_references["local_bullet_tracers_style"]:set_visible(is_beam)

        if local_bullet_tracers_on_local_bullet_fired then
            local_bullet_tracers_on_local_bullet_fired:Disconnect()
            local_bullet_tracers_on_local_bullet_fired = create_connection(signals["on_local_bullet_fired"], is_beam and do_beam_bullet_tracer or do_line_bullet_tracer)
        end
    end)
    menu_references["local_bullet_tracers_outline_color"]:set_visible(false)

    create_connection(menu_references["local_bullet_tracers_color"]["on_color_change"], function(value)
        local_bullet_tracers_color = ColorSequence.new{ColorSequenceKeypoint.new(0, value), ColorSequenceKeypoint.new(1, flags["local_bullet_tracers_gradient_color"])}
    end)

    create_connection(menu_references["local_bullet_tracers_gradient_color"]["on_color_change"], function(value)
        local_bullet_tracers_color = ColorSequence.new{ColorSequenceKeypoint.new(0, flags["local_bullet_tracers_color"]), ColorSequenceKeypoint.new(1, value)}
    end)

    create_connection(menu_references["local_bullet_tracers_color"]["on_transparency_change"], function(value)
        local_bullet_tracers_transparency = NumberSequence.new{NumberSequenceKeypoint.new(0, value), NumberSequenceKeypoint.new(1, flags["local_bullet_tracers_gradient_transparency"])}
    end)

    create_connection(menu_references["local_bullet_tracers_gradient_color"]["on_transparency_change"], function(value)
        local_bullet_tracers_transparency = NumberSequence.new{NumberSequenceKeypoint.new(0, flags["local_bullet_tracers_transparency"]), NumberSequenceKeypoint.new(1, value)}
    end)

    create_connection(menu_references["local_bullet_tracers_style"]["on_dropdown_change"], function(value)
        local_bullet_tracers_beam = beams[value[1]]
    end)

    -- >> ( enemy tracers )

    do
        local player_bullet_tracers_on_player_bullet_fired = nil

        create_connection(menu_references["player_bullet_tracers"]["on_toggle_change"], function(value)
            if player_bullet_tracers_on_player_bullet_fired then
                player_bullet_tracers_on_player_bullet_fired:Disconnect()
                player_bullet_tracers_on_player_bullet_fired = nil
            end

            if value then
                player_bullet_tracers_on_player_bullet_fired = create_connection(signals["on_player_bullet_fired"], flags["player_bullet_tracers_type"][1] == "beam" and do_beam_bullet_tracer or do_line_bullet_tracer)
            end
        end)

        create_connection(menu_references["player_bullet_tracers_type"]["on_dropdown_change"], function(value)
            local is_beam = value[1] == "beam"

            menu_references["player_bullet_tracers_gradient_color"]:set_visible(is_beam)
            menu_references["player_bullet_tracers_outline_color"]:set_visible(not is_beam)
            menu_references["player_bullet_tracers_style"]:set_visible(is_beam)

            if player_bullet_tracers_on_player_bullet_fired then
                player_bullet_tracers_on_player_bullet_fired:Disconnect()
                player_bullet_tracers_on_player_bullet_fired = create_connection(signals["on_player_bullet_fired"], is_beam and do_beam_bullet_tracer or do_line_bullet_tracer)
            end
        end)
        menu_references["player_bullet_tracers_outline_color"]:set_visible(false)

        create_connection(menu_references["player_bullet_tracers_color"]["on_color_change"], function(value)
            player_bullet_tracers_color = ColorSequence.new{ColorSequenceKeypoint.new(0, value), ColorSequenceKeypoint.new(1, flags["player_bullet_tracers_gradient_color"])}
        end)

        create_connection(menu_references["player_bullet_tracers_gradient_color"]["on_color_change"], function(value)
            player_bullet_tracers_color = ColorSequence.new{ColorSequenceKeypoint.new(0, flags["player_bullet_tracers_color"]), ColorSequenceKeypoint.new(1, value)}
        end)

        create_connection(menu_references["player_bullet_tracers_color"]["on_transparency_change"], function(value)
            player_bullet_tracers_transparency = NumberSequence.new{NumberSequenceKeypoint.new(0, value), NumberSequenceKeypoint.new(1, flags["player_bullet_tracers_gradient_transparency"])}
        end)

        create_connection(menu_references["player_bullet_tracers_gradient_color"]["on_transparency_change"], function(value)
            player_bullet_tracers_transparency = NumberSequence.new{NumberSequenceKeypoint.new(0, flags["player_bullet_tracers_transparency"]), NumberSequenceKeypoint.new(1, value)}
        end)

        create_connection(menu_references["player_bullet_tracers_style"]["on_dropdown_change"], function(value)
            player_bullet_tracers_beam = beams[value[1]]
        end)

        -- >> ( local bullet impacts )

        do
            local local_bullet_impacts_on_local_bullet_fired = nil

            local pop_impact = function(impact, is_cube)
                local new = clone(impact)
                new["Transparency"] = flags["local_bullet_impacts_pop_transparency"]
                new["Color"] = flags["local_bullet_impacts_pop_color"]
                new["Material"] = Enum["Material"]["Neon"]
                new["Size"] = vector3_new(0.28, 0.28, 0.28)

                if is_cube then
                    destroy(new["SelectionBox"])
                    tween(impact["SelectionBox"], {["Transparency"] = 1}, quad, out, 0.14)
                end
                
                new["Parent"] = impact

                tween(impact, {["Transparency"] = 1}, quad, out, 0.14)
                tween(new, {["Transparency"] = 1, ["Size"] = vector3_new(0.65, 0.65, 0.65)}, quad, out, 0.14)

                delay(0.14, destroy, impact)
            end

            local fade_impact = function(impact)
                tween(impact, {["Transparency"] = 1}, quad, out, 0.3)
                delay(0.3, destroy, impact)
            end

            local destroy_impact = pop_impact

            local do_sphere_bullet_impact = LPH_JIT_MAX(function(object, _, position)
                local sphere = create_instance("Part", {
                    ["Anchored"] = true,
                    ["CanCollide"] = false,
                    ["Massless"] = true,
                    ["CastShadow"] = false,
                    ["Color"] = flags["local_bullet_impacts_color"],
                    ["Material"] = Enum["Material"]["ForceField"],
                    ["Size"] = vector3_new(0.4, 0.4, 0.4),
                    ["Transparency"] = flags["local_bullet_impacts_transparency"],
                    ["Parent"] = ignored,
                    ["Shape"] = Enum["PartType"]["Ball"],
                    ["CFrame"] = cframe_new(position["p"]),
                })

                delay(flags["local_bullet_impacts_lifetime"], destroy_impact, sphere)
            end)

            local do_cube_bullet_impact = LPH_JIT_MAX(function(object, _, position)
                local cube = create_instance("Part", {
                    ["Anchored"] = true,
                    ["CanCollide"] = false,
                    ["Massless"] = true,
                    ["CastShadow"] = false,
                    ["Color"] = flags["local_bullet_impacts_color"],
                    ["Material"] = Enum["Material"]["Neon"],
                    ["Size"] = vector3_new(0.4, 0.4, 0.4),
                    ["Transparency"] = flags["local_bullet_impacts_transparency"],
                    ["Parent"] = ignored,
                    ["CFrame"] = cframe_new(position["p"]),
                })

                local box = create_instance("SelectionBox", {
                    ["Color3"] = flags["local_bullet_impacts_outline_color"],
                    ["Transparency"] = flags["local_bullet_impacts_outline_transparency"],
                    ["Parent"] = cube,
                    ["LineThickness"] = 0.01,
                    ["SurfaceTransparency"] = 1,
                    ["Adornee"] = cube
                })

                delay(flags["local_bullet_impacts_lifetime"], destroy_impact, cube, true)
            end)

            create_connection(menu_references["local_bullet_impacts"]["on_toggle_change"], function(value)
                if local_bullet_impacts_on_local_bullet_fired then
                    local_bullet_impacts_on_local_bullet_fired:Disconnect()
                    local_bullet_impacts_on_local_bullet_fired = nil
                end

                if value then
                    local_bullet_impacts_on_local_bullet_fired = create_connection(signals["on_local_bullet_fired"], flags["local_bullet_impacts_style"][1] == "sphere" and do_sphere_bullet_impact or do_cube_bullet_impact)
                end
            end)

            create_connection(menu_references["local_bullet_impacts_style"]["on_dropdown_change"], function(value)
                local is_sphere = value[1] == "sphere"
                menu_references["local_bullet_impacts_outline_color"]:set_visible(not is_sphere)

                if local_bullet_impacts_on_local_bullet_fired then
                    local_bullet_impacts_on_local_bullet_fired:Disconnect()
                    local_bullet_impacts_on_local_bullet_fired = create_connection(signals["on_local_bullet_fired"], is_sphere and do_sphere_bullet_impact or do_cube_bullet_impact)
                end
            end)

            create_connection(menu_references["local_bullet_impacts_animation"]["on_dropdown_change"], function(value)
                local value = value[1]
                destroy_impact = value == "pop" and pop_impact or value == "fade" and fade_impact or destroy
                menu_references["local_bullet_impacts_pop_color"]:set_visible(value == "pop")
            end)

            menu_references["local_bullet_impacts_outline_color"]:set_visible(false)
        end
    end

    -- >> ( shot notifications )

    do
        local show_notifications_on_local_bullet_confirmed = nil
        local show_notifications_on_local_bullet_failed = nil

        local do_hit_notification = true
        local do_failed_notification = true

        local send_hit_notification = function(player, part, damage, _, message)
            if player and part then
                new_notification(
                    "hit "..player["Name"].."'s "..(part["Name"]):lower().." for "..damage.." health "..(message or ""),
                    1,
                    flags["shot_notifications_hit_color"]
                )
            end
        end

        local send_failed_notification = function(player, part, reason, damage)
            new_notification(
                "shot at "..player["Name"].."'s "..(part["Name"]):lower().." failed due to "..reason,
                3,
                flags["shot_notifications_failed_color"]
            )
        end

        create_connection(menu_references["shot_notifications"]["on_toggle_change"], function(value)
            if show_notifications_on_local_bullet_failed then
                show_notifications_on_local_bullet_failed:Disconnect()
                show_notifications_on_local_bullet_failed = nil
            end

            if show_notifications_on_local_bullet_confirmed then
                show_notifications_on_local_bullet_confirmed:Disconnect()
                show_notifications_on_local_bullet_confirmed = nil
            end

            if value then
                if do_failed_notification then
                    show_notifications_on_local_bullet_failed = create_connection(signals["on_local_bullet_failed"], send_failed_notification)
                end

                if do_hit_notification then
                    show_notifications_on_local_bullet_confirmed = create_connection(signals["on_local_bullet_confirmed"], send_hit_notification)
                end
            end
        end)

        create_connection(menu_references["shot_notifications_notify_when"]["on_dropdown_change"], function(value)
            local found_failed = false
            local found_hit = false

            for i = 1, #value do
                if value[i] == "shot failed" then
                    found_failed = true
                elseif value[i] == "shot hit" then
                    found_hit = true
                end
            end

            do_failed_notification = found_failed
            do_hit_notification = found_hit

            if flags["shot_notifications"] then

                if show_notifications_on_local_bullet_failed then
                    show_notifications_on_local_bullet_failed:Disconnect()
                    show_notifications_on_local_bullet_failed = nil
                end

                if show_notifications_on_local_bullet_confirmed then
                    show_notifications_on_local_bullet_confirmed:Disconnect()
                    show_notifications_on_local_bullet_confirmed = nil
                end

                if do_failed_notification then
                    show_notifications_on_local_bullet_failed = create_connection(signals["on_local_bullet_failed"], send_failed_notification)
                end

                if do_hit_notification then
                    show_notifications_on_local_bullet_confirmed = create_connection(signals["on_local_bullet_confirmed"], send_hit_notification)
                end
            end
        end)
    end

    -- >> ( hit skeleton )

    do
        local hit_skeleton_on_player_hit = nil

        local hit_skeleton_fade = true
        local hit_skeleton_lifetime = 0.8
        local hit_skeleton_thickness = 3
        local hit_skeleton_transparency = 1
        local hit_skeleton_color = color3_fromrgb(142, 242, 255)

        local hit_skeleton_create_line = function()
            return create_real_drawing("Line", {
                Color = hit_skeleton_color,
                Thickness = hit_skeleton_thickness,
                Transparency = hit_skeleton_transparency,
                Visible = false
            })
        end

        local do_hit_skeleton = LPH_NO_VIRTUALIZE(function(player)
            local data = player_data[player]
            local character = data[3]

            if not character then
                return
            end
            local parts = data[4]

            local head_to_neck = hit_skeleton_create_line()
            local neck_to_left_shoulder = hit_skeleton_create_line()
            local neck_to_right_shoulder = hit_skeleton_create_line()
            local left_shoulder_to_upper_arm = hit_skeleton_create_line()
            local right_shoulder_to_upper_arm = hit_skeleton_create_line()
            local left_upper_arm_to_lower_arm = hit_skeleton_create_line()
            local right_upper_arm_to_lower_arm = hit_skeleton_create_line()
            local left_lower_arm_to_hand = hit_skeleton_create_line()
            local right_lower_arm_to_hand = hit_skeleton_create_line()
            local neck_to_lower_torso = hit_skeleton_create_line()
            local lower_torso_to_left_upper_leg = hit_skeleton_create_line()
            local lower_torso_to_right_upper_leg = hit_skeleton_create_line()
            local left_upper_leg_to_lower_leg = hit_skeleton_create_line()
            local right_upper_leg_to_lower_leg = hit_skeleton_create_line()
            local left_lower_leg_to_foot = hit_skeleton_create_line()
            local right_lower_leg_to_foot = hit_skeleton_create_line()

            local head_cframe = nil
            local left_upper_arm_cframe = nil
            local right_upper_arm_cframe = nil
            local left_lower_arm_cframe = nil
            local right_lower_arm_cframe = nil
            local left_hand_cframe = nil
            local right_hand_cframe = nil
            local lower_torso_cframe = nil
            local left_upper_leg_cframe = nil
            local right_upper_leg_cframe = nil
            local left_lower_leg_cframe = nil
            local right_lower_leg_cframe = nil
            local left_foot_cframe = nil
            local right_foot_cframe = nil

            local head = parts.Head
            local left_upper_arm = parts.LeftUpperArm
            local right_upper_arm = parts.RightUpperArm
            local left_lower_arm = parts.LeftLowerArm
            local right_lower_arm = parts.RightLowerArm
            local left_hand = parts.LeftHand
            local right_hand = parts.RightHand
            local lower_torso = parts.LowerTorso
            local left_upper_leg = parts.LeftUpperLeg
            local right_upper_leg = parts.RightUpperLeg
            local left_lower_leg = parts.LeftLowerLeg
            local right_lower_leg = parts.RightLowerLeg
            local left_foot = parts.LeftFoot
            local right_foot = parts.RightFoot

            if head then head_cframe = head.CFrame end
            if left_upper_arm then left_upper_arm_cframe = left_upper_arm.CFrame end
            if right_upper_arm then right_upper_arm_cframe = right_upper_arm.CFrame end
            if left_lower_arm then left_lower_arm_cframe = left_lower_arm.CFrame end
            if right_lower_arm then right_lower_arm_cframe = right_lower_arm.CFrame end
            if left_hand then left_hand_cframe = left_hand.CFrame end
            if right_hand then right_hand_cframe = right_hand.CFrame end
            if lower_torso then lower_torso_cframe = lower_torso.CFrame end
            if left_upper_leg then left_upper_leg_cframe = left_upper_leg.CFrame end
            if right_upper_leg then right_upper_leg_cframe = right_upper_leg.CFrame end
            if left_lower_leg then left_lower_leg_cframe = left_lower_leg.CFrame end
            if right_lower_leg then right_lower_leg_cframe = right_lower_leg.CFrame end
            if left_foot then left_foot_cframe = left_foot.CFrame end
            if right_foot then right_foot_cframe = right_foot.CFrame end

            local draw = function()
                head_to_neck.Visible = false
                local neck_position = nil
                if head_cframe then
                    local head_position, head_visible = world_to_viewport_point(camera, head_cframe.Position)

                    local neck_3d = (head_cframe - head_cframe.YVector / 1.3).Position;
                    local _neck_position, neck_visible = world_to_viewport_point(camera, neck_3d);

                    if head_visible and neck_visible then
                        head_to_neck.Visible = true
                        head_to_neck.From = vector2_new(head_position.X, head_position.Y)
                        neck_position = _neck_position
                        neck_position = vector2_new(neck_position.X, neck_position.Y)
                        head_to_neck.To = neck_position
                    end
                end

                neck_to_left_shoulder.Visible = false
                local left_shoulder_position = nil
                if neck_position and left_upper_arm_cframe then
                    local _left_shoulder_position, left_shoulder_visible = world_to_viewport_point(camera, left_upper_arm_cframe.Position + left_upper_arm_cframe.YVector / 2)

                    if left_shoulder_visible then
                        neck_to_left_shoulder.Visible = true
                        neck_to_left_shoulder.From = neck_position
                        left_shoulder_position = _left_shoulder_position
                        left_shoulder_position = vector2_new(left_shoulder_position.X, left_shoulder_position.Y)
                        neck_to_left_shoulder.To = left_shoulder_position
                    end
                end

                neck_to_right_shoulder.Visible = false
                local right_shoulder_position = nil
                if neck_position and right_upper_arm_cframe then
                    local _right_shoulder_position, right_shoulder_visible = world_to_viewport_point(camera, right_upper_arm_cframe.Position + right_upper_arm_cframe.YVector / 2)

                    if right_shoulder_visible then
                        neck_to_right_shoulder.Visible = true
                        neck_to_right_shoulder.From = neck_position
                        right_shoulder_position = _right_shoulder_position
                        right_shoulder_position = vector2_new(right_shoulder_position.X, right_shoulder_position.Y)
                        neck_to_right_shoulder.To = right_shoulder_position
                    end
                end

                left_shoulder_to_upper_arm.Visible = false
                local left_upper_arm_position = nil
                if left_shoulder_position and left_upper_arm_cframe then
                    local _left_upper_arm_position, left_upper_arm_visible = world_to_viewport_point(camera, left_upper_arm_cframe.Position - left_upper_arm_cframe.UpVector / 2 - left_upper_arm_cframe.XVector / 3)

                    if left_upper_arm_visible then
                        left_shoulder_to_upper_arm.Visible = true
                        left_shoulder_to_upper_arm.From = left_shoulder_position
                        left_upper_arm_position = _left_upper_arm_position
                        left_upper_arm_position = vector2_new(left_upper_arm_position.X, left_upper_arm_position.Y)
                        left_shoulder_to_upper_arm.To = left_upper_arm_position
                    end
                end

                right_shoulder_to_upper_arm.Visible = false
                local right_upper_arm_position = nil
                if right_shoulder_position and right_upper_arm_cframe then
                    local _right_upper_arm_position, right_upper_arm_visible = world_to_viewport_point(camera, right_upper_arm_cframe.Position - right_upper_arm_cframe.UpVector / 2 + right_upper_arm_cframe.XVector / 3)

                    if right_upper_arm_visible then
                        right_shoulder_to_upper_arm.Visible = true
                        right_shoulder_to_upper_arm.From = right_shoulder_position
                        right_upper_arm_position = _right_upper_arm_position
                        right_upper_arm_position = vector2_new(right_upper_arm_position.X, right_upper_arm_position.Y)
                        right_shoulder_to_upper_arm.To = right_upper_arm_position
                    end
                end

                left_upper_arm_to_lower_arm.Visible = false
                local left_lower_arm_position = nil
                if left_upper_arm_position and left_lower_arm_cframe then
                    local _left_lower_arm_position, left_lower_arm_visible = world_to_viewport_point(camera, left_lower_arm_cframe.Position - left_lower_arm_cframe.UpVector / 2 - left_lower_arm_cframe.XVector / 4)

                    if left_lower_arm_visible then
                        left_upper_arm_to_lower_arm.Visible = true
                        left_upper_arm_to_lower_arm.From = left_upper_arm_position
                        left_lower_arm_position = _left_lower_arm_position
                        left_lower_arm_position = vector2_new(left_lower_arm_position.X, left_lower_arm_position.Y)
                        left_upper_arm_to_lower_arm.To = left_lower_arm_position
                    end
                end

                right_upper_arm_to_lower_arm.Visible = false
                local right_lower_arm_position = nil
                if right_upper_arm_position and right_lower_arm_cframe then
                    local _right_lower_arm_position, right_lower_arm_visible = world_to_viewport_point(camera, right_lower_arm_cframe.Position - right_lower_arm_cframe.UpVector / 2 + right_lower_arm_cframe.XVector / 4)

                    if right_lower_arm_visible then
                        right_upper_arm_to_lower_arm.Visible = true
                        right_upper_arm_to_lower_arm.From = right_upper_arm_position
                        right_lower_arm_position = _right_lower_arm_position
                        right_lower_arm_position = vector2_new(right_lower_arm_position.X, right_lower_arm_position.Y)
                        right_upper_arm_to_lower_arm.To = right_lower_arm_position
                    end
                end

                left_lower_arm_to_hand.Visible = false
                local left_hand_position = nil
                if left_lower_arm_position and left_hand_cframe then
                    local _left_hand_position, left_hand_visible = world_to_viewport_point(camera, left_hand_cframe.Position)

                    if left_hand_visible then
                        left_lower_arm_to_hand.Visible = true
                        left_lower_arm_to_hand.From = left_lower_arm_position
                        left_hand_position = _left_hand_position
                        left_hand_position = vector2_new(left_hand_position.X, left_hand_position.Y)
                        left_lower_arm_to_hand.To = left_hand_position
                    end
                end

                right_lower_arm_to_hand.Visible = false
                local right_hand_position = nil
                if right_lower_arm_position and right_hand_cframe then
                    local _right_hand_position, right_hand_visible = world_to_viewport_point(camera, right_hand_cframe.Position)

                    if right_hand_visible then
                        right_lower_arm_to_hand.Visible = true
                        right_lower_arm_to_hand.From = right_lower_arm_position
                        right_hand_position = _right_hand_position
                        right_hand_position = vector2_new(right_hand_position.X, right_hand_position.Y)
                        right_lower_arm_to_hand.To = right_hand_position
                    end
                end

                neck_to_lower_torso.Visible = false
                local lower_torso_position = nil
                if neck_position and lower_torso_cframe then
                    local _lower_torso_position, lower_torso_visible = world_to_viewport_point(camera, lower_torso_cframe.Position)

                    if lower_torso_visible then
                        neck_to_lower_torso.Visible = true
                        neck_to_lower_torso.From = neck_position
                        lower_torso_position = _lower_torso_position
                        lower_torso_position = vector2_new(lower_torso_position.X, lower_torso_position.Y)
                        neck_to_lower_torso.To = lower_torso_position
                    end
                end

                lower_torso_to_left_upper_leg.Visible = false
                local left_upper_leg_position = nil
                if lower_torso_position and left_upper_leg_cframe then
                    local _left_upper_leg_position, left_upper_leg_visible = world_to_viewport_point(camera, left_upper_leg_cframe.Position + left_upper_leg_cframe.UpVector / 2)

                    if left_upper_leg_visible then
                        lower_torso_to_left_upper_leg.Visible = true
                        lower_torso_to_left_upper_leg.From = lower_torso_position
                        left_upper_leg_position = _left_upper_leg_position
                        left_upper_leg_position = vector2_new(left_upper_leg_position.X, left_upper_leg_position.Y)
                        lower_torso_to_left_upper_leg.To = left_upper_leg_position
                    end
                end

                lower_torso_to_right_upper_leg.Visible = false
                local right_upper_leg_position = nil
                if lower_torso_position and right_upper_leg_cframe then
                    local _right_upper_leg_position, right_upper_leg_visible = world_to_viewport_point(camera, right_upper_leg_cframe.Position + right_upper_leg_cframe.UpVector / 2)

                    if right_upper_leg_visible then
                        lower_torso_to_right_upper_leg.Visible = true
                        lower_torso_to_right_upper_leg.From = lower_torso_position
                        right_upper_leg_position = _right_upper_leg_position
                        right_upper_leg_position = vector2_new(right_upper_leg_position.X, right_upper_leg_position.Y)
                        lower_torso_to_right_upper_leg.To = right_upper_leg_position
                    end
                end

                left_upper_leg_to_lower_leg.Visible = false
                local left_lower_leg_position = nil
                if left_upper_leg_position and left_lower_leg_cframe then
                    local _left_lower_leg_position, left_lower_leg_visible = world_to_viewport_point(camera, left_lower_leg_cframe.Position + left_lower_leg_cframe.UpVector / 2)

                    if left_lower_leg_visible then
                        left_upper_leg_to_lower_leg.Visible = true
                        left_upper_leg_to_lower_leg.From = left_upper_leg_position
                        left_lower_leg_position = _left_lower_leg_position
                        left_lower_leg_position = vector2_new(left_lower_leg_position.X, left_lower_leg_position.Y)
                        left_upper_leg_to_lower_leg.To = left_lower_leg_position
                    end
                end

                right_upper_leg_to_lower_leg.Visible = false
                local right_lower_leg_position = nil
                if right_upper_leg_position and right_lower_leg_cframe then
                    local _right_lower_leg_position, right_lower_leg_visible = world_to_viewport_point(camera, right_lower_leg_cframe.Position + right_lower_leg_cframe.UpVector / 2)

                    if right_lower_leg_visible then
                        right_upper_leg_to_lower_leg.Visible = true
                        right_upper_leg_to_lower_leg.From = right_upper_leg_position
                        right_lower_leg_position = _right_lower_leg_position
                        right_lower_leg_position = vector2_new(right_lower_leg_position.X, right_lower_leg_position.Y)
                        right_upper_leg_to_lower_leg.To = right_lower_leg_position
                    end
                end

                left_lower_leg_to_foot.Visible = false
                local left_foot_position = nil
                if left_lower_leg_position and left_foot_cframe then
                    local _left_foot_position, left_foot_visible = world_to_viewport_point(camera, left_foot_cframe.Position)

                    if left_foot_visible then
                        left_lower_leg_to_foot.Visible = true
                        left_lower_leg_to_foot.From = left_lower_leg_position
                        left_foot_position = _left_foot_position
                        left_foot_position = vector2_new(left_foot_position.X, left_foot_position.Y)
                        left_lower_leg_to_foot.To = left_foot_position
                    end
                end

                right_lower_leg_to_foot.Visible = false
                local right_foot_position = nil
                if right_lower_leg_position and right_foot_cframe then
                    local _right_foot_position, right_foot_visible = world_to_viewport_point(camera, right_foot_cframe.Position)

                    if right_foot_visible then
                        right_lower_leg_to_foot.Visible = true
                        right_lower_leg_to_foot.From = right_lower_leg_position
                        right_foot_position = _right_foot_position
                        right_foot_position = vector2_new(right_foot_position.X, right_foot_position.Y)
                        right_lower_leg_to_foot.To = right_foot_position
                    end
                end
            end

            heartbeat[#heartbeat+1] = draw

            wait(hit_skeleton_lifetime)

            if hit_skeleton_fade then
                tween(head_to_neck, hide_transparency, quad, out, 0.2)
                tween(neck_to_left_shoulder, hide_transparency, quad, out, 0.2)
                tween(neck_to_right_shoulder, hide_transparency, quad, out, 0.2)
                tween(left_shoulder_to_upper_arm, hide_transparency, quad, out, 0.2)
                tween(right_shoulder_to_upper_arm, hide_transparency, quad, out, 0.2)
                tween(left_upper_arm_to_lower_arm, hide_transparency, quad, out, 0.2)
                tween(right_upper_arm_to_lower_arm, hide_transparency, quad, out, 0.2)
                tween(left_lower_arm_to_hand, hide_transparency, quad, out, 0.2)
                tween(right_lower_arm_to_hand, hide_transparency, quad, out, 0.2)
                tween(neck_to_lower_torso, hide_transparency, quad, out, 0.2)
                tween(lower_torso_to_left_upper_leg, hide_transparency, quad, out, 0.2)
                tween(lower_torso_to_right_upper_leg, hide_transparency, quad, out, 0.2)
                tween(left_upper_leg_to_lower_leg, hide_transparency, quad, out, 0.2)
                tween(right_upper_leg_to_lower_leg, hide_transparency, quad, out, 0.2)
                tween(left_lower_leg_to_foot, hide_transparency, quad, out, 0.2)
                tween(right_lower_leg_to_foot, hide_transparency, quad, out, 0.2)

                wait(0.2)
            end

            for i = 1, #heartbeat do
                if heartbeat[i] == draw then
                    remove(heartbeat, i)
                    break
                end
            end

            if head_to_neck then
                head_to_neck:Destroy()
                neck_to_left_shoulder:Destroy()
                neck_to_right_shoulder:Destroy()
                left_shoulder_to_upper_arm:Destroy()
                right_shoulder_to_upper_arm:Destroy()
                left_upper_arm_to_lower_arm:Destroy()
                right_upper_arm_to_lower_arm:Destroy()
                left_lower_arm_to_hand:Destroy()
                right_lower_arm_to_hand:Destroy()
                neck_to_lower_torso:Destroy()
                lower_torso_to_left_upper_leg:Destroy()
                lower_torso_to_right_upper_leg:Destroy()
                left_upper_leg_to_lower_leg:Destroy()
                right_upper_leg_to_lower_leg:Destroy()
                left_lower_leg_to_foot:Destroy()
                right_lower_leg_to_foot:Destroy()
            end
        end)

        create_connection(menu_references["hit_skeleton"]["on_toggle_change"], function(value)
            if hit_skeleton_on_player_hit then
                hit_skeleton_on_player_hit:Disconnect()
                hit_skeleton_on_player_hit = nil
            end

            if value then
                hit_skeleton_on_player_hit = create_connection(signals["on_local_bullet_confirmed"], do_hit_skeleton)
            end
        end)

        create_connection(menu_references["hit_skeleton_animation"]["on_dropdown_change"], function(value)
            hit_skeleton_fade = value[1] == "fade"
        end)

        create_connection(menu_references["hit_skeleton_lifetime"]["on_slider_change"], function(value)
            hit_skeleton_lifetime = value
        end)

        create_connection(menu_references["hit_skeleton_thickness"]["on_slider_change"], function(value)
            hit_skeleton_thickness = value
        end)

        create_connection(menu_references["hit_skeleton_color"]["on_color_change"], function(value)
            hit_skeleton_color = value
        end)

        create_connection(menu_references["hit_skeleton_color"]["on_transparency_change"], function(value)
            hit_skeleton_transparency = 1 - value
        end)
    end

    -- >> ( hit sound )

    local hit_sound_connection = nil
    local sound_service = cloneref(game:GetService("SoundService"))

    local hit_sounds = {
        ["primordial"] = readfile("juju recode/assets/primordial.ogg"),
        ["neverlose"] = readfile("juju recode/assets/neverlose.ogg"),
        ["sparkle"] = readfile("juju recode/assets/sparkle.ogg"),
        ["mc bow"] = readfile("juju recode/assets/mc bow.ogg"),
        ["break"] = readfile("juju recode/assets/break.ogg"),
        ["skeet"] = readfile("juju recode/assets/skeet.ogg"),
        ["rust"] = readfile("juju recode/assets/rust.ogg"),
    }

    for _, data in hit_sounds do
        local path = tostring({}):sub(math_random(8, 12))..".ogg"
        writefile(path, data)
        hit_sounds[_] = getcustomasset(path)
        delfile(path)
    end

    local hit_sound_data = hit_sounds["juju"]

    local do_hit_sound = function()
        delay(0, destroy, create_instance("Sound", {
            ["SoundId"] = hit_sound_data,
            ["Volume"] = flags["hit_sound_volume"],
            ["PlayOnRemove"] = true,
            ["Name"] = "\0",
            ["Parent"] = sound_service
        }))
    end

    create_connection(menu_references["hit_sound"]["on_toggle_change"], function(value)
        if hit_sound_connection then
            hit_sound_connection:Disconnect()
            hit_sound_connection = nil
        end

        if value then
            hit_sound_connection = create_connection(signals["on_local_bullet_confirmed"], do_hit_sound)
        end
    end)

    create_connection(menu_references["hit_sound_value"]["on_dropdown_change"], function(value)
        local new_value = value[1]
        hit_sound_data = hit_sounds[new_value]

        if new_value and not hit_sound_data then
            local path = tostring({}):sub(math_random(8, 12))..".ogg"
            writefile(path, readfile("juju recode/custom/"..new_value))
            local asset = getcustomasset(path)
            hit_sounds[new_value] = asset
            delfile(path)

            hit_sound_data = asset
        end
    end)

    -- >> ( hit particle )

    do
        local hit_particle_part = create_instance("Part", {
            ["Name"] = "\0",
            ["Anchored"] = true,
            ["CanCollide"] = false,
            ["Massless"] = true,
            ["CastShadow"] = false,
            ["Size"] = vector3_new(0.01, 0.01, 0.01)
        })

        local hit_particles = {
            ["sparks"] = {
                {
                    create_instance("ParticleEmitter", {
                        ["Acceleration"] = vector3_new(0,-50,0);
                        ["Color"] = ColorSequence.new{ColorSequenceKeypoint.new(0,Color3.new(1,0.999969,0.999985)),ColorSequenceKeypoint.new(0.25,Color3.new(0.333333,1,0)),ColorSequenceKeypoint.new(1,Color3.new(0.333333,1,0.498039))};
                        ["Lifetime"] = NumberRange.new(0.5,1);
                        ["LightEmission"] = 1;
                        ["Enabled"] = false;
                        ["Orientation"] = Enum.ParticleOrientation.VelocityParallel;
                        ["Rate"] = 0;
                        ["Size"] = NumberSequence.new{NumberSequenceKeypoint.new(0,0.6,0),NumberSequenceKeypoint.new(0.5,0.6,0),NumberSequenceKeypoint.new(1,0,0)};
                        ["Speed"] = NumberRange.new(15,15);
                        ["SpreadAngle"] = vector2_new(50,-50);
                        ["Texture"] = [[http://www.roblox.com/asset/?id=18540695516]];
                        ["Transparency"] = NumberSequence.new{NumberSequenceKeypoint.new(0,0,0),NumberSequenceKeypoint.new(0.5,0,0),NumberSequenceKeypoint.new(1,1,0)};
                        ["Name"] = "\0";
                        ["Parent"] = hit_particle_part
                    }),
                    30
                }
            },
            ["bubble"] = {
                {
                    create_instance("ParticleEmitter", {
                        ["FlipbookMode"] = Enum.ParticleFlipbookMode.OneShot,
                        ["Color"] = ColorSequence.new{
                            ColorSequenceKeypoint.new(0, color3_fromrgb(85, 255, 255)),
                            ColorSequenceKeypoint.new(1, color3_fromrgb(85, 255, 255))
                        },
                        ["LockedToPart"] = true,
                        ["Rate"] = 1.5,
                        ["Rotation"] = NumberRange.new(-5, 5),
                        ["Transparency"] = NumberSequence.new{
                            NumberSequenceKeypoint.new(0, 1),
                            NumberSequenceKeypoint.new(0.464, 0.768750011920929),
                            NumberSequenceKeypoint.new(1, 1)
                        },
                        ["Texture"] = "rbxassetid://17086075673",
                        ["Lifetime"] = NumberRange.new(0.450000001192092896, 0.450000001192092896),
                        ["LightEmission"] = 1,
                        ["Brightness"] = 5,
                        ["Speed"] = NumberRange.new(0, 0),
                        ["Size"] = NumberSequence.new{
                            NumberSequenceKeypoint.new(0, 0.10000000149011612),
                            NumberSequenceKeypoint.new(1, 6)
                        },
                        ["Enabled"] = false,
                        ["Parent"] = hit_particle_part
                    }),
                    1
                }
            },
            ["orbs"] = {
                {
                    create_instance("ParticleEmitter", {
                        ["FlipbookMode"] = Enum.ParticleFlipbookMode.OneShot,
                        ["RotSpeed"] = NumberRange.new(-10, 10),
                        ["FlipbookFramerate"] = NumberRange.new(40, 40),
                        ["Drag"] = 1,
                        ["Rate"] = 1,
                        ["Texture"] = "rbxassetid://15011464541",
                        ["Rotation"] = NumberRange.new(-1000, 1000),
                        ["Transparency"] = NumberSequence.new{
                            NumberSequenceKeypoint.new(0, 0),
                            NumberSequenceKeypoint.new(1, 1)
                        },
                        ["SpreadAngle"] = Vector2.new(-1000, 1000),
                        ["Lifetime"] = NumberRange.new(0.44999998807907104, 0.44999998807907104),
                        ["LightEmission"] = 1,
                        ["Brightness"] = 10,
                        ["FlipbookLayout"] = Enum.ParticleFlipbookLayout.Grid8x8,
                        ["Size"] = NumberSequence.new{
                            NumberSequenceKeypoint.new(0, 5.5),
                            NumberSequenceKeypoint.new(1, 5.5)
                        },
                        ["Enabled"] = false,
                        ["Parent"] = hit_particle_part
                    }),
                    3
                }
            },
            ["air"] = {
                {
                    create_instance("ParticleEmitter", {
                        ["FlipbookMode"] = Enum.ParticleFlipbookMode.PingPong,
                        ["VelocityInheritance"] = 0.15000000596046448,
                        ["Texture"] = "rbxassetid://10536350143",
                        ["FlipbookFramerate"] = NumberRange.new(30, 30),
                        ["Drag"] = 4.5,
                        ["Rate"] = 1,
                        ["Speed"] = NumberRange.new(0, 0),
                        ["LightInfluence"] = 1,
                        ["Acceleration"] = vector3_new(1, 0, 1),
                        ["LockedToPart"] = true,
                        ["Lifetime"] = NumberRange.new(1, 1),
                        ["LightEmission"] = 1,
                        ["Brightness"] = 10,
                        ["FlipbookLayout"] = Enum.ParticleFlipbookLayout.Grid8x8,
                        ["Size"] = NumberSequence.new{
                            NumberSequenceKeypoint.new(0, 3),
                            NumberSequenceKeypoint.new(1, 3)
                        },
                        ["Parent"] = hit_particle_part,
                        ["Enabled"] = false
                    }),
                    1
                }
            }
        }

        local hit_particle_connection = nil
        local hit_particle = hit_particles["sparks"]

        local do_hit_particle = LPH_NO_VIRTUALIZE(function(player, part)
            local color = ColorSequence["new"](player_data[player][18] and flags["hit_particle_lethal_color"] or flags["hit_particle_color"])
            local z_offset = flags["hit_particle_behind_walls"] and 1 or 0
            hit_particle_part["CFrame"] = part["CFrame"]
            for _, particle in hit_particle do
                local instance = particle[1]
                instance["Color"] = color
                instance["ZOffset"] = z_offset
                instance:Emit(particle[2])
            end
        end)

        create_connection(menu_references["hit_particle"]["on_toggle_change"], function(value)
            hit_particle_part["Parent"] = value and ignored or hui

            if hit_particle_connection then
                hit_particle_connection:Disconnect()
                hit_particle_connection = nil
            end

            if value then
                hit_particle_connection = create_connection(signals["on_local_bullet_confirmed"], do_hit_particle)
            end
        end)

        create_connection(menu_references["hit_particle_particle"]["on_dropdown_change"], function(value)
            local value = value[1]
            hit_particle = hit_particles[value]

            if not hit_particle then
                local new_particle = game:GetObjects(getcustomasset("juju recode/custom/"..value))[1]
                local children = get_children(new_particle)
                local new_hit_particle = {}
                for i = 1, #children do
                    local child = children[i]
                    if child["ClassName"] == "ParticleEmitter" then
                        new_hit_particle[#new_hit_particle+1] = {
                            child,
                            child["Rate"]
                        }

                        child["Enabled"] = false
                        child["Parent"] = hit_particle_part
                    end
                end

                hit_particles[value] = new_hit_particle
                hit_particle = new_hit_particle
            end
        end)
    end

    -- >> ( hit overlay )

    local hit_overlay_connection = nil
    local data = readfile("juju recode/assets/1.png")

    local hit_image = nil
    local last_hit = clock()
    local do_hit_overlay = function(player)
        local new_last_hit = clock()
        last_hit = new_last_hit

        local is_lethal = player_data[player][18]
        hit_image["Color"] = is_lethal and flags["hit_overlay_lethal_color"] or flags["hit_overlay_color"]
        hit_image["Size"] = camera["ViewportSize"]

        local lifetime = flags["hit_overlay_lifetime"]
        tween(hit_image, {Transparency = is_lethal and -flags["hit_overlay_lethal_transparency"]+1 or -flags["hit_overlay_transparency"]+1}, quad, out, (lifetime/5.25))
        wait(lifetime/5.15)

        if new_last_hit ~= last_hit then
            return
        end

        tween(hit_image, hide_transparency, quad, out, (lifetime/5.25))
    end

    create_connection(menu_references["hit_overlay"]["on_toggle_change"], function(value)
        if hit_overlay_connection then
            hit_overlay_connection:Disconnect()
            hit_overlay_connection = nil
        end

        if hit_image then
            hit_image:Destroy()
            hit_image = nil
        end

        if value then
            hit_image = create_real_drawing("Image", {
                ["Color"] = flags["hit_overlay_color"],
                ["Transparency"] = 0,
                ["Size"] = camera["ViewportSize"],
                ["ZIndex"] = 5500,
                ["Visible"] = true,
                ["Data"] = data
            })

            hit_overlay_connection = create_connection(signals["on_local_bullet_confirmed"], do_hit_overlay)
        end
    end)

    -- >> ( damage number )

    do
        local damage_number_connection = nil
        local damage_number_outline_color = color3_fromrgb(15, 15, 15)
        local damage_number_font = 2
        local show_offset = vector3_new(0,1.5,0)
        local create_drawing = (identifyexecutor() == "Swift" or identifyexecutor() == "Potassium") and create_fake_drawing or create_real_drawing

        local do_damage_number = LPH_JIT_MAX(function(player, part, damage, _, message)
            local transparency = -flags["damage_number_transparency"]+1
            local color = player_data[player][18] and flags["damage_number_lethal_color"] or flags["damage_number_color"]
            local number = create_drawing("Text", {
                ["Text"] = flags["damage_number_show_ragebot_data"] and damage..message or damage,
                ["Size"] = 14,
                ["Color"] = color,
                ["OutlineColor"] = damage_number_outline_color,
                ["Transparency"] = 0,
                ["ZIndex"] = 5500,
                ["Outline"] = true,
                ["Font"] = damage_number_font,
                ["Visible"] = true
            })

            local part_position = part["Position"]
            local new_position = part_position
            local elapsed_time = 0

            local lifetime = flags["damage_number_lifetime"]
            local half = lifetime/1.6
            local new_half = lifetime/2

            local new_function = function(dt)
                elapsed_time+=dt

                local position, on_screen = world_to_viewport_point(camera, new_position)

                if on_screen then
                    if elapsed_time > lifetime then
                        local part_position = part_position + show_offset
                        local value = get_value(tween_service, (elapsed_time - lifetime) / new_half, exponential, out)
                        number["Transparency"] = transparency + (0 - transparency) * value
                        local new = -(show_offset*value)
                        new_position = part_position + ((part_position+new) - part_position) * value
                    elseif elapsed_time < half then
                        local value = get_value(tween_service, elapsed_time / half, exponential, out)
                        number["Transparency"] = 0 + (transparency - 0) * value
                        new_position = part_position + (show_offset*value)
                    end

                    number["Position"] = vector2_new(position["X"] + 13, position["Y"])
                else
                    number["Visible"] = false
                end
            end

            heartbeat[#heartbeat+1] = new_function

            delay(lifetime + new_half, function()
                for i = 1, #heartbeat do
                    if heartbeat[i] == new_function then
                        remove(heartbeat, i)
                        break
                    end
                end

                number:Destroy()
            end)
        end)

        create_connection(menu_references["damage_number"]["on_toggle_change"], function(value)
            if damage_number_connection then
                damage_number_connection:Disconnect()
                damage_number_connection = nil
            end

            if value then
                damage_number_connection = create_connection(signals["on_local_bullet_confirmed"], do_damage_number)
            end
        end)

        create_connection(menu_references["damage_number_outline_color"]["on_color_change"], function(value)
            damage_number_outline_color = value
        end)

        create_connection(menu_references["damage_number_font"]["on_dropdown_change"], function(value)
            damage_number_font = tonumber(value[1])
        end)
    end

    -- >> ( 3d hit marker )

    do
        local d3_hit_marker_connection = nil
        local d3_hit_marker_color = color3_fromrgb(255, 255, 255)
        local d3_hit_marker_outline_color = color3_fromrgb(15, 15, 15)

        local do_d3_hit_marker = LPH_NO_VIRTUALIZE(function(player, part)
            local lines = {}
            local outlines = {}
            local thickness = flags["d3_hit_marker_thickness"]
            local color = player_data[player][18] and flags["d3_hit_marker_lethal_color"] or d3_hit_marker_color

            for i = 1, 4 do
                lines[i] = create_real_drawing("Line", {
                    ["Thickness"] = thickness,
                    ["Color"] = color,
                    ["Transparency"] = 1,
                    ["ZIndex"] = 100,
                    ["Visible"] = true
                })
                outlines[i] = create_real_drawing("Line", {
                    ["Thickness"] = thickness + 2,
                    ["Color"] = d3_hit_marker_outline_color,
                    ["Transparency"] = 1,
                    ["ZIndex"] = 99,
                    ["Visible"] = true
                })
            end

            local lifetime = flags["d3_hit_marker_lifetime"]
            local position = part["Position"]
            local elapsed_time = 0

            local new_function = function(dt)
                elapsed_time+=dt

                local position, on_screen = world_to_viewport_point(camera, position)

                if on_screen then
                    local position_x = position["X"]
                    local position_y = position["Y"]

                    for i = 1, 4 do
                        lines[i]["Visible"] = true
                        outlines[i]["Visible"] = true
                    end

                    if elapsed_time > lifetime then
                        local elapsed_time = elapsed_time - lifetime
                        local transparency = 1 + (0 - 1) * get_value(tween_service, elapsed_time / 0.3, quad, out)

                        for i = 1, 4 do
                            lines[i]["Transparency"] = transparency
                            outlines[i]["Transparency"] = transparency
                        end
                    end

                    local from1 = vector2_new(position_x - 10, position_y - 10)
                    local to1 = vector2_new(position_x - 5, position_y - 5)
                    lines[1]["From"], lines[1]["To"] = from1, to1
                    outlines[1]["From"], outlines[1]["To"] = from1, to1

                    local from2 = vector2_new(position_x + 10, position_y - 10)
                    local to2 = vector2_new(position_x + 5, position_y - 5)
                    lines[2]["From"], lines[2]["To"] = from2, to2
                    outlines[2]["From"], outlines[2]["To"] = from2, to2

                    local from3 = vector2_new(position_x - 10, position_y + 10)
                    local to3 = vector2_new(position_x - 5, position_y + 5)
                    lines[3]["From"], lines[3]["To"] = from3, to3
                    outlines[3]["From"], outlines[3]["To"] = from3, to3

                    local from4 = vector2_new(position_x + 10, position_y + 10)
                    local to4 = vector2_new(position_x + 5, position_y + 5)
                    lines[4]["From"], lines[4]["To"] = from4, to4
                    outlines[4]["From"], outlines[4]["To"] = from4, to4
                else
                    for i = 1, 4 do
                        lines[i]["Visible"] = false
                        outlines[i]["Visible"] = false
                    end
                end
            end

            heartbeat[#heartbeat+1] = new_function

            delay(lifetime + 0.3, function()
                for i = 1, #heartbeat do
                    if heartbeat[i] == new_function then
                        remove(heartbeat, i)
                        break
                    end
                end

                for i = 1, 4 do
                    lines[i]:Destroy()
                    lines[i] = nil
                    outlines[i]:Destroy()
                    outlines[i] = nil
                end
            end)
        end)

        create_connection(menu_references["d3_hit_marker"]["on_toggle_change"], function(value)
            if d3_hit_marker_connection then
                d3_hit_marker_connection:Disconnect()
                d3_hit_marker_connection = nil
            end

            if value then
                d3_hit_marker_connection = create_connection(signals["on_local_bullet_confirmed"], do_d3_hit_marker)
            end
        end)

        create_connection(menu_references["d3_hit_marker_color"]["on_color_change"], function(value)
            d3_hit_marker_color = value
        end)

        create_connection(menu_references["d3_hit_marker_outline_color"]["on_color_change"], function(value)
            d3_hit_marker_outline_color = value
        end)
    end

    -- >> ( 2d hit marker )

    do
        local d2_hit_marker_connection = nil
        local d2_hit_marker_color = color3_fromrgb(255, 255, 255)
        local d2_hit_marker_outline_color = color3_fromrgb(15, 15, 15)

        local do_d2_hit_marker = LPH_NO_VIRTUALIZE(function(player)
            local lines = {}
            local outlines = {}
            local thickness = flags["d2_hit_marker_thickness"]
            local color = player_data[player][18] and flags["d2_hit_marker_lethal_color"] or d2_hit_marker_color

            for i = 1, 4 do
                lines[i] = create_real_drawing("Line", {
                    ["Thickness"] = thickness,
                    ["Color"] = color,
                    ["Transparency"] = 1,
                    ["ZIndex"] = 100,
                    ["Visible"] = true
                })
                outlines[i] = create_real_drawing("Line", {
                    ["Thickness"] = thickness + 2,
                    ["Color"] = d2_hit_marker_outline_color,
                    ["Transparency"] = 1,
                    ["ZIndex"] = 99,
                    ["Visible"] = true
                })
            end

            local lifetime = flags["d2_hit_marker_lifetime"]
            local elapsed_time = 0

            local new_function = function(dt)
                elapsed_time+=dt

                local position = camera["ViewportSize"]/2
                local position_x = position["X"]
                local position_y = position["Y"]

                for i = 1, 4 do
                    lines[i]["Visible"] = true
                    outlines[i]["Visible"] = true
                end

                if elapsed_time > lifetime then
                    local elapsed_time = elapsed_time - lifetime
                    local transparency = 1 + (0 - 1) * get_value(tween_service, elapsed_time / 0.2, quad, out)

                    for i = 1, 4 do
                        lines[i]["Transparency"] = transparency
                        outlines[i]["Transparency"] = transparency
                    end
                end

                local from1 = vector2_new(position_x - 10, position_y - 10)
                local to1 = vector2_new(position_x - 5, position_y - 5)
                lines[1]["From"], lines[1]["To"] = from1, to1
                outlines[1]["From"], outlines[1]["To"] = from1, to1

                local from2 = vector2_new(position_x + 10, position_y - 10)
                local to2 = vector2_new(position_x + 5, position_y - 5)
                lines[2]["From"], lines[2]["To"] = from2, to2
                outlines[2]["From"], outlines[2]["To"] = from2, to2

                local from3 = vector2_new(position_x - 10, position_y + 10)
                local to3 = vector2_new(position_x - 5, position_y + 5)
                lines[3]["From"], lines[3]["To"] = from3, to3
                outlines[3]["From"], outlines[3]["To"] = from3, to3

                local from4 = vector2_new(position_x + 10, position_y + 10)
                local to4 = vector2_new(position_x + 5, position_y + 5)
                lines[4]["From"], lines[4]["To"] = from4, to4
                outlines[4]["From"], outlines[4]["To"] = from4, to4
            end

            heartbeat[#heartbeat+1] = new_function

            delay(lifetime + 0.2, function()
                for i = 1, #heartbeat do
                    if heartbeat[i] == new_function then
                        remove(heartbeat, i)
                        break
                    end
                end

                for i = 1, 4 do
                    lines[i]:Destroy()
                    lines[i] = nil
                    outlines[i]:Destroy()
                    outlines[i] = nil
                end
            end)
        end)

        create_connection(menu_references["d2_hit_marker"]["on_toggle_change"], function(value)
            if d2_hit_marker_connection then
                d2_hit_marker_connection:Disconnect()
                d2_hit_marker_connection = nil
            end

            if value then
                d2_hit_marker_connection = create_connection(signals["on_local_bullet_confirmed"], do_d2_hit_marker)
            end
        end)

        create_connection(menu_references["d2_hit_marker_color"]["on_color_change"], function(value)
            d2_hit_marker_color = value
        end)

        create_connection(menu_references["d2_hit_marker_outline_color"]["on_color_change"], function(value)
            d2_hit_marker_outline_color = value
        end)
    end

    -- >> ( hit chams )

    do
        menu_references["hit_chams"] = menu_references["game_section"]:create_element({["name"] = "hit chams"}, {["toggle"] = {["flag"] = "hit_chams"}})
            menu_references["hit_chams_settings"] = menu_references["hit_chams"]:create_settings()
            menu_references["hit_chams_only_last_hit"] = menu_references["hit_chams_settings"]:create_element({["name"] = "only last hit"}, {["toggle"] = {["flag"] = "only_last_hit"}})
            menu_references["hit_chams_animation"] = menu_references["hit_chams_settings"]:create_element({["name"] = "animation"}, {["dropdown"] = {["flag"] = "hit_chams_animation", ["default"] = {"new fade"}, ["options"] = {"new fade", "fade", "none"}, ["requires_one"] = true}})
            menu_references["hit_chams_type"] = menu_references["hit_chams_settings"]:create_element({["name"] = "type"}, {["dropdown"] = {["flag"] = "hit_chams_type", ["default"] = {"neon"}, ["options"] = {"forcefield", "outline", "neon"}, ["requires_one"] = true}})
            menu_references["hit_chams_lifetime"] = menu_references["hit_chams_settings"]:create_element({["name"] = "lifetime"}, {["slider"] = {["flag"] = "hit_chams_lifetime", ["min"] = 0.1, ["max"] = 1.5, ["default"] = 0.8, ["decimals"] = 1, ["suffix"] = "s", ["prefix"] = ""}})
            menu_references["hit_chams_color"] = menu_references["hit_chams_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "hit_chams_color", ["transparency_flag"] = "hit_chams_transparency", ["default_color"] = color3_fromrgb(142, 242, 255), ["default_transparency"] = 0.8}})

        local hit_chams_on_player_hit = nil

        local hit_chams_transparency = 0.5
        local hit_chams_material = Enum["Material"]["Neon"]
        local hit_chams_lifetime = 1
        local hit_chams_color = color3_fromrgb(142, 242, 255)
        local hit_chams_part = create_instance("SelectionBox", {
            ["LineThickness"] = 0.01,
            ["Color3"] = hit_chams_color,
            ["Transparency"] = hit_chams_transparency,
            ["Name"] = "\0",
            ["Adornee"] = nil
        })
        local only_last_hit = nil
        local last_model = nil

        local destroy_hit_chams_none = function(model)
            destroy(model)
        end

        local destroy_hit_chams_fade = LPH_NO_VIRTUALIZE(function(model)
            local children = get_children(model)
            local elapsed_time = 0

            local tween_function = function(dt)
                if model then
                    elapsed_time+=dt
                    local transparency = hit_chams_transparency + (1 - hit_chams_transparency) * get_value(tween_service, elapsed_time / 0.25, quad, out)
                    for i = 1, #children do
                        local child = children[i]
                        local child_transparency = child["Transparency"]
                        if child_transparency ~= transparency and child_transparency ~= 1 then
                            child["Transparency"] = transparency
                        end
                    end
                end
            end

            heartbeat[#heartbeat+1] = tween_function
            delay(0.25, function()
                for i = 1, #heartbeat do
                    if heartbeat[i] == tween_function then
                        remove(heartbeat, i)
                        break
                    end
                end
                destroy(model)
            end)
        end)

        local size = vector3_new(1, 1, 1)

        local destroy_hit_chams_new_fade = LPH_NO_VIRTUALIZE(function(model)
            local children = get_children(model)
            local elapsed_time = 0

            local head = nil
            local old_sizes = {}
            for i = 1, #children do
                local child = children[i]
                if child["ClassName"] == "MeshPart" then
                    old_sizes[child] = child["Size"]
                end
                if child["Name"] == "Head" then
                    head = child
                end
            end

            if not head then
                return
            end

            local tween_function = function(dt)
                if model then
                    elapsed_time+=dt
                    local transparency = hit_chams_transparency + (1 - hit_chams_transparency) * get_value(tween_service, elapsed_time / 0.15, quad, out)
                    for i = 1, #children do
                        local child = children[i]
                        local child_transparency = child["Transparency"]
                        if child_transparency ~= 1 then
                            child["Transparency"] = transparency

                            local old_size = old_sizes[child]

                            if old_size then
                                child["Size"] = old_size + size*transparency
                            end
                        end
                    end
                end
            end

            heartbeat[#heartbeat+1] = tween_function
            delay(0.25, function()
                for i = 1, #heartbeat do
                    if heartbeat[i] == tween_function then
                        remove(heartbeat, i)
                        break
                    end
                end
                destroy(model)
            end)
        end)

        local destroy_hit_chams = destroy_hit_chams_new_fade

        local do_hit_chams = LPH_NO_VIRTUALIZE(function(player)
            if last_model and only_last_hit then
                destroy(last_model)
            end

            last_model = nil

            local character = player_data[player][3]

            if character then
                character["Archivable"] = true
                local new_model = clone(character)
                character["Archivable"] = false
                new_model["Name"] = "\0"
                local children = get_children(new_model)

                for i = 1, #children do
                    local part = children[i]
                    local class_name = part["ClassName"]
                    if class_name == "MeshPart" then
                        part["Material"] = hit_chams_material
                        part["Color"] = hit_chams_color
                        part["Transparency"] = hit_chams_transparency
                        part["TextureID"] = ""
                        part["CanCollide"] = false
                        part["Anchored"] = true

                        if part["Name"] == "Head" then
                            local face = find_first_child_of_class(part, "Decal")

                            if face then
                                destroy(face)
                            end
                        end
                    elseif class_name == "Accessory" then
                        local hat = find_first_child_of_class(part, "MeshPart")

                        if hat then
                            hat["Material"] = hit_chams_material
                            hat["Color"] = hit_chams_color
                            hat["Transparency"] = hit_chams_transparency
                            hat["TextureID"] = ""
                            hat["CanCollide"] = false
                            hat["Anchored"] = true
                            hat["Parent"] = new_model
                            destroy(part)
                        end
                    else
                        destroy(part)
                    end
                end

                last_model = new_model
                new_model["Parent"] = ignored

                delay(hit_chams_lifetime, destroy_hit_chams, new_model)
            end
        end)

        local do_hit_chams_outline = LPH_NO_VIRTUALIZE(function(player)
            if last_model and only_last_hit then
                destroy(last_model)
            end

            last_model = nil

            local character = player_data[player][3]

            if character then
                character["Archivable"] = true
                local new_model = clone(character)
                character["Archivable"] = false
                new_model["Name"] = "\0"
                local children = get_children(new_model)

                for i = 1, #children do
                    local part = children[i]
                    local is_head = part["Name"] == "Head"
                    if is_head or part["ClassName"] == "MeshPart" then
                        local part_name = part["Name"]
                        part["Transparency"] = 1
                        part["CanCollide"] = false
                        part["Anchored"] = true
                        local outline = clone(hit_chams_part)
                        outline["Name"] = part_name
                        part["Name"] = "\0"
                        outline["Parent"] = new_model
                        outline["Adornee"] = part

                        if is_head then
                            local face = find_first_child(part, "face")

                            if face then
                                destroy(face)
                            end
                        end
                    else
                        destroy(part)
                    end
                end

                last_model = new_model
                new_model["Parent"] = ignored

                delay(hit_chams_lifetime, destroy_hit_chams, new_model)
            end
        end)

        create_connection(menu_references["hit_chams"]["on_toggle_change"], function(value)
            if hit_chams_on_player_hit then
                hit_chams_on_player_hit:Disconnect()
                hit_chams_on_player_hit = nil
            end

            if value then
                hit_chams_on_player_hit = create_connection(signals["on_local_bullet_confirmed"], flags["hit_chams_type"] == "outline" and do_hit_chams_outline or do_hit_chams)
            end
        end)

        create_connection(menu_references["hit_chams_only_last_hit"]["on_toggle_change"], function(value)
            only_last_hit = value
        end)

        create_connection(menu_references["hit_chams_color"]["on_color_change"], function(value)
            hit_chams_color = value
            hit_chams_part["Color3"] = value
        end)

        create_connection(menu_references["hit_chams_color"]["on_transparency_change"], function(value)
            hit_chams_transparency = value
            hit_chams_part["Transparency"] = value
        end)

        create_connection(menu_references["hit_chams_type"]["on_dropdown_change"], function(value)
            local value = value[1]
            hit_chams_material = value == "neon" and Enum["Material"]["Neon"] or value == "forcefield" and Enum["Material"]["ForceField"] or Enum["Material"]["ForceField"]

            if hit_chams_on_player_hit then
                hit_chams_on_player_hit:Disconnect()
                hit_chams_on_player_hit = nil
            end

            if flags["hit_chams"] then
                hit_chams_on_player_hit = create_connection(signals["on_local_bullet_confirmed"], value == "outline" and do_hit_chams_outline or do_hit_chams)
            end
        end)

        create_connection(menu_references["hit_chams_lifetime"]["on_slider_change"], function(value)
            hit_chams_lifetime = value
        end)

        create_connection(menu_references["hit_chams_animation"]["on_dropdown_change"], function(value)
            local value = value[1]
            destroy_hit_chams = value == "new fade" and destroy_hit_chams_new_fade or value == "fade" and destroy_hit_chams_fade or destroy_hit_chams_none
        end)
    end

    -- >> ( other visuals )

    menu_references["visuals_other_section"] = menu["groups"]["visuals"]:create_section("general", "other", 2, 0.35, 0.65)

    -- >> ( hide crosshair )

    do
        menu_references["hide_game_crosshair"] = menu_references["visuals_other_section"]:create_element({["name"] = "hide game crosshair"}, {["toggle"] = {["flag"] = "hide_game_crosshair"}})

        -- >> ( variables )

        local crosshair_animations_update_connection = nil

        -- >> ( fake metatable )

        local aim_frame = nil
        local old_metatable = getrawmetatable(game)
        local old_new_index = old_metatable["__newindex"]

        local fake_frame = {
            ["__newindex"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, key, value)
                if not checkcaller() and (key == "Visible") then
                    return
                end
                return old_new_index(self, key, value)
            end))
        }

        for _, v in old_metatable do
            if _ ~= "__newindex" then
                fake_frame[_] = v
            end
        end

        local get_aim_frame = function()
            local player_gui = local_player["PlayerGui"]

            if player_gui then
                local main_screen_gui = wait_for_child(player_gui, "MainScreenGui", 5)

                if main_screen_gui then
                    aim_frame = wait_for_child(main_screen_gui, "Aim", 5)

                    setrawmetatable(aim_frame, fake_frame)
                    aim_frame["Visible"] = false
                end
            end
        end

        create_connection(menu_references["hide_game_crosshair"]["on_toggle_change"], function(value)
            if flags["crosshair_animations"] then
                menu_references["crosshair_animations"]:set_toggle(false)

                wait()
            end
            
            if crosshair_animations_update_connection then
                crosshair_animations_update_connection:Disconnect()
                crosshair_animations_update_connection = nil
            end

            if value then
                get_aim_frame()

                crosshair_animations_update_connection = create_connection(signals["on_local_character_added"], get_aim_frame)
            elseif aim_frame then
                aim_frame["Visible"] = local_tool ~= nil
                if old_metatable then
                    setrawmetatable(aim_frame, old_metatable)
                end
                delay(0, function()
                    if aim_frame then
                        aim_frame["Rotation"] = 0
                        aim_frame = nil
                    end
                end)
            end
        end)
    end

    -- >> ( disable rendering )

    do
        menu_references["disable_rendering"] = menu_references["visuals_other_section"]:create_element({["name"] = "disable rendering"}, {["toggle"] = {["flag"] = "disable_rendering"}})

        create_connection(menu_references["disable_rendering"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            run_service["Set3dRenderingEnabled"](run_service, not value)
        end))
    end

    -- >> ( motion blur )

    do
        local lighting = game:GetService("Lighting")

        menu_references["motion_blur"] = menu_references["visuals_other_section"]:create_element({["name"] = "motion blur"}, {["toggle"] = {["flag"] = "motion_blur"}})
            menu_references["motion_blur_settings"] = menu_references["motion_blur"]:create_settings()
            menu_references["motion_blur_intensity"] = menu_references["motion_blur_settings"]:create_element({["name"] = "intensity"}, {["slider"] = {["min"] = 0, ["max"] = 100, ["flag"] = "motion_blur_intensity", ["suffix"] = "%", ["decimals"] = 1, ["default"] = 25}})

        local blur = nil
        local blur_intensity = 2750
        local last_look_vector = nil
        local smoothed_blur_size = 0

        local do_motion_blur = LPH_JIT_MAX(function(dt)
            render_stepped_wait(render_stepped)
            if not last_look_vector then
                last_look_vector = camera["CFrame"]["lookVector"]
                return
            end

            local look_vector = camera["CFrame"]["lookVector"]
            local new_blur_size = (look_vector - last_look_vector)["magnitude"] * blur_intensity * dt

            smoothed_blur_size = (smoothed_blur_size + (new_blur_size - smoothed_blur_size)) * dt*30^2
        
            blur["Size"] = smoothed_blur_size
            last_look_vector = look_vector
        end)

        create_connection(menu_references["motion_blur"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_motion_blur then
                    remove(heartbeat, i)
                    break
                end
            end

            if blur then
                destroy(blur)
                blur = nil
            end

            last_look_vector = nil

            if value then
                blur = create_instance("BlurEffect", {
                    ["Parent"] = lighting,
                    ["Size"] = 0
                })

                heartbeat[#heartbeat+1] = do_motion_blur
            end
        end)

        create_connection(menu_references["motion_blur_intensity"]["on_slider_change"], function(value)
            blur_intensity = value*110
        end)
    end
end

-- >> ( skin changer )

do
    local skins_list = {}
    local gun_list = {}

    for gun, skin in require(replicated_storage["SkinModules"]) do
        local gun = gun:lower():sub(2, -2)
        if gun ~= "house" and gun ~= "mask" and gun ~= "wallet" and gun ~= "bat" and gun ~= "vehicle" and gun ~= "vehicles" then
            if not gun_list[gun] then
                gun_list[#gun_list+1] = gun
            end

            local new = {}

            skins_list[gun] = new
            
            for _, skin in skin do 
                new[_] = skin
            end
        end
    end

    menu_references["skins_section"] = menu["groups"]["visuals"]:create_panel_section("skins", "skins list", 1, true)
    menu_references["skins_editor_section"] = menu["groups"]["visuals"]:create_section("skins", "skins editor", 2, 0.9, 0)
        menu_references["skin_changer"] = menu_references["skins_editor_section"]:create_element({["name"] = "skin changer"}, {["toggle"] = {["flag"] = "skin_changer"}})
        menu_references["skin_changer_gun"] = menu_references["skins_editor_section"]:create_element({["name"] = "weapon"}, {["dropdown"] = {["flag"] = "!weapon", ["options"] = gun_list, ["default"] = {"aug"}, ["requires_one"] = true}})
    menu_references["custom_skins_section"] = menu["groups"]["visuals"]:create_section("skins", "custom skins", 2, 0.1, 0.9)
        menu_references["refresh_custom_skins"] = menu_references["custom_skins_section"]:create_element({["name"] = "refresh custom skins"}, {["button"] = {["fake"] = true}})

    local selected_weapon = "aug"
    local section = menu_references["skins_section"]

    create_connection(menu_references["skin_changer_gun"]["on_dropdown_change"], LPH_JIT_MAX(function(value)
        local value = value[1]
        local section = menu_references["skins_section"]
        local old_weapon = selected_weapon
        if old_weapon then
            for _, skin in skins_list[old_weapon] do
                section:remove_item(_, false, true)
            end
        end
        selected_weapon = value

        if selected_weapon then
            for _, skin in skins_list[selected_weapon] do
                section:add_item({
                    ["text"] = _,
                    ["icons"] = {}
                })
            end
        end
    end))

    create_connection(menu["on_config_loaded"], function()
        menu_references["skin_changer_gun"]["on_dropdown_change"]:Fire({selected_weapon})
    end)

    for _, skin in skins_list["aug"] do
        section:add_item({
            ["text"] = _,
            ["icons"] = {}
        })
    end

    local skin_changer_connection = nil
    local animations = {
        ["GPO-Knife"] = create_instance("Animation", {
            ["AnimationId"] = "rbxassetid://14014278925",
        }),
        ["GPO-Knife Prestige"] = create_instance("Animation", {
            ["AnimationId"] = "rbxassetid://14014278925",
        })
    }

    local particles = {}
    local knife_meshes = {}
    local knife_sounds = {}
    local defaults = {}
    local sounds = {}

    local meshes = {}

    for _, child in get_children(replicated_storage["SkinAssets"]["GunHandleParticle"]) do
        particles[child["Name"]] = child["ParticleEmitter"]
    end

    for _, child in get_children(replicated_storage["SkinModules"]["Meshes"]) do
        local children = {}
        for name, child in get_children(child) do
            children[child["Name"]] = child
        end
        meshes[child["Name"]] = children
    end

    for _, child in get_children(replicated_storage["SkinModules"]["GunModels"]) do
        local gun_model = child
        if child["ClassName"] == "Model" then
            gun_model = find_first_child_of_class(child, "MeshPart")
        end
        local name = child["Name"]:lower():sub(2, -2)

        defaults[name] = {
            ["TextureID"] = child["ClassName"] ~= "Model" and child["TextureID"] or nil,
            ["Rarity"] = "Common"
        }

        meshes[name] = gun_model
    end

    for _, child in get_children(replicated_storage["SkinModules"]["Knives"]) do
        knife_meshes[child["Name"]] = child
    end

    for _, child in get_children(replicated_storage["SkinAssets"]["SkinScripts"]) do
        local sound = find_first_child_of_class(child, "Sound")

        if sound then
            knife_sounds[child["Name"]] = sound
        end
    end

    for _, child in get_children(replicated_storage["SkinAssets"]["SkinScriptsStorage"]) do
        for _, child in get_children(child) do
            local lowered = child["Name"]:lower()
            if lowered:find("knife") then
                animations[child["Name"]] = child
            end
        end
    end

    for _, child in get_children(replicated_storage["SkinAssets"]["GunShootSounds"]) do
        local children = {}
        for name, child in get_children(child) do
            children[child["Name"]] = child
        end
        sounds[child["Name"]:lower():sub(2, -2)] = children
    end

    for _, child in get_children(replicated_storage["SkinAssets"]["SkinScripts"]) do
        local sound = find_first_child_of_class(child, "Sound")

        if sound then
            knife_sounds[child["Name"]] = sound
        end
    end

    local sound_service = cloneref(game:GetService("SoundService"))
    local sound_play = require(replicated_storage["GunSoundPlay"])
    local old = clonefunction(sound_play["SoundPlay"])
    local player_bullet_volume = nil
    local local_bullet_volume = 1
    local local_bullet_sound = nil

    sound_play["SoundPlay"] = LPH_JIT_MAX(function(handle, different)
        setthreadidentity(8)
        if local_guns[handle] then
            local gun = handle["Parent"]["Name"]:lower():sub(2, -2)

            if defaults[gun] then
                local id = sounds[gun]
                local flag = flags["skins"][gun]
                local shoot_sound = handle["ShootSound"]

                id = type(local_bullet_sound) == "string" and local_bullet_sound or (flag and (id[flag] and id[flag]["Value"] or nil) or shoot_sound["SoundId"])

                if local_bullet_sound then
                    if not flags["local_bullet_sound_in_world"] then
                        destroy(create_instance("Sound", {
                            ["Volume"] = local_bullet_volume,
                            ["PlayOnRemove"] = true,
                            ["SoundId"] = id,
                            ["Parent"] = sound_service
                        }))
                    else
                        local sound = create_instance("Sound", {
                            ["Volume"] = local_bullet_volume,
                            ["SoundId"] = id,
                            ["Name"] = "MG",
                            ["Parent"] = handle
                        })
                        sound:Play()
                        delay(2, function()
                            destroy(sound)
                        end)
                    end

                    return
                end
                if skin_changer_connection and id then
                    destroy(create_instance("Sound", {
                        ["Volume"] = local_bullet_volume,
                        ["PlayOnRemove"] = true,
                        ["SoundId"] = id,
                        ["Parent"] = handle
                    }))
                    return
                end
            end
        else
            if player_bullet_volume then
                local shoot_sound = handle["ShootSound"]
                local attribute = shoot_sound:GetAttribute("SequenceSFX");
                if attribute then
                    if shoot_sound:GetAttribute("CurrentSequence") == nil then
                        shoot_sound:SetAttribute("CurrentSequence", 1);
                    else
                        shoot_sound:SetAttribute("CurrentSequence", shoot_sound:GetAttribute("CurrentSequence") + 1);
                    end;
                    local attribute2 = shoot_sound:GetAttribute("CurrentSequence");
                    local v4 = {};
                    for v5 in (string.gmatch(attribute, "%d+")) do
                        table.insert(v4, v5);
                    end;
                    shoot_sound["Volume"] = player_bullet_volume
                    shoot_sound["SoundId"] = "rbxassetid://" .. v4[attribute2 % #v4 + 1];
                end;
                if different then
                    local sound = shoot_sound:Clone()
                    sound["Name"] = "MG";
                    sound["Parent"] = handle
                    sound["Volume"] = player_bullet_volume
                    sound:Play()
                    delay(1, function()
                        destroy(sound)
                    end)
                    return
                else
                    shoot_sound["Volume"] = player_bullet_volume
                    shoot_sound:Play()
                    return
                end
            end
        end
        setthreadidentity(4)
        return old(handle, different)
    end)

    local apply_skin = LPH_JIT_MAX(function(gun, force)
        if gun then
            local gun_name = gun["Name"]:lower():sub(2, -2)
            local skin = force or flags["skins"][gun_name]
            local list = skins_list[gun_name]

            if skin and list then
                local handle = wait_for_child(gun, "Handle", 1)

                if handle then
                    handle:SetAttribute("SkinName", skin)

                    local skin_data = list[skin] or list[skin:gsub("%s+", "")] or defaults[gun_name]

                    local is_knife = gun_name == "knife"
                    local mesh = is_knife and knife_meshes[skin] or meshes[skin]

                    local default = gun["Default"]
                    local fake = find_first_child_of_class(default, "MeshPart")

                    if fake then
                        destroy(fake)
                    end

                    if mesh then
                        local new_mesh = mesh["ClassName"] == "MeshPart" and mesh or nil

                        if new_mesh == nil then
                            for _, child in mesh do
                                local lowered = child["Name"]:lower()
                                if lowered:find("rpg") and gun_name == "rpg" then
                                    new_mesh = child
                                    break
                                elseif lowered:find("aug") and gun_name == "aug" then
                                    new_mesh = child
                                    break
                                elseif lowered:find("tac") and gun_name == "tacticalshotgun" then
                                    new_mesh = child
                                    break
                                elseif lowered:find("rev") and gun_name == "revolver" then
                                    new_mesh = child
                                    break
                                elseif lowered:find("db") and gun_name == "double-barrel sg" then
                                    new_mesh = child
                                    break
                                elseif lowered:find("knife") and is_knife then
                                    new_mesh = child
                                    break
                                elseif lowered:find("rifle") and gun_name == "rifle" then
                                    new_mesh = child
                                    break
                                elseif lowered:find("flame") and gun_name == "flamethrower" then
                                    new_mesh = child
                                    break
                                end
                            end
                        end

                        if new_mesh then
                            local new_fake = clone(new_mesh)
                            new_fake["CFrame"] = default["CFrame"]
                            local weld = create_instance("Weld", {
                                ["Part0"] = default,
                                ["Part1"] = new_fake,
                                ["C0"] = skin_data["CFrame"] or cframe_new(),
                                ["Name"] = "\0",
                                ["Parent"] = default
                            })
                            new_fake["Name"] = "\0"
                            new_fake["Parent"] = default
                            default["Transparency"] = 1
                        end
                    else
                        default["Transparency"] = 0

                        if skin_data then
                            default["TextureID"] = typeof(skin_data["TextureID"]) == "Instance" and skin_data["TextureID"]["TextureID"] or skin_data["TextureID"] or ""
                        end
                    end

                    local children = get_children(handle)
                    for i = 1, #children do
                        local child = children[i]
                        if #child["Name"] == 0 then
                            destroy(child)
                        end
                    end

                    local particle = particles[skin]

                    if particle then
                        local particle = clone(particle)
                        particle["Parent"] = handle
                        particle["Name"] = "\0"
                    end

                    if not force and gun_name == "knife" then
                        local sound = knife_sounds[skin]

                        if sound then
                            local sound = clone(sound)
                            sound["Name"] = "\0"
                            sound["Parent"] = handle
                            sound:Play()
                            delay(2, function()
                                destroy(sound)
                            end)
                        end

                        local animation = animations[skin]

                        if animation then
                            local is_instance = typeof(animation) == "Instance"
                            local new = create_instance("Animation", {
                                ["AnimationId"] = is_instance and animation["AnimationId"] or animation[1]["AnimationId"],
                            })

                            setfflag("ReplicatorAnimationTrackLimitPerAnimator", "-1")

                            wait()
                            local track = local_parts["Humanoid"]:LoadAnimation(new)
                            track:Play(0.1, 1, is_instance and 1 or animation[2])
                            delay(0, destroy, new)

                            wait()
                            setfflag("ReplicatorAnimationTrackLimitPerAnimator", "50")
                        end
                    end
                end
            end
        end
    end)

    create_connection(menu_references["skin_changer"]["on_toggle_change"], LPH_JIT_MAX(function(value)
        if skin_changer_connection then
            skin_changer_connection:Disconnect()
            skin_changer_connection = nil
        end

        if value then
            if local_tool then
                apply_skin(local_tool)
            end

            skin_changer_connection = create_connection(signals["on_local_tool_equipped"], apply_skin)
        elseif inventory then
            local equip_skins = find_first_child(inventory["Parent"]["Information"], "EquipSkins")

            if equip_skins then
                equip_skins = http_service:JSONDecode(equip_skins["Value"])
            end

            local children = get_children(local_player["Backpack"])
            for i = 1, #children do
                apply_skin(children[i], equip_skins and equip_skins[children[i]["Name"]] or "Default")
            end
            if local_tool then
                apply_skin(local_tool, equip_skins and equip_skins[local_tool["Name"]] or "Default")
            end
        end
    end))

    create_connection(menu_references["skins_section"]["on_selection_change"], LPH_NO_VIRTUALIZE(function(value)
        if selected_weapon then
            flags["skins"][selected_weapon] = value

            if local_tool and local_tool["Name"]:sub(2, -2):lower() == selected_weapon then
                apply_skin(local_tool)
            end
        end
    end))

    -- >> ( custom skins )

    local custom_skins = {}

    create_connection(menu_references["refresh_custom_skins"]["on_clicked"], LPH_JIT_MAX(function()
        for name, skin in custom_skins do
            local folder = skin["mesh"]
            if folder then
                destroy(folder)
            end
            local folder = skin["beam"]
            if folder then
                destroy(folder)
            end
            local sound = skin["sound"]
            if sound then
                destroy(sound)
                sounds[skin["tool"]][skin["name"]] = nil
            end
            local folder = skin["handle_particle"]
            if folder then
                destroy(folder)
            end
            local folder = skin["muzzle_particle"]
            if folder then
                destroy(folder)
            end
            animations[name] = nil
            meshes[name] = nil
            knife_meshes[name] = nil
            local tool = skin["tool"]
            skins_list[tool][name] = nil
            if local_tool and local_tool["Name"]:lower():sub(2, -2) == tool then
                apply_skin(local_tool)
            end
            custom_skins[name] = nil
        end

        local skins = menu["get_skins_list"]()
        for _, skin in skins do
            local s, data = pcall(function()
                return http_service:JSONDecode(readfile("juju recode/custom/"..skin..".skin"))
            end)

            if s then
                local mesh = data["mesh"]
                local name = data["name"]
                local tool = data["tool"]

                if not name then
                    new_notification("failed to load skin due to missing name", 3)
                    continue
                end

                if not skins_list[tool] then
                    new_notification("failed to load skin "..name.." due to invalid weapon ("..tool..")", 3)
                    continue
                end

                local is_knife = tool == "knife"
                local folder = nil

                if mesh then
                    local _, mesh_part = pcall(function()
                        return game:GetObjects(mesh)[1]
                    end)

                    if not mesh_part or typeof(mesh_part) ~= "Instance" or not _ then
                        new_notification("failed to load skin "..name.." due to invalid mesh ("..mesh_part..")", 3)
                        continue
                    end

                    mesh_part["Name"] = tool

                    local folder = create_instance("Folder", {
                        ["Name"] = name
                    })

                    if is_knife then
                        knife_meshes[name] = {mesh_part}
                    else
                        meshes[name] = mesh_part
                    end

                    mesh_part["Parent"] = folder
                    mesh_part["Anchored"] = false
                    mesh_part["CanCollide"] = false
                end

                local beam = data["beam"]
                local folder2 = nil
                if beam then
                    local _, beam_part = pcall(function()
                        return game:GetObjects(beam)[1]
                    end)

                    if not beam_part or not _ then
                        new_notification("failed to load skin "..name.." due to invalid beam", 3)
                        continue
                    end

                    beam_part["Name"] = "GunBeam"

                    folder2 = create_instance("Folder", {
                        ["Parent"] = hui,
                        ["Name"] = name
                    })

                    beam_part["Parent"] = folder2
                end

                local shoot_sound = data["shoot_sound"]
                local sound = nil

                if shoot_sound then
                    sounds[tool][name] = create_instance("StringValue", {
                        ["Value"] = shoot_sound,
                        ["Name"] = name,
                    })
                end

                local handle_particle = data["handle_particle"]
                local handle_particle_instance = nil

                if handle_particle then
                    local _, particle = pcall(function()
                        return game:GetObjects(handle_particle)[1]
                    end)

                    if not particle or not _ then
                        new_notification("failed to load skin "..name.." due to invalid handle particle", 3)
                        continue
                    end

                    handle_particle_instance = particle
                    particles[name] = particle
                    handle_particle_instance["Name"] = "ParticleEmitter"
                end

                local muzzle_particle = data["muzzle_particle"]
                local muzzle_particle_instance = nil

                if muzzle_particle then
                    local _, particle = pcall(function()
                        return game:GetObjects(muzzle_particle)[1]
                    end)

                    if not particle or not _ then
                        new_notification("failed to load skin "..name.." due to invalid muzzle particle", 3)
                        continue
                    end

                    muzzle_particle_instance = particle
                    muzzle_particle_instance["Name"] = name
                end

                local animation = data["animation"]
                local animation_track = nil

                if animation then
                    animation_track = create_instance("Animation", {
                        ["AnimationId"] = animation,
                        ["Name"] = name,
                    })
                    animations[name] = {animation_track, data["animation_speed"] or 1}
                end

                --[[skins_list[tool][name] = {
                    ["CFrame"] = data["cframe"] and cframe_new(unpack(data["cframe"])) or cframe_new(),
                    ["TextureID"] = data["texture"] or nil,
                    ["Rarity"] = "Common",
                    ["Tool"] = tool,
                    ["Name"] = name
                }--]]

                custom_skins[name] = {
                    ["tool"] = tool,
                    ["mesh"] = folder,
                    ["beam"] = folder2,
                    ["handle_particle"] = handle_particle_instance,
                    ["muzzle_particle"] = muzzle_particle_instance,
                    ["sound"] = sound,
                    ["animation"] = animation_track,
                    ["name"] = name
                }
            else
                new_notification("failed to load skin ("..data..")", 3)
            end
        end

        menu_references["skin_changer_gun"]["on_dropdown_change"]:Fire({selected_weapon})
    end))

    menu_references["refresh_custom_skins"]["on_clicked"]:Fire()

    -- >> ( player bullet volume )

    create_connection(menu_references["player_bullet_volume"]["on_slider_change"], function(value)
        player_bullet_volume = value ~= 100 and value/100 or nil
    end)

    -- >> ( local bullet sound )

    local sounds = {
        ["sexy"] = readfile("juju recode/assets/sexy.ogg")
    }

    for _, data in sounds do
        local path = tostring({}):sub(math_random(8, 12))..".ogg"
        writefile(path, data)
        sounds[_] = getcustomasset(path)
        delfile(path)
    end

    sounds["default"] = true

    local local_bullet_data = sounds["sexy"]

    create_connection(menu_references["local_bullet_sound"]["on_toggle_change"], function(value)
        local_bullet_sound = value and local_bullet_data or nil
    end)

    create_connection(menu_references["local_bullet_sound_sound"]["on_dropdown_change"], function(value)
        local value = value[1]
        local_bullet_data = sounds[value]

        if not local_bullet_data then
            local path = tostring({}):sub(math_random(8, 12))..".ogg"
            writefile(path, readfile("juju recode/custom/"..value))
            local_bullet_data = getcustomasset(path)
            sounds[value] = local_bullet_data
            delfile(path)
        end

        if local_bullet_sound then
            local_bullet_sound = local_bullet_data or 1
        end
    end)

    create_connection(menu_references["local_bullet_volume"]["on_slider_change"], function(value)
        local_bullet_volume = value/100
    end)

    -- >> ( custom armor pop )

    local images = {
        ["jaydes"] = readfile("juju recode/assets/jaydes.png"),
    }

    for _, data in images do
        local path = tostring({}):sub(math_random(8, 12))..".png"
        writefile(path, data)
        images[_] = getcustomasset(path)
        delfile(path)
    end

    images["default"] = "rbxassetid://3376128953"
    images["hide"] = ""

    local armor_pop_connection = nil
    local armor_pop_data = images["jaydes"]
    local armor_pop_color = color3_fromrgb(255, 255, 255)

    local apply_armor_pop = LPH_JIT_MAX(function(data)
        local hrp = data[4]["HumanoidRootPart"]

        if hrp then
            local defense_gui = wait_for_child(hrp, "DefenseBBGUI", 9e9)
            local vest = wait_for_child(defense_gui, "Vest", 9e9)

            vest["Image"] = armor_pop_data
            vest["ImageColor3"] = armor_pop_color
        end
    end)

    create_connection(menu_references["override_armor_pop"]["on_toggle_change"], LPH_JIT_MAX(function(value)
        if armor_pop_connection then
            armor_pop_connection:Disconnect()
            armor_pop_connection = nil
        end

        armor_pop_color = value and flags["override_armor_pop_color"] or color3_fromrgb(104, 157, 236)
        armor_pop_data = value and images[flags["override_armor_pop_image"][1]] or images["default"]

        for _, data in player_data do
            spawn(apply_armor_pop, data, armor_pop_data, armor_pop_color)
        end

        if value then
            armor_pop_connection = create_connection(signals["on_player_character_added"], apply_armor_pop)
        end
    end))

    create_connection(menu_references["override_armor_pop_image"]["on_dropdown_change"], LPH_JIT_MAX(function(value)
        local value = value[1]
        armor_pop_data = images[value]

        if not armor_pop_data then
            local new_data = getcustomasset("juju recode/custom/"..value)

            images[value] = new_data
            armor_pop_data = new_data
        end

        if flags["override_armor_pop"] then
            local color = flags["override_armor_pop_color"]
            for _, data in player_data do
                spawn(apply_armor_pop, data, armor_pop_data, color)
            end
        end
    end))

    create_connection(menu_references["override_armor_pop_color"]["on_color_change"], function(value)
        if flags["override_armor_pop"] then
            armor_pop_color = flags["override_armor_pop_color"]
            for _, data in player_data do
                spawn(apply_armor_pop, data)
            end
        end
    end)
end

-- >> ( player visuals )

do
    menu_references["esp_section"] = menu["groups"]["visuals"]:create_section("players", "player esp", 1, 0.6, 0)
    menu_references["esp"] = menu_references["esp_section"]:create_element({["name"] = "enabled"}, {["toggle"] = {["flag"] = "esp"}})
        menu_references["esp_settings"] = menu_references["esp"]:create_settings()
        menu_references["render_statuses"] = menu_references["esp_settings"]:create_element({["name"] = "render statuses"}, {["dropdown"] = {["flag"] = "render_statuses", ["options"] = {"friendly", "neutral", "enemy"}, ["default"] = {"friendly", "neutral", "enemy"}, ["multi"] = true, ["requires_one"] = true}})

    menu_references["box"] = menu_references["esp_section"]:create_element({["name"] = "box"}, {["toggle"] = {["flag"] = "box"}})
        menu_references["box_settings"] = menu_references["box"]:create_settings()
        menu_references["box_outline"] = menu_references["box_settings"]:create_element({["name"] = "outline"}, {["colorpicker"] = {["color_flag"] = "box_outline_color", ["transparency_flag"] = "box_outline_transparency", ["default_color"] = color3_fromrgb(30, 30, 30), ["default_transparency"] = 0}})
        menu_references["box_color"] = menu_references["box_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "box_color", ["transparency_flag"] = "box_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["enemy_box_color"] = menu_references["box_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_box_color", ["transparency_flag"] = "enemy_box_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["friendly_box_color"] = menu_references["box_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_box_color", ["transparency_flag"] = "friendly_box_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})

    menu_references["name"] = menu_references["esp_section"]:create_element({["name"] = "name"}, {["toggle"] = {["flag"] = "name"}})
        menu_references["name_settings"] = menu_references["name"]:create_settings()
        menu_references["name_use_display"] = menu_references["name_settings"]:create_element({["name"] = "use display name"}, {["toggle"] = {["flag"] = "name_use_display"}})
        menu_references["name_color"] = menu_references["name_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "name_color", ["transparency_flag"] = "name_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["enemy_name_color"] = menu_references["name_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_name_color", ["transparency_flag"] = "enemy_name_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["friendly_name_color"] = menu_references["name_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_name_color", ["transparency_flag"] = "friendly_name_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})

    menu_references["image"] = menu_references["esp_section"]:create_element({["name"] = "image"}, {["toggle"] = {["flag"] = "image"}})
        menu_references["image_settings"] = menu_references["image"]:create_settings()
        menu_references["image_value"] = menu_references["image_settings"]:create_element({["name"] = "image"}, {["dropdown"] = {["options"] = {"gradient fill", "fill", "glow"}, ["requires_one"] = true, ["flag"] = "image_value", ["default"] = {"glow"}}})
        menu_references["image_color"] = menu_references["image_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "image_color", ["transparency_flag"] = "image_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0.85}})
        menu_references["enemy_image_color"] = menu_references["image_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_image_color", ["transparency_flag"] = "enemy_image_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0.85}})
        menu_references["friendly_image_color"] = menu_references["image_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_image_color", ["transparency_flag"] = "friendly_image_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0.85}})

    menu_references["chams"] = menu_references["esp_section"]:create_element({["name"] = "chams"}, {["toggle"] = {["flag"] = "chams"}})
        menu_references["chams_settings"] = menu_references["chams"]:create_settings()
        menu_references["chams_behind_walls"] = menu_references["chams_settings"]:create_element({["name"] = "behind walls"}, {["toggle"] = {["flag"] = "chams_behind_walls", ["default"] = true}})
        menu_references["chams_color"] = menu_references["chams_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "chams_color", ["transparency_flag"] = "chams_transparency", ["default_color"] = color3_fromrgb(249, 217, 255), ["default_transparency"] = 0.5}})
        menu_references["enemy_chams_color"] = menu_references["chams_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_chams_color", ["transparency_flag"] = "enemy_chams_transparency", ["default_color"] = color3_fromrgb(249, 217, 255), ["default_transparency"] = 0.5}})
        menu_references["friendly_chams_color"] = menu_references["chams_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_chams_color", ["transparency_flag"] = "friendly_chams_transparency", ["default_color"] = color3_fromrgb(249, 217, 255), ["default_transparency"] = 0.5}})

    menu_references["material"] = menu_references["esp_section"]:create_element({["name"] = "material"}, {["toggle"] = {["flag"] = "material"}})
        menu_references["material_settings"] = menu_references["material"]:create_settings()
        menu_references["material_value"] = menu_references["material_settings"]:create_element({["name"] = "material"}, {["dropdown"] = {["options"] = {"neon", "forcefield"}, ["requires_one"] = true, ["flag"] = "material_value", ["default"] = {"neon"}}})
        menu_references["material_color"] = menu_references["material_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "material_color", ["transparency_flag"] = "material_transparency", ["default_color"] = color3_fromrgb(249, 217, 255), ["default_transparency"] = 0.2}})
        menu_references["enemy_material_color"] = menu_references["material_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_material_color", ["transparency_flag"] = "enemy_material_transparency", ["default_color"] = color3_fromrgb(249, 217, 255), ["default_transparency"] = 0.2}})
        menu_references["friendly_material_color"] = menu_references["material_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_material_color", ["transparency_flag"] = "friendly_material_transparency", ["default_color"] = color3_fromrgb(249, 217, 255), ["default_transparency"] = 0.2}})

    menu_references["tool_text"] = menu_references["esp_section"]:create_element({["name"] = "tool text"}, {["toggle"] = {["flag"] = "tool_text"}})
        menu_references["tool_text_settings"] = menu_references["tool_text"]:create_settings()
        menu_references["tool_text_casing"] = menu_references["tool_text_settings"]:create_element({["name"] = "casing"}, {["dropdown"] = {["options"] = {"uppercase", "lowercase"}, ["requires_one"] = true, ["flag"] = "tool_text_casing", ["default"] = {"lowercase"}}})
        menu_references["tool_text_color"] = menu_references["tool_text_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "tool_text_color", ["transparency_flag"] = "tool_text_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["enemy_tool_text_color"] = menu_references["tool_text_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_tool_text_color", ["transparency_flag"] = "enemy_tool_text_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["friendly_tool_text_color"] = menu_references["tool_text_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_tool_text_color", ["transparency_flag"] = "friendly_tool_text_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})

    menu_references["tool_icon"] = menu_references["esp_section"]:create_element({["name"] = "tool icon"}, {["toggle"] = {["flag"] = "tool_icon"}})
        menu_references["tool_icon_settings"] = menu_references["tool_icon"]:create_settings()
        menu_references["tool_icon_color"] = menu_references["tool_icon_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "tool_icon_color", ["transparency_flag"] = "tool_icon_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["enemy_tool_icon_color"] = menu_references["tool_icon_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_tool_icon_color", ["transparency_flag"] = "enemy_tool_icon_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["friendly_tool_icon_color"] = menu_references["tool_icon_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_tool_icon_color", ["transparency_flag"] = "friendly_tool_icon_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})

    menu_references["highlight"] = menu_references["esp_section"]:create_element({["name"] = "highlight"}, {["toggle"] = {["flag"] = "highlight"}})
        menu_references["highlight_settings"] = menu_references["highlight"]:create_settings()
        menu_references["highlight_behind_walls"] = menu_references["highlight_settings"]:create_element({["name"] = "behind walls"}, {["toggle"] = {["flag"] = "highlight_behind_walls", ["default"] = true}})
        menu_references["highlight_color"] = menu_references["highlight_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "highlight_color", ["transparency_flag"] = "highlight_transparency", ["default_color"] = color3_fromrgb(0, 0, 0), ["default_transparency"] = 0.9}})
        menu_references["enemy_highlight_color"] = menu_references["highlight_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_highlight_color", ["transparency_flag"] = "enemy_highlight_transparency", ["default_color"] = color3_fromrgb(0, 0, 0), ["default_transparency"] = 0.9}})
        menu_references["friendly_highlight_color"] = menu_references["highlight_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_highlight_color", ["transparency_flag"] = "friendly_highlight_transparency", ["default_color"] = color3_fromrgb(0, 0, 0), ["default_transparency"] = 0.9}})
        menu_references["highlight_outline_color"] = menu_references["highlight_settings"]:create_element({["name"] = "outline color"}, {["colorpicker"] = {["color_flag"] = "highlight_outline_color", ["transparency_flag"] = "highlight_outline_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0.2}})
        menu_references["enemy_highlight_outline_color"] = menu_references["highlight_settings"]:create_element({["name"] = "enemy outline color"}, {["colorpicker"] = {["color_flag"] = "enemy_highlight_outline_color", ["transparency_flag"] = "enemy_highlight_outline_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0.2}})
        menu_references["friendly_highlight_outline_color"] = menu_references["highlight_settings"]:create_element({["name"] = "friendly outline color"}, {["colorpicker"] = {["color_flag"] = "friendly_highlight_outline_color", ["transparency_flag"] = "friendly_highlight_outline_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0.2}})

    menu_references["armor_bar"] = menu_references["esp_section"]:create_element({["name"] = "armor bar"}, {["toggle"] = {["flag"] = "armor_bar"}})
        menu_references["armor_bar_settings"] = menu_references["armor_bar"]:create_settings()
        menu_references["armor_bar_hide_if_empty"] = menu_references["armor_bar_settings"]:create_element({["name"] = "hide if no armor"}, {["toggle"] = {["flag"] = "armor_bar_hide_if_empty"}})
        menu_references["armor_bar_gradient"] = menu_references["armor_bar_settings"]:create_element({["name"] = "gradient"}, {["toggle"] = {["flag"] = "armor_bar_gradient"}, ["colorpicker"] = {["color_flag"] = "armor_bar_gradient_color", ["transparency_flag"] = "armor_bar_gradient_transparency", ["default_color"] = color3_fromrgb(105, 205, 255), ["default_transparency"] = 0}})
        menu_references["enemy_armor_bar_gradient"] = menu_references["armor_bar_settings"]:create_element({["name"] = "enemy gradient"}, {["colorpicker"] = {["color_flag"] = "enemy_armor_bar_gradient_color", ["transparency_flag"] = "enemy_armor_bar_gradient_transparency", ["default_color"] = color3_fromrgb(105, 205, 255), ["default_transparency"] = 0}})
        menu_references["friendly_armor_bar_gradient"] = menu_references["armor_bar_settings"]:create_element({["name"] = "friendly gradient"}, {["colorpicker"] = {["color_flag"] = "friendly_armor_bar_gradient_color", ["transparency_flag"] = "friendly_armor_bar_gradient_transparency", ["default_color"] = color3_fromrgb(105, 205, 255), ["default_transparency"] = 0}})
        menu_references["armor_bar_outline"] = menu_references["armor_bar_settings"]:create_element({["name"] = "outline"}, {["colorpicker"] = {["color_flag"] = "armor_bar_outline_color", ["transparency_flag"] = "armor_bar_outline_transparency", ["default_color"] = color3_fromrgb(30, 30, 30), ["default_transparency"] = 0}})
        menu_references["armor_bar_color"] = menu_references["armor_bar_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "armor_bar_color", ["transparency_flag"] = "armor_bar_transparency", ["default_color"] = color3_fromrgb(0, 155, 255), ["default_transparency"] = 0}})
        menu_references["enemy_armor_bar_color"] = menu_references["armor_bar_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_armor_bar_color", ["transparency_flag"] = "enemy_armor_bar_transparency", ["default_color"] = color3_fromrgb(0, 155, 255), ["default_transparency"] = 0}})
        menu_references["friendly_armor_bar_color"] = menu_references["armor_bar_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_armor_bar_color", ["transparency_flag"] = "friendly_armor_bar_transparency", ["default_color"] = color3_fromrgb(0, 155, 255), ["default_transparency"] = 0}})
        menu_references["enemy_armor_bar_gradient"]:set_visible(false)
        menu_references["friendly_armor_bar_gradient"]:set_visible(false)

    menu_references["health_bar"] = menu_references["esp_section"]:create_element({["name"] = "health bar"}, {["toggle"] = {["flag"] = "health_bar"}})
        menu_references["health_bar_settings"] = menu_references["health_bar"]:create_settings()
        menu_references["health_bar_gradient"] = menu_references["health_bar_settings"]:create_element({["name"] = "gradient"}, {["toggle"] = {["flag"] = "health_bar_gradient"}, ["colorpicker"] = {["color_flag"] = "health_bar_gradient_color", ["transparency_flag"] = "health_bar_gradient_transparency", ["default_color"] = color3_fromrgb(105, 205, 255), ["default_transparency"] = 0}})
        menu_references["enemy_health_bar_gradient"] = menu_references["health_bar_settings"]:create_element({["name"] = "enemy gradient"}, {["colorpicker"] = {["color_flag"] = "enemy_health_bar_gradient_color", ["transparency_flag"] = "enemy_health_bar_gradient_transparency", ["default_color"] = color3_fromrgb(105, 205, 255), ["default_transparency"] = 0}})
        menu_references["friendly_health_bar_gradient"] = menu_references["health_bar_settings"]:create_element({["name"] = "friendly gradient"}, {["colorpicker"] = {["color_flag"] = "friendly_health_bar_gradient_color", ["transparency_flag"] = "friendly_health_bar_gradient_transparency", ["default_color"] = color3_fromrgb(105, 205, 255), ["default_transparency"] = 0}})
        menu_references["health_bar_outline"] = menu_references["health_bar_settings"]:create_element({["name"] = "outline"}, {["colorpicker"] = {["color_flag"] = "health_bar_outline_color", ["transparency_flag"] = "health_bar_outline_transparency", ["default_color"] = color3_fromrgb(30, 30, 30), ["default_transparency"] = 0}})
        menu_references["health_bar_color"] = menu_references["health_bar_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "health_bar_color", ["transparency_flag"] = "health_bar_transparency", ["default_color"] = color3_fromrgb(0, 255, 0), ["default_transparency"] = 0}})
        menu_references["enemy_health_bar_color"] = menu_references["health_bar_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_health_bar_color", ["transparency_flag"] = "enemy_health_bar_transparency", ["default_color"] = color3_fromrgb(0, 255, 0), ["default_transparency"] = 0}})
        menu_references["friendly_health_bar_color"] = menu_references["health_bar_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_health_bar_color", ["transparency_flag"] = "friendly_health_bar_transparency", ["default_color"] = color3_fromrgb(0, 255, 0), ["default_transparency"] = 0}})
        menu_references["enemy_health_bar_gradient"]:set_visible(false)
        menu_references["friendly_health_bar_gradient"]:set_visible(false)

    menu_references["health_text"] = menu_references["esp_section"]:create_element({["name"] = "health text"}, {["toggle"] = {["flag"] = "health_text"}})
        menu_references["health_text_settings"] = menu_references["health_text"]:create_settings()
        menu_references["health_text_hide_if_full"] = menu_references["health_text_settings"]:create_element({["name"] = "hide if full"}, {["toggle"] = {["flag"] = "health_text_hide_if_full"}})
        menu_references["health_text_color"] = menu_references["health_text_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "health_text_color", ["transparency_flag"] = "health_text_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["enemy_health_text_color"] = menu_references["health_text_settings"]:create_element({["name"] = "enemy color"}, {["colorpicker"] = {["color_flag"] = "enemy_health_text_color", ["transparency_flag"] = "enemy_health_text_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})
        menu_references["friendly_health_text_color"] = menu_references["health_text_settings"]:create_element({["name"] = "friendly color"}, {["colorpicker"] = {["color_flag"] = "friendly_health_text_color", ["transparency_flag"] = "friendly_health_text_transparency", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 0}})

    menu_references["fonts"] = menu_references["esp_section"]:create_element({["name"] = "fonts"}, {}):create_settings()
        menu_references["main_font"] = menu_references["fonts"]:create_element({["name"] = "main font"}, {["dropdown"] = {["options"] = {"0", "1", "2", "3"}, ["requires_one"] = true, ["flag"] = "main_font", ["default"] = identifyexecutor() == "Wave" and {"1"} or {"2"}}})
        menu_references["small_font"] = menu_references["fonts"]:create_element({["name"] = "small font"}, {["dropdown"] = {["options"] = {"0", "1", "2", "3"}, ["requires_one"] = true, ["flag"] = "small_font", ["default"] = identifyexecutor() == "Wave" and {"1"} or {"2"}}})

    -- >> ( esp variables )

    local offset = vector3_new(0,0.5,0)
    local bar_offset = vector2_new(0, 1)
    local zero_size = vector2_new()
    local chams_offset = vector3_new(0.01, 0.01, 0.01)

    local do_box = false

    local do_name = false
        local use_display_name = false

    local do_health_bar = false
        local health_bar_offset = vector2_new(6, 1)
        local do_health_bar_gradient = false

    local do_armor_bar = false
        local do_armor_bar_gradient = false
        local hide_armor_bar_if_empty = false
        local armor_bar_offset = vector2_new(6, 1)

    local do_chams = false
    local chams_z_index = 1
    local do_image = false
    local do_highlight = false
    local highlight_depth_mode = Enum["HighlightDepthMode"]["AlwaysOnTop"]

    local do_tool_text = false
        local tool_text_function = string["lower"]
    local do_tool_icon = false

    local do_health_text = false
        local normal_health_text_offset = vector2_new(8, 1)
        local health_text_offset = vector2_new(8, 1)
        local hide_health_text_if_full = false

    local do_material = false
        local material_value = Enum["Material"]["Neon"]
    local material_attribute = tostring({}):sub(math_random(8,12))

    local main_font = identifyexecutor() == "Wave" and 1 or 2
    local main_size = identifyexecutor() == "Wave" and 13 or 13
    local small_font = identifyexecutor() == "Wave" and 1 or 2
    local small_size = identifyexecutor() == "Wave" and 13 or 11

    local transparencies = {
        [1] = {
            [1] = 1,
            [2] = 1,
            [3] = 1,
            [4] = 1,
            [5] = 1,
            [6] = 1,
            [7] = 1,
            [8] = 1,
            [9] = 1,
            [10] = 1,
            [11] = 1,
            [12] = 1,
            [13] = 1,
            [14] = 0.11
        }
    }

    local colors = {
        [1] = {
            [1] = color3_fromrgb(255,255,255),
            [2] = color3_fromrgb(30,30,30),
            [3] = color3_fromrgb(255,255,255),
            [4] = color3_fromrgb(0, 255, 0),
            [5] = color3_fromrgb(30, 30, 30),
            [6] = color3_fromrgb(105, 205, 255),
            [7] = color3_fromrgb(255,255,255),
            [8] = color3_fromrgb(255,255,255),
            [9] = color3_fromrgb(255,255,255),
            [10] = color3_fromrgb(0,155,255),
            [11] = color3_fromrgb(35,35,35),
            [12] = color3_fromrgb(255,255,255),
            [13] = color3_fromrgb(255,255,255),
            [14] = color3_fromrgb(255,0,0),
        }
    }

    local alt_information = {
        [1] = {
            [1] = color3_fromrgb(0, 0, 0),
            [2] = 0.9,
            [3] = color3_fromrgb(255, 255, 255),
            [4] = 0.2,
            [5] = color3_fromrgb(249, 217, 255),
            [6] = 0.5,
            [7] = color3_fromrgb(249, 217, 255),
            [8] = 0.2
        }
    }

    local render_statuses = {
        [1] = 1,
        [2] = 1,
        [3] = 1
    }

    do
        local old_alt_information = alt_information[1]
        local old_transparencies = transparencies[1]
        local old_colors = colors[1]

        for i = 2, 3 do
            local new_alt_information = {}

            local new_transparencies = {}
            local new_colors = {}
            for i = 1, #old_transparencies do
                new_transparencies[i] = old_transparencies[i]
                new_colors[i] = old_colors[i]
            end
            for i = 1, #old_alt_information do
                new_alt_information[i] = old_alt_information[i]
            end
            alt_information[i] = new_alt_information
            transparencies[i] = new_transparencies
            colors[i] = new_colors
        end
    end

    -- >> ( esp core )

    local do_esp = LPH_NO_VIRTUALIZE(function()
        for player, data in player_data do
            local parts = data[4]
            local upper_torso = parts["UpperTorso"]

            if not upper_torso or not data[3] or not render_statuses[data[1]] then
                continue
            end

            local position = upper_torso["Position"]
            local screen_pos, on_screen = world_to_viewport_point(camera, position + offset)

            if on_screen then
                local drawings = data[5]

                if not data[6] then
                    for _, drawing in drawings do
                        drawing["Visible"] = true
                    end
                    data[6] = true
                end

                local offset_pos = world_to_viewport_point(camera, position - offset)

                local difference = offset_pos["Y"]-screen_pos["Y"]
                local y_size = difference * 6
                local x_size = difference * 4

                local size = vector2_new(x_size, y_size)
                local position = vector2_new(offset_pos["X"] - x_size/2, offset_pos["Y"] - y_size/2)

                if do_box then
                    local box = drawings[1]
                    local outline = drawings[2]

                    box["Size"] = size
                    box["Position"] = position
                    outline["Size"] = size
                    outline["Position"] = position
                end

                if do_image then
                    local image = drawings[13]
                    image["Size"] = size
                    image["Position"] = position
                end

                if do_name then
                    drawings[3]["Position"] = position + vector2_new(x_size/2, -15)
                end

                if do_health_bar then
                    local y_size = y_size + 2
                    local outline = drawings[5]
                    outline["Position"] = position - health_bar_offset
                    outline["Size"] = vector2_new(4, y_size)

                    local health_size = (data[11]/data[10]) * (y_size-2)
                    local bar_position = position + vector2_new(-5, y_size - health_size - 2)
                    local bar_size = vector2_new(2, health_size)

                    local bar = drawings[4]
                    bar["Position"] = bar_position
                    bar["Size"] = bar_size

                    if do_health_bar_gradient then
                        local gradient = drawings[6]
                        gradient["Position"] = bar_position - bar_offset
                        gradient["Size"] = bar_size + bar_offset
                    end
                end

                local armor_ignored = false

                if do_armor_bar then
                    local armor = data[15]
                    if not hide_armor_bar_if_empty or armor ~= 0 then
                        local y_size = y_size + 2
                        local outline = drawings[11]
                        outline["Position"] = position - armor_bar_offset
                        outline["Size"] = vector2_new(4, y_size)

                        local armor_size = (clamp(armor/130, 0, 1)) * (y_size-2)

                        local bar_position = position + vector2_new((-armor_bar_offset["X"])+1, y_size - armor_size - 2)
                        local bar_size = vector2_new(2, armor_size)

                        local bar = drawings[10]
                        bar["Position"] = bar_position
                        bar["Size"] = bar_size

                        if do_armor_bar_gradient then
                            local gradient = drawings[12]
                            gradient["Position"] = bar_position - bar_offset
                            gradient["Size"] = bar_size + bar_offset
                        end
                    else
                        armor_ignored = true
                    end
                end

                if do_health_text then
                    local health_text = drawings[7]
                    drawings[7]["Position"] = position - (armor_ignored and normal_health_text_offset or health_text_offset) - vector2_new(health_text["TextBounds"]["X"], 0)
                end

                if do_tool_text then
                    if data[13] then
                        drawings[8]["Position"] = position + vector2_new(x_size/2, y_size + 2)
                    end
                end

                if do_tool_icon then
                    if data[13] then
                        drawings[9]["Position"] = position + vector2_new((x_size-24)/2, y_size + (do_tool_text and small_size or 0) + 2)
                    end
                end
            elseif data[6] then
                local drawings = data[5]
                for _, drawing in drawings do
                    drawing["Visible"] = false
                end
                data[6] = false
            end
        end
    end) 

    local tween_esp = LPH_NO_VIRTUALIZE(function(data, showing)
        local status = data[1]

        local drawings = data[5]
        local transparencies = transparencies[status]

        local highlight = data[8]
        local highlight_transparencies = alt_information[status]
        local highlight_fill_transparency = highlight_transparencies[2]
        local highlight_outline_transparency = highlight_transparencies[4]

        local chams = data[12]
        local chams_transparency = highlight_transparencies[6]

        if not data[6] then
            for name, drawing in drawings do
                drawing["Transparency"] = showing and transparencies[name] or 0
            end
            if highlight then
                highlight["FillTransparency"] = showing and highlight_transparencies[2] or 1
                highlight["OutlineTransparency"] = showing and highlight_transparencies[4] or 1
            end
            if chams then
                for i = 1, #chams do
                    chams[i]["Transparency"] = showing and highlight_transparencies[6] or 1
                end
            end
            return
        end

        local old_transparencies = {}

        for name, drawing in drawings do
            old_transparencies[name] = drawing["Transparency"]
        end

        local elapsed_time = 0

        local heartbeat_function = function(dt)
            elapsed_time+=dt
            local value = get_value(tween_service, elapsed_time / 0.75, quad, out)

            for name, drawing in drawings do
                local old_transparency = old_transparencies[name]
                if old_transparency then
                    drawing["Transparency"] = old_transparency + ((showing and transparencies[name] or 0) - old_transparency) * value
                end
            end

            if highlight then
                highlight["FillTransparency"] = highlight_fill_transparency + ((showing and highlight_transparencies[2] or 1) - highlight_fill_transparency) * value
                highlight["OutlineTransparency"] = highlight_outline_transparency + ((showing and highlight_transparencies[4] or 1) - highlight_outline_transparency) * value
            end

            if chams then
                local transparency = chams_transparency + ((showing and highlight_transparencies[6] or 1) - chams_transparency) * value
                for i = 1, #chams do
                    chams[i]["Transparency"] = transparency
                end
            end
        end

        heartbeat[#heartbeat+1] = heartbeat_function

        delay(0.75, function()
            local index = nil
            for i = 1, #heartbeat do
                if heartbeat[i] == heartbeat_function then
                    index = i
                    break
                end
            end
            if index then
                remove(heartbeat, index)
            end
            for name, drawing in drawings do
                drawing["Transparency"] = showing and transparencies[name] or 0
            end
            if highlight then
                highlight["FillTransparency"] = showing and highlight_transparencies[2] or 1
                highlight["OutlineTransparency"] = showing and highlight_transparencies[4] or 1
            end
            if chams then
                for i = 1, #chams do
                    chams[i]["Transparency"] = showing and highlight_transparencies[6] or 1
                end
            end
        end)
    end)

    local update_esp = LPH_NO_VIRTUALIZE(function(data, status)
        local colors = colors[status]
        local transparencies = transparencies[status]
        local alt_information = alt_information[status]

        local drawings = data[5]
        local set_visibility = not render_statuses[status]
        data[6] = false

        for i = 1, #colors do
            local drawing = drawings[i]
            if drawing then
                drawing["Color"] = colors[i]
                drawing["Transparency"] = transparencies[i]

                if set_visibility then 
                    drawing["Visible"] = false
                end 
            end
        end

        local chams = data[12]
        if chams then
            local color = alt_information[5]
            local transparency = alt_information[6]
            for i = 1, #chams do
                chams[i]["Color3"] = color
                chams[i]["Transparency"] = transparency
            end
        end

        local highlight = data[8]
        if highlight then
            highlight["FillColor"] = alt_information[1]
            highlight["FillTransparency"] = alt_information[2]
            highlight["OutlineColor"] = alt_information[3]
            highlight["OutlineTransparency"] = alt_information[4]
        end
    end)

    local last_target = nil
    local update_esp_with_tween = nil; update_esp_with_tween = LPH_NO_VIRTUALIZE(function(data, revert_status, bypass)
        local status = revert_status or 3
        if last_target then
            local old_last_target = last_target
            last_target = nil
            update_esp_with_tween(old_last_target, old_last_target[1])
        end

        if data then
            if not revert_status then
                last_target = data
            end

            local old_status = data[1]

            if old_status ~= 3 then
                local colors = colors[status]
                local transparencies = transparencies[status]
                local alt_information = alt_information[status]

                local chams = data[12]
                local drawings = data[5]
                local highlight = data[8]
                local set_visibility = not render_statuses[status]
                data[6] = false

                if data[7] then
                    for i = 1, #colors do
                        local drawing = drawings[i]
                        if drawing then
                            drawing["Color"] = colors[i]

                            if set_visibility then 
                                drawing["Visible"] = false
                            end
                        end
                    end

                    if chams then
                        local color = alt_information[5]
                        local transparency = alt_information[6]
                        for i = 1, #chams do
                            chams[i]["Color3"] = color
                            chams[i]["Transparency"] = transparency
                        end
                    end

                    if highlight then
                        highlight["FillColor"] = alt_information[1]
                        highlight["OutlineColor"] = alt_information[3]

                        return
                    end
                end

                for i = 1, #colors do
                    local drawing = drawings[i]
                    if drawing then
                        tween(drawing, {Color = colors[i], Transparency = transparencies[i]}, exponential, out, 0.17)
                    end
                end

                if chams then
                    local color = alt_information[5]
                    local transparency = alt_information[6]
                    for i = 1, #chams do
                        tween(chams[i], {Color3 = color, Transparency = transparency}, exponential, out, 0.17)
                    end
                end

                if highlight then
                    tween(highlight, {FillColor = alt_information[1], FillTransparency = alt_information[2], OutlineColor = alt_information[3], OutlineTransparency = alt_information[4]}, exponential, out, 0.17)
                end
            end
        end
    end)

    local create_box = LPH_NO_VIRTUALIZE(function(data)
        local rendering = data[6]
        local drawings = data[5]
        local status = data[1]

        local colors = colors[status]
        local transparencies = transparencies[status]

        drawings[1] = create_real_drawing("Square", {
            Color = colors[1],
            Thickness = 1,
            Filled = false,
            Transparency = transparencies[1],
            ZIndex = 3,
            Visible = rendering
        })
        drawings[2] = create_real_drawing("Square", {
            Color = colors[2],
            Thickness = 3,
            Filled = false,
            ZIndex = 2,
            Transparency = transparencies[2],
            Visible = rendering
        })
    end)

    local create_name = LPH_NO_VIRTUALIZE(function(data)
        local status = data[1]
        local player = data[2]

        data[5][3] = create_real_drawing("Text", {
            Color = colors[status][3],
            Center = true,
            Outline = true,
            Transparency = transparencies[status][3],
            Size = main_size,
            Font = main_font,
            Text = use_display_name and player["DisplayName"] or player["Name"],
            Visible = data[6]
        })
    end)

    local bar_half_gradient_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAEAAACACAYAAADK+QP0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACUSURBVChTbVHRFQMhDFLjEA7T/ecqoXBRe3woJIjm2dZanwH0XLABIyLEDLJdls+ypYznmCxkB2Q22GUMa+wmAUPcLr1gy+JbA9gZfWQV5RoujWhnCrtjzDnVsLkWvpRRnPeyUNZslLooxSMvVvIKUCggn3HdoQFL5v4LBd7yCDUqwGcrhVCe8efzw6+U3WKcX9H7F7u/BOHzO9gQAAAAAElFTkSuQmCC")

    local create_health_bar = LPH_NO_VIRTUALIZE(function(data)
        local rendering = data[6]
        local drawings = data[5]
        local status = data[1]

        data[11] = data[9]

        local colors = colors[status]
        local transparencies = transparencies[status]

        drawings[4] = create_real_drawing("Square", {
            Color = colors[4],
            Thickness = 1,
            Filled = true,
            Transparency = transparencies[4],
            ZIndex = 3,
            Visible = rendering
        })
        drawings[5] = create_real_drawing("Square", {
            Color = colors[5],
            Thickness = 3,
            Filled = true,
            ZIndex = 2,
            Transparency = transparencies[5],
            Visible = rendering
        })

        if do_health_bar_gradient then
            drawings[6] = create_real_drawing("Image", {
                Color = colors[6],
                Transparency = transparencies[6],
                ZIndex = 4,
                Data = bar_half_gradient_data,
                Visible = rendering
            })
        end
    end)

    local update_health_bar = LPH_NO_VIRTUALIZE(function(data, new_health, difference)
        if abs(difference) <= 1 then
            data[11] = new_health
            return
        end
        tween(data, {[11] = new_health}, "sine", out, 0.15)
    end)

    local create_armor_bar = LPH_NO_VIRTUALIZE(function(data)
        local rendering = data[6]
        local drawings = data[5]
        local status = data[1]

        local armor = data[14]

        data[15] = armor

        local hide = not hide_armor_bar_if_empty or armor <= 0

        local colors = colors[status]
        local transparencies = transparencies[status]

        drawings[10] = create_real_drawing("Square", {
            Color = colors[10],
            Thickness = 1,
            Filled = true,
            Transparency = transparencies[10],
            ZIndex = 3,
            Visible = rendering
        })
        drawings[11] = create_real_drawing("Square", {
            Color = colors[11],
            Thickness = 3,
            Filled = true,
            ZIndex = 2,
            Transparency = transparencies[11],
            Visible = rendering
        })

        if hide then
            drawings[10]["Size"] = zero_size
            drawings[11]["Size"] = zero_size
        end

        if do_armor_bar_gradient then
            drawings[12] = create_real_drawing("Image", {
                Color = colors[12],
                Transparency = transparencies[12],
                ZIndex = 4,
                Data = bar_half_gradient_data,
                Visible = rendering
            })

            if hide then
                drawings[12]["Size"] = zero_size
            end
        end
    end)

    local update_armor_bar = LPH_NO_VIRTUALIZE(function(data, new_armor, difference)
        if hide_armor_bar_if_empty and new_armor == 0 then
            local drawings = data[5]
            drawings[10]["Size"] = zero_size
            drawings[11]["Size"] = zero_size

            if do_armor_bar_gradient then
                drawings[12]["Size"] = zero_size
            end

            data[15] = 0
            return
        elseif difference <= 1 then
            data[15] = new_armor
            return
        end
        tween(data, {[15] = new_armor}, "sine", out, 0.15)
    end)

    local create_chams = LPH_NO_VIRTUALIZE(function(data)
        local parts = data[4]

        local alt_information = alt_information[data[1]]
        local color = alt_information[5]
        local transparency = alt_information[6]

        local chams = {}
        local culling_mode = Enum["AdornCullingMode"]["Automatic"]

        for i = 1, #body_parts do
            local part = body_parts[i]
            local character_part = parts[part]
            chams[#chams+1] = create_instance("BoxHandleAdornment", {
                ["Visible"] = true,
                ["Adornee"] = character_part,
                ["Transparency"] = transparency,
                ["AdornCullingMode"] = culling_mode,
                ["Archivable"] = true,
                ["Color3"] = color,
                ["ZIndex"] = chams_z_index,
                ["AlwaysOnTop"] = true,
                ["Size"] = character_part and character_part["Size"] + chams_offset or chams_offset,
                ["Parent"] = core_gui
            })
        end

        data[12] = chams
    end)

    local update_chams = LPH_NO_VIRTUALIZE(function(data)
        local chams = data[12]
        local parts = data[4]
        for i = 1, #body_parts do
            local cham = chams[i]
            local local_part = parts[body_parts[i]]
            cham["Adornee"] = local_part
            cham["Size"] = local_part and local_part["Size"] + chams_offset or chams_offset
        end
    end)

    local update_highlight = LPH_NO_VIRTUALIZE(function(data)
        local highlight = data[8]
        highlight["Adornee"] = nil
        highlight["Parent"] = nil
        highlight["Adornee"] = data[3]
        highlight["Parent"] = hui
    end)

    local create_highlight = LPH_NO_VIRTUALIZE(function(data)
        local alt_information = alt_information[data[1]]
        local character = data[3]

        data[8] = create_instance("Highlight", {
            FillColor = alt_information[1],
            FillTransparency = alt_information[2],
            OutlineColor = alt_information[3],
            OutlineTransparency = alt_information[4],
            DepthMode = highlight_depth_mode,
            Enabled = true,
            Adornee = character,
            Parent = hui
        })
    end)

    local update_health_text = LPH_NO_VIRTUALIZE(function(data, health)
        data[5][7]["Text"] = (hide_health_text_if_full and health >= data[10] or false) and "" or tostring(health)
    end)

    local create_health_text = LPH_NO_VIRTUALIZE(function(data)
        local status = data[1]
        local health = data[9]

        data[5][7] = create_real_drawing("Text", {
            Color = colors[status][7],
            Center = false,
            Outline = true,
            Transparency = transparencies[status][7],
            Size = small_size,
            Font = small_font,
            Text = (hide_health_text_if_full and health >= data[10] or false) and "" or tostring(health),
            Visible = data[6]
        })
    end)

    local tool_icon_data = {
        ["[AK47]"] = base64_decode("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"),
        ["[Knife]"] = base64_decode("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"),
        ["[Silencer]"] = base64_decode("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"),
        ["[Rifle]"] = base64_decode("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"),
        ["[SilencerAR]"] = base64_decode("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"),
        ["[Flamethrower]"] = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAHgAAAA8CAYAAACtrX6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA2ySURBVHhe7ZwLUFXVGseXoASkImARYYIM17RQfFFqxUktEh9FPmoIBae6leaUZpk9rcYZK1+TVlCmqU3dCklrKjONyGuSme+kfPJQHt1UTFHwue7//7G3HQ4Ih9MBofZv5ptz9tpr77P3+tb6HmstUBYWFhYWFhYWFhYWFhYWFhYWFk2CZsZnU8EGGREUFNTZ398/IiAgICQ8PPzgtddeeyQrK2vbZ599Nhnn86SmRZPC5unpqYcMGaJXr16tCwsLdWlpqbbnwIEDGoo+gLqhFZdYNAVsl1xyib777rv1Dz/8YKjywmzbtk1fccUV+bjOUnIjJ7Rly5b63nvv1Vu2bDHU5xyrVq3SLVq0yOE9Km5l0aiAUqOefPLJQ7/++quhsrrz3HPPaXSQXNyOSqbfpsLpn/8NGQEZAOkB6QBpA/GANEb4/MmQtyEbIeVt2rTZ7Ofnt9A4VyuNLsiaOnXq4RdeeMHfOHQZ+GSVkpKiEHipMWPGqKKiIjVr1izjbBXO+vr6luKz5MSJE4f56SD7IXsMYccJg0QYwg4UB1kB2QBxvNaUo5DWEL5bdTIWwgAx+corr5zevn37hNatW6tLL71UDRs2TIWEhKgzZ84oBJXq3LlzKjExsXDDhg19jWsuSGNSsC+kV3x8/HfLli2rKHEDR48eVWwosmLFCjlu1qyZCBvs0KFDysvLS/Xv3195eHiob7/9VkHJ5+uUl5erP/74Q653BMZCFNCrVy85zsjIUAcPHpT7OMJ7nDp1Su5pD+8Bl6Kio6MVOpmC5VIJCQmqd+/ecv7kyZNq3bp1ql+/fmrr1q1q9uzZavHixeqDDz6gkhejyhip2EihUmky0yIjI088/vjjGr1SzKxFBd9//72+7bbb5Ds6n0Z6qEtKSiToRLtRGh2VlPrEE0/otWvXaowUeQmLynz99dd62rRp8v3YsWOSKRAGk2hDuosaaQgT7QWJhPSExHbs2HEweqTPiBEj1PXXX6+QBrFOg7B+/Xp15MiRSiYUbSUmHDm0+LZ9+/aJ6aYp5TkTb29v5ePjYxxVwPoBAQGqbdu2Uhf5udSzv86R5s2bi0k2YV0EhMZRVQ4fPizPc/nllxslFbz66qsKwWitJrq+FMzAIxHSE8FCJCI/r5iYGHXnnXeKb6GvqW/oC9HL1ZIlS9R9992nCgoK2CDi0xyhwjt06CAKY3B29uzZSr6SSqBSqBx7WB95t7r66qvFt2dnZ1epYw/vww5t//78rWuuuUZ16tRJ/HSfPn2YSRhnq4cKR73Cn376qUGCLIbrmZCbIYwuMwcMGKAeeOABefmuXbtKIGLfa2vDbGg2FiJKo9R5ysrKFDsUGoAmjM/F52NDrIKcchBq3NUyCi2Uo9AsuVSGkRqNICuOgyIwMFANHTpUhYWxWf9k+vTpR55++ulu+FrrtOxfVXDoY489trFLly6B48aNk544c+ZMdfPNbNMLw55sP0J+++03tXfvXrV582YqRf38889q165dYu4mT56sxo8fXydTvn//fnmW0tLSkThcWlF6QdhBx8JEB2M0tYK0RAdrBbH/9MPznoMcw2gvhZz/9PT0LEVHPFZcXAyjcXAu7lVrozsBh/ggSH9YwG6dO3fuDmWfuuqqq4phsnfNnz9/PM6543dqJBQ/mgfTBH1pnZ6erleuXCnfnSErK0tjlGuYGo1eewT342hbBGFi78f7G981XlAiSGdZs2ZNXSLMnBdffFECGKRMLgmj2j179uikpKT/4X5OTUA0ZiQKDgoKyktLS9NUMPya0bTVw0ZgXfsFgk8//dRUAiNqKtQRG8xz/qhRozT8tkbv1cgHjatr5p133uF90ypuUyMx7GTuAr6R06tU8hTIOMhoSDykPyQa0glCn9MKQhPGTx6znOdZj/V5Ha/nfd6G9dqEwVR+2WWXbeExpF46USh+KB3+tPTGG2/UOTk5Ojc3V3/xxRcaCbzxilVZsGCBDg4OFmUuX77cKNXSMRDYVDfK+PB6ypQpGkGHhkmSXDAjI0MvXbq0yipSdUyaNIn35X3YeThj0A7iaXzymOUThg0bVnz69GnjKvdAJd9zzz3yvo7i5eWlEWBp+Ffdrl07jeBMd+/eXbM9Bw8eLNeNHTtWw79quD6NTEMGxi+//KLhxnRRUZG0YUhIiNMLKk77YDxYLn4sFP5WIdlWmzZtkhkfpDyV/Oknn3yiYK4U0iGVmppaDLO9E8U0tWEIvjJXr14t9Qj9dkpKChs7vaJEHjrzrbfeCmPk+9RTT6l3331XImL4IjVv3jx1++23V9SsBkak8Jdq0KBBEqT17dtXIk5HWIep0UsvvaQYyLgbRuqZmZnnfxt+Wn6P6RAj6FatWklMwRk0Sk2RN2GMwnTMDFQ5YxYbG5uL9+VcunvAA3331VdfSS+lSTYTbhM0mqYvQ+DB3sp5XZpIx16WSf9oQr+KMi4EkFB2Ipru3bt3ayinAGVUvjkxohG8ibknyGdlVENJOj4+XttsNhkN4eHhMlrQMaRebfC5GzO0dEih9LPPPmuUVIAsge8ZA3EbofABeTt37jR+4k+42I4ctxh1mI6YSqkO21133WVcpTUsgMZIlweFGc9Hr9cfffSRRm9nGTtHGszZ8cTExEpBFpV8ww03sI7ZkewDM0aY+vPPPzdqa/3hhx/qjz/+2DiqOObsWVOAbRQREaER84i7Mnn55Zf5/s7EGXViBH2EPRzVGDVcbXHKJ/j4+KyxH/0PP/ywBFAcjTDZfGgRpC0a+Z50HhNG3kibDqFTZKHOhTrSQIg8l0nPnj0lWjfp0aOH5hTpxYRzyYy+7WEk/8orr2jHuMD06fZBJlyb2VbuhaPLbHQ+DPxvXRfXbQ899JBcTxhAvPHGGxp5qzwwEnsJ3Ez4W7Nnz+aILcRv0ULU9ltcwtPr16837qBltNO8m9x0001VTF5Dww6WnZ1tHFWA3F9HRUVJcGkPA06+05dffmmUaP3mm2+yzO0jeDi3zxAEWVQuf4QjqU4gsFnLKJwgUNAjR47UjzzyiN67d6+UMSpftmyZRpSr/fz8juOS6vx5TVRalXIcwexU9pbhYsD3d8wIeMwdLI4jmNEzrZcZf5AJEya41Pa1kYNIVn6Am99wTHEFG3ddOMKXmzhxItMnU6k1+fOa2P3NN98Yd9V6zpw5eu7cucZR04eBlxFMup1Q+L/97FHEMB3DK07VDShxHYOd+fPn6+eff55mswzpBKcVXVWqPSvszXxj5Pjx42K96oIZ8TM3xju63Tyb2Oj0CZN6ThagrC7m04TX0H/XFnm7wjw2gj2NPR1ylvz8fEbVTge1nN2pK3nbt2/vBxMRhrxTIQdtiRw5GVHhYCg8A+er399SFdZ7DcL552zIaYi7yIafH4WI3ZdLeJzYQIonJ+Cb1caNG2UihEuE9pM07oSTMzClCiNVJjz4DB4eHtVu53EWTiwlJycXI4CsdZnQxNW3C0V+umbGjBnt77//fingKhBMdjF8nzlzVe+rHbXAHi47HpYvX67uuOMOflUITtRrr7FfKTVt2jT1zDPPyHd3wj1TiCXOK5UzWFwy5SwWv3NWi4I2FOHMlvkdQaXU5QI/N9hxpotwrxhSRKfWgN0FG1DmUBmVEppBpjRt27blA7jb7LqKzcx56VI478syQ3KgDDnnLhYtWmSmjpMgoyC3QrpCgiAcvvzkMct5nvW43fM/ELorDpByb2/vY4j+c5OSkrbHxcWthJWcg3JXXOFfxubv7583c+bM836OKcjUqVM5geFKiuM2goKCwmNjY4tSU1PlucrKymTpEafMKb5QNGQu9z25g4ULF7oyL1CvuMsBiTlEJKwQEatbbrlFCktKSmTLzIIFCwrgt7mnuEFNN+e2d+zYEWq/IwKxAhcj8vFsphJCYQonDh06tOPJkye9Mcp9kIf68pOCSNcXwk9vRPnlEEb7J5o3b15GadGixQmY0fLff//9cHp6+i508lTc82K7p3qDZk8m/hnFmmkAd0y+9957TIUKcb4+ouZqgU/r0Lt647LXX39dnoNw1gyKX2NUsXARUXS3bt0kz7WfsaE5HD16tA4ICGgo823jXyWSgoIC7h4xfbCFGxBFc9aFqx9sYBP6ac4ucY4ZdepzVMdwGZHMmjWLyuVvWbgZKjqNo5ZLf5zmNAMywqU7bp0JDg7+q1OU1SF7rgjntnFsjd56hEqj8nSXLl1kVO/bt08an3AynQv1AwcOpJ+80KaBuhBDk8z7cnIfHey/RrlFAyCjGkl+6fDhw2UTHtMYE+7qYAfo06dPgbFMaC7qOws7Rg7TN/Lggw9ao/ciYY7qtIiIiOPcbGa/lku4VMZVJpzn9Ka5vfZRCKenoiDcNE3l8zvLHvXw8MihzyXcYGBFzo0DUTbXmaOjo/WMGTNkv7EJt69wTxdnyxISEnRkZCT/0JsjUwR5KXccyn4lc8vO1q1b6Q6s/93RCBETzm26cXFxesmSJbJ11BFu3aV5f//992WkchnOhJvx4Xc56fCPVW79LKW4F45q/hnHkMDAwGT+oRe37l533XUqKipKtudysp5wtYVbdqFo9eOPPx5KSUnZcebMmSSc+tvOLNVGU1CwIxyN/OOn7jDlYe3bt/8XiMD30wjM8pBf74FSOR/Myfl/rGItLCwsLCwsLCwsLCwsLCws/mYo9X/3tweoUUGQiQAAAABJRU5ErkJggg=="),
        ["[Drum-Shotgun]"] = base64_decode("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"),
        ["[RPG]"] = base64_decode("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"),
        ["[Shotgun]"] = base64_decode("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"),
        ["[SMG]"] = base64_decode("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"),
        ["[TacticalShotgun]"] = base64_decode("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"),
        ["[Revolver]"] = base64_decode("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"),
        ["[P90]"] = base64_decode("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"),
        ["[LMG]"] = base64_decode("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"),
        ["[Glock]"] = base64_decode("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"),
        ["[DrumGun]"] = base64_decode("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"),
        ["[AR]"] = base64_decode("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"),
        ["[AUG]"] = base64_decode("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"),
        ["[Double-Barrel SG]"] = base64_decode("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")
    }

    local create_tool_text = LPH_NO_VIRTUALIZE(function(data)
        local status = data[1]
        local tool = data[13]

        data[5][8] = create_real_drawing("Text", {
            Color = colors[status][8],
            Center = true,
            Outline = true,
            Transparency = transparencies[status][8],
            Size = small_size,
            Font = small_font,
            Text = tool and tool_text_function(tool["Name"]:gsub("[^%w]", "")) or "",
            Visible = data[6]
        })
    end)

    local update_tool_text = LPH_NO_VIRTUALIZE(function(data, tool)
        if data[2] and data[5][8] then
            data[5][8]["Text"] = tool and tool_text_function(tool["Name"]:gsub("[^%w]", "")) or ""
        end
    end)

    local create_tool_icon = (identifyexecutor() == "Swift" or identifyexecutor() == "Potassium") and LPH_NO_VIRTUALIZE(function(data)
        if data[2] then
            local status = data[1]
            local tool = data[13]

            local image = tool and tool_icon_data[tool["Name"]] or ""
            data[5][9] = create_fake_drawing("Image", {
                Color = colors[status][9],
                Transparency = transparencies[status][9],
                Data = image,
                Size = vector2_new(24,12),
                Visible = data[6]
            })
        end
    end) or LPH_NO_VIRTUALIZE(function(data)
        if data[2] then
            local status = data[1]
            local tool = data[13]

            local image = tool and tool_icon_data[tool["Name"]] or ""
            data[5][9] = create_real_drawing("Image", {
                Color = colors[status][9],
                Transparency = transparencies[status][9],
                Data = image,
                Size = vector2_new(24,12),
                Visible = data[6]
            })
        end
    end)

    local update_tool_icon = LPH_NO_VIRTUALIZE(function(data, tool)
        if data[2] and data[5][9] then
            data[5][9]["Data"] = tool and tool_icon_data[tool["Name"]] or ""
        end
    end)

    local image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAEAAABkCAYAAABHLFpgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABTSURBVChTdU/LDsAwCGJu1/3/59rUC5HAhaA8bNHdfwF4LrwbagN3wgakwMVc4ttCTLhxmKjOIma5S5VfiC0TE180R8aRIAJvuJfGGHcsoHoZ6gCUSgTCpTUDpwAAAABJRU5ErkJggg==")

    local create_image = LPH_NO_VIRTUALIZE(function(data)
        local status = data[1]

        data[5][13] = create_real_drawing("Image", {
            Color = colors[status][13],
            Transparency = transparencies[status][13],
            Data = image_data or "",
            ZIndex = 4,
            Visible = data[6]
        })
    end)

    local plastic = Enum["Material"]["Plastic"]
    local forcefield = Enum["Material"]["ForceField"]

    local remove_material = LPH_NO_VIRTUALIZE(function(data, character, parts, description)
        local character = character or data[3]

        if character then
            local parts = parts or data[4]
            local head = parts["Head"]
            local humanoid = parts["Humanoid"]

            local description = description or (humanoid and humanoid["HumanoidDescription"] or nil)

            if description and head then
                head["Color"] = description["HeadColor"]

                local left_arm_color = description["LeftArmColor"]
                local right_arm_color = description["RightArmColor"]
                local left_leg_color = description["LeftLegColor"]
                local right_leg_color = description["RightLegColor"]
                local torso_color = description["TorsoColor"]

                parts["LeftUpperArm"]["Color"] = left_arm_color

                parts["LeftLowerArm"]["Color"] = left_arm_color
                parts["LeftHand"]["Color"] = left_arm_color

                parts["RightUpperArm"]["Color"] = right_arm_color
                parts["RightLowerArm"]["Color"] = right_arm_color
                parts["RightHand"]["Color"] = right_arm_color

                parts["LeftUpperLeg"]["Color"] = left_leg_color
                parts["LeftLowerLeg"]["Color"] = left_leg_color
                parts["LeftFoot"]["Color"] = left_leg_color

                parts["RightUpperLeg"]["Color"] = right_leg_color
                parts["RightLowerLeg"]["Color"] = right_leg_color
                parts["RightFoot"]["Color"] = right_leg_color

                parts["UpperTorso"]["Color"] = torso_color
                parts["LowerTorso"]["Color"] = torso_color

                local shirt = parts["Shirt"]

                if shirt then
                    shirt["ShirtTemplate"] = tostring(shirt:GetAttribute("a") or "rbxassetid://0")
                end

                local pants = parts["Pants"]

                if pants then
                    pants["PantsTemplate"] = tostring(pants:GetAttribute("a") or "rbxassetid://0")
                end

                local shirt_graphic = parts["Shirt Graphic"]

                if shirt_graphic then
                    shirt_graphic["Graphic"] = tostring(shirt_graphic:GetAttribute("a") or "rbxassetid://0")
                end
            end

            for _, name in body_parts do
                local part = parts[name]

                if part then
                    part["Material"] = plastic
                    if part["Transparency"] ~= 1 then
                        part["Transparency"] = 0
                    end
                end
            end

            for name, part in parts do
                if part["ClassName"] == "Accessory" then
                    local handle = part["Handle"]

                    if handle and handle["ClassName"] == "MeshPart" then
                        local original = handle:GetAttribute(material_attribute)

                        if original then
                            handle["TextureID"] = original
                            handle:SetAttribute(material_attribute, nil)
                        end

                        handle["Color"] = color3_fromrgb(163, 162, 165)
                        handle["Transparency"] = 0
                        handle["Material"] = plastic
                    end
                end
            end
        end
    end)

    local apply_material = LPH_NO_VIRTUALIZE(function(data, character, material)
        local character = data[3]
        local material = material or material_value

        if character then
            local player = data[2]

            if not player:HasAppearanceLoaded() then
                player["CharacterAppearanceLoaded"]:Wait()
            end

            wait(0.2)

            local alt_information = alt_information[data[1]]
            local color = alt_information[7]
            local transparency = alt_information[8]

            local parts = data[4]
            for _, name in body_parts do
                local part = parts[name]

                if part then
                    part["Material"] = name == "Head" and forcefield or material
                    part["Color"] = color
                    if part["Transparency"] ~= 1 then
                        part["Transparency"] = transparency
                    end
                end
            end

            for name, part in parts do
                if part["ClassName"] == "Accessory" then
                    local handle = find_first_child(part, "Handle")

                    if handle and handle["ClassName"] == "MeshPart" then

                        if not handle:GetAttribute(material_attribute) then
                            handle:SetAttribute(material_attribute, handle["TextureID"])
                        end

                        handle["Material"] = material
                        handle["TextureID"] = ""
                        handle["Color"] = color
                        handle["Transparency"] = transparency
                    end
                end
            end

            local shirt = parts["Shirt"]

            if shirt and shirt["ShirtTemplate"] ~= "" then
                shirt:SetAttribute("a", shirt["ShirtTemplate"])
                shirt["ShirtTemplate"] = ""
            end

            local pants = parts["Pants"]

            if pants and pants["PantsTemplate"] ~= "" then
                pants:SetAttribute("a", pants["PantsTemplate"])
                pants["PantsTemplate"] = ""
            end

            local shirt_graphic = parts["Shirt Graphic"]

            if shirt_graphic and shirt_graphic["Graphic"] ~= "" then
                shirt_graphic:SetAttribute("a", shirt_graphic["Graphic"])
                shirt_graphic["Graphic"] = ""
            end
        end
    end)

    local create_esp = LPH_NO_VIRTUALIZE(function(data)
        data[6] = false
        if do_box then
            create_box(data)
        end
        if do_name then
            create_name(data)
        end
        if do_chams then
            create_chams(data)
        end
        if do_highlight then
            create_highlight(data)
        end
        if do_health_bar then
            create_health_bar(data)
        end
        if do_health_text then
            create_health_text(data)
        end
        if do_tool_text then
            create_tool_text(data)
        end
        if do_tool_icon then
            create_tool_icon(data)
        end
        if do_armor_bar then
            create_armor_bar(data)
        end
        if do_image then
            create_image(data)
        end
        if do_material then
            local character = data[3]

            if character then
                spawn(apply_material, data)
            end
        end
    end)

    local create_esp_with_tween = LPH_NO_VIRTUALIZE(function(data)
        create_esp(data)
        tween_esp(data, true)
    end)

    -- >> ( show arms in first person)

    do
        menu_references["local_character_section"] = menu["groups"]["visuals"]:create_section("players", "local character", 2, 1, 0)
        menu_references["show_arms_in_first_person"] = menu_references["local_character_section"]:create_element({["name"] = "show arms in first person"}, {toggle = {flag = "show_arms_in_first_person", default = false}})

        local show_arms_in_first_person_on_character_added = nil
        local show_arms_in_first_person_transparency_changed = nil

        local show_arms_in_first_person = LPH_JIT_MAX(function(bool)
            if show_arms_in_first_person_transparency_changed then
                show_arms_in_first_person_transparency_changed:Disconnect()
                show_arms_in_first_person_transparency_changed = nil
            end

            local left_hand = local_parts["LeftHand"]
            local left_lower_arm = local_parts["LeftLowerArm"]
            local left_upper_arm = local_parts["LeftUpperArm"]
            local right_lower_arm = local_parts["RightLowerArm"]
            local right_upper_arm = local_parts["RightUpperArm"]
            local right_hand = local_parts["RightHand"]

            local transparency = bool and 0 or -1

            if left_hand then
                if bool then
                    show_arms_in_first_person_transparency_changed = create_connection(left_hand:GetPropertyChangedSignal("LocalTransparencyModifier"), function()
                        wait()
                        left_hand["LocalTransparencyModifier"] = transparency
                        left_lower_arm["LocalTransparencyModifier"] = transparency
                        left_upper_arm["LocalTransparencyModifier"] = transparency
                        right_lower_arm["LocalTransparencyModifier"] = transparency
                        right_upper_arm["LocalTransparencyModifier"] = transparency
                        right_hand["LocalTransparencyModifier"] = transparency
                    end)
                end
                left_hand["LocalTransparencyModifier"] = transparency
            end
            if left_lower_arm then
                left_lower_arm["LocalTransparencyModifier"] = transparency
            end
            if left_upper_arm then
                left_upper_arm["LocalTransparencyModifier"] = transparency
            end
            if right_lower_arm then
                right_lower_arm["LocalTransparencyModifier"] = transparency
            end
            if right_upper_arm then
                right_upper_arm["LocalTransparencyModifier"] = transparency
            end
            if right_hand then
                right_hand["LocalTransparencyModifier"] = transparency
            end
        end)

        create_connection(menu_references["show_arms_in_first_person"]["on_toggle_change"], function(value)
            if show_arms_in_first_person_on_character_added then
                show_arms_in_first_person_on_character_added:Disconnect()
                show_arms_in_first_person_on_character_added = nil
            end

            show_arms_in_first_person(value)

            if value then
                show_arms_in_first_person_on_character_added = create_connection(signals["on_local_character_loaded"], show_arms_in_first_person)
            end
        end)
    end

    -- >> ( local material )

    menu_references["character_highlight"] = menu_references["local_character_section"]:create_element({["name"] = "character highlight"}, {["toggle"] = {["flag"] = "character_highlight"}})
    menu_references["local_material"] = menu_references["local_character_section"]:create_element({["name"] = "character material"}, {["toggle"] = {["flag"] = "local_material"}})
        menu_references["local_settings"] = menu_references["local_material"]:create_settings()
        menu_references["local_model_type"] = menu_references["local_settings"]:create_element({["name"] = "material"}, {["dropdown"] = {["flag"] = "local_material_value", ["options"] = {"forcefield", "neon"}, ["default"] = {"neon"}, ["requires_one"] = true}})
        menu_references["local_model_color"] = menu_references["local_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "local_material_color", ["transparency_flag"] = "local_material_transparency", ["default_color"] = color3_fromrgb(249, 217, 255), ["default_transparency"] = 0.2}})

    do
        local local_material_on_character_added = nil
        local local_material_on_description_changed = nil
        local local_model_transparency = flags["local_material_transparency"]
        local local_material_color = flags["local_material_color"]
        local local_material_type = Enum["Material"]["Neon"]

        local apply_local_material = LPH_NO_VIRTUALIZE(function()
            if not local_player:HasAppearanceLoaded() then
                local_player["CharacterAppearanceLoaded"]:Wait()
            end

            if local_material_on_character_added then
                for _, name in body_parts do
                    local part = local_parts[name]

                    if part then
                        part["Material"] = name == "Head" and forcefield or local_material_type
                        part["Color"] = local_material_color
                        if part["Transparency"] ~= 1 then
                            part["Transparency"] = local_model_transparency
                        end
                    end
                end

                for name, part in local_parts do
                    if part["ClassName"] == "Accessory" then
                        local handle = part["Handle"]

                        if handle and handle["ClassName"] == "MeshPart" then
                            if not handle:GetAttribute(material_attribute) then
                                handle:SetAttribute(material_attribute, handle["TextureID"])
                            end

                            handle["Material"] = local_material_type
                            handle["TextureID"] = ""
                            handle["Color"] = local_material_color
                            handle["Transparency"] = local_model_transparency
                        end
                    end
                end

                local shirt = local_parts["Shirt"]

                if shirt and shirt["ShirtTemplate"] ~= "" then
                    shirt:SetAttribute("a", shirt["ShirtTemplate"])
                    shirt["ShirtTemplate"] = ""
                end

                local pants = local_parts["Pants"]

                if pants and pants["PantsTemplate"] ~= "" then
                    pants:SetAttribute("a", pants["PantsTemplate"])
                    pants["PantsTemplate"] = ""
                end

                local shirt_graphic = local_parts["Shirt Graphic"]

                if shirt_graphic and shirt_graphic["Graphic"] ~= "" then
                    shirt_graphic:SetAttribute("a", shirt["Graphic"])
                    shirt_graphic["Graphic"] = ""
                end
            end
        end)

        create_connection(menu_references["local_material"]["on_toggle_change"], function(value)
            if local_material_on_character_added then
                local_material_on_character_added:Disconnect()
                local_material_on_character_added = nil
                if local_character and local_parts["Head"] then
                    remove_material(local_character, local_character, local_parts, last_description)
                end
            end

            if local_material_on_description_changed then
                local_material_on_description_changed:Disconnect()
                local_material_on_description_changed = nil
            end

            if value then
                local_material_on_character_added = create_connection(signals["on_local_character_loaded"], apply_local_material)
                local_material_on_description_changed = create_connection(signals["on_local_character_description_changed"], apply_local_material)

                if local_character then
                    spawn(apply_local_material, local_character)
                end
            end
        end)

        create_connection(menu_references["local_model_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(value)
            local_material_color = value

            if local_material_on_character_added and local_character then
                apply_local_material(local_character)
            end
        end))

        create_connection(menu_references["local_model_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(value)
            local_model_transparency = clamp(value, 0, 0.9999999)

            if local_material_on_character_added and local_character then
                apply_local_material(local_character)
            end
        end))

        create_connection(menu_references["local_model_type"]["on_dropdown_change"], function(value)
            local_material_type = value[1] == "neon" and Enum["Material"]["Neon"] or Enum["Material"]["ForceField"]

            if local_material_on_character_added and local_character then
                apply_local_material(local_character)
            end
        end)
    end

    -- >> ( esp connections )

    do
        local health_text_player_health_changed_connection = nil
        local health_bar_player_health_changed_connection = nil
        local armor_bar_player_armor_changed_connection = nil

        local tool_text_player_tool_equipped_connection = nil
        local tool_icon_player_tool_equipped_connection = nil
        local highlight_character_added_connection = nil
        local material_on_player_character_added = nil
        local player_ragebot_target_connection = nil
        local player_legitbot_target_connection = nil

        local chams_character_added_connection = nil
        local player_status_changed_connection = nil
        local character_added_connection = nil
        local player_added_connection = nil
        local player_died_connection = nil

        create_connection(menu_references["render_statuses"]["on_dropdown_change"], function(value)
            render_statuses[1] = nil
            render_statuses[2] = nil
            render_statuses[3] = nil
            render_statuses[4] = nil

            local do_target = false

            for i = 1, #value do
                local value = value[i]
                if value == "friendly" then
                    render_statuses[2] = 1
                elseif value == "neutral" then
                    render_statuses[1] = 1
                elseif value == "enemy" then
                    render_statuses[3] = 1
                end
            end

            if player_added_connection then
                for player, data in player_data do
                    local status = data[4]
                    local visible = render_statuses[status]

                    for _, drawing in data[5] do
                        drawing["Visible"] = visible and data[6] or false
                    end

                    data[6] = not visible and false or visible and data[6]
                end
            end
        end)

        create_connection(menu_references["esp"]["on_toggle_change"], LPH_JIT_MAX(function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_esp then
                    remove(heartbeat, i)
                    break
                end
            end

            for player, data in player_data do
                local drawings = data[5]
                for _, drawing in drawings do
                    drawing:Destroy()
                    drawings[_] = nil
                end

                local highlight = data[8]
                if highlight then
                    destroy(highlight)
                    data[8] = nil
                end

                local chams = data[12]
                if chams then
                    for i = 1, #chams do
                        destroy(chams[i])
                        chams[i] = nil
                    end
                    data[12] = nil
                end

                if do_material and data[3] then
                    remove_material(data)
                end
            end

            if character_added_connection then
                character_added_connection:Disconnect()
                character_added_connection = nil
            end

            if player_added_connection then
                player_added_connection:Disconnect()
                player_added_connection = nil
            end

            if player_died_connection then
                player_died_connection:Disconnect()
                player_died_connection = nil
            end

            if health_bar_player_health_changed_connection then
                health_bar_player_health_changed_connection:Disconnect()
                health_bar_player_health_changed_connection = nil
            end

            if health_text_player_health_changed_connection then
                health_text_player_health_changed_connection:Disconnect()
                health_text_player_health_changed_connection = nil
            end

            if chams_character_added_connection then
                chams_character_added_connection:Disconnect()
                chams_character_added_connection = nil
            end

            if highlight_character_added_connection then
                highlight_character_added_connection:Disconnect()
                highlight_character_added_connection = nil
            end

            if tool_text_player_tool_equipped_connection then
                tool_text_player_tool_equipped_connection:Disconnect()
                tool_text_player_tool_equipped_connection = nil
            end

            if tool_icon_player_tool_equipped_connection then
                tool_icon_player_tool_equipped_connection:Disconnect()
                tool_icon_player_tool_equipped_connection = nil
            end

            if armor_bar_player_armor_changed_connection then
                armor_bar_player_armor_changed_connection:Disconnect()
                armor_bar_player_armor_changed_connection = nil
            end

            if player_ragebot_target_connection then
                player_ragebot_target_connection:Disconnect()
                player_ragebot_target_connection = nil
            end

            if player_legitbot_target_connection then
                player_legitbot_target_connection:Disconnect()
                player_legitbot_target_connection = nil
            end

            if player_status_changed_connection then
                player_status_changed_connection:Disconnect()
                player_status_changed_connection = nil
            end

            if material_on_player_character_added then
                material_on_player_character_added:Disconnect()
                material_on_player_character_added = nil
            end

            if value then
                for player, data in player_data do
                    create_esp(data)
                end

                heartbeat[#heartbeat+1] = do_esp

                player_died_connection = create_connection(signals["on_player_died"], tween_esp)
                player_added_connection = create_connection(signals["on_player_added"], create_esp_with_tween)
                character_added_connection = create_connection(signals["on_player_character_added"], tween_esp)
                player_status_changed_connection = create_connection(signals["on_player_status_changed"], update_esp)
                player_ragebot_target_connection = create_connection(signals["on_ragebot_target_changed"], update_esp_with_tween)
                player_legitbot_target_connection = create_connection(signals["on_legitbot_target_changed"], update_esp_with_tween)

                if do_health_bar then
                    health_bar_player_health_changed_connection = create_connection(signals["on_player_health_changed"], update_health_bar)
                end

                if do_chams then
                    chams_character_added_connection = create_connection(signals["on_player_character_added"], update_chams)
                end

                if do_highlight then
                    highlight_character_added_connection = create_connection(signals["on_player_character_added"], update_highlight)
                end

                if do_tool_text then
                    tool_text_player_tool_equipped_connection = create_connection(signals["on_player_tool_equipped"], update_tool_text)
                end

                if do_tool_icon then
                    tool_icon_player_tool_equipped_connection = create_connection(signals["on_player_tool_equipped"], create_tool_icon)
                end

                if do_armor_bar then
                    armor_bar_player_armor_changed_connection = create_connection(signals["on_player_armor_changed"], update_armor_bar)
                end

                if do_material then
                    material_on_player_character_added = create_connection(signals["on_player_character_added"], apply_material)
                end

                if do_health_text then
                    health_text_player_health_changed_connection = create_connection(signals["on_player_health_changed"], update_health_text)
                end
            end
        end))

        create_connection(menu_references["main_font"]["on_dropdown_change"], LPH_NO_VIRTUALIZE(function(value)
            main_font = tonumber(value[1])

            if value and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]
                    local name = drawings[3]

                    if name then
                        name["Font"] = main_font
                    end
                end
            end
        end))

        create_connection(menu_references["small_font"]["on_dropdown_change"], LPH_NO_VIRTUALIZE(function(value)
            small_font = tonumber(value[1])

            if value and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]
                    local health_text = drawings[7]

                    if health_text then
                        health_text["Font"] = small_font
                    end

                    local tool_text = drawings[8]

                    if tool_text then
                        tool_text["Font"] = small_font
                    end
                end
            end
        end))

        create_connection(menu_references["box"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_box = value

            for player, data in player_data do
                local drawings = data[5]
                local box = drawings[1]
                local box_outline = drawings[2]

                if box then
                    box:Destroy()
                    drawings[1] = nil
                end

                if box_outline then
                    box_outline:Destroy()
                    drawings[2] = nil
                end
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_box(data)
                end
            end
        end))

        create_connection(menu_references["name"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_name = value

            for player, data in player_data do
                local drawings = data[5]
                local name = drawings[3]

                if name then
                    name:Destroy()
                    drawings[3] = nil
                end
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_name(data)
                end
            end
        end))

        create_connection(menu_references["name_use_display"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            use_display_name = value
            if do_name and flags["esp"] then
                for player, data in player_data do
                    local name = data[5][3]

                    if name then
                        name["Text"] = value and player["DisplayName"] or player["Name"]
                    end
                end
            end
        end))

        create_connection(menu_references["box_outline"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[1][2] = color
            colors[2][2] = color
            colors[3][2] = color

            if do_box and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]
                    local box_outline = drawings[2]

                    if box_outline then
                        box_outline["Color"] = color
                    end
                end
            end
        end))

        create_connection(menu_references["box_outline"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1

            transparencies[1][2] = transparency
            transparencies[2][2] = transparency
            transparencies[3][2] = transparency

            if do_box and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]
                    local box_outline = drawings[2]

                    if box_outline then
                        box_outline["Transparency"] = transparency
                    end
                end
            end
        end))

        create_connection(menu_references["health_bar_outline"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[1][5] = color
            colors[2][5] = color
            colors[3][5] = color

            if do_health_bar and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]
                    local health_bar_outline = drawings[5]

                    if health_bar_outline then
                        health_bar_outline["Color"] = color
                    end
                end
            end
        end))

        create_connection(menu_references["health_bar_outline"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[1][5] = transparency
            transparencies[2][5] = transparency
            transparencies[3][5] = transparency

            if do_health_bar and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]
                    local health_bar_outline = drawings[5]

                    if health_bar_outline then
                        health_bar_outline["Transparency"] = transparency
                    end
                end
            end
        end))

        create_connection(menu_references["health_bar_gradient"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_health_bar_gradient = value

            menu_references["enemy_health_bar_gradient"]:set_visible(value)
            menu_references["friendly_health_bar_gradient"]:set_visible(value)

            if do_health_bar and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]

                    local health_bar = drawings[4]
                    if health_bar then
                        health_bar:Destroy()
                        drawings[4] = nil
                    end

                    local health_bar_outline = drawings[5]
                    if health_bar_outline then
                        health_bar_outline:Destroy()
                        drawings[5] = nil
                    end

                    local health_bar_gradient = drawings[6]
                    if health_bar_gradient then
                        health_bar_gradient:Destroy()
                        drawings[6] = nil
                    end

                    create_health_bar(data)
                end
            end
        end))

        create_connection(menu_references["health_bar"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_health_bar = value
            armor_bar_offset = value and vector2_new(11, 1) or vector2_new(6, 1)
            health_text_offset = value and (do_armor_bar and vector2_new(15, 1) or vector2_new(8, 1)) or vector2_new(2, 1)

            if health_bar_player_health_changed_connection then
                health_bar_player_health_changed_connection:Disconnect()
                health_bar_player_health_changed_connection = nil
            end

            for player, data in player_data do
                local drawings = data[5]

                local health_bar = drawings[4]
                if health_bar then
                    health_bar:Destroy()
                    drawings[4] = nil
                end

                local health_bar_outline = drawings[5]
                if health_bar_outline then
                    health_bar_outline:Destroy()
                    drawings[5] = nil
                end

                local health_bar_gradient = drawings[6]
                if health_bar_gradient then
                    health_bar_gradient:Destroy()
                    drawings[6] = nil
                end
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_health_bar(data)
                end

                health_bar_player_health_changed_connection = create_connection(signals["on_player_health_changed"], update_health_bar)
            end
        end))

        create_connection(menu_references["chams"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_chams = value

            if chams_character_added_connection then
                chams_character_added_connection:Disconnect()
                chams_character_added_connection = nil
            end

            for player, data in player_data do
                local chams = data[12]

                if chams then
                    for i = 1, #chams do
                        destroy(chams[i])
                        chams[i] = nil
                    end
                    data[12] = nil
                end
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_chams(data)
                end

                chams_character_added_connection = create_connection(signals["on_player_character_added"], update_chams)
            end
        end))

        create_connection(menu_references["chams_behind_walls"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            chams_z_index = value and 1 or -1

            if flags["esp"] then
                for player, data in player_data do
                    local chams = data[12]
                    for i = 1, #chams do
                        chams[i]["ZIndex"] = chams_z_index
                    end
                end
            end
        end))

        create_connection(menu_references["highlight_behind_walls"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            highlight_depth_mode = value and Enum["HighlightDepthMode"]["AlwaysOnTop"] or Enum["HighlightDepthMode"]["Occluded"]

            if flags["esp"] then
                for player, data in player_data do
                    local highlight = data[8]
                    if highlight then
                        highlight["DepthMode"] = highlight_depth_mode
                    end
                end
            end
        end))

        create_connection(menu_references["highlight"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_highlight = value

            if highlight_character_added_connection then
                highlight_character_added_connection:Disconnect()
                highlight_character_added_connection = nil
            end

            for player, data in player_data do
                local highlight = data[8]

                if highlight then
                    destroy(highlight)
                    data[8] = nil
                end
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_highlight(data)
                end

                highlight_character_added_connection = create_connection(signals["on_player_character_added"], update_highlight)
            end
        end))

        create_connection(menu_references["health_text"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_health_text = value

            for player, data in player_data do
                local drawings = data[5]
                local health_text = drawings[7]

                if health_text then
                    health_text:Destroy()
                    drawings[7] = nil
                end
            end

            if health_text_player_health_changed_connection then
                health_text_player_health_changed_connection:Disconnect()
                health_text_player_health_changed_connection = nil
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_health_text(data)
                end

                health_text_player_health_changed_connection = create_connection(signals["on_player_health_changed"], update_health_text)
            end
        end))

        create_connection(menu_references["health_text_hide_if_full"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            hide_health_text_if_full = value

            if flags["esp"] and do_health_text then
                for player, data in player_data do
                    update_health_text(data, data[9])
                end
            end
        end))

        create_connection(menu_references["tool_text"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_tool_text = value

            for player, data in player_data do
                local drawings = data[5]
                local tool_text = drawings[8]

                if tool_text then
                    tool_text:Destroy()
                    drawings[8] = nil
                end
            end

            if tool_text_player_tool_equipped_connection then
                tool_text_player_tool_equipped_connection:Disconnect()
                tool_text_player_tool_equipped_connection = nil
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_tool_text(data)
                end

                tool_text_player_tool_equipped_connection = create_connection(signals["on_player_tool_equipped"], update_tool_text)
            end
        end))

        create_connection(menu_references["tool_text_casing"]["on_dropdown_change"], LPH_NO_VIRTUALIZE(function(value)
            tool_text_function = value[1] == "uppercase" and string["upper"] or string["lower"]
        end))

        create_connection(menu_references["tool_icon"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_tool_icon = value

            for player, data in player_data do
                local drawings = data[5]
                local tool_icon = drawings[9]

                if tool_icon then
                    tool_icon:Destroy()
                    drawings[9] = nil
                end
            end

            if tool_icon_player_tool_equipped_connection then
                tool_icon_player_tool_equipped_connection:Disconnect()
                tool_icon_player_tool_equipped_connection = nil
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_tool_icon(data)
                end

                tool_icon_player_tool_equipped_connection = create_connection(signals["on_player_tool_equipped"], update_tool_icon)
            end
        end))

        create_connection(menu_references["armor_bar_outline"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[1][11] = color
            colors[2][11] = color
            colors[3][11] = color

            if do_armor_bar and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]
                    local armor_bar_outline = drawings[11]

                    if armor_bar_outline then
                        armor_bar_outline["Color"] = color
                    end
                end
            end
        end))

        create_connection(menu_references["armor_bar_outline"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[1][11] = transparency
            transparencies[2][11] = transparency
            transparencies[3][11] = transparency

            if do_armor_bar and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]
                    local armor_bar_outline = drawings[11]

                    if armor_bar_outline then
                        armor_bar_outline["Transparency"] = transparency
                    end
                end
            end
        end))

        create_connection(menu_references["armor_bar_gradient"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_armor_bar_gradient = value

            menu_references["enemy_armor_bar_gradient"]:set_visible(value)
            menu_references["friendly_armor_bar_gradient"]:set_visible(value)

            if do_armor_bar and flags["esp"] then
                for player, data in player_data do
                    local drawings = data[5]

                    local armor_bar = drawings[10]
                    if armor_bar then
                        armor_bar:Destroy()
                        drawings[10] = nil
                    end

                    local armor_bar_outline = drawings[11]
                    if armor_bar_outline then
                        armor_bar_outline:Destroy()
                        drawings[11] = nil
                    end

                    local armor_bar_gradient = drawings[12]
                    if armor_bar_gradient then
                        armor_bar_gradient:Destroy()
                        drawings[12] = nil
                    end

                    create_armor_bar(data)
                end
            end
        end))

        create_connection(menu_references["armor_bar"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_armor_bar = value
            health_text_offset = value and (do_health_bar and vector2_new(15, 1) or vector2_new(8, 1)) or vector2_new(2, 1)

            if armor_bar_player_armor_changed_connection then
                armor_bar_player_armor_changed_connection:Disconnect()
                armor_bar_player_armor_changed_connection = nil
            end

            for player, data in player_data do
                local drawings = data[5]

                local armor_bar = drawings[10]
                if armor_bar then
                    armor_bar:Destroy()
                    drawings[10] = nil
                end

                local armor_bar_outline = drawings[11]
                if armor_bar_outline then
                    armor_bar_outline:Destroy()
                    drawings[11] = nil
                end

                local armor_bar_gradient = drawings[12]
                if armor_bar_gradient then
                    armor_bar_gradient:Destroy()
                    drawings[12] = nil
                end
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_armor_bar(data)
                end

                armor_bar_player_armor_changed_connection = create_connection(signals["on_player_armor_changed"], update_armor_bar)
            end
        end))

        create_connection(menu_references["armor_bar_hide_if_empty"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            hide_armor_bar_if_empty = value

            if flags["esp"] and do_armor_bar then
                for player, data in player_data do
                    update_armor_bar(data, data[14], 0)
                end
            end
        end))

        create_connection(menu_references["image"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_image = value

            for player, data in player_data do
                local drawings = data[5]
                local image = drawings[13]

                if image then
                    image:Destroy()
                    drawings[13] = nil
                end
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    create_image(data)
                end
            end
        end))


        create_connection(menu_references["image_value"]["on_dropdown_change"], LPH_JIT_MAX(function(value)
            local selected = value[1]

            image_data = selected == "gradient fill" and "iVBORw0KGgoAAAANSUhEUgAAAAEAAABkCAYAAABHLFpgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABTSURBVChTdU/LDsAwCGJu1/3/59rUC5HAhaA8bNHdfwF4LrwbagN3wgakwMVc4ttCTLhxmKjOIma5S5VfiC0TE180R8aRIAJvuJfGGHcsoHoZ6gCUSgTCpTUDpwAAAABJRU5ErkJggg==" or selected == "fill" and "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY/j//z8ABf4C/qc1gYQAAAAASUVORK5CYII=" or ""

            if image_data == "" then
                local path = "juju recode/custom/"..selected

                if isfile(path) then
                    image_data = readfile(path)
                end
            else
                image_data = base64_decode(image_data)
            end

            if do_image then
                for player, data in player_data do
                    data[5][13]["Data"] = image_data
                end
            end
        end))

        create_connection(menu_references["material_value"]["on_dropdown_change"], function(value)
            material_value = value[1] == "neon" and Enum["Material"]["Neon"] or Enum["Material"]["ForceField"]
        end)

        create_connection(menu_references["material"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            do_material = value

            if material_on_player_character_added then
                material_on_player_character_added:Disconnect()
                material_on_player_character_added = nil
            end

            if value and flags["esp"] then
                for player, data in player_data do
                    if data[3] then
                        spawn(apply_material, data)
                    end
                end

                material_on_player_character_added = create_connection(signals["on_player_character_added"], apply_material)
            elseif flags["esp"] then
                for player, data in player_data do
                    if data[3] then
                        remove_material(data)
                    end
                end
            end
        end))
    end

    -- >> ( color / transparency updaters )

    local statuses = {
        [1] = "",
        [2] = "friendly_",
        [3] = "enemy_"
    }

    for status, name in statuses do
        local colors = colors[status]
        local transparencies = transparencies[status]
        local alt_information = alt_information[status]

        create_connection(menu_references[name.."box_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[1] = color
            if do_box then
                for player, data in player_data do
                    if data[1] == status then
                        local box = data[5][1]

                        if box then
                            box["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."box_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[1] = transparency

            if do_box then
                for player, data in player_data do
                    if data[1] == status then
                        local box = data[5][1]

                        if box then
                            box["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."name_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[3] = color
            if do_name then
                for player, data in player_data do
                    if data[1] == status then
                        local name = data[5][3]

                        if name then
                            name["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."name_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[3] = transparency

            if do_name then
                for player, data in player_data do
                    if data[1] == status then
                        local name = data[5][3]

                        if name then
                            name["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."health_bar_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[4] = color
            if do_health_bar then
                for player, data in player_data do
                    if data[1] == status then
                        local health_bar = data[5][4]

                        if health_bar then
                            health_bar["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."health_bar_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[4] = transparency

            if do_health_bar then
                for player, data in player_data do
                    if data[1] == status then
                        local health_bar = data[5][4]

                        if health_bar then
                            health_bar["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."health_bar_gradient"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[6] = color
            if do_health_bar and do_health_bar_gradient then
                for player, data in player_data do
                    if data[1] == status then
                        local health_bar_gradient = data[5][6]

                        if health_bar_gradient then
                            health_bar_gradient["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."health_bar_gradient"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[6] = transparency

            if do_health_bar and do_health_bar_gradient then
                for player, data in player_data do
                    if data[1] == status then
                        local health_bar_gradient = data[5][6]

                        if health_bar_gradient then
                            health_bar_gradient["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."chams_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            alt_information[5] = color
            if do_chams then
                for player, data in player_data do
                    if data[1] == status then
                        local chams = data[12]

                        if chams then
                            for i = 1, #chams do
                                chams[i]["Color3"] = color
                            end
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."chams_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            alt_information[6] = transparency

            if do_chams then
                for player, data in player_data do
                    if data[1] == status then
                        local chams = data[12]

                        if chams then
                            for i = 1, #chams do
                                chams[i]["Transparency"] = transparency
                            end
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."highlight_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            alt_information[1] = color
            if do_highlight then
                for player, data in player_data do
                    if data[1] == status then
                        local highlight = data[8]

                        if highlight then
                            highlight["FillColor"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."highlight_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            alt_information[2] = transparency

            if do_highlight then
                for player, data in player_data do
                    if data[1] == status then
                        local highlight = data[8]

                        if highlight then
                            highlight["FillTransparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."highlight_outline_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            alt_information[3] = color
            if do_highlight then
                for player, data in player_data do
                    if data[1] == status then
                        local highlight = data[8]

                        if highlight then
                            highlight["OutlineColor"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."highlight_outline_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            alt_information[4] = transparency

            if do_highlight then
                for player, data in player_data do
                    if data[1] == status then
                        local highlight = data[8]

                        if highlight then
                            highlight["OutlineTransparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."health_text_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[7] = color
            if do_health_text then
                for player, data in player_data do
                    if data[1] == status then
                        local health_text = data[5][7]

                        if health_text then
                            health_text["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."health_text_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[7] = transparency

            if do_health_text then
                for player, data in player_data do
                    if data[1] == status then
                        local health_text = data[5][7]

                        if health_text then
                            health_text["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."tool_text_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[8] = color
            if do_tool_text then
                for player, data in player_data do
                    if data[1] == status then
                        local tool_text = data[5][8]

                        if tool_text then
                            tool_text["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."tool_text_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[8] = transparency

            if do_tool_text then
                for player, data in player_data do
                    if data[1] == status then
                        local tool_text = data[5][8]

                        if tool_text then
                            tool_text["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."tool_icon_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[9] = color
            if do_tool_icon then
                for player, data in player_data do
                    if data[1] == status then
                        local tool_icon = data[5][9]

                        if tool_icon then
                            tool_icon["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."tool_icon_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[9] = transparency

            if do_tool_icon then
                for player, data in player_data do
                    if data[1] == status then
                        local tool_icon = data[5][9]

                        if tool_icon then
                            tool_icon["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."armor_bar_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[10] = color
            if do_armor_bar then
                for player, data in player_data do
                    if data[1] == status then
                        local armor_bar = data[5][10]

                        if armor_bar then
                            armor_bar["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."armor_bar_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[10] = transparency

            if do_armor_bar then
                for player, data in player_data do
                    if data[1] == status then
                        local armor_bar = data[5][10]

                        if armor_bar then
                            armor_bar["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."armor_bar_gradient"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[12] = color
            if do_armor_bar and do_armor_bar_gradient then
                for player, data in player_data do
                    if data[1] == status then
                        local armor_bar_gradient = data[5][12]

                        if armor_bar_gradient then
                            armor_bar_gradient["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."armor_bar_gradient"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[12] = transparency

            if do_armor_bar and do_armor_bar_gradient then
                for player, data in player_data do
                    if data[1] == status then
                        local armor_bar_gradient = data[5][12]

                        if armor_bar_gradient then
                            armor_bar_gradient["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."image_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            colors[13] = color
            if do_image then
                for player, data in player_data do
                    if data[1] == status then
                        local image = data[5][13]

                        if image then
                            image["Color"] = color
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."image_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            local transparency = -transparency+1
            transparencies[13] = transparency

            if do_image then
                for player, data in player_data do
                    if data[1] == status then
                        local image = data[5][13]

                        if image then
                            image["Transparency"] = transparency
                        end
                    end
                end
            end
        end))

        create_connection(menu_references[name.."material_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(color)
            alt_information[7] = color

            if do_material then
                for player, data in player_data do
                    if data[1] == status and data[3] then
                        spawn(apply_material, data)
                    end
                end
            end
        end))

        create_connection(menu_references[name.."material_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(transparency)
            alt_information[8] = clamp(transparency, 0, 0.999999)

            if do_material then
                for player, data in player_data do
                    if data[1] == status and data[3] then
                        spawn(apply_material, data)
                    end
                end
            end
        end))
    end

    -- >> ( other )

    menu_references["other_section"] = menu["groups"]["visuals"]:create_section("players", "other", 1, 0.4, 0.6)
        menu_references["name_hide_nametags"] = menu_references["other_section"]:create_element({["name"] = "hide player nametags"}, {["toggle"] = {["flag"] = "name_hide_nametags"}})

    local name_hide_nametags_on_character_added = nil
    local health_always_off = Enum["HumanoidHealthDisplayType"]["AlwaysOff"]
    local hide_nametag = LPH_NO_VIRTUALIZE(function(data)
        local humanoid = data[4]["Humanoid"]

        if humanoid then
            humanoid["DisplayName"] = ""
            humanoid["HealthDisplayType"] = health_always_off
        end
    end)

    create_connection(menu_references["name_hide_nametags"]["on_toggle_change"], function(value)
        if name_hide_nametags_on_character_added then
            name_hide_nametags_on_character_added:Disconnect()
            name_hide_nametags_on_character_added = nil
        end

        for player, data in player_data do
            local humanoid = data[4]["Humanoid"]

            if humanoid then
                humanoid["DisplayName"] = player["DisplayName"]
                humanoid["HealthDisplayType"] = Enum["HumanoidHealthDisplayType"]["DisplayWhenDamaged"]
            end
        end

        if value then
            name_hide_nametags_on_character_added = create_connection(signals["on_player_character_added"], hide_nametag)

            for player, data in player_data do
                hide_nametag(data)
            end
        end
    end)
end

-- > ( self esp)

do
    local character_highlight_connection = nil
    local character_highlight = nil
        menu_references["character_highlight_settings"] = menu_references["character_highlight"]:create_settings()
        menu_references["character_highlight_color"] = menu_references["character_highlight_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "character_highlight_color", ["default_color"] = color3_fromrgb(255, 255, 255), ["transparency_flag"] = "character_highlight_transparency", ["default_transparency"] =  0.9}})
        menu_references["character_highlight_outline"] = menu_references["character_highlight_settings"]:create_element({["name"] = "outline"}, {["colorpicker"] = {["color_flag"] = "character_highlight_outline_color", ["default_color"] = color3_fromrgb(255, 255, 255), ["transparency_flag"] = "character_highlight_outline_transparency", ["default_transparency"] =  0.9}})

    local apply_character_highlight = LPH_NO_VIRTUALIZE(function()
        character_highlight["FillTransparency"] = 1
        character_highlight["OutlineTransparency"] = 1

        tween(character_highlight, {["FillTransparency"] = flags["character_highlight_transparency"], ["OutlineTransparency"] = flags["character_highlight_outline_transparency"]}, quad, out, 0.3)

        character_highlight["Adornee"] = nil
        character_highlight["Parent"] = nil
        character_highlight["Adornee"] = local_character
        character_highlight["Parent"] = hui
    end)

    create_connection(menu_references["character_highlight"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
        if character_highlight_connection then
            character_highlight_connection:Disconnect()
            character_highlight_connection = nil
        end

        if character_highlight then
            destroy(character_highlight)
            character_highlight = nil
        end

        if value then
            character_highlight = create_instance("Highlight", {
                FillColor = flags["character_highlight_color"],
                FillTransparency = flags["character_highlight_transparency"],
                OutlineColor = flags["character_highlight_outline_color"],
                OutlineTransparency = flags["character_highlight_outline_transparency"],
                DepthMode = Enum["HighlightDepthMode"]["AlwaysOnTop"],
                Enabled = true,
                Parent = hui
            })

            character_highlight_connection = create_connection(signals["on_local_character_added"], apply_character_highlight)

            if local_character then
                apply_character_highlight()
            end
        end
    end))

    create_connection(menu_references["character_highlight_color"]["on_color_change"], LPH_NO_VIRTUALIZE(function(value)
        if character_highlight then
            character_highlight["FillColor"] = value
        end
    end))

    create_connection(menu_references["character_highlight_color"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(value)
        if character_highlight then
            character_highlight["FillTransparency"] = value
        end
    end))

    create_connection(menu_references["character_highlight_outline"]["on_color_change"], LPH_NO_VIRTUALIZE(function(value)
        if character_highlight then
            character_highlight["OutlineColor"] = value
        end
    end))

    create_connection(menu_references["character_highlight_outline"]["on_transparency_change"], LPH_NO_VIRTUALIZE(function(value)
        if character_highlight then
            character_highlight["OutlineTransparency"] = value
        end
    end))

    menu_references["custom_character"] = menu_references["local_character_section"]:create_element({["name"] = "custom character"}, {["toggle"] = {["flag"] = "custom_character"}})
    menu_references["custom_character_settings"] = menu_references["custom_character"]:create_settings()
    menu_references["custom_character_model_type"] = menu_references["custom_character_settings"]:create_element({["name"] = "model type"}, {["dropdown"] = {["flag"] = "custom_character_model_type", ["options"] = {"user id", "file"}, ["default"] = {"file"}, ["requires_one"] = true}})

    menu_references["custom_character_userid"] = menu_references["custom_character_settings"]:create_element({["name"] = "player userid"}, {["textbox"] = {["flag"] = "custom_character_userid"}})
    menu_references["custom_character_files"] = menu_references["custom_character_settings"]:create_element({["name"] = "files"}, {["dropdown"] = {["flag"] = "custom_character_file", ["default"] = {"character.rbxm"}, ["requires_one"] = true, ["options"] = {}, ["use_custom_extensions"] = {"rbxm", "rbmx"}}})
    menu_references["custom_character_files"]:set_visible(true)
    menu_references["custom_character_userid"]:set_visible(false)

    local apply_connection = nil
    local scale_connection = nil

    local apply_description = LPH_JIT_MAX(function(description, clone)
        local humanoid = local_parts["Humanoid"]
        local head = local_parts["Head"]

        if description and not clone then
            if last_description then
                destroy(last_description)
            end
            last_description = description
        end

        local description = description or last_description

        if humanoid and head then
            humanoid:RemoveAccessories()

            local local_description = local_parts["Humanoid"]["HumanoidDescription"]

            description["BodyTypeScale"] = humanoid["BodyTypeScale"]["Value"]
            description["HeadScale"] = humanoid["HeadScale"]["Value"]
            description["DepthScale"] = humanoid["BodyDepthScale"]["Value"]
            description["HeightScale"] = humanoid["BodyHeightScale"]["Value"]
            description["ProportionScale"] = humanoid["BodyProportionScale"]["Value"]
            description["WidthScale"] = humanoid["BodyWidthScale"]["Value"]
            description:SetEmotes(local_description:GetEmotes())

            local shirt = local_parts["Shirt"]

            if shirt then
                destroy(shirt)
            end

            local pants = local_parts["Pants"]

            if pants then
                destroy(pants)
            end

            local shirt_graphic = local_parts["Shirt Graphic"]

            if shirt_graphic then
                destroy(shirt_graphic)
            end

            humanoid:ApplyDescriptionClientServer(description)

            if not clone then
                scale_connection = create_connection(humanoid["BodyWidthScale"]:GetPropertyChangedSignal("Value"), function()
                    wait()
                    last_description["BodyTypeScale"] = humanoid["BodyTypeScale"]["Value"]
                    last_description["HeadScale"] = humanoid["HeadScale"]["Value"]
                    last_description["DepthScale"] = humanoid["BodyDepthScale"]["Value"]
                    last_description["HeightScale"] = humanoid["BodyHeightScale"]["Value"]
                    last_description["ProportionScale"] = humanoid["BodyProportionScale"]["Value"]
                    last_description["WidthScale"] = humanoid["BodyWidthScale"]["Value"]
                    humanoid:ApplyDescriptionClientServer(last_description)

                    scale_connection:Disconnect()
                end)

                --[[tooL_connection = create_connection(signals["on_local_tool_equipped"], function(tool)
                    local right_hand = local_parts["RightHand"]
                    if right_hand and tool then
                        local right_grip = find_first_child(right_hand, "RightGrip")
                        local handle = find_first_child(tool, "Handle")
                        if not right_grip and handle then
                            local new_right_grip = create_instance("Weld", {
                                ["Parent"] = right_hand,
                                ["Name"] = "RightGrip",
                                ["Part0"] = right_hand,
                                ["Part1"] = handle,
                                ["C0"] = right_hand["RightGripAttachment"]["CFrame"],
                                ["C1"] = tool["Grip"]
                            })
                        end
                    end
                end)--]]
            end

            signals["on_local_character_description_changed"]:Fire(description)
        end
    end)

    local get_user_description = function(value)
        local value = value or flags["custom_character_userid"]

        if value and tonumber(value) then
            return players_service:GetHumanoidDescriptionFromUserId(value)
        end
    end

    local get_file_description = function(value)
        local value = value or flags["custom_character_file"][1]
        local file = "juju recode/custom/"..value

        if isfile(file) then
            return game:GetObjects(getcustomasset(file))[1]
        end
    end

    local do_apply_custom_character = LPH_NO_VIRTUALIZE(function()
        wait(0.12)
        apply_description(last_description, true)
    end)

    create_connection(menu_references["custom_character"]["on_toggle_change"], function(value)
        local description = not value and (last_description and players_service:GetHumanoidDescriptionFromUserId(local_player["UserId"]) or nil) or nil

        if value then
            description = flags["custom_character_model_type"][1] ~= "user id" and get_file_description() or get_user_description()
        end

        if description then
            apply_description(description)
        end

        if apply_connection then
            apply_connection:Disconnect()
            apply_connection = nil
        end

        if scale_connection then
            scale_connection:Disconnect()
        end

        if value then
            apply_connection = create_connection(signals["on_local_character_added"], do_apply_custom_character)
        end
    end)

    create_connection(menu_references["custom_character_userid"]["on_textbox_change"], function(value)
        if flags["custom_character"] and value and tonumber(value) then
            local description = get_user_description(value)

            if description then
                apply_description(description)
            end
        end
    end)

    create_connection(menu_references["custom_character_files"]["on_dropdown_change"], function(value)
        if flags["custom_character"] then
            local value = value[1]
            local description = get_file_description(value)

            if description then
                apply_description(description)
            end
        end
    end)

    create_connection(menu_references["custom_character_model_type"]["on_dropdown_change"], function(value)
        local is_user_id = value[1] == "user id"
        menu_references["custom_character_userid"]:set_visible(is_user_id)
        menu_references["custom_character_files"]:set_visible(not is_user_id)

        if flags["custom_character"] then
            local description = is_user_id and get_user_description() or get_file_description()

            if description then
                apply_description(description)
            end
        end
    end)

    -- >> ( animated gun )

    menu_references["animated_gun"] = menu_references["local_character_section"]:create_element({["name"] = "animated tools"}, {toggle = {flag = "animated_tools", default = false}})
        menu_references["animated_gun_settings"] = menu_references["animated_gun"]:create_settings()
        menu_references["animated_gun_horizontal"] = menu_references["animated_gun_settings"]:create_element({["name"] = "horizontal"}, {dropdown = {flag = "animated_gun_horizontal", options = {"character spin", "sine spin", "random", "spin"}, default = {"sine spin"}, multi = false, requires_one = false}})
        menu_references["animated_gun_horizontal_speed"] = menu_references["animated_gun_settings"]:create_element({["name"] = "horizontal speed"}, {slider = {flag = "animated_gun_horizontal_speed", min = 0, max = 100, default = 10, suffix = "%"}})

        menu_references["animated_gun_vertical"] = menu_references["animated_gun_settings"]:create_element({["name"] = "vertical"}, {dropdown = {flag = "animated_gun_vertical", options = {"character spin", "sine spin", "random", "spin"}, default = {"sine spin"}, multi = false, requires_one = false}})
        menu_references["animated_gun_vertical_speed"] = menu_references["animated_gun_settings"]:create_element({["name"] = "vertical speed"}, {slider = {flag = "animated_gun_vertical_speed", min = 0, max = 100, default = 10, suffix = "%"}})

    do
        local old_grips = {}

        local angles = CFrame["Angles"]
        local rad = math["rad"]
        local sin = math["sin"]

        local horizontal_multiplier = 1
        local vertical_multiplier = 1
        local horizontal_animation = "sine spin"
        local vertical_animation = "sine spin"

        local animated_connection = nil

        local do_animated_gun = LPH_JIT_MAX(function(dt)                
            local horizontal = 0
            if horizontal_animation == "sine spin" then
                horizontal = sin(clock()) * 45
            elseif horizontal_animation == "random" then
                horizontal = (math_random() * 2 - 1) * 180
            elseif horizontal_animation == "jitter" then
                horizontal = math_random(-10, 10)
            elseif horizontal_animation == "spin" then
                horizontal = 45
            end
        
            local vertical = 0
            if vertical_animation == "sine spin" then
                vertical = sin(clock()) * 45
            elseif vertical_animation == "random" then
                vertical = (math_random() * 2 - 1) * 180
            elseif vertical_animation == "jitter" then
                vertical = math_random(-horizontal_multiplier, vertical_multiplier)
            elseif vertical_animation == "spin" then
                vertical = 45
            end
        
            for gun, data in local_guns do
                local gun = gun["Parent"]
                if gun then
                    gun["Grip"] *= angles(rad(vertical*dt*vertical_multiplier), rad(horizontal*dt*horizontal_multiplier), 0)
                end
            end
        end)

        local add_tool = function(tool)
            if tool then
                local handle = find_first_child(tool, "Handle")

                if handle and not old_grips[handle] then
                    old_grips[handle] = tool["Grip"]
                end
            end
        end

        create_connection(menu_references["animated_gun"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_animated_gun then
                    remove(heartbeat, i)
                    break
                end
            end

            for gun, grip in old_grips do
                if gun then
                    local parent = gun["Parent"]
                    if parent then
                        parent["Grip"] = grip
                    end
                end
            end

            if animated_connection then
                animated_connection:Disconnect()
                animated_connection = nil
            end

            old_grips = {}

            if value then
                for gun, data in local_guns do
                    local grip = gun["Parent"]["Grip"]
                    old_grips[gun] = grip
                end

                add_tool(local_tool) 

                animated_connection = create_connection(signals["on_local_tool_equipped"], add_tool)
                heartbeat[#heartbeat+1] = do_animated_gun
            end
        end)

        create_connection(menu_references["animated_gun_horizontal"]["on_dropdown_change"], function(value)
            horizontal_animation = value and value[1] or nil
            
            for gun, grip in old_grips do
                if gun then
                    local parent = gun["Parent"]
                    if parent then
                        parent["Grip"] = grip
                    end
                end
            end
        end)

        create_connection(menu_references["animated_gun_horizontal_speed"]["on_slider_change"], function(value)
            horizontal_multiplier = value/4
        end)

        create_connection(menu_references["animated_gun_vertical"]["on_dropdown_change"], function(value)
            vertical_animation = value and value[1] or nil

            for gun, grip in old_grips do
                if gun then
                    local parent = gun["Parent"]
                    if parent then
                        parent["Grip"] = grip
                    end
                end
            end
        end)

        create_connection(menu_references["animated_gun_vertical_speed"]["on_slider_change"], function(value)
            vertical_multiplier = value/4
        end)
    end

    -- >> ( material tools )

    menu_references["material_tools"] = menu_references["local_character_section"]:create_element({["name"] = "material tools"}, {["toggle"] = {["flag"] = "material_tools"}})
        menu_references["material_tools_settings"] = menu_references["material_tools"]:create_settings()
        menu_references["material_tools_material"] = menu_references["material_tools_settings"]:create_element({["name"] = "material"}, {["dropdown"] = {["flag"] = "material_tools_material", ["default"] = {"neon"}, ["options"] = {"forcefield", "neon"}, ["requires_one"] = true}})
        menu_references["material_tools_color"] = menu_references["material_tools_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "material_tools_color", ["transparency_flag"] = "material_tools_transparency", ["default_color"] = color3_fromrgb(142, 242, 255), ["default_transparency"] = 0.8}})

    do
        local material_tools_connection = nil
        local material = Enum["Material"]["Neon"]

        local apply_material = LPH_JIT_MAX(function(tool, tool2)
            if tool then
                local handle = find_first_child(tool, "Default")

                if handle then
                    handle["Material"] = material
                    handle["Color"] = flags["material_tools_color"]
                    handle["Transparency"] = flags["material_tools_transparency"]
                    if not tool:GetAttribute("AAAAAAAAAA") then
                        tool:SetAttribute("AAAAAAAAAA", handle["TextureID"])
                    end
                    handle["TextureID"] = ""
                end
            elseif tool2 then
                local handle = find_first_child(tool2, "Default")

                if handle then
                    local attribute = tool2:GetAttribute("AAAAAAAAAA")

                    if attribute then
                        handle["TextureID"] = tool2:GetAttribute("AAAAAAAAAA")
                        handle["Transparency"] = 0
                    end
                    handle["Material"] = Enum["Material"]["Plastic"]
                end

                tool2:SetAttribute("AAAAAAAAAA", nil)
            end
        end)

        create_connection(menu_references["material_tools"]["on_toggle_change"], function(value)
            if material_tools_connection then
                material_tools_connection:Disconnect()
                material_tools_connection = nil
            end

            for handle, gun in local_guns do
                local tool = handle["Parent"]
                local handle = find_first_child(tool, "Default")

                if handle then
                    local attribute = tool:GetAttribute("AAAAAAAAAA")

                    if attribute then
                        handle["TextureID"] = tool:GetAttribute("AAAAAAAAAA")
                        handle["Transparency"] = 0
                    end
                    handle["Material"] = Enum["Material"]["Plastic"]

                    tool:SetAttribute("AAAAAAAAAA", nil)
                end
            end

            if value then
                if local_tool then
                    apply_material(local_tool)
                end

                material_tools_connection = create_connection(signals["on_local_tool_equipped"], apply_material)
            end
        end)

        create_connection(menu_references["material_tools_material"]["on_dropdown_change"], function(value)
            material = value[1] == "neon" and Enum["Material"]["Neon"] or Enum["Material"]["ForceField"]

            if material_tools_connection then
                if local_tool then
                    local handle = find_first_child(local_tool, "Default")

                    if handle then
                        handle["Material"] = material
                    end
                end
            end
        end)

        create_connection(menu_references["material_tools_color"]["on_color_change"], function(value)
            if material_tools_connection then
                if local_tool then
                    local handle = find_first_child(local_tool, "Default")

                    if handle then
                        handle["Color"] = value
                    end
                end
            end
        end)

        create_connection(menu_references["material_tools_color"]["on_transparency_change"], function(value)
            if material_tools_connection then
                if local_tool then
                    local handle = find_first_child(local_tool, "Default") or find_first_child(local_tool, "Handle")

                    if handle then
                        handle["Transparency"] = value
                    end
                end
            end
        end)
    end

    -- >> ( particle aura )

    menu_references["particle_aura"] = menu_references["local_character_section"]:create_element({["name"] = "particle aura"}, {["toggle"] = {["flag"] = "particle_aura"}})
        menu_references["particle_aura_settings"] = menu_references["particle_aura"]:create_settings()
        menu_references["particle_aura_color"] = menu_references["particle_aura_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "particle_aura_color", ["transparency_flag"] = "particle_aura_transparency", ["default_color"] = color3_fromrgb(133, 220, 255), ["default_transparency"] = 0.2}})
        menu_references["particle_aura_particle"] = menu_references["particle_aura_settings"]:create_element({["name"] = "particle"}, {["dropdown"] = {["flag"] = "particle_aura_particle", ["default"] = {"angel"}, ["options"] = {"starlight", "heavenly", "ribbon", "sakura", "angel", "wind", "flow", "star"}, ["use_custom_extensions"] = {"rbxm", "rbmx"}, ["requires_one"] = true}})

    do
        local particle_auras = {
            ["starlight"] = game:GetObjects("rbxassetid://134645216613107")[1],
            ["heavenly"] = game:GetObjects("rbxassetid://139300897520961")[1],
            ["ribbon"] = game:GetObjects("rbxassetid://132069507632161")[1],
            ["sakura"] = game:GetObjects("rbxassetid://81755778619404")[1],
            ["angel"] = game:GetObjects("rbxassetid://97658130917593")[1],
            ["wind"] = game:GetObjects("rbxassetid://80694081850877")[1],
            ["flow"] = game:GetObjects("rbxassetid://119913533725648")[1],
            ["star"] = game:GetObjects("rbxassetid://73754563740680")[1],
        }

        local particle_aura_connection = nil
        local particle_aura = particle_auras["angel"]
        local particles = {}

        local do_particle_aura = LPH_NO_VIRTUALIZE(function()
            for i = 1, #particles do
                particles[i]:Destroy()
                particles[i] = nil
            end

            local hrp = local_parts["HumanoidRootPart"]

            if hrp then
                local cloned = clone(particle_aura)
                local children = get_children(cloned)

                for i = 1, #children do
                    local part = children[i]

                    local local_part = local_parts[part["Name"]]

                    if local_part then
                        local children = get_children(part)
                        for i = 1, #children do
                            local child = children[i]
                            child["Name"] = "\0\0"
                            child["Parent"] = local_part
                            particles[#particles+1] = child
                        end
                    else
                        destroy(part)
                    end
                end

                destroy(cloned)
            end
        end)

        create_connection(menu_references["particle_aura"]["on_toggle_change"], function(value)
            wait()

            for i = 1, #particles do
                particles[i]:Destroy()
                particles[i] = nil
            end

            if particle_aura_connection then
                particle_aura_connection:Disconnect()
                particle_aura_connection = nil
            end

            if value then
                spawn(do_particle_aura)

                particle_aura_connection = create_connection(signals["on_local_character_loaded"], do_particle_aura)
            end
        end)

        create_connection(menu_references["particle_aura_particle"]["on_dropdown_change"], function(value)
            local value = value[1]

            if particle_auras[value] then
                particle_aura = particle_auras[value]
            else
                local path = "juju recode/custom/"..value

                if isfile(path) then
                    local obj = game:GetObjects(getcustomasset(path))[1]

                    local children = get_children(obj)

                    for i = 1, #children do
                        local child = children[i]

                        if not child:IsA("BasePart") then
                            new_notification(
                                "invalid part "..child["Name"].." found in asset",
                                3
                            )
                            if obj then
                                destroy(obj)
                            end
                            break
                        end

                        local found = false
                        local name = child["Name"]

                        if name == "HumanoidRootPart" then
                            found = true
                        else
                            for i = 1, #body_parts do
                                if body_parts[i] == name then
                                    found = true
                                    break
                                end
                            end
                        end

                        if not found then
                            new_notification(
                                "invalid body part "..name.." found in asset",
                                3
                            )

                            if obj then
                                destroy(obj)
                            end
                            break
                        end
                    end

                    local descendants = obj:GetDescendants()
                    local color_value = flags["particle_aura_color"]
                    local color = ColorSequence["new"](color_value)
                    for i = 1, #descendants do
                        local part = descendants[i]
                        local class_name = part["ClassName"]
                        if class_name == "PointLight" then
                            part["Color"] = color_value
                        elseif class_name == "ParticleEmitter" or class_name == "Beam" or class_name == "Trail" then
                            part["Color"] = color
                            
                        end
                    end

                    particle_auras[value] = obj
                    particle_aura = obj
                end
            end

            if flags["particle_aura"] then
                do_particle_aura()
            end
        end)

        create_connection(menu_references["particle_aura_color"]["on_color_change"], function(value)
            local color = ColorSequence["new"](value)

            for particle, folder in particle_auras do
                if folder and type(folder) ~= "string" then
                    local descendants = folder:GetDescendants()

                    for i = 1, #descendants do
                        local part = descendants[i]
                        local class_name = part["ClassName"]
                        if class_name == "PointLight" then
                            part["Color"] = value
                        elseif class_name == "ParticleEmitter" or class_name == "Beam" or class_name == "Trail" then
                            part["Color"] = color
                        end
                    end
                end
            end

            local count = #particles
            if count > 0 then
                for i = 1, #particles do
                    local part = particles[i]
                    local class_name = part["ClassName"]
                    if class_name == "PointLight" then
                        part["Color"] = value
                    elseif class_name == "ParticleEmitter" or class_name == "Beam" or class_name == "Trail" then
                        part["Color"] = color
                    end

                    local descendants = part:GetDescendants()

                    for i = 1, #descendants do
                        local part = descendants[i]
                        local class_name = part["ClassName"]
                        if class_name == "PointLight" then
                            part["Color"] = value
                        elseif class_name == "ParticleEmitter" or class_name == "Beam" or class_name == "Trail" then
                            part["Color"] = color
                        end
                    end
                end
            end
        end)

        delay(0, function()
            menu_references["particle_aura_color"]["on_color_change"]:Fire(flags["particle_aura_color"])
        end)
    end
end

-- > ( ragebot / hvh )

local backtrack_data = {}

do
    menu_references["general_section"] = menu["groups"]["main"]:create_section("ragebot", "general", 1, 0.7)
        menu_references["ragebot_enabled"] = menu_references["general_section"]:create_element({["name"] = "ragebot"}, {["toggle"] = {["flag"] = "ragebot"}})
        menu_references["auto_fire"] = menu_references["general_section"]:create_element({["name"] = "auto fire"}, {["toggle"] = {["flag"] = "auto_fire", ["default"] = false}})
        menu_references["auto_fire_settings"] = menu_references["auto_fire"]:create_settings()
        menu_references["auto_fire_at_target_vehicle"] = menu_references["auto_fire_settings"]:create_element({["name"] = "at target vehicle"}, {["toggle"] = {["flag"] = "auto_fire_at_target_vehicle", ["default"] = true}})
        menu_references["auto_fire_at_backtrack"] = menu_references["auto_fire_settings"]:create_element({["name"] = "at backtrack"}, {["toggle"] = {["flag"] = "auto_fire_at_backtrack", ["default"] = false}})
        menu_references["auto_fire_wall_bang"] = menu_references["auto_fire_settings"]:create_element({["name"] = "wall bang"}, {["toggle"] = {["flag"] = "auto_fire_wall_bang", ["default"] = false}})
        menu_references["auto_fire_always_fire"] = menu_references["auto_fire_settings"]:create_element({["name"] = "always fire"}, {["toggle"] = {["flag"] = "auto_fire_always_fire", ["default"] = true}})
        menu_references["auto_fire_dont_render"] = menu_references["auto_fire_settings"]:create_element({["name"] = "dont render"}, {["toggle"] = {["flag"] = "auto_fire_dont_render", ["default"] = false}})
        menu_references["auto_equip"] = menu_references["general_section"]:create_element({["name"] = "auto equip"}, {["toggle"] = {["flag"] = "auto_equip", ["default"] = false}})
        menu_references["auto_equip_settings"] = menu_references["auto_equip"]:create_settings()
        menu_references["auto_equip_unequip_when"] = menu_references["auto_equip_settings"]:create_element({["name"] = "unequip when"}, {["dropdown"] = {["flag"] = "auto_equip_unequip_when", ["default"] = {"no target"}, ["options"] = {"no target"}, ["multi"] = true}})
        menu_references["auto_equip_gun"] = menu_references["auto_equip_settings"]:create_element({["name"] = "gun"}, {["dropdown"] = {["flag"] = "auto_equip_gun", ["default"] = {"rifle"}, ["options"] = {"double-barrel sg", "flintlock", "revolver", "rifle", "ak47", "p90", "lmg", "aug"}, ["requires_one"] = true, ["multi"] = true}})
        menu_references["auto_fire_defensive"] = menu_references["general_section"]:create_element({["name"] = "spam resolver"}, {["toggle"] = {["flag"] = "auto_fire_defensive", ["default"] = false}})
        menu_references["auto_fire_defensive_settings"] = menu_references["auto_fire_defensive"]:create_settings()
        menu_references["void_spam_resolver_position_weight"] = menu_references["auto_fire_defensive_settings"]:create_element({["name"] = "normal position trust"}, {["slider"] = {["flag"] = "void_spam_resolver_position_weight", ["min"] = 0.1, ["max"] = 5, ["default"] = 1.5, ["decimals"] = 2}})
        menu_references["void_spam_resolver_forget_rate"] = menu_references["auto_fire_defensive_settings"]:create_element({["name"] = "forget rate"}, {["slider"] = {["flag"] = "void_spam_resolver_forget_rate", ["min"] = 0, ["max"] = 1000, ["default"] = 80, ["decimals"] = 2, ["suffix"] = "%"}})
        menu_references["void_spam_resolver_void_weight"] = menu_references["auto_fire_defensive_settings"]:create_element({["name"] = "void trust"}, {["slider"] = {["flag"] = "void_spam_resolver_void_weight", ["min"] = 0.1, ["max"] = 5, ["default"] = 0.2, ["decimals"] = 2}})
        menu_references["void_spam_resolver_accuracy"] = menu_references["auto_fire_defensive_settings"]:create_element({["name"] = "accuracy"}, {["slider"] = {["flag"] = "void_spam_resolver_accuracy", ["min"] = 5, ["suffix"] = "%", ["max_text"] = "high", ["max"] = 110, ["default"] = 76.82, ["decimals"] = 2}})
        menu_references["void_spam_resolver_lerp"] = menu_references["auto_fire_defensive_settings"]:create_element({["name"] = "lerp % when close"}, {["slider"] = {["flag"] = "void_spam_resolver_lerp", ["min"] = 10, ["suffix"] = "%", ["max_text"] = "instant", ["max"] = 100, ["default"] = 10, ["decimals"] = 1}})
        menu_references["ragebot_hitbox"] = menu_references["general_section"]:create_element({["name"] = "target hitbox"}, {["dropdown"] = {["flag"] = "ragebot_hitbox", ["options"] = {"head", "root"}, ["default"] = {"head"}}})
        menu_references["prediction"] = menu_references["general_section"]:create_element({["name"] = "prediction"}, {["slider"] = {["flag"] = "prediction", ["min"] = 0, ["max"] = 2000, ["default"] = 0, ["min_text"] = "auto", ["max_text"] = "disabled", ["suffix"] = "%", ["decimals"] = 2}})
        menu_references["prediction_settings"] = menu_references["prediction"]:create_settings()
        menu_references["resolver_rate"] = menu_references["prediction_settings"]:create_element({["name"] = "resolver rate"}, {["slider"] = {["flag"] = "resolver_rate", ["min"] = 0, ["suffix"] = "s", ["max"] = 0.1, ["default"] = 0.037, ["decimals"] = 4}})
        menu_references["shot_delay"] = menu_references["general_section"]:create_element({["name"] = "shot delay"}, {["slider"] = {["flag"] = "shot_delay", ["min"] = 0, ["max"] = 1000, ["suffix"] = "ms", ["default"] = 0, ["min_text"] = "none"}})
        menu_references["ragebot_field_of_view"] = menu_references["general_section"]:create_element({["name"] = "field of view"}, {["slider"] = {["flag"] = "ragebot_field_of_view", ["min"] = 5, ["max"] = 180, ["suffix"] = "", ["default"] = 180, ["max_text"] = "full"}})
        menu_references["fire_cooldown"] = menu_references["general_section"]:create_element({["name"] = "fire cooldown"}, {["slider"] = {["flag"] = "fire_cooldown", ["min"] = 0, ["max"] = 300, ["suffix"] = "ms", ["default"] = 5, ["min_text"] = "none"}})
        menu_references["target_selection"] = menu_references["general_section"]:create_element({["name"] = "target selection"}, {})
        menu_references["target_selection_settings"] = menu_references["target_selection"]:create_settings()
        menu_references["target_selection_notification"] = menu_references["target_selection_settings"]:create_element({["name"] = "notification"}, {["toggle"] = {["flag"] = "target_selection_notification", ["default"] = false}})
        menu_references["target_selection_automatic"] = menu_references["target_selection_settings"]:create_element({["name"] = "automatic"}, {["toggle"] = {["flag"] = "target_selection_automatic", ["default"] = false}})
        menu_references["target_selection_cooldown"] = menu_references["target_selection_settings"]:create_element({["name"] = "cooldown"}, {["slider"] = {["flag"] = "target_selection_cooldown", ["default"] = 0.03, ["min"] = 0, ["max"] = 0.5, ["suffix"] = "s", ["min_text"] = "none", ["decimals"] = 2}})
        menu_references["target_selection_cooldown"]:set_visible(false)
        menu_references["target_selection_target_bind"] = menu_references["target_selection_settings"]:create_element({["name"] = "target bind"}, {["keybind"] = {["flag"] = "target_selection_target_bind", ["default"] = Enum["KeyCode"]["E"]}})
        menu_references["target_selection_target_when_shot_at"] = menu_references["target_selection_settings"]:create_element({["name"] = "target when shot at"}, {["toggle"] = {["flag"] = "target_selection_target_when_shot_at"}})
        menu_references["target_selection_target_when_shot_at_force"] = menu_references["target_selection_settings"]:create_element({["name"] = "force"}, {["toggle"] = {["flag"] = "target_selection_target_when_shot_at_force"}})
        menu_references["target_selection_target_when_shot_at_force"]:set_visible(false)
        menu_references["target_selection_untarget_when"] = menu_references["target_selection_settings"]:create_element({["name"] = "untarget when"}, {["dropdown"] = {["flag"] = "target_selection_untarget_when", ["default"] = {"invulnerable", "dead"}, ["options"] = {"better target", "invulnerable", "knocked", "flung", "dead"}, ["multi"] = true}})
        menu_references["target_statuses"] = menu_references["target_selection_settings"]:create_element({["name"] = "target statuses"}, {["dropdown"] = {["flag"] = "target_statuses", ["options"] = {"friendly", "neutral", "enemy"}, ["default"] = {"neutral"}, ["multi"] = true, ["requires_one"] = true}})
        menu_references["target_players"] = menu_references["target_selection_settings"]:create_element({["name"] = "target players"}, {["dropdown"] = {["flag"] = "target_players", ["options"] = {}, ["default"] = {}, ["multi"] = true, ["requires_one"] = false}})
        menu_references["target_selection_prioritize_by"] = menu_references["target_selection_settings"]:create_element({["name"] = "prioritize by"}, {["dropdown"] = {["flag"] = "prioritize_by", ["options"] = {"closest to character", "closest to mouse", "highest wanted", "lowest health", "random"}, ["default"] = {"closest to mouse"}}})
        menu_references["target_selection_ignore_if"] = menu_references["target_selection_settings"]:create_element({["name"] = "ignore if"}, {["dropdown"] = {["flag"] = "ignore_if", ["options"] = {"invulnerable", "knocked", "in void"}, ["default"] = {"invulnerable"}, ["multi"] = true}})
        menu_references["target_selection_target_distance"] = menu_references["target_selection_settings"]:create_element({["name"] = "target distance"}, {["slider"] = {["flag"] = "target_selection_target_distance", ["default"] = 250, ["max_text"] = "max", ["min"] = 5, ["max"] = 250, ["suffix"] = " studs"}})
    menu_references["visualization_section"] = menu["groups"]["main"]:create_section("ragebot", "visualization", 1, 0.3, 0.7)
        --menu_references["information_panel"] = menu_references["visualization_section"]:create_element({["name"] = "information panel"}, {["toggle"] = {["flag"] = "information_panel"}})
        --menu_references["information_panel_settings"] = menu_references["information_panel"]:create_settings()
        menu_references["crosshair_follow"] = menu_references["visualization_section"]:create_element({["name"] = "crosshair follow"}, {["toggle"] = {["flag"] = "crosshair_follow"}})
        menu_references["3d_target_circle"] = menu_references["visualization_section"]:create_element({["name"] = "3d target circle"}, {["toggle"] = {["flag"] = "3d_target_circle"}})
        menu_references["3d_target_circle_settings"] = menu_references["3d_target_circle"]:create_settings()
        menu_references["3d_target_circle_color"] = menu_references["3d_target_circle_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "3d_target_circle_color", ["default_color"] = color3_fromrgb(255, 184, 243), ["default_transparency"] = 0, ["transparency_flag"] = "3d_target_circle_transparency"}})
        menu_references["3d_target_circle_gradient_color"] = menu_references["3d_target_circle_settings"]:create_element({["name"] = "gradient color"}, {["colorpicker"] = {["color_flag"] = "3d_target_circle_gradient_color", ["default_color"] = color3_fromrgb(255, 255, 255), ["default_transparency"] = 1, ["transparency_flag"] = "3d_target_circle_gradient_transparency"}})
        menu_references["view_target"] = menu_references["visualization_section"]:create_element({["name"] = "view target"}, {["toggle"] = {["flag"] = "view_target"}})
        menu_references["view_target_settings"] = menu_references["view_target"]:create_settings()
        menu_references["view_target_stop_when_knocked"] = menu_references["view_target_settings"]:create_element({["name"] = "stop when knocked"}, {["toggle"] = {["flag"] = "view_target_stop_when_knocked"}})
        menu_references["face_target"] = menu_references["visualization_section"]:create_element({["name"] = "face target"}, {["toggle"] = {["flag"] = "face_target"}})
        menu_references["ragebot_field_of_view_show_fov"] = menu_references["visualization_section"]:create_element({["name"] = "show fov"}, {["toggle"] = {["flag"] = "ragebot_field_of_view_show_fov"}})
        menu_references["ragebot_field_of_view_show_fov_settings"] = menu_references["ragebot_field_of_view_show_fov"]:create_settings()
        menu_references["ragebot_field_of_view_follow_target"] = menu_references["ragebot_field_of_view_show_fov_settings"]:create_element({["name"] = "follow target"}, {["toggle"] = {["flag"] = "ragebot_field_of_view_follow_target"}})
        menu_references["ragebot_field_of_view_color"] = menu_references["ragebot_field_of_view_show_fov_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "ragebot_field_of_view_color", ["default_color"] = color3_fromrgb(181, 255, 246), ["default_transparency"] = 0.8, ["transparency_flag"] = "ragebot_field_of_view_transparency"}})
        menu_references["ragebot_field_of_view_outline"] = menu_references["ragebot_field_of_view_show_fov_settings"]:create_element({["name"] = "outline"}, {["colorpicker"] = {["color_flag"] = "ragebot_field_of_view_outline_color", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0.4, ["transparency_flag"] = "ragebot_field_of_view_outline_transparency"}})
        menu_references["ragebot_field_of_view_active_color"] = menu_references["ragebot_field_of_view_show_fov_settings"]:create_element({["name"] = "active color"}, {["colorpicker"] = {["color_flag"] = "ragebot_field_of_view_active_color", ["default_color"] = color3_fromrgb(233, 44, 44), ["default_transparency"] = 0.8, ["transparency_flag"] = "ragebot_field_of_view_active_transparency"}})
        menu_references["ragebot_field_of_view_active_outline"] = menu_references["ragebot_field_of_view_show_fov_settings"]:create_element({["name"] = "active outline"}, {["colorpicker"] = {["color_flag"] = "ragebot_field_of_view_active_outline", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0.8, ["transparency_flag"] = "ragebot_field_of_view_active_outline_transparency"}})
        menu_references["ragebot_tracer"] = menu_references["visualization_section"]:create_element({["name"] = "tracer"}, {["toggle"] = {["flag"] = "ragebot_tracer"}})
        menu_references["ragebot_tracer_settings"] = menu_references["ragebot_tracer"]:create_settings()
        menu_references["ragebot_tracer_thickness"] = menu_references["ragebot_tracer_settings"]:create_element({["name"] = "thickness"}, {["slider"] = {["flag"] = "ragebot_tracer_thickness", ["min"] = 2, ["max"] = 8, ["default"] = 2, ["suffix"] = "px"}})
        menu_references["ragebot_tracer_color"] = menu_references["ragebot_tracer_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "ragebot_tracer_color", ["default_color"] = color3_fromrgb(200, 30, 175), ["default_transparency"] = 0.1, ["transparency_flag"] = "ragebot_tracer_transparency"}})
        menu_references["ragebot_tracer_outline_color"] = menu_references["ragebot_tracer_settings"]:create_element({["name"] = "outline"}, {["colorpicker"] = {["color_flag"] = "ragebot_tracer_outline_color", ["default_color"] = color3_fromrgb(15, 15, 15), ["default_transparency"] = 0.05, ["transparency_flag"] = "ragebot_tracer_outline_transparency"}})
        menu_references["ragebot_tracer_origin"] = menu_references["ragebot_tracer_settings"]:create_element({["name"] = "origin"}, {["dropdown"] = {["flag"] = "ragebot_tracer_origin", ["options"] = {"character", "mouse", "gun"}, ["default"] = {"gun"}, ["requires_one"] = true}})
        menu_references["ragebot_tracer_end_point"] = menu_references["ragebot_tracer_settings"]:create_element({["name"] = "end point"}, {["dropdown"] = {["flag"] = "ragebot_tracer_end_point", ["options"] = {"predicted position", "character"}, ["default"] = {"predicted position"}, ["requires_one"] = true}})
    menu_references["anti_section"] = menu["groups"]["main"]:create_section("ragebot", "anti", 2, 0.3, 0)
        menu_references["sender_rate_value"] = menu_references["anti_section"]:create_element({["name"] = "sender rate value"}, {["toggle"] = {["flag"] = "sender_rate_value"}})
        menu_references["sender_rate_value_settings"] = menu_references["sender_rate_value"]:create_settings()
        menu_references["sender_rate_value_type"] = menu_references["sender_rate_value_settings"]:create_element({["name"] = "value"}, {["dropdown"] = {["flag"] = "sender_rate_value_type", ["options"] = {"automatic", "custom"}, ["default"] = {"automatic"}, ["multi"] = false, ["requires_one"] = true}})
        menu_references["sender_rate_value_rate"] = menu_references["sender_rate_value_settings"]:create_element({["name"] = "rate"}, {["slider"] = {["flag"] = "sender_rate_value_rate", ["min"] = 0, ["max"] = 500, ["default"] = 15, ["suffix"] = ""}})
        menu_references["sender_rate_value_rate"]:set_visible(false)
        menu_references["network_desync"] = menu_references["anti_section"]:create_element({["name"] = "network desync"}, {["toggle"] = {["flag"] = "network_desync"}})
        menu_references["velocity_desync"] = menu_references["anti_section"]:create_element({["name"] = "velocity desync"}, {["toggle"] = {["flag"] = "velocity_desync"}})
        menu_references["velocity_desync_settings"] = menu_references["velocity_desync"]:create_settings()
        menu_references["velocity_desync_rotate"] = menu_references["velocity_desync_settings"]:create_element({["name"] = "rotate"}, {["toggle"] = {["flag"] = "velocity_desync_rotate"}})
        menu_references["velocity_desync_disable_when"] = menu_references["velocity_desync_settings"]:create_element({["name"] = "disable when"}, {["dropdown"] = {["flag"] = "velocity_desync_disable_when", ["options"] = {"above x health", "auto stomping"}, ["multi"] = true, ["requires_one"] = false}})
        menu_references["velocity_desync_health"] = menu_references["velocity_desync_settings"]:create_element({["name"] = "health"}, {["slider"] = {["flag"] = "velocity_desync_health", ["min"] = 10, ["max"] = 100, ["default"] = 0, ["suffix"] = "%"}})
        menu_references["velocity_desync_health"]:set_visible(false)
        menu_references["velocity_desync_type"] = menu_references["velocity_desync_settings"]:create_element({["name"] = "type"}, {["dropdown"] = {["flag"] = "velocity_desync_type", ["options"] = {"limit", "high y", "high", "zero", "low"}, ["default"] = {"high"}, ["multi"] = false, ["requires_one"] = true}})
        menu_references["fake_position"] = menu_references["anti_section"]:create_element({["name"] = "fake position"}, {["toggle"] = {["flag"] = "fake_position"}})
        menu_references["fake_position_settings"] = menu_references["fake_position"]:create_settings()
        menu_references["fake_position_indicator"] = menu_references["fake_position_settings"]:create_element({["name"] = "position indicator"}, {["toggle"] = {["flag"] = "fake_position_indicator"}})
        menu_references["smooth_fake_position_indicator"] = menu_references["fake_position_settings"]:create_element({["name"] = "smooth"}, {["toggle"] = {["flag"] = "smooth_fake_position_indicator"}})
        menu_references["fake_position_indicator_icon_color"] = menu_references["fake_position_settings"]:create_element({["name"] = "icon color"}, {["colorpicker"] = {["color_flag"] = "fake_position_indicator_icon_color", ["default_color"] = color3_fromrgb(181, 255, 246), ["default_transparency"] = 0.55, ["transparency_flag"] = "fake_position_indicator_icon_transparency"}})
        menu_references["fake_position_indicator_glow_color"] = menu_references["fake_position_settings"]:create_element({["name"] = "glow color"}, {["colorpicker"] = {["color_flag"] = "fake_position_indicator_glow_color", ["default_color"] = color3_fromrgb(0, 0, 0), ["default_transparency"] = 0.92, ["transparency_flag"] = "fake_position_indicator_glow_transparency"}})
        menu_references["fake_position_indicator_background_color"] = menu_references["fake_position_settings"]:create_element({["name"] = "background color"}, {["colorpicker"] = {["color_flag"] = "fake_position_indicator_background_color", ["default_color"] = color3_fromrgb(0, 0, 0), ["default_transparency"] = 0.85, ["transparency_flag"] = "fake_position_indicator_background_transparency"}})
        menu_references["fake_position_notifications"] = menu_references["fake_position_settings"]:create_element({["name"] = "notifications"}, {["toggle"] = {["flag"] = "fake_position_notifications"}})
        menu_references["fake_position_safe_mode"] = menu_references["fake_position_settings"]:create_element({["name"] = "safe mode"}, {["toggle"] = {["flag"] = "fake_position_safe_mode"}})
        menu_references["refresh_every"] = menu_references["fake_position_settings"]:create_element({["name"] = "refresh every"}, {["slider"] = {["flag"] = "refresh_every", ["min"] = 5, ["max"] = 240, ["default"] = 240, ["suffix"] = "s", ["max_text"] = "never"}})
        menu_references["freeze_time"] = menu_references["fake_position_settings"]:create_element({["name"] = "freeze time"}, {["slider"] = {["flag"] = "fake_position_freeze_time", ["min"] = 0.05, ["max"] = 0.5, ["default"] = 0.2, ["decimals"] = 2, ["suffix"] = "s"}})
        menu_references["sleep_rate"] = menu_references["fake_position_settings"]:create_element({["name"] = "sleep rate"}, {["slider"] = {["flag"] = "sleep_rate", ["min"] = 1, ["max"] = 100, ["default"] = 1, ["suffix"] = "%"}})
        menu_references["void_hide"] = menu_references["anti_section"]:create_element({["name"] = "void hide"}, {["toggle"] = {["flag"] = "void_hide"}})
        menu_references["void_hide_settings"] = menu_references["void_hide"]:create_settings()
        menu_references["void_hide_type"] = menu_references["void_hide_settings"]:create_element({["name"] = "type"}, {["dropdown"] = {["options"] = game["PlaceId"] == 7213786345 and {"vc server"} or {"random", "bait"}, ["flag"] = "void_hide_type", ["requires_one"] = true, ["default"] = game["PlaceId"] == 7213786345 and {"vc server"} or {"random"}}})
        menu_references["void_hide_bait_distance"] = menu_references["void_hide_settings"]:create_element({["name"] = "bait distance"}, {["slider"] = {["min"] = 200, ["max"] = 2500, ["decimals"] = 0, ["default"] = 250, ["flag"] = "void_hide_bait_distance", ["suffix"] = " studs"}})
        menu_references["void_hide_bait_cooldown"] = menu_references["void_hide_settings"]:create_element({["name"] = "bait cooldown"}, {["slider"] = {["min"] = 0.01, ["max"] = 1.5, ["decimals"] = 2, ["default"] = 0.5, ["flag"] = "void_hide_bait_cooldown", ["suffix"] = "s"}})
        menu_references["void_hide_bait_time"] = menu_references["void_hide_settings"]:create_element({["name"] = "bait time"}, {["slider"] = {["min"] = 0.01, ["max"] = 0.3, ["decimals"] = 2, ["default"] = 0.03, ["flag"] = "void_hide_bait_time", ["suffix"] = "s"}})
        menu_references["void_hide_disable_when"] = menu_references["void_hide_settings"]:create_element({["name"] = "disable when"}, {["dropdown"] = {["options"] = {"target selected", "following target", "target knocked", "purchasing"}, ["flag"] = "void_hide_disable_when", ["multi"] = true, ["requires_one"] = false}})
        menu_references["void_hide_force_when"] = menu_references["void_hide_settings"]:create_element({["name"] = "force when"}, {["dropdown"] = {["options"] = {"not full health", "tabbed out", "reloading"}, ["flag"] = "void_hide_force_when", ["multi"] = true, ["requires_one"] = false}})
        menu_references["void_hide_exploit"] = menu_references["void_hide_settings"]:create_element({["name"] = "spam"}, {["toggle"] = {["flag"] = "void_hide_exploit"}})
        menu_references["void_hide_stop_if_forced"] = menu_references["void_hide_settings"]:create_element({["name"] = "stop if forced"}, {["toggle"] = {["flag"] = "void_hide_stop_if_forced"}})
        menu_references["void_hide_offset"] = menu_references["void_hide_settings"]:create_element({["name"] = "offset"}, {["slider"] = {["min"] = 0, ["max"] = 250, ["flag"] = "void_hide_offset", ["min_text"] = "off", ["suffix"] = "studs"}})
        menu_references["void_hide_void_time"] = menu_references["void_hide_settings"]:create_element({["name"] = "void time"}, {["slider"] = {["min"] = 0.01, ["max"] = 2, ["decimals"] = 3, ["default"] = 0.47, ["flag"] = "void_hide_void_time", ["suffix"] = "s"}})
        menu_references["void_hide_teleport_time"] = menu_references["void_hide_settings"]:create_element({["name"] = "teleport time"}, {["slider"] = {["min"] = 0.01, ["max"] = 2, ["decimals"] = 3, ["default"] = 0.1, ["flag"] = "void_hide_teleport_time", ["suffix"] = "s"}})
        menu_references["void_hide_stop_if_forced"]:set_visible(false)
    menu_references["utility_section"] = menu["groups"]["main"]:create_section("ragebot", "utility", 2, 0.7, 0.3)
        menu_references["safe_purchasing"] = menu_references["utility_section"]:create_element({["name"] = "safe purchasing"}, {["toggle"] = {["flag"] = "safe_purchasing"}})
        menu_references["safe_purchasing_settings"] = menu_references["safe_purchasing"]:create_settings()
        menu_references["safe_purchasing_avoid_statuses"] = menu_references["safe_purchasing_settings"]:create_element({["name"] = "avoid statuses"}, {["dropdown"] = {["flag"] = "safe_purchasing_avoid_statuses", ["options"] = {"friendly", "target", "neutral", "enemy"}, ["default"] = {"target", "enemy"}, ["multi"] = true, ["requires_one"] = true}})
        menu_references["auto_loadout"] = menu_references["utility_section"]:create_element({["name"] = "auto loadout"}, {["toggle"] = {["flag"] = "auto_loadout"}})
        menu_references["auto_loadout_settings"] = menu_references["auto_loadout"]:create_settings()
        menu_references["auto_loadout_disable_when"] = menu_references["auto_loadout_settings"]:create_element({["name"] = "disable when"}, {["dropdown"] = {["flag"] = "auto_loadout_disable_when", ["options"] = {"below x health", "forcefield"}, ["multi"] = true, ["requires_one"] = false, ["default"] = {"forcefield"}}})
        menu_references["auto_loadout_guns"] = menu_references["auto_loadout_settings"]:create_element({["name"] = "guns"}, {["dropdown"] = {["flag"] = "auto_loadout_guns", ["options"] = {"double-barrel sg", "tacticalshotgun", "flintlock", "revolver", "rifle", "knife", "ak47", "aug", "lmg"}, ["multi"] = true, ["requires_one"] = true, ["default"] = {"rifle"}}})
        menu_references["auto_loadout_ammo"] = menu_references["auto_loadout_settings"]:create_element({["name"] = "ammo"}, {["slider"] = {["flag"] = "auto_loadout_ammo", ["min"] = 0, ["max"] = 50, ["default"] = 5, ["suffix"] = "x"}})
        menu_references["follow_target"] = menu_references["utility_section"]:create_element({["name"] = "follow target"}, {["toggle"] = {["flag"] = "follow_target"}})
        menu_references["follow_target_settings"] = menu_references["follow_target"]:create_settings()
        menu_references["follow_target_style"] = menu_references["follow_target_settings"]:create_element({["name"] = "follow style"}, {["dropdown"] = {["flag"] = "follow_target_dropdown", ["options"] = {"random spam", "random", "strafe"}, ["default"] = {"random"}, ["multi"] = false, ["requires_one"] = true}})
        menu_references["follow_target_stop_if"] = menu_references["follow_target_settings"]:create_element({["name"] = "stop if"}, {["dropdown"] = {["flag"] = "follow_target_stop_if", ["options"] = {"no gun equipped", "target knocked", "reloading"}, ["default"] = {"no gun equipped", "target knocked", "reloading"}, ["multi"] = true, ["requires_one"] = false}})
        menu_references["follow_target_distance"] = menu_references["follow_target_settings"]:create_element({["name"] = "distance"}, {["slider"] = {["flag"] = "follow_target_distance", ["min"] = 2, ["max"] = 200, ["default"] = 15, ["suffix"] = " studs"}})
        menu_references["follow_target_height"] = menu_references["follow_target_settings"]:create_element({["name"] = "height"}, {["slider"] = {["flag"] = "follow_target_height", ["min"] = -200, ["max"] = 200, ["default"] = 0, ["suffix"] = " studs"}})
        menu_references["follow_target_speed"] = menu_references["follow_target_settings"]:create_element({["name"] = "speed"}, {["slider"] = {["flag"] = "follow_target_speed", ["min"] = 1, ["max"] = 100, ["default"] = 75, ["suffix"] = "%"}})
        menu_references["follow_target_height"]:set_visible(false)
        menu_references["follow_target_speed"]:set_visible(false)
        menu_references["auto_stomp"] = menu_references["utility_section"]:create_element({["name"] = "auto stomp"}, {["toggle"] = {["flag"] = "auto_stomp"}})
        menu_references["auto_stomp_settings"] = menu_references["auto_stomp"]:create_settings()
        menu_references["auto_stomp_stop_when_dead"] = menu_references["auto_stomp_settings"]:create_element({["name"] = "stop when target dead"}, {["toggle"] = {["flag"] = "auto_stomp_stop_when_dead", ["default"] = true}})
        menu_references["auto_stomp_target_statuses"] = menu_references["auto_stomp_settings"]:create_element({["name"] = "target statuses"}, {["dropdown"] = {["flag"] = "auto_stomp_target_statuses", ["options"] = {"friendly", "neutral", "target", "enemy"}, ["default"] = {"target"}, ["multi"] = true, ["requires_one"] = true}})
        menu_references["auto_ammo"] = menu_references["utility_section"]:create_element({["name"] = "auto ammo"}, {["toggle"] = {["flag"] = "auto_ammo"}})
        menu_references["auto_ammo_settings"] = menu_references["auto_ammo"]:create_settings()
        menu_references["auto_ammo_disable_when"] = menu_references["auto_ammo_settings"]:create_element({["name"] = "disable when"}, {["dropdown"] = {["options"] = {"target alive"}, ["flag"] = "auto_ammo_disable_when", ["multi"] = true, ["requires_one"] = false}})
        menu_references["auto_ammo_minimum_clips"] = menu_references["auto_ammo_settings"]:create_element({["name"] = "minimum clips"}, {["slider"] = {["flag"] = "auto_ammo_minimum_clips", ["min"] = 0, ["max"] = 50, ["default"] = 1, ["suffix"] = "x"}})
        menu_references["auto_ammo_purchase_amount"] = menu_references["auto_ammo_settings"]:create_element({["name"] = "purchase amount"}, {["slider"] = {["flag"] = "auto_ammo_purchase_amount", ["min"] = 0, ["max"] = 50, ["default"] = 10, ["suffix"] = "x"}})
        menu_references["auto_armor"] = menu_references["utility_section"]:create_element({["name"] = "auto armor"}, {["toggle"] = {["flag"] = "auto_armor"}})
        menu_references["auto_armor_settings"] = menu_references["auto_armor"]:create_settings()
        menu_references["auto_armor_purchase_if_below"] = menu_references["auto_armor_settings"]:create_element({["name"] = "purchase if below"}, {["slider"] = {["flag"] = "auto_armor_purchase_if_below", ["min"] = 0, ["max"] = 100, ["default"] = 40, ["suffix"] = "%"}})
        menu_references["auto_armor_try_cooldown"] = menu_references["auto_armor_settings"]:create_element({["name"] = "try cooldown"}, {["slider"] = {["flag"] = "auto_armor_try_cooldown", ["min"] = 0, ["max"] = 2, ["default"] = 0.05, ["decimals"] = 2, ["suffix"] = "s"}})
        menu_references["anti_stomp"] = menu_references["utility_section"]:create_element({["name"] = "anti stomp"}, {["toggle"] = {["flag"] = "anti_stomp"}})
        menu_references["anti_stomp_settings"] = menu_references["anti_stomp"]:create_settings()
        menu_references["anti_stomp_teleport_back"] = menu_references["anti_stomp_settings"]:create_element({["name"] = "teleport back"}, {["toggle"] = {["flag"] = "anti_stomp_teleport_back"}})
        menu_references["auto_mask"] = menu_references["utility_section"]:create_element({["name"] = "auto mask"}, {["toggle"] = {["flag"] = "auto_mask"}})
        menu_references["auto_mask_settings"] = menu_references["auto_mask"]:create_settings()
        menu_references["auto_mask_disable_when"] = menu_references["auto_mask_settings"]:create_element({["name"] = "disable when"}, {["dropdown"] = {["options"] = {"not full health", "target alive"}, ["flag"] = "auto_mask_disable_when", ["multi"] = true, ["requires_one"] = false}})
        menu_references["auto_heal"] = menu_references["utility_section"]:create_element({["name"] = "auto heal"}, {["toggle"] = {["flag"] = "auto_heal"}})
        menu_references["auto_heal_settings"] = menu_references["auto_heal"]:create_settings()
        menu_references["auto_heal_purchase_if_below"] = menu_references["auto_heal_settings"]:create_element({["name"] = "purchase if below"}, {["slider"] = {["flag"] = "auto_heal_purchase_if_below", ["min"] = 0, ["max"] = 100, ["default"] = 70, ["suffix"] = "%"}})
        menu_references["auto_heal_try_cooldown"] = menu_references["auto_heal_settings"]:create_element({["name"] = "try cooldown"}, {["slider"] = {["flag"] = "auto_heal_try_cooldown", ["min"] = 0, ["max"] = 2, ["default"] = 0.05, ["decimals"] = 2, ["suffix"] = "s"}})
        menu_references["anti_taser"] = menu_references["utility_section"]:create_element({["name"] = "anti taser"}, {["toggle"] = {["flag"] = "anti_taser"}})
        menu_references["rapid_fire"] = menu_references["utility_section"]:create_element({["name"] = "rapid fire"}, {["toggle"] = {["flag"] = "rapid_fire", ["default"] = false}})
        --[[
        menu_references["control"] = menu_references["utility_section"]:create_element({["name"] = "control"}, {["toggle"] = {["flag"] = "control", ["default"] = false}})
        menu_references["control_settings"] = menu_references["control"]:create_settings()
        menu_references["control_chat_replies"] = menu_references["control_settings"]:create_element({["name"] = "chat replies"}, {["toggle"] = {["flag"] = "control_chat_replies", ["default"] = true}})
        --]]
    -- >> ( ragebot )

    local automatic = false
    local do_notification = false
    local ragebot_hitbox = "Head"
    local target_distance = true
    local ragebot_field_of_view = true
    local ragebot_untarget_when_better_target = false
    local ragebot_untarget_when_invulnerable = false
    local ragebot_untarget_when_dead = true
    local ragebot_untarget_when_knocked = false
    local ragebot_untarget_when_flung = false
    local ragebot_ignore_if_invulnerable = true
    local ragebot_ignore_if_in_void = false
    local ragebot_ignore_if_knocked = false
    local resolver_rate = 0.043

    local target_last_position = nil
    local target_velocity = nil
    local targets = {}

    local target_friendly = false
    local target_neutral = true
    local target_enemy = false

    local last_refresh = clock()
    local last_fire = clock()

    local fov_circle = nil
    local fov_circle_outline = nil
    local shoot = nil

    do
        for _, new_upvalue in getupvalues(rawget(require(replicated_storage["Modules"]["GunHandler"]), "shoot")) do
            if type(new_upvalue) == "function" and getinfo(new_upvalue) and getinfo(new_upvalue)["name"] == "shoot" then
                shoot = new_upvalue
                break
            end
        end

        if not shoot or not getinfo(shoot).source:find("Gun") then
            local_player:Kick("Please rejoin.")
            return
        end
    end

    local get_closest_to_mouse_position = LPH_NO_VIRTUALIZE(function(dt, hrp)
        local mouse_pos = get_mouse_location(user_input_service)
        local is_rifle = local_tool and (local_tool["Name"] == "[Rifle]" or local_tool["Name"] == "[Flintlock]") or false
        local closest = 9e9
        local best_hrp = nil
        local best = nil

        for player, data in player_data do
            if not data[7] and not data[18] then
                local status = data[1]

                if status == 3 and target_enemy or status == 2 and target_friendly or status == 1 and target_neutral or ragebot_targets[data] then
                    local parts = data[4]
                    local hrp = parts["HumanoidRootPart"]

                    if hrp then
                        local hrp_position = hrp["Position"]
                        local position, on_screen = world_to_viewport_point(camera, hrp_position)

                        if on_screen then
                            if target_distance ~= true then
                                local distance = (local_client_position["p"] - hrp_position)["Magnitude"]

                                if distance > target_distance then
                                    continue
                                end
                            end

                            local distance = (vector2_new(position["X"], position["Y"]) - mouse_pos)["Magnitude"]

                            if (ragebot_field_of_view == true or distance <= ragebot_field_of_view) and distance < closest then
                                if ragebot_ignore_if_in_void and hrp_position["Magnitude"] > 9e8 then
                                    continue
                                elseif ragebot_ignore_if_invulnerable and ((not is_rifle and (parts["FORCEFIELD"] or parts["ForceField"])) or parts["GRABBING_CONSTRAINT"]) then
                                    continue
                                elseif ragebot_ignore_if_knocked and data[18] then
                                    continue
                                end

                                closest = distance
                                best, best_hrp = data, hrp
                            end
                        end
                    end
                end
            end
        end

        if best ~= ragebot_target then
            set_ragebot_target(best, "ragebot target set to "..(best and best[2]["Name"] or "nobody"))
        end

        return best, best_hrp
    end)

    local get_closest_to_character_position = LPH_NO_VIRTUALIZE(function(dt)
        local mouse_pos = get_mouse_location(user_input_service)
        local is_rifle = local_tool and (local_tool["Name"] == "[Rifle]" or local_tool["Name"] == "[Flintlock]") or false
        local closest = math["huge"]
        local best_hrp = nil
        local best = nil

        for player, data in player_data do
            if not data[7] and not data[18] then
                local status = data[1]
                if status == 3 and target_enemy or status == 2 and target_friendly or status == 1 and target_neutral or ragebot_targets[data] then
                    local parts = data[4]
                    local hrp = parts["HumanoidRootPart"]

                    if hrp then
                        local hrp_position = hrp["Position"]

                        if ragebot_field_of_view ~= true then
                            local position, on_screen = world_to_viewport_point(camera, hrp_position)

                            if on_screen then
                                local distance = (vector2_new(position["X_r"], position["Y"]) - mouse_pos)["Magnitude"]

                                if distance > ragebot_field_of_view then
                                    continue
                                end
                            else
                                continue
                            end
                        end

                        if target_distance ~= true then
                            local distance = (local_client_position["p"] - hrp_position)["Magnitude"]

                            if distance > target_distance then
                                continue
                            end
                        end

                        local distance = (local_client_position["p"] - hrp_position)["Magnitude"]

                        if distance < closest then
                            if ragebot_ignore_if_in_void and hrp_position["Magnitude"] > 9e8 then
                                continue
                            elseif ragebot_ignore_if_invulnerable and ((not is_rifle and (parts["FORCEFIELD"] or parts["ForceField"])) or parts["GRABBING_CONSTRAINT"]) then
                                continue
                            elseif ragebot_ignore_if_knocked and data[18] then
                                 continue
                            end

                            closest = distance
                            best, best_hrp = data, hrp
                        end
                    end
                end
            end
        end

        if best ~= ragebot_target then
            set_ragebot_target(best, "ragebot target set to "..(best and best[2]["Name"] or "nobody"))
        end

        return best, best_hrp
    end)

    local get_lowest_health = LPH_NO_VIRTUALIZE(function(dt, client_hrp)
        local mouse_pos = get_mouse_location(user_input_service)
        local is_rifle = local_tool and (local_tool["Name"] == "[Rifle]" or local_tool["Name"] == "[Flintlock]") or false
        local closest = math["huge"]
        local best_hrp = nil
        local best = nil

        for player, data in player_data do
            if not data[7] and not data[18] then
                local status = data[1]

                if status == 3 and target_enemy or status == 2 and target_friendly or status == 1 and target_neutral or ragebot_targets[data] then
                    local parts = data[4]
                    local hrp = parts["HumanoidRootPart"]

                    if hrp then
                        local hrp_position = hrp["Position"]

                        if ragebot_field_of_view ~= true then
                            local position, on_screen = world_to_viewport_point(camera, hrp_position)

                            if on_screen then
                                local distance = (vector2_new(position["X"], position["Y"]) - mouse_pos)["Magnitude"]

                                if distance > ragebot_field_of_view then
                                    continue
                                end
                            end
                        end
                        if target_distance ~= true then
                            local distance = (local_client_position["p"] - hrp_position)["Magnitude"]

                            if distance > target_distance then
                                continue
                            end
                        end

                        local health = data[9]

                        if health < closest then
                            if ragebot_ignore_if_in_void and hrp_position["Magnitude"] > 9e8 then
                                continue
                            elseif ragebot_ignore_if_invulnerable and ((not is_rifle and (parts["FORCEFIELD"] or parts["ForceField"])) or parts["GRABBING_CONSTRAINT"]) then
                                continue
                            elseif ragebot_ignore_if_knocked and data[18] then
                                continue
                            end

                            closest = health
                            best, best_hrp = data, hrp
                        end
                    end
                end
            end
        end

        if best ~= ragebot_target then
            set_ragebot_target(best, "ragebot target set to "..(best and best[2]["Name"] or "nobody"))
        end

        return best, best_hrp
    end)

    local get_highest_wanted = LPH_NO_VIRTUALIZE(function()
        local mouse_pos = get_mouse_location(user_input_service)
        local is_rifle = local_tool and (local_tool["Name"] == "[Rifle]" or local_tool["Name"] == "[Flintlock]") or false
        local highest = 0
        local best_hrp = nil
        local best = nil

        for player, data in player_data do
            if not data[7] and not data[18] then
                local status = data[1]

                if status == 3 and target_enemy or status == 2 and target_friendly or status == 1 and target_neutral or ragebot_targets[data] then
                    local parts = data[4]
                    local hrp = parts["HumanoidRootPart"]

                    if hrp then
                        local hrp_position = hrp["Position"]
                        if ragebot_field_of_view ~= true then
                            local position, on_screen = world_to_viewport_point(camera, hrp_position)

                            if on_screen then
                                local distance = (vector2_new(position["X"], position["Y"]) - mouse_pos)["Magnitude"]

                                if distance > ragebot_field_of_view then
                                    continue
                                end
                            end
                        end
                        if target_distance ~= true then
                            local distance = (local_client_position["p"] - hrp_position)["Magnitude"]

                            if distance > target_distance then
                                continue
                            end
                        end

                        local information = data[17]

                        if information then
                            local wanted = tonumber(information["Wanted"]["Value"])
                            if wanted > highest then
                                if ragebot_ignore_if_in_void and hrp_position["Magnitude"] > 9e8 then
                                    continue
                                elseif ragebot_ignore_if_invulnerable and ((not is_rifle and (parts["FORCEFIELD"] or parts["ForceField"])) or parts["GRABBING_CONSTRAINT"]) then
                                    continue
                                elseif ragebot_ignore_if_knocked and data[18] then
                                    continue
                                end

                                highest = wanted
                                best, best_hrp = data, hrp
                            end
                        end
                    end
                end
            end
        end

        if best ~= ragebot_target then
            set_ragebot_target(best, "ragebot target set to "..(best and best[2]["Name"] or "nobody"))
        end

        return best, best_hrp
    end)

    local get_random = LPH_NO_VIRTUALIZE(function()
        local mouse_pos = get_mouse_location(user_input_service)
        local is_rifle = local_tool and (local_tool["Name"] == "[Rifle]" or local_tool["Name"] == "[Flintlock]") or false
        local best_hrp = nil
        local best = nil

        local targets = {}

        for player, data in player_data do
            if not data[7] and not data[18] then
                local status = data[1]

                if status == 3 and target_enemy or status == 2 and target_friendly or status == 1 and target_neutral or ragebot_targets[data] then
                    local parts = data[4]
                    local hrp = parts["HumanoidRootPart"]

                    if hrp then
                        local hrp_position = hrp["Position"]
                        if ragebot_field_of_view ~= true then
                            local position, on_screen = world_to_viewport_point(camera, hrp_position)

                            if on_screen then
                                local distance = (vector2_new(position["X"], position["Y"]) - mouse_pos)["Magnitude"]

                                if distance > ragebot_field_of_view then
                                    continue
                                end
                            end
                        end
                        if target_distance ~= true then
                            local distance = (local_client_position["p"] - hrp_position)["Magnitude"]

                            if distance > target_distance then
                                continue
                            end
                        end

                        if ragebot_ignore_if_in_void and hrp_position["Magnitude"] > 9e8 then
                            continue
                        elseif ragebot_ignore_if_invulnerable and ((not is_rifle and (parts["FORCEFIELD"] or parts["ForceField"])) or parts["GRABBING_CONSTRAINT"]) then
                            continue
                        elseif ragebot_ignore_if_knocked and data[18] then
                            continue
                        end

                        targets[#targets+1] = {data, hrp}
                    end
                end
            end
        end

        if #targets > 0 then
            local new_best = targets[math_random(#targets)]
            best = new_best[1]
            best_hrp = new_best[2]
        end

        if best ~= ragebot_target then
            set_ragebot_target(best, "ragebot target set to "..(best and best[2]["Name"] or "nobody"))
        end

        return best, best_hrp
    end)

    -- >> ( main ragebot )

    local get_ragebot_target = get_closest_to_mouse_position

    local prediction = 0

    local last_auto = clock()

    local fire_cooldown = flags["fire_cooldown"]/1000
    local target_cooldown = flags["target_selection_cooldown"]
    local auto_fire_always_fire = flags["auto_fire_always_fire"]

    local target_changed_signal = signals["on_ragebot_target_changed"]
    local defensive_positions = {}
    local void_spam_resolver_accuracy = 1.35
    local void_spam_resolver_lerp = 0.1
    local void_spam_resolver_void_weight = 0.2
    local void_spam_resolver_position_weight = 1.5

    set_ragebot_target = LPH_NO_VIRTUALIZE(function(target, message)
        if ragebot_target == target then
            return
        end

        if do_notification and message and message ~= "" then
            new_notification((message and message ~= "") and message or "ragebot target set to none", 1)
        end

        ragebot_aim_position = nil
        target_velocity = vector3_zero
        ragebot_target = target
        target_last_position = nil
        target_changed_signal:Fire(target)

        if fov_circle then
            tween(fov_circle, {["Color"] = ragebot_target and flags["ragebot_field_of_view_active_color"] or flags["ragebot_field_of_view_color"], ["Transparency"] = ragebot_target and 1-flags["ragebot_field_of_view_active_transparency"] or 1-flags["ragebot_field_of_view_transparency"]}, quad, out, 0.11)
        end

        if fov_circle_outline then
            tween(fov_circle_outline, {["Color"] = ragebot_target and flags["ragebot_field_of_view_active_outline"] or flags["ragebot_field_of_view_outline_color"], ["Transparency"] = ragebot_target and 1-flags["ragebot_field_of_view_active_outline_transparency"] or 1-flags["ragebot_field_of_view_outline_transparency"]}, quad, out, 0.11)
        end
    end)

    local is_defensive = false
    local params = RaycastParams["new"]()
    params["FilterType"] = Enum["RaycastFilterType"]["Exclude"]
    params["FilterDescendantsInstances"] = {}
    local raycast = workspace["Raycast"]

    local do_ragebot = LPH_JIT_MAX(function(dt, hrp)
        local target = ragebot_target
        local tick = clock()

        if automatic and not target and tick - last_auto > target_cooldown and flags["ragebot"] then
            last_auto = tick
            get_ragebot_target(dt, hrp)
            target = ragebot_target
        end

        local did_defensive = false

        if ragebot_target == nil and ragebot_aim_position then
            ragebot_aim_position = nil
            target_last_position = nil
            target_velocity = vector3_zero
        end

        local mouse_position = get_mouse_location(user_input_service)

        if fov_circle then
            local old_position = fov_circle["Position"]
            local goal_position = flags["ragebot_field_of_view_follow_target"] and ragebot_aim_position or nil
            if goal_position then
                local position, on_screen = world_to_viewport_point(camera, goal_position)

                if on_screen then
                    goal_position = vector2_new(position["X"], position["Y"])
                else
                    goal_position = nil
                end
            end

            local new_position = old_position + ((goal_position or mouse_position) - old_position) * dt*4^2
            fov_circle["Position"] = new_position
            fov_circle_outline["Position"] = new_position
        end

        local new_cframe = cframe_new(vector3_new(math_random(-2147483647, 2147483647), math_random(-400, 2147483647), math_random(-2147483647, 2147483647)))

        if target and hrp then
            local parts = target[4]
            local hitbox = parts[ragebot_hitbox]

            if flags["auto_fire_at_target_vehicle"] then
                hitbox = target[19] or hitbox
            end

            local torso = parts["HumanoidRootPart"]
            local is_rifle = local_tool and (local_tool["Name"] == "[Rifle]" or local_tool["Name"] == "[Flintlock]") or false
            local forcefield = parts["ForceField"]
            local forcefield2 = parts["FORCEFIELD"]
            local grabbing_constraint = parts["GRABBING_CONSTRAINT"]

            if (ragebot_untarget_when_dead and target[7]) or (ragebot_untarget_when_knocked and target[18]) or (ragebot_untarget_when_flung and torso and torso["Velocity"]["Magnitude"] > 100) or ragebot_untarget_when_invulnerable and ((not is_rifle and forcefield2) or grabbing_constraint or forcefield) then
                set_ragebot_target(nil, "ragebot target set to nobody due to condition met")
            elseif ragebot_untarget_when_better_target then
                local target = get_ragebot_target(dt, hrp, true)
                if target and ragebot_target ~= target then
                    set_ragebot_target(target, "ragebot target set to "..target[2]["Name"].." due to better target")
                end
            end

            if ragebot_target == nil then
                target_velocity = vector3_zero
                ragebot_aim_position = nil
                target_last_position = nil
                torso = nil
                last_refresh = clock()
            elseif torso then
                if clock() - last_refresh > resolver_rate then
                    local torso_position = torso["Position"]

                    if target_last_position then
                        local distance = (torso_position - target_last_position)
                        target_velocity = distance / (clock() - last_refresh)
                    end

                    target_last_position = torso_position
                    last_refresh = clock()
                end
            end

            if hitbox then
                local hitbox_position = hitbox["Position"]

                local current_time = clock()
            
                local positions_to_remove = {}
                for position, data in defensive_positions do
                    local time_delta = current_time - data["last_update_time"]
                    if time_delta > 0 then
                        local rate = flags["void_spam_resolver_forget_rate"]/20
                        data["weight"]-=((position - hitbox_position)["magnitude"] > 200 and time_delta*(rate*2.5) or time_delta*rate)
                        data["last_update_time"] = current_time
                    end
            
                    if data["weight"] < 0.1 then
                        positions_to_remove[#positions_to_remove+1] = position
                    end
                end

                for _, position in positions_to_remove do
                    defensive_positions[position] = nil
                end
            
                local old_time = clock()
            
                ragebot_aim_position = hitbox_position
            
                if target_velocity then
                    ragebot_aim_position+=(target_velocity*(prediction == 0 and local_ping/500 or prediction == 2 and 0 or prediction))
                end

                if flags["auto_fire_at_backtrack"] then
                    local data = backtrack_data[target[2]]

                    if data then
                        local hitbox = data[2][ragebot_hitbox]

                        if hitbox then
                            hitbox_position = hitbox["Position"]
                            ragebot_aim_position = hitbox_position
                        end
                    end
                end
            
                local local_server_position = local_server_position["p"]
                local did_defensive = false
            
                if flags["auto_fire_defensive"] then
                    local weight_to_add = (hitbox_position["Magnitude"] < 9e5 and void_spam_resolver_position_weight or void_spam_resolver_void_weight)
                    local done = false
            
                    for position, data in defensive_positions do
                        if (position - hitbox_position).magnitude <= 200 then
                            local new_position = position:Lerp(hitbox_position, void_spam_resolver_lerp)
                        
                            defensive_positions[new_position] = {
                                weight = clamp(data.weight + weight_to_add, -1, 18),
                                last_update_time = current_time
                            }
                            defensive_positions[position] = nil
                        
                            done = true
                            break
                        end
                    end
            
                    if not done then
                        defensive_positions[hitbox_position] = { ["weight"] = weight_to_add, ["last_update_time"] = current_time }
                    end

                    local highest = nil
                    local highest_weight = 0
                    for position, data in defensive_positions do
                        if data["weight"] > highest_weight then
                            highest_weight = data["weight"]
                            highest = position
                        end
                    end
            
                    if highest and highest_weight > void_spam_resolver_accuracy then
                        ragebot_aim_position = highest
                        target_velocity = vector3_zero
                        target_last_position = highest
                        did_defensive = true
                    end
                end
            
                ragebot_aim_position = ragebot_force_position or ragebot_aim_position

                if custom_ragebot_aim_position then
                    ragebot_aim_position = custom_ragebot_aim_position
                    custom_ragebot_aim_position = nil
                end

                local is_rifle = nil
                for handle, local_gun in local_guns do
                    local parent = handle["Parent"]
                    if parent and (parent["Name"] == "[Rifle]" or parent["Name"] == "[Flintlock]") then
                        is_rifle = true
                        break
                    end
                end

                if local_gun and (((not local_reloading or auto_fire_always_fire) and not target[18] and not target[7] and (is_rifle or (not forcefield2 and not forcefield)) and not grabbing_constraint) and (flags["auto_fire"] and (auto_fire_always_fire or (((local_server_position-ragebot_aim_position)["Magnitude"] <= local_gun) or flags["follow_target"] or did_defensive)) and old_time-last_fire > fire_cooldown)) then
                    local delay = flags["shot_delay"]
                    if delay > 0 then
                        wait(delay/1000)
                    end

                    if local_gun then
                        local new_local_guns = {}
                        for handle, local_gun in local_guns do
                            local parent = handle["Parent"]

                            if parent and parent["Name"] == "[Rifle]" then
                                new_local_guns[#new_local_guns+1] = local_gun
                            end
                        end
                        for handle, local_gun in local_guns do
                            local parent = handle["Parent"]

                            if parent and parent["Name"] ~= "[Rifle]" then
                                new_local_guns[#new_local_guns+1] = local_gun
                            end
                        end

                        local pos = ragebot_aim_position
                        local origin = local_server_position

                        for i = 1, #new_local_guns do
                            local local_gun = new_local_guns[i]
                            local handle = local_gun[1]
                            local ammo = local_gun[3]

                            if ammo > 0 and handle["Parent"] and ((handle["Parent"]["Name"] == "[Rifle]" or handle["Parent"]["Name"] == "[Flintlock]") or (not target[4]["ForceField"] and not target[4]["FORCEFIELD"])) then
                                last_fire = clock()
                                setthreadidentity(8)
                                getfenv(shoot)["require"] = require
                                if not flags["auto_fire_dont_render"] then
                                    shoot({
                                        Shooter = local_character,
                                        Handle = handle,
                                        ForcedOrigin = origin,
                                        AimPosition = pos,
                                        BeamColor = color3_fromrgb(1, 0.545098, 0.14902),
                                        Range = local_gun[2]
                                    })
                                end

                                local dir = (pos-origin)
                                local Magnitude = dir["Magnitude"]
                                
                                for i = 1, ragebot_force_position and 2 or 1 do
                                    event:FireServer("ShootGun", handle, origin, pos, hitbox, (Magnitude <= 0 or Magnitude ~= Magnitude) and ((handle["Position"])-pos)["Unit"] or dir)
                                end

                                spawn(get_bullet_result, target[2], hitbox, origin, pos, target_velocity, did_defensive)

                                getfenv(shoot)["require"] = nil
                                setthreadidentity(4)
                            end
                        end
                    end
                end
            else
                target_last_position = nil
                ragebot_aim_position = nil
            end
        end

        is_defensive = did_defensive
    end)

    local update_targets = LPH_NO_VIRTUALIZE(function()
        targets = {}
        for player, data in player_data do
            local status = data[1]

            if target_friendly and status == 2 or target_neutral and status == 1 or target_enemy and status == 3 or ragebot_targets[player] then
                targets[#targets+1] = player
            end
        end
    end)

    local update_field_of_view = function()
        local value = flags["ragebot_field_of_view"]
        ragebot_field_of_view = value == 180 and true or (camera["ViewportSize"]["Magnitude"]/(pi/2))*(value/180)

        local is_number = type(ragebot_field_of_view) == "number"

        if fov_circle_outline then
            fov_circle_outline["Visible"] = is_number
            fov_circle_outline["Radius"] = ragebot_field_of_view
        end

        if fov_circle then
            fov_circle["Visible"] = is_number
            fov_circle["Radius"] = ragebot_field_of_view
        end
    end

    force_aim_position = function(character, position, timer)
        if ragebot_target and character and ragebot_target[3] == character then
            ragebot_force_position = position
            defensive_positions = {}
            delay(timer or local_ping/500, function()
                ragebot_force_position = nil
            end)
        end
    end

    is_defensive_active = LPH_NO_VIRTUALIZE(function()
        return is_defensive
    end)

    -- >> ( ragebot setting updaters )

    create_connection(menu_references["void_spam_resolver_position_weight"]["on_slider_change"], function(value)
        void_spam_resolver_position_weight = value
    end)

    create_connection(menu_references["void_spam_resolver_void_weight"]["on_slider_change"], function(value)
        void_spam_resolver_void_weight = value
    end)
    
    create_connection(menu_references["void_spam_resolver_accuracy"]["on_slider_change"], function(value)
        void_spam_resolver_accuracy = 1 + (0.6525 * ((-50 + value)/50))
    end)

    create_connection(menu_references["void_spam_resolver_lerp"]["on_slider_change"], function(value)
        void_spam_resolver_lerp = value/100
    end)
    
    create_connection(menu_references["auto_fire_defensive"]["on_toggle_change"], function(value)
        defensive_positions = {}
    end)

    create_connection(menu_references["target_selection_notification"]["on_toggle_change"], function(value)
        do_notification = value
    end)

    create_connection(menu_references["resolver_rate"]["on_slider_change"], function(value)
        resolver_rate = value
    end)

    create_connection(menu_references["target_selection_automatic"]["on_toggle_change"], function(value)
        automatic = value
        menu_references["target_selection_cooldown"]:set_visible(value)
    end)

    create_connection(menu_references["target_selection_cooldown"]["on_slider_change"], function(value)
        target_cooldown = value
    end)

    create_connection(menu_references["prediction"]["on_slider_change"], function(value)
        prediction = value/1000
    end)

    create_connection(menu_references["fire_cooldown"]["on_slider_change"], function(value)
        fire_cooldown = value/1000
    end)

    create_connection(menu_references["auto_fire_always_fire"]["on_toggle_change"], function(value)
        auto_fire_always_fire = value
    end)

    do
        local ragebot_player_status_changed_connection = nil
        local ragebot_local_tool_equipped_connection = nil
        local ragebot_player_loaded_connection = nil
        local ragebot_ammo_connection = nil
        local ragebot_camera_connection = nil

        create_connection(menu_references["ragebot_enabled"]["on_toggle_change"], LPH_JIT_MAX(function(value)
            targets = {}
            defensive_positions = {}

            if ragebot_target then
                set_ragebot_target(nil, nil)
            end

            target_last_position = nil
            target_velocity = nil

            if ragebot_player_loaded_connection then
                ragebot_player_loaded_connection:Disconnect()
                ragebot_player_loaded_connection = nil
            end

            if ragebot_player_status_changed_connection then
                ragebot_player_status_changed_connection:Disconnect()
                ragebot_player_status_changed_connection = nil
            end

            if ragebot_local_tool_equipped_connection then
                ragebot_local_tool_equipped_connection:Disconnect()
                ragebot_local_tool_equipped_connection = nil
            end

            if ragebot_ammo_connection then
                ragebot_ammo_connection:Disconnect()
                ragebot_ammo_connection = nil
            end

            if ragebot_camera_connection then
                ragebot_camera_connection:Disconnect()
                ragebot_camera_connection = nil
            end

            if not value then
                delay(0.15, function()
                    for i = 1, #heartbeat do
                        if heartbeat[i] == do_ragebot then
                            remove(heartbeat, i)
                            break
                        end
                    end
                end)
            else
                for i = 1, #heartbeat do
                    if heartbeat[i] == do_ragebot then
                        remove(heartbeat, i)
                        break
                    end
                end
            end

            if value then
                update_targets()

                heartbeat[#heartbeat+1] = do_ragebot

                if fov_circle then
                    tween(fov_circle, {["Transparency"] = -flags["ragebot_field_of_view_transparency"]+1}, circular, out, 0.15)
                    tween(fov_circle_outline, {['Transparency'] = -flags["ragebot_field_of_view_outline_transparency"]+1}, circular, out, 0.15)
                end

                ragebot_player_status_changed_connection = create_connection(signals["on_player_status_changed"], update_targets)
                ragebot_camera_connection = create_connection(camera:GetPropertyChangedSignal("ViewportSize"), update_field_of_view)
                ragebot_player_loaded_connection = create_connection(signals["on_player_character_added_quick"], force_aim_position)
            elseif fov_circle then
                tween(fov_circle, hide_transparency, circular, out, 0.15)
                tween(fov_circle_outline, hide_transparency, circular, out, 0.15)
            end
        end))
    end

    create_connection(menu_references["target_statuses"]["on_dropdown_change"], function(value)
        target_friendly = false
        target_neutral = false
        target_enemy = false

        for i = 1, #value do
            if value[i] == "friendly" then
                target_friendly = true
            elseif value[i] == "neutral" then
                target_neutral = true
            else
                target_enemy = true
            end
        end

        update_targets()
    end)

    create_connection(menu_references["ragebot_hitbox"]["on_dropdown_change"], function(value)
        ragebot_hitbox = value[1] == "head" and "Head" or "HumanoidRootPart"
    end)

    create_connection(menu_references["target_selection_target_distance"]["on_slider_change"], function(value)
        target_distance = value == 250 and true or value
    end)

    create_connection(menu_references["target_selection_automatic"]["on_toggle_change"], function(value)
        menu_references["target_selection_target_bind"]:set_visible(not value)
    end)

    create_connection(menu_references["target_selection_untarget_when"]["on_dropdown_change"], function(value)
        ragebot_untarget_when_dead = false
        ragebot_untarget_when_knocked = false
        ragebot_untarget_when_flung = false
        ragebot_untarget_when_invulnerable = false
        ragebot_untarget_when_better_target = false
        for i = 1, #value do
            local value = value[i]
            if value == "dead" then
                ragebot_untarget_when_dead = true
            elseif value == "knocked" then
                ragebot_untarget_when_knocked = true
            elseif value == "flung" then
                ragebot_untarget_when_flung = true
            elseif value == "better target" then
                ragebot_untarget_when_better_target = true
            elseif value == "invulnerable" then
                ragebot_untarget_when_invulnerable = true
            end
        end
    end)

    do
        local force_target = LPH_JIT_MAX(function(player)
            if player then
                local data = player_data[player]

                if data and (flags["target_selection_target_when_shot_at_force"] or ragebot_target == nil) and data[1] ~= 2 then
                    set_ragebot_target(data, "ragebot target set to "..player["Name"].." (shot at you)")
                end
            end
        end)

        local target_selection_target_when_shot_at_connection = nil

        create_connection(menu_references["target_selection_target_when_shot_at"]["on_toggle_change"], function(value)
            if target_selection_target_when_shot_at_connection then
                target_selection_target_when_shot_at_connection:Disconnect()
                target_selection_target_when_shot_at_connection = nil
            end

            menu_references["target_selection_target_when_shot_at_force"]:set_visible(value)

            if value then
                target_selection_target_when_shot_at_connection = create_connection(signals["on_shot_at"], force_target)
            end
        end)
    end

    create_connection(menu_references["target_selection_ignore_if"]["on_dropdown_change"], function(value)
        ragebot_ignore_if_knocked = false
        ragebot_ignore_if_in_void = false
        ragebot_ignore_if_invulnerable = false
        for i = 1, #value do
            local value = value[i]
            if value == "invulnerable" then
                ragebot_ignore_if_invulnerable = true
            elseif value == "in void" then
                ragebot_ignore_if_in_void = true
            elseif value == "knocked" then
                ragebot_ignore_if_knocked = true
            end
        end
    end)

    create_connection(menu_references["target_selection_prioritize_by"]["on_dropdown_change"], function(value)
        local value = value[1]
        get_ragebot_target = value == "random" and get_random or value == "lowest health" and get_lowest_health or value == "closest to character" and get_closest_to_character_position or value == "closest to mouse" and get_closest_to_mouse_position or get_highest_wanted
    end)

    create_connection(menu_references["target_selection_target_bind"]["on_key_press"], function()
        if flags["ragebot"] and not flags["target_selection_automatic"] then
            if ragebot_target then
                set_ragebot_target(nil, nil)
            else
                get_ragebot_target(0, local_parts["HumanoidRootPart"])
            end
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_show_fov"]["on_toggle_change"], function(value)
        if fov_circle then
            fov_circle:Destroy()
            fov_circle = nil
        end

        if fov_circle_outline then
            fov_circle_outline:Destroy()
            fov_circle_outline = nil
        end

        if value then
            local is_number = type(ragebot_field_of_view) == "number"
            fov_circle = create_real_drawing("Circle", {
                ["Radius"] = is_number and ragebot_field_of_view or 0,
                ["Color"] = ragebot_target and flags["ragebot_field_of_view_active_color"] or flags["ragebot_field_of_view_color"],
                ["Filled"] = true,
                ["Transparency"] = 0,
                ["Thickness"] = 1,
                ["ZIndex"] = 11,
                ["Visible"] = is_number
            })
            fov_circle_outline = create_real_drawing("Circle", {
                ["Radius"] = is_number and ragebot_field_of_view or 0,
                ["Color"] = ragebot_target and flags["ragebot_field_of_view_active_outline"] or flags["ragebot_field_of_view_outline_color"],
                ["Filled"] = false,
                ["Transparency"] = 0,
                ["Thickness"] = 2,
                ["ZIndex"] = 10,
                ["Visible"] = is_number
            })
            if flags["ragebot"] then
                tween(fov_circle, {["Transparency"] = ragebot_target and -flags["ragebot_field_of_view_active_transparency"]+1 or -flags["ragebot_field_of_view_transparency"]+1}, circular, out, 0.15)
                tween(fov_circle_outline, {['Transparency'] = ragebot_target and -flags["ragebot_field_of_view_active_outline_transparency"]+1 or -flags["ragebot_field_of_view_outline_transparency"]+1}, circular, out, 0.15)
            end
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_color"]["on_color_change"], function(value)
        if fov_circle and not ragebot_target then
            fov_circle["Color"] = value
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_color"]["on_transparency_change"], function(value)
        local transparency = 1-value
        if fov_circle and flags["ragebot"] and not ragebot_target then
            tween(fov_circle, {["Transparency"] = transparency}, circular, out, 0)
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_outline"]["on_color_change"], function(value)
        if fov_circle_outline and not ragebot_target then
            fov_circle_outline["Color"] = value
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_outline"]["on_transparency_change"], function(value)
        local transparency = 1-value

        if fov_circle_outline and flags["ragebot"] and not ragebot_target then
            tween(fov_circle_outline, {['Transparency'] = transparency}, circular, out, 0.15)
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_active_color"]["on_color_change"], function(value)
        if fov_circle and not ragebot_target then
            fov_circle["Color"] = value
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_active_color"]["on_transparency_change"], function(value)
        local transparency = 1-value
        if fov_circle and flags["ragebot"] and ragebot_target then
            tween(fov_circle, {["Transparency"] = transparency}, circular, out, 0)
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_active_outline"]["on_color_change"], function(value)
        if fov_circle_outline and ragebot_target then
            fov_circle_outline["Color"] = value
        end
    end)

    create_connection(menu_references["ragebot_field_of_view_active_outline"]["on_transparency_change"], function(value)
        local transparency = 1-value

        if fov_circle_outline and flags["ragebot"] and ragebot_target then
            tween(fov_circle_outline, {['Transparency'] = transparency}, circular, out, 0.15)
        end
    end)

    create_connection(menu_references["ragebot_field_of_view"]["on_slider_change"], update_field_of_view)

    -- >> ( follow target )
    do
        local rad = math["rad"]
        local follow_target_stop_if_target_knocked = true
        local follow_target_stop_if_no_gun_equipped = true
        local follow_target_stop_if_reloading = true
        local cframe_angles = CFrame["Angles"]

        local follow_target_style = "random spam"
        local follow_target_avoid_last_tick = clock()
        local distance = flags["follow_target_distance"]
        local speed = 75
        local height = vector3_zero

        local follow_target = LPH_JIT_MAX(function(dt, hrp, bypass)
            if ragebot_target and hrp and ((not in_void and not stomping and not purchasing) or bypass) and ragebot_aim_position and not ragebot_target[7] then
                if follow_target_stop_if_reloading and local_reloading then -- theres a reason for not using else ifs i think? i forget but im not risking it
                    local_following = false
                    return
                elseif follow_target_stop_if_target_knocked and ragebot_target[18] then
                    local_following = false
                    return
                elseif follow_target_stop_if_no_gun_equipped and not local_gun then
                    local_following = false
                    return
                end

                local old_cframe = hrp["CFrame"]
                local new_cframe = old_cframe

                if follow_target_style == "random" then
                    new_cframe = cframe_new(ragebot_aim_position + vector3_new(math_random(-distance, distance), math_random(-distance, distance), math_random(-distance, distance)))
                    new_cframe*=cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359)))
                elseif follow_target_style == "random spam" then
                    local tick = clock()
                    local difference = tick - follow_target_avoid_last_tick
                    local old_difference = difference < 0.06
                    if difference > 0.11 or old_difference then
                        new_cframe = cframe_new(ragebot_aim_position + vector3_new(math_random(-distance, distance), math_random(-distance, distance), math_random(-distance, distance)))
                        if not old_difference then
                            follow_target_avoid_last_tick = tick
                        end
                    else
                        new_cframe = cframe_new(math_random(-2147483647, 2147483647), math_random(-400, 2147483647), math_random(-2147483647, 2147483647))
                    end
                    new_cframe*=cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359)))
                else
                    new_cframe = cframe_angles(0,rad(360 * ((clock() * speed) % 1)),0) * cframe_new(0,0,distance) + (ragebot_aim_position + height)
                end

                local_following = true

                if bypass then
                    return new_cframe
                end

                hrp["CFrame"] = new_cframe
                render_stepped_wait(render_stepped)
                hrp["CFrame"] = old_cframe
            else
                local_following = false
            end
        end)

        create_connection(menu_references["follow_target"]["on_toggle_change"], function(value)
            for i = 1, #anti_aim do
                if anti_aim[i] == follow_target then
                    remove(anti_aim, i)
                    break
                end
            end

            local_following = false

            if value then
                anti_aim[#anti_aim+1] = follow_target
            else
                local camera_cframe = camera["CFrame"]
                render_stepped_wait(render_stepped)
                camera["CFrame"] = camera_cframe
            end
        end)

        create_connection(menu_references["follow_target_style"]["on_dropdown_change"], function(value)
            follow_target_style = value[1]
            menu_references["follow_target_height"]:set_visible(follow_target_style == "strafe")
            menu_references["follow_target_speed"]:set_visible(follow_target_style == "strafe")
        end)

        create_connection(menu_references["follow_target_distance"]["on_slider_change"], function(value)
            distance = value
        end)

        create_connection(menu_references["follow_target_speed"]["on_slider_change"], function(value)
            speed = value
        end)

        create_connection(menu_references["follow_target_height"]["on_slider_change"], function(value)
            height = vector3_new(0, value, 0)
        end)

        create_connection(menu_references["follow_target_stop_if"]["on_dropdown_change"], function(value)
            follow_target_stop_if_reloading = false
            follow_target_stop_if_target_knocked = false
            follow_target_stop_if_no_gun_equipped = false

            for i = 1, #value do
                local value = value[i]
                if value == "reloading" then
                    follow_target_stop_if_reloading = true
                elseif value == "target knocked" then
                    follow_target_stop_if_target_knocked = true
                elseif value == "no gun equipped" then
                    follow_target_stop_if_no_gun_equipped = true
                end
            end
        end)
    end

    -- >> ( rapid fire )

    do
        local constant_cache = {}
        local upvalue_cache = {}
        local connection = nil
        local connection2 = nil

        local on_tool_added = function(tool)
            if not tool then
                return
            end

            local connection = getconnections(tool["Activated"])[1]

            if not connection then
                return
            end

            local old = connection["Function"]

            if not old or constant_cache[old] or upvalue_cache[old] or not getinfo(old)["source"]:find("GunClient") then
                return
            end

            for _, constant in getconstants(old) do
                if type(constant) == "number" and constant ~= -10000 and constant ~= 0.05 then
                    constant_cache[old] = constant
                    setconstant(old, _, -10000)
                    break
                end
            end

            for _, upvalue in getupvalues(old) do
                if type(upvalue) == "number" and upvalue ~= 0 and upvalue ~= 0.05 and upvalue < 10 then
                    upvalue_cache[old] = upvalue
                    setupvalue(old, _, -10000)
                    return
                end
            end
        end

        local reset = LPH_JIT_MAX(function()
            constant_cache = {}
            upvalue_cache = {}
        end)

        create_connection(menu_references["rapid_fire"]["on_toggle_change"], function(value)
            for func, data in constant_cache do
                for _, constant in getconstants(func) do
                    if type(constant) == "number" and constant == -10000 then
                        setconstant(func, _, data)
                        break
                    end
                end
                constant_cache[func] = nil
            end

            for func, data in upvalue_cache do
                for _, upvalue in getupvalues(func) do
                    if type(upvalue) == "number" and upvalue == -10000 then
                        setupvalue(func, _, data)
                        break
                    end
                end
                upvalue_cache[func] = nil
            end

            if connection then
                connection:Disconnect()
                connection = nil
            end

            if connection2 then
                connection2:Disconnect()
                connection2 = nil
            end

            if value then
                for handle, data in local_guns do
                    local tool = handle["Parent"]

                    if tool then
                        on_tool_added(tool)
                    end
                end

                connection2 = create_connection(signals["on_local_character_added"], reset)
                connection = create_connection(signals["on_local_tool_equipped"], on_tool_added)
            end
        end)
    end

    -- >> ( sender rate value )

    do
        local old = getfflag("S2PhysicsSenderRate")

        local do_automatic = LPH_NO_VIRTUALIZE(function()
            setfflag("S2PhysicsSenderRate", tostring(round(local_fps, 1)))
        end)

        create_connection(menu_references["sender_rate_value"]["on_toggle_change"], function(value)
            local rate = flags["sender_rate_value_type"][1]

            setfflag("S2PhysicsSenderRate", value and (rate == "custom" and tostring(flags["sender_rate_value_rate"])) or old)
        
            for i = 1, #anti_aim do
                local func = anti_aim[i]
                if func == do_automatic then
                    remove(anti_aim, i)
                    break
                end
            end

            if value and rate == "automatic" then
                anti_aim[#anti_aim+1] = do_automatic
            end
        end)

        create_connection(menu_references["sender_rate_value_type"]["on_dropdown_change"], function(value)
            local rate = flags["sender_rate_value_type"][1]
            menu_references["sender_rate_value_rate"]:set_visible(rate == "custom")

            for i = 1, #anti_aim do
                if anti_aim[i] == do_automatic then
                    remove(anti_aim, i)
                    break
                end
            end

            if flags["sender_rate_value"] then
                if rate == "automatic" then
                    anti_aim[#anti_aim+1] = do_automatic
                end
                setfflag("S2PhysicsSenderRate", rate == "custom" and tostring(flags["sender_rate_value_rate"]) or "15")
            end
        end)

        create_connection(menu_references["sender_rate_value_rate"]["on_slider_change"], function(value)
            if flags["sender_rate_value"] and flags["sender_rate_value_type"][1] == "custom" then
                setfflag("S2PhysicsSenderRate", tostring(value))
            end
        end)

        menu_references["sender_rate_value_rate"]:set_visible(false)
    end

    -- >> ( velocity desync )

    do
        local velocity_desync_type = "low"
        local velocity_desync_rotate = false
        local velocity_desync_disable_when_above_x_hp = nil
        local velocity_desync_disable_when_auto_stomping = nil

        local do_velocity_desync = LPH_JIT_MAX(function(dt, hrp)
            if hrp and not stomping and not purchasing then
                if velocity_desync_disable_when_above_x_hp then
                    local humanoid = local_parts["Humanoid"]

                    if humanoid and humanoid["Health"]/humanoid["MaxHealth"] >= velocity_desync_disable_when_above_x_hp then
                        return
                    end
                end

                if velocity_desync_disable_when_auto_stomping and stomping then
                    return
                end

                local old_linear_velocity = hrp["AssemblyLinearVelocity"]
                local old_angular_velocity = hrp["AssemblyAngularVelocity"]

                local velocity = velocity_desync_type == "y high" and vector3_new(0, 16384, 0) or velocity_desync_type == "limit" and vector3_new(math_random(-9223372036854775808, 9223372036854775807), math_random(-9223372036854775808, 9223372036854775807), math_random(-9223372036854775808, 9223372036854775807)) or velocity_desync_type == "low" and vector3_new(math_random(1,2) == 1 and -300 or 300, math_random(1,2) == 1 and -300 or 300, math_random(1,2) == 1 and -300 or 300) or velocity_desync_type == "high" and vector3_new(math_random(1,2) == 1 and -16384 or 16384, math_random(1,2) == 1 and -14384 or 16384, math_random(1,2) == 1 and -16384 or 16384) or velocity_desync_type == "zero" and vector3_zero or vector3_zero

                hrp["AssemblyLinearVelocity"] = velocity

                if velocity_desync_rotate then
                    hrp["AssemblyAngularVelocity"] = velocity
                end

                render_stepped_wait(render_stepped)
                hrp["AssemblyLinearVelocity"] = old_linear_velocity
                hrp["AssemblyAngularVelocity"] = old_angular_velocity
            end
        end)

        create_connection(menu_references["velocity_desync"]["on_toggle_change"], LPH_NO_VIRTUALIZE(function(value)
            for i = 1, #anti_aim do
                if anti_aim[i] == do_velocity_desync then
                    remove(anti_aim, i)
                    break
                end
            end

            if value then
                anti_aim[#anti_aim+1] = do_velocity_desync
            end
        end))

        create_connection(menu_references["velocity_desync_type"]["on_dropdown_change"], LPH_NO_VIRTUALIZE(function(value)
            velocity_desync_type = value[1]
        end))

        create_connection(menu_references["velocity_desync_disable_when"]["on_dropdown_change"], function(value)
            velocity_desync_disable_when_above_x_hp = nil
            velocity_desync_disable_when_auto_stomping = nil

            for i = 1, #value do
                local value = value[i]
                if value == "above x health" then
                    velocity_desync_disable_when_above_x_hp = flags["velocity_desync_health"]/100
                elseif value == "auto stomping" then
                    velocity_desync_disable_when_auto_stomping = true
                end
            end

            menu_references["velocity_desync_health"]:set_visible(velocity_desync_disable_when_above_x_hp ~= nil)
        end)

        create_connection(menu_references["velocity_desync_rotate"]["on_toggle_change"], function(value)
            velocity_desync_rotate = value
        end)

        create_connection(menu_references["velocity_desync_health"]["on_slider_change"], function(value)
            if velocity_desync_disable_when_above_x_hp then
                velocity_desync_disable_when_above_x_hp = value/100
            end
        end)
    end

    -- >> ( network desync )

    do
        local do_sleep = true
        local sethiddenproperty = sethiddenproperty
        local do_network_desync = LPH_JIT_MAX(function(dt, hrp)
            if hrp then
                do_sleep = not do_sleep
                sethiddenproperty(hrp, "NetworkIsSleeping", do_sleep)
            end
        end)

        create_connection(menu_references["network_desync"]["on_toggle_change"], function(value)
            for i = 1, #anti_aim do
                if anti_aim[i] == do_network_desync then
                    remove(anti_aim, i)
                    break
                end
            end

            if value then
                anti_aim[#anti_aim+1] = do_network_desync
            end
        end)
    end

    -- >> ( fake position )

    do
        local refresh_connection = nil
        local refresh_connection2 = nil
        local refresh_connection3 = nil
        local do_notify = false 

        local do_sleep = true
        local sethiddenproperty = sethiddenproperty
        local cooldown = nil

        local cframe_angles = CFrame["Angles"]
        local rad = math["rad"]

        local last_refresh = clock()
        local sleep_tick = clock()
        local sleep_rate = 0.0375
        local sitting = false
        local local_fake_position = nil

        local do_refresh = function()
            last_refresh = clock()
            if do_notify then
                new_notification(
                    "refreshing fake position",
                    2
                )
            end

            wait(0.05)
            setfpscap(6)
            setfflag("S2PhysicsSenderRate", "1")
            wait(flags["fake_position_freeze_time"])
            setfflag("S2PhysicsSenderRate", "240")
            setfpscap(1000)
            wait(0.5)
            local_fake_position = local_server_position["p"]
        end

        local do_fake_position = LPH_JIT_MAX(function(dt, hrp)
            setfflag("S2PhysicsSenderRate", tostring(round(local_fps, 1)))
            if sitting then
                local_fake_position = nil
                return
            end
            if dt > 0.45 then
                local_fake_position = nil
                do_refresh()
                return
            end
            local tick = clock()
            if hrp and tick-sleep_tick > dt*sleep_rate then
                do_sleep = not do_sleep
                sleep_tick = tick
                sethiddenproperty(hrp, "NetworkIsSleeping", do_sleep)
            end
            local remainder = tick - last_refresh
            if flags["fake_position_safe_mode"] and remainder < 1.5 then
                local old = hrp["CFrame"]
                hrp["CFrame"] = cframe_new(vector3_new(math_random(-2147483647, 2147483647), math_random(-400, 2147483647), math_random(-2147483647, 2147483647)))*cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359)))
                render_stepped_wait(render_stepped)
                hrp["CFrame"] = old
            end
            if cooldown and remainder > cooldown then
                if remainder > cooldown+0.15 then
                    last_refresh = clock()
                    setfpscap(1000)
                    return
                end
                setfpscap(8)
                return
            end
        end)

        local stop_sitting = LPH_JIT_MAX(function(character)
            local humanoid = local_parts["Humanoid"]
            sitting = humanoid["Sit"]

            if refresh_connection3 then
                refresh_connection3["Disconnect"](refresh_connection3)
                refresh_connection3 = nil
            end

            refresh_connection3 = create_connection(humanoid["GetPropertyChangedSignal"](humanoid, "Sit"), function()
                sitting = humanoid["Sit"]

                if do_notify then
                    if sitting then
                        local_fake_position = local_client_position["p"]
                        new_notification(
                            "fake position disabled (you are sitting)",
                            2
                        )
                    else
                        do_refresh()
                    end
                end
            end)
        end)

        local old = tostring(getfflag("S2PhysicsSenderRate"))
        
        create_connection(menu_references["fake_position"]["on_toggle_change"], function(value)
            local_fake_position = nil

            for i = 1, #anti_aim do
                if anti_aim[i] == do_fake_position then
                    remove(anti_aim, i)
                    break
                end
            end

            if refresh_connection then
                refresh_connection:Disconnect()
                refresh_connection = nil
            end

            if refresh_connection2 then
                refresh_connection2:Disconnect()
                refresh_connection2 = nil
            end

            if refresh_connection3 then
                refresh_connection3:Disconnect()
                refresh_connection3 = nil
            end

            if value then
                menu_references["network_desync"]:set_visible(false)
                menu_references["sender_rate_value"]:set_visible(false)

                if flags["network_desync"] then
                    menu_references["network_desync"]:set_toggle(false)
                end

                if flags["sender_rate_value"] then
                    menu_references["sender_rate_value"]:set_toggle(false)
                end

                anti_aim[#anti_aim+1] = do_fake_position

                refresh_connection = create_connection(signals["on_local_character_added"], do_refresh)
                refresh_connection2 = create_connection(signals["on_local_character_added"], stop_sitting)

                if local_character then
                    stop_sitting(local_character)
                end
                
                last_refresh = clock()
                do_refresh()
            else
                setfflag("S2PhysicsSenderRate", old)

                menu_references["network_desync"]:set_visible(true)
                menu_references["sender_rate_value"]:set_visible(true)
            end
        end)

        create_connection(menu_references["refresh_every"]["on_slider_change"], function(value)
            cooldown = value ~= 240 and value or nil
        end)

        create_connection(menu_references["sleep_rate"]["on_slider_change"], function(value)
            sleep_rate = value == 100 and 0 or (101-value)/100
        end)

        menu_references["sleep_rate"]:set_slider(30)
            
        create_connection(menu_references["fake_position_notifications"]["on_toggle_change"], function(value)
            do_notify = value
        end)

        -- >> ( fake position indicator )

        local visible = false
        local circle = nil
        local image = nil
        local glow = nil
        local shadow_transparency = {["Transparency"] = 0.09}
        local circle_transparency = {["Transparency"] = 0.8}
        local image_transparency = {["Transparency"] = 0.8}
        local offset = vector3_new(0, 0.5, 0)
        local data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAVUExURf///1FRUXh4eHl5eXp6elJSUgAAAFkqzC8AAAAHdFJOU////////wAaSwNGAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAGHRFWHRTb2Z0d2FyZQBQYWludC5ORVQgNS4xLjQS36aDAAAAtmVYSWZJSSoACAAAAAUAGgEFAAEAAABKAAAAGwEFAAEAAABSAAAAKAEDAAEAAAACAAAAMQECABAAAABaAAAAaYcEAAEAAABqAAAAAAAAAAx3AQDoAwAADHcBAOgDAABQYWludC5ORVQgNS4xLjQAAwAAkAcABAAAADAyMzABoAMAAQAAAAEAAAAFoAQAAQAAAJQAAAAAAAAAAgABAAIABAAAAFI5OAACAAcABAAAADAxMDAAAAAA0NlgAbHwM8wAAACjSURBVDhP1ZFLDsQwCENJ87n/kQvBGDKqNMuqb5EaYyWIyvrD5wJCYBip0QMwMwC/EA18QLt6h4yOn07ruxood2Enapkui+MBFNJCHQmhll7toAR4gZKJmEe5SmAUTfKFU1M+B2YZMh+eVDpYmSck9mHoVT9rUbJvmzW37nZ0Mx1NIkBrV5DejwDdxPsM8BmAH1sCR4TtI7AndFAbR+CJ9wNr3d6DDmOS3Q1aAAAAAElFTkSuQmCC")
        local last_pos = nil
        local do_smooth_fake_position_indicator = nil
    
        local do_fake_position_indicator = LPH_JIT_MAX(function(dt)
            if local_fake_position and local_client_position ~= local_fake_position then                
                local pos, on_screen = world_to_viewport_point(camera, local_fake_position)
    
                if do_smooth_fake_position_indicator then
                    if not last_pos then
                        last_pos = pos
                    end
                    pos = last_pos + (pos - last_pos) * dt*4^2
                end
    
                last_pos = pos
                if not on_screen and visible then
                    tween(glow, hide_transparency, circular, out, 0)
                    tween(image, hide_transparency, circular, out, 0)
                    tween(circle, hide_transparency, circular, out, 0)
                    visible = false
                    return
                elseif not visible and on_screen then
                    spawn(function()
                        tween(glow, shadow_transparency, circular, out, 0.07)
                        tween(image, image_transparency, circular, out, 0.07)
                        tween(circle, circle_transparency, circular, out, 0.07)
                    end)
                    visible = true
                elseif not visible and not on_screen then
                    visible = false
                    return
                end
    
                local pos2, _ = world_to_viewport_point(camera, local_fake_position + offset)
    
                local size = clamp((pos["Y"]-pos2["Y"])*10, 35, 45)
    
                local pos = vector2_new(pos["X"], pos["Y"])
                circle["Size"] = vector2_new(size, size)
                circle["Position"] = pos - vector2_new(size/2, size/2)
    
                local image_size = vector2_new(size*0.6, size*0.6)
                image["Position"] = pos - image_size/2
                image["Size"] = image_size
    
                local glow_size = vector2_new(size*1.1, size*1.1)
                glow["Position"] = pos - glow_size/2
                glow["Size"] = glow_size
                glow["Rounding"] = size/2
            elseif visible then
                visible = false
                tween(glow, hide_transparency, circular, out, 0.09)
                tween(image, hide_transparency, circular, out, 0.09)
                tween(circle, hide_transparency, circular, out, 0.09)
            end
        end)
    
        local create_drawing = identifyexecutor() == "Wave" and create_fake_drawing or create_real_drawing
    
        create_connection(menu_references["smooth_fake_position_indicator"]["on_toggle_change"], function(value)
            last_pos = nil
            do_smooth_fake_position_indicator = value
        end)
    
        create_connection(menu_references["fake_position_indicator"]["on_toggle_change"], function(value)
            menu_references["smooth_fake_position_indicator"]:set_visible(value)
            menu_references["fake_position_indicator_background_color"]:set_visible(value)
            menu_references["fake_position_indicator_icon_color"]:set_visible(value)
            menu_references["fake_position_indicator_glow_color"]:set_visible(value)

            last_pos = nil
            for i = 1, #heartbeat do
                if heartbeat[i] == do_fake_position_indicator then
                    remove(heartbeat, i)
                    break
                end
            end
    
            visible = false
    
            if circle then
                circle:Destroy()
                circle = nil
            end
    
            if image then
                image:Destroy()
                image = nil
            end
    
            if glow then
                glow:Destroy()
                glow = nil
            end
        
            if value then
                circle = create_drawing("Image", {
                    ["Color"] = flags["fake_position_indicator_background_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 2,
                    ["Visible"] = true,
                    ["Data"] = pixel_image_data,
                    ["Rounding"] = 30,
                    ["Position"] = vector2_new(0, 0),
                    ["Size"] = vector2_new(65, 65),
                })
    
                image = create_drawing("Image", {
                    ["Color"] = flags["fake_position_indicator_icon_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 3,
                    ["Visible"] = true,
                    ["Data"] = data,
                    ["Position"] = vector2_new(0, 0),
                    ["Size"] = vector2_new(29, 29),
                })
    
                glow = create_drawing("Image", {
                    ["Color"] = flags["fake_position_indicator_glow_color"],
                    ["Transparency"] = 0,
                    ["ZIndex"] = 1,
                    ["Visible"] = true,
                    ["Data"] = shadow_image_data,
                    ["Rounding"] = 36,
                    ["Position"] = vector2_new(0, 0),
                    ["Size"] = vector2_new(73, 73)
                })
    
                heartbeat[#heartbeat+1] = do_fake_position_indicator
            end
        end)
    
        create_connection(menu_references["fake_position_indicator_glow_color"]["on_color_change"], function(value)
            if glow then
                glow["Color"] = value
            end
        end)
    
        create_connection(menu_references["fake_position_indicator_glow_color"]["on_transparency_change"], function(value)
            if glow and visible then
                glow["Transparency"] = -value+1
                shadow_transparency["Transparency"] = {["Transparency"] = -value+1}
            end
        end)
    
        create_connection(menu_references["fake_position_indicator_icon_color"]["on_color_change"], function(value)
            if image then
                image["Color"] = value
            end
        end)
    
        create_connection(menu_references["fake_position_indicator_icon_color"]["on_transparency_change"], function(value)
            if image and visible then
                image["Transparency"] = -value+1
                image_transparency["Transparency"] = {["Transparency"] = -value+1}
            end
        end)
    
        create_connection(menu_references["fake_position_indicator_background_color"]["on_color_change"], function(value)
            if circle then
                circle["Color"] = value
            end
        end)
    
        create_connection(menu_references["fake_position_indicator_background_color"]["on_transparency_change"], function(value)
            if circle and visible then
                circle["Transparency"] = -value+1
                circle_transparency["Transparency"] = {["Transparency"] = -value+1}
            end
        end)

        menu_references["smooth_fake_position_indicator"]:set_visible(false)
        menu_references["fake_position_indicator_background_color"]:set_visible(false)
        menu_references["fake_position_indicator_icon_color"]:set_visible(false)
        menu_references["fake_position_indicator_glow_color"]:set_visible(false)
    end

    -- >> ( anti stomp)

    do
        local anti_stomp_connection = nil
        local anti_stomp_connection2 = nil
        local setnetworkowner = setnetworkowner
        local anti_stomp_position = nil

        local do_anti_stomp = LPH_JIT_MAX(function(knocked)
            if knocked then
                local hrp = local_parts["HumanoidRootPart"]

                if hrp then
                    anti_stomp_position = hrp["Position"]["Y"] > -100 and hrp["CFrame"] or nil

                    if setnetworkowner then
                        setnetworkowner(hrp, true)
                    end
                    hrp["CFrame"] = cframe_new(0,-2147483647,0)
                    hrp["Velocity"] = vector3_new(65536,65534,65536)
                end

                local humanoid = local_parts["Humanoid"]

                if humanoid then
                    for _ = 1, 10 do
                        humanoid["Health"] = 0
                        wait()
                    end
                end
            end
        end)

        local teleport_back = LPH_JIT_MAX(function(character)
            if not anti_stomp_position then
                return
            end

            local hrp = local_parts["HumanoidRootPart"]

            if hrp then
                for i = 1, 3 do
                    hrp["CFrame"] = anti_stomp_position
                    wait()
                end
            end
        end)

        create_connection(menu_references["anti_stomp"]["on_toggle_change"], function(value)
            if anti_stomp_connection then
                anti_stomp_connection:Disconnect()
                anti_stomp_connection = nil
            end

            if anti_stomp_connection2 then
                anti_stomp_connection2:Disconnect()
                anti_stomp_connection2 = nil
            end

            if value then
                anti_stomp_connection = create_connection(signals["on_local_knocked"], do_anti_stomp)

                if flags["anti_stomp_teleport_back"] then
                    anti_stomp_connection2 = create_connection(signals["on_local_character_added"], teleport_back)
                end
            end
        end)

        create_connection(menu_references["anti_stomp_teleport_back"]["on_toggle_change"], function(value)
            if anti_stomp_connection2 then
                anti_stomp_connection2:Disconnect()
                anti_stomp_connection2 = nil
            end

            if value and anti_stomp_connection then
                anti_stomp_connection2 = create_connection(signals["on_local_character_added"], teleport_back)
            end
        end)
    end

    -- >> ( anti taser )

    do
        local connection = nil
        local connections = {}
        local rad = math["rad"]
        local cframe_angles = CFrame["Angles"]

        local do_anti_taser = function(data, tool)
            local connection = connections[data]

            if connection then
                connection["Disconnect"](connection)
                connections[data] = nil
            end

            if tool and tool["Name"] == "[Taser]" then
                local handle = wait_for_child(tool, "Handle", 5)

                if not handle then
                    return
                end

                local beam = wait_for_child(handle, "TazerBeam", 5)

                if not beam then
                    return
                end

                connections[data] = beam["GetPropertyChangedSignal"](beam, "Attachment1"):Connect(function()
                    local part = beam["Attachment1"]

                    if local_character and part and part["IsDescendantOf"](part, local_character) and not local_knocked then
                        local hrp = local_parts["HumanoidRootPart"]

                        if not hrp then
                            return
                        end

                        wait(local_ping/1000)

                        local start = clock()

                        local new_function = function(dt)
                            if hrp then
                                local old = hrp["CFrame"]
                                hrp["CFrame"] = cframe_new(vector3_new(math_random(-100000, 100000), math_random(-400, 100000), math_random(-100000, 100000)))
                                render_stepped_wait(render_stepped)
                                hrp["CFrame"] = old
                            end
                        end
                        
                        anti_aim[#anti_aim+1] = new_function

                        wait(0.6)

                        for i = 1, #anti_aim do
                            if anti_aim[i] == new_function then
                                remove(anti_aim, i)
                                break
                            end
                        end
                    end
                end)
            end
        end

        create_connection(menu_references["anti_taser"]["on_toggle_change"], function(value)
            if connection then
                connection:Disconnect()
                connection = nil
            end

            for data, connnection in connections do
                connnection:Disconnect()
                connections[data] = nil
            end

            if value then
                connection = create_connection(signals["on_player_tool_equipped"], do_anti_taser)
            end
        end)
    end

    -- >> ( auto armor )

    local threshold = 52
    local last_attempt = clock()
    local cooldown = 0.05

    local do_auto_armor = LPH_JIT_MAX(function(dt, hrp)
        local tick = clock()
        if (local_armor < threshold and not local_knocked) and (tick-last_attempt > cooldown) then
            last_attempt = tick
            if local_cash > 5000 then
                purchase_item("high-medium armor")
            end
        end
    end)

    create_connection(menu_references["auto_armor"]["on_toggle_change"], function(value)
        for i = 1, #heartbeat do
            if heartbeat[i] == do_auto_armor then
                remove(heartbeat, i)
                break
            end
        end

        if value then
            heartbeat[#heartbeat+1] = do_auto_armor
        end
    end)

    create_connection(menu_references["auto_armor_purchase_if_below"]["on_slider_change"],function(value)
        threshold = 130 * (value/100)
    end)

    create_connection(menu_references["auto_armor_try_cooldown"]["on_slider_change"],function(value)
        cooldown = value
    end)

    -- >> ( auto heal )

    do
        local threshold = 0.7
        local last_attempt = clock()
        local cooldown = 0.05

        local popcorn = nil

        local tools = {}

        local do_auto_heal = LPH_JIT_MAX(function(dt, hrp)
            local humanoid = local_parts["Humanoid"]

            if not humanoid or local_knocked or purchasing then
                return
            end

            local tick = clock()

            if (tick-last_attempt > cooldown) then
                if (humanoid["Health"]/humanoid["MaxHealth"] < threshold) then
                    last_attempt = tick
                    
                    if local_cash > 5000 and not popcorn then
                        popcorn = find_first_child(local_player["Backpack"], "[Popcorn]")

                        if not popcorn then
                            purchase_item("popcorn")
                        end
                    end
                elseif popcorn then
                    popcorn["Parent"] = local_player["Backpack"]
                    popcorn = nil
                end
            end

            if popcorn then
                local parent = popcorn["Parent"]
                if parent == nil then
                    popcorn = nil
                    return
                elseif parent ~= local_character then
                    setscriptable(popcorn, "Parent", true)
                    popcorn["Parent"] = local_character
                end

                popcorn["Activate"](popcorn)
            end
        end)

        create_connection(menu_references["auto_heal"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_auto_heal then
                    remove(heartbeat, i)
                    break
                end
            end

            if value then
                heartbeat[#heartbeat+1] = do_auto_heal
            end
        end)

        create_connection(menu_references["auto_heal_purchase_if_below"]["on_slider_change"],function(value)
            threshold = value/100
        end)

        create_connection(menu_references["auto_heal_try_cooldown"]["on_slider_change"],function(value)
            cooldown = value
        end)
    end

    -- >> ( auto mask )

    do
        local disable_auto_mask_when_not_full_health = false
        local disable_auto_mask_when_target_alive = false
        local current_mask = nil

        local cooldown = clock()

        local do_auto_mask = LPH_JIT_MAX(function(dt, hrp)
            local mask = local_parts["In-gameMask"]

            if mask or local_knocked or purchasing or local_cash < 5000 then
                if current_mask then
                    setscriptable(current_mask, "Parent", true)
                    current_mask["Parent"] = local_player["Backpack"]
                    current_mask = nil
                end
                return
            end

            if (disable_auto_mask_when_not_full_health and local_parts["Humanoid"]["Health"] < local_parts["Humanoid"]["MaxHealth"]) or (disable_auto_mask_when_target_alive and ragebot_target and not ragebot_target[4][7]) then
                return
            end
            
            current_mask = find_first_child(local_player["Backpack"], "[Mask]") or local_parts["[Mask]"]

            local tick = clock()

            if not current_mask and (tick-cooldown > 1) then
                purchase_item("ninja mask")
                cooldown = tick
            elseif current_mask then
                local parent = current_mask["Parent"]

                if not parent then
                    current_mask = nil
                    return
                end
                setscriptable(current_mask, "Parent", true)
                current_mask["Parent"] = local_character
                current_mask["Activate"](current_mask)
            end
        end)

        create_connection(menu_references["auto_mask"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_auto_mask then
                    remove(heartbeat, i)
                    break
                end
            end

            if value then
                heartbeat[#heartbeat+1] = do_auto_mask
            end
        end)

        create_connection(menu_references["auto_mask_disable_when"]["on_dropdown_change"], function(value)
            disable_auto_mask_when_target_alive = false
            disable_auto_mask_when_not_full_health = false

            for i = 1, #value do
                local value = value[i]
                if value == "target alive" then
                    disable_auto_mask_when_target_alive = true
                elseif value == "not full health" then
                    disable_auto_mask_when_not_full_health = true
                end
            end
        end)
    end

    -- >> ( target circle )

    local lines = {}
    local data = {[11] = 0}
    local old_radius = 0
    local rendering = false
    local get_bounding_box = nil

    do
        local model = create_instance("Model", {})
        get_bounding_box = model["GetBoundingBox"]
        destroy(model)
    end

    local sin = math["sin"]

    local do_target_circle = LPH_JIT_MAX(function(dt, hrp)
        if ragebot_target and hrp and not ragebot_target[7] then
            rendering = true
            local position = ragebot_target[4]["UpperTorso"]["Position"]
            local color = flags["3d_target_circle_color"]
            local gradient_color = flags["3d_target_circle_gradient_color"]

            local _, radius = get_bounding_box(ragebot_target[3])
            local new_radius = clamp((radius["X"] + radius["Z"]) / 3, 2, 10)

            if new_radius ~= old_radius and abs(new_radius - old_radius) > 1.1 then
                old_radius = new_radius
                tween(data, {[11] = new_radius + 3}, quad, out, 0.07)
                delay(0.07, function()
                    if data[11] == new_radius + 3 then
                        tween(data, {[11] = new_radius}, circular, out, 0.14)
                    end
                end)
            end

            local offset = (clock() * 4) % (pi * 2)
            local radius = data[11]

            for i = 1, 32 do
                local line = lines[i]
                local angle1 = 0.12566370614359174 * (i - 1) + offset
                local angle2 = 0.12566370614359174 * i + offset

                local pos1, on_screen = world_to_viewport_point(camera, position + vector3_new(cos(angle1) * radius, 0, sin(angle1) * radius))
                local pos2, on_screen2 = world_to_viewport_point(camera, position + vector3_new(cos(angle2) * radius, 0, sin(angle2) * radius))

                local visible = (i + 32) % 32

                if on_screen and on_screen2 and visible then
                    local fade = visible/32

                    line["From"] = vector2_new(pos1["X"], pos1["Y"])
                    line["To"] = vector2_new(pos2["X"], pos2["Y"])
                    line["Transparency"] = math.max(0, fade)
                    line["Color"] = color3_lerp(color, gradient_color, i / 32)
                    line["Visible"] = true
                else
                    line["Visible"] = false
                end
            end
        elseif rendering then
            old_radius = 0
            for i = 1, 32 do
                lines[i]["Visible"] = false
            end
            rendering = false
        end
    end)

    create_connection(menu_references["3d_target_circle"]["on_toggle_change"], function(value)
        for i = 1, #heartbeat do
            if heartbeat[i] == do_target_circle then
                remove(heartbeat, i)
                break
            end
        end

        for i = 1, #lines do
            lines[i]:Destroy()
            lines[i] = nil
        end

        if value then
            for i = 1, 32 do
                lines[i] = create_real_drawing("Line", {
                    ["Thickness"] = 2,
                    ["ZIndex"] = 10,
                    ["Visible"] = false
                })
            end

            heartbeat[#heartbeat+1] = do_target_circle
        end
    end)

    -- >> ( crosshair follow )

    do
        local mid_position = camera["ViewportSize"]/2 - vector2_new(2, 58)
        local old_value = udim2_new(0, mid_position["X"], 0, mid_position["Y"])
        local aim_frame = nil
        local blank = vector2_new(0, 0)
        local do_crosshair_follow = LPH_JIT_MAX(function(dt, hrp)
            render_stepped_wait(render_stepped)
            local mouse_position = user_input_service["GetMouseLocation"](user_input_service)
            if aim_frame and ragebot_target and ragebot_aim_position then
                if ragebot_aim_position then
                    local position, on_screen = world_to_viewport_point(camera, ragebot_aim_position)

                    local goal_position = udim2_new(0, mouse_position["X"], 0, mouse_position["Y"])

                    if on_screen and not local_reloading and not ragebot_target[7] then
                        goal_position = vector2_new(position["X"] - 2, position["Y"] - 58)
                    end

                    local tween_value = dt*4^2

                    if aim_frame["AnchorPoint"] ~= blank then
                        local old_position = aim_frame["AbsolutePosition"]
                        aim_frame["AnchorPoint"] = blank
                        old_value = udim2_new(0, old_position["X"], 0, old_position["Y"])
                        aim_frame["Position"] = old_value
                    end

                    local new = (goal_position - vector2_new(old_value["X"]["Offset"], old_value["Y"]["Offset"]))
                    new = old_value + udim2_new(0, new["X"] * tween_value, 0, new["Y"] * tween_value)

                    aim_frame["Position"] = new

                    old_value = new
                else
                    old_value = udim2_new(0, mouse_position["X"], 0, mouse_position["Y"])
                end
            else
                old_value = udim2_new(0, mouse_position["X"], 0, mouse_position["Y"])
            end
        end)

        local get_aim_frame = LPH_JIT_MAX(function()
            local player_gui = local_player["PlayerGui"]

            if player_gui then
                local main_screen_gui = wait_for_child(player_gui, "MainScreenGui", 5)

                if main_screen_gui then
                    aim_frame = wait_for_child(main_screen_gui, "Aim", 5)

                    aim_frame["Position"] = udim2_new(0.5, -2, 0.5, -58)

                    local aboslute_position = aim_frame["AbsolutePosition"]
                    old_value = udim2_new(0, aboslute_position["X"], 0, aboslute_position["Y"])
                end
            end
        end)

        local reset_aim_frame = function()
            if aim_frame then
                aim_frame["AnchorPoint"] = vector2_new(0.5, 0.5)
                aim_frame["Position"] = udim2_new(0.5, 0, 0.5, -19)
            end
        end

        local crosshair_follow_update_connection = nil

        create_connection(menu_references["crosshair_follow"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_crosshair_follow then
                    remove(heartbeat, i)
                    break
                end
            end

            if crosshair_follow_update_connection then
                crosshair_follow_update_connection:Disconnect()
                crosshair_follow_update_connection = nil
            end

            if value then
                aim_frame = nil
                get_aim_frame()
                update_camera_size()

                crosshair_follow_update_connection = create_connection(signals["on_local_character_added"], get_aim_frame)
                heartbeat[#heartbeat+1] = do_crosshair_follow
            elseif aim_frame then
                reset_aim_frame()
                aim_frame = nil
            end
        end)
    end

    -- >> ( information panel )

   --[[ do
        local panel_visible = nil
        local list_frame, list_shadow, list_inside, list_icon, list_divider, list_text = menu:add_hud_frame({
            flag = "information_panel_position", 
            title = "no target",
            icon = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAAAMdwEA6AMAAAx3AQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAO7qLRjGzAACAAAAI0lEQVQYV2NgZGRkAAIQBWGB2DiZSGphAEUBhAVkY2MyMAIACxYALVlZOREAAAAASUVORK5CYII="),
        })
        
        local list_drawings = {}
        local active_binds = {}
        
        local show_panel = function()
            list_frame["Visible"] = true
            tween(list_frame, {Transparency = 0.7}, circular, out, 0.15)
            tween(list_inside, show_transparency, circular, out, 0.15)
            tween(list_shadow, {Transparency = 0.16}, circular, out, 0.15)
            local children = list_inside["children"]
            for i = 1, #children do
                local child = children[i]
                if child["Visible"] then
                    tween(child, child == list_text and show_transparency or {["Transparency"] = 0.5}, circular, out, 0.15)
                end
            end

            panel_visible = true
        end
    
        local hide_panel = function()
            list_frame["Visible"] = true
            tween(list_frame, hide_transparency, circular, out, 0.15)
            tween(list_inside, hide_transparency, circular, out, 0.15)
            tween(list_shadow, hide_transparency, circular, out, 0.15)
            local children = list_inside["children"]
            for i = 1, #children do
                local child = children[i]
                if child["Visible"] then
                    tween(child, hide_transparency, circular, out, 0.15)
                end
            end
    
            local old_tick = clock()
    
            panel_visible = old_tick
    
            delay(0.15, function()
                if old_tick == panel_visible then
                    panel_visible  = false
                    list_frame["Visible"] = false
                end
            end)
        end

        create_connection(menu_references["information_panel"]["on_toggle_change"], function(bool)
            if bool then
                show_panel()
            else
                hide_panel()
            end
        end)
    end--]]

    -- >> ( view target )

    do
        local view_target_stop_when_knocked = nil

        local do_view_target = LPH_JIT_MAX(function(dt, hrp)
            if ragebot_target and (not view_target_stop_when_knocked or not ragebot_target[18]) then
                local head = ragebot_target[4]["Head"]
                if head and camera["CameraSubject"] ~= head then
                    camera["CameraSubject"] = head
                end
            else
                local humanoid = local_parts["Humanoid"]
                if humanoid and camera["CameraSubject"] ~= humanoid then
                    camera["CameraSubject"] = humanoid
                end
            end
        end)

        create_connection(menu_references["view_target"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_view_target then
                    remove(heartbeat, i)
                    break
                end
            end

            if value then
                heartbeat[#heartbeat+1] = do_view_target
            end

            camera["CameraSubject"] = local_parts["Humanoid"]
            render_stepped_wait(render_stepped)
            camera["CameraSubject"] = local_parts["Humanoid"]
        end)

        create_connection(menu_references["view_target_stop_when_knocked"]["on_toggle_change"], function(value)
            view_target_stop_when_knocked = value
        end)
    end

    -- >> ( auto loadout )

    do
        local auto_loadout_connection2 = nil
        local auto_loadout_connection = nil
        local auto_loadout_guns = {"rifle"}

        local do_auto_loadout = LPH_JIT_MAX(function()
            local old_hrp = local_parts["HumanoidRootPart"]

            if not old_hrp or local_cash < 10000 or (purchasing and purchasing[6]:find("armor")) then
                return
            end

            local children = get_children(local_player["Backpack"])
            children[#children+1] = local_tool

            for gun, data in local_guns do
                local parent = gun["Parent"]
                if parent then
                    children[#children+1] = parent
                end
            end

            local purchase = {}

            for i = 1, #auto_loadout_guns do
                local weapon = auto_loadout_guns[i]

                for i = 1, #children do
                    if string.find(children[i]["Name"]:lower(), weapon.."]", 1, true) then
                        weapon = nil
                        break
                    end
                end

                if weapon then
                    purchase[#purchase+1] = weapon
                end
            end

            for i = 1, #purchase do
                local gun = purchase[i]
                local tool = nil
                purchase_item(gun)

                while old_hrp == local_parts["HumanoidRootPart"] and flags["auto_loadout"] do
                    local backpack = local_player["Backpack"]

                    local children = get_children(backpack)
                    children[#children+1] = local_tool

                    for gun, data in local_guns do
                        local parent = gun["Parent"]
                        if parent then
                            children[#children+1] = parent
                        end
                    end

                    for i = 1, #children do
                        local child = children[i]
                        if string.find(child["Name"]:lower(), gun.."]", 1, true) then
                            tool = child
                            break
                        end
                    end

                    if tool then
                        break
                    end

                    if not purchasing then
                        purchase_item(gun)
                    end
                    wait(0.05)
                end
                if tool then
                    local ammo = wait_for_child(tool, "Ammo", 1)

                    if ammo then
                        if old_hrp ~= local_parts["HumanoidRootPart"] or not flags["auto_loadout"] then
                            break
                        end
                        purchase_item(gun.." ammo", flags["auto_loadout_ammo"])
                        repeat wait(0.05) until not purchasing or old_hrp ~= local_parts["HumanoidRootPart"] or not flags["auto_loadout"]
                    end
                end
            end
        end)

        create_connection(menu_references["auto_loadout"]["on_toggle_change"], function(value)
            if auto_loadout_connection then
                auto_loadout_connection:Disconnect()
                auto_loadout_connection = nil
            end

            if auto_loadout_connection2 then
                auto_loadout_connection2:Disconnect()
                auto_loadout_connection2 = nil
            end

            if value then
                do_auto_loadout()
                auto_loadout_connection = create_connection(signals["on_local_character_loaded"], do_auto_loadout)
                auto_loadout_connection2 = create_connection(signals["on_local_armor_changed"], do_auto_loadout)
            end
        end)

        create_connection(menu_references["auto_loadout_guns"]["on_dropdown_change"], function(value)
            auto_loadout_guns = value

            if auto_loadout_connection then
                do_auto_loadout()
            end
        end)
    end

    -- >> ( auto ammo )

    do
        local disable_when_target_alive = false

        local minimum_clips = flags["auto_ammo_minimum_clips"]+1

        local do_auto_ammo = LPH_JIT_MAX(function(dt, hrp)
            if (disable_when_target_alive and ((ragebot_target and not ragebot_target[7]) or nil)) or purchasing or local_reloading or not hrp then
                return
            end

            for gun, data in local_guns do
                local gun = gun["Parent"]
                local remainder = minimum_clips - floor(tonumber(inventory[gun["Name"]]["Value"])/gun["MaxAmmo"]["Value"])

                if remainder >= 0 then
                    purchase_item(gun["Name"]:sub(2, -2):lower().." ammo", flags["auto_ammo_purchase_amount"])
                end
            end
        end)

        create_connection(menu_references["auto_ammo"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_auto_ammo then
                    remove(heartbeat, i)
                    break
                end
            end

            if value then
                heartbeat[#heartbeat+1] = do_auto_ammo
            end
        end)

        create_connection(menu_references["auto_ammo_disable_when"]["on_dropdown_change"], function(value)
            disable_when_target_alive = false
            for i = 1, #value do
                local value = value[i]
                if value == "target alive" then
                    disable_when_target_alive = true
                end
            end
        end)
        
        create_connection(menu_references["auto_ammo_minimum_clips"]["on_slider_change"], function(value)
            minimum_clips = value+1
        end)
    end

    -- >> ( auto stomp )

    do
        local auto_stomp_offset = vector3_new(0,2.3,0)
        local auto_stomp_tick = clock()
        local last_position = nil
        local auto_stomp_target_neutral = false
        local auto_stomp_target_target = true
        local auto_stomp_target_friendly = false
        local auto_stomp_target_enemy = false
        local auto_stomp_stop_when_dead = true

        local do_auto_stomp = LPH_JIT_MAX(function(dt, hrp, bypass)
            if hrp and not purchasing and not local_reloading and (not in_void or bypass) then
                local tick = clock()

                local targets = auto_stomp_target_target and {ragebot_target} or {}

                for player, data in player_data do
                    local status = data[1]
                    if auto_stomp_target_neutral and status == 1 or auto_stomp_target_enemy and status == 3 or auto_stomp_target_friendly and status == 2 or ragebot_targets[data] then
                        targets[#targets+1] = data
                    end
                end

                local old = hrp["CFrame"]
                local found_target = false
                for _, target in targets do
                    local torso = target[4]["UpperTorso"]

                    if torso then
                        local velocity = torso["Velocity"]

                        if not target[4]["GRABBING_CONSTRAINT"] and (not auto_stomp_stop_when_dead or not target[7]) and target[18] and torso and velocity["Magnitude"] < 100 then
                            if tick - auto_stomp_tick > 0.025 then
                                auto_stomp_tick = tick
                                event:FireServer("Stomp")
                            end

                            local new_cframe = old
                            local old_velocity = hrp["Velocity"]

                            new_cframe = cframe_new(torso["Position"] + auto_stomp_offset)

                            if bypass then
                                stomping = false
                                return new_cframe
                            end

                            hrp["Velocity"] = vector3_zero

                            found_target = true
                            stomping = true

                            hrp["CFrame"] = new_cframe
                            render_stepped_wait(render_stepped)
                            hrp["Velocity"] = old_velocity
                            hrp["CFrame"] = old
                            break
                        end
                    end
                end

                stomping = found_target

                if not found_target and last_position and not bypass then
                    render_stepped_wait(render_stepped)
                    hrp["CFrame"] = old
                end
            elseif stomping then
                stomping = false
            end
        end)

        create_connection(menu_references["auto_stomp"]["on_toggle_change"], function(value)
            stomping = false

            for i = 1, #anti_aim do
                if anti_aim[i] == do_auto_stomp then
                    remove(anti_aim, i)
                    break
                end
            end
            last_position = nil

            if value then
                anti_aim[#anti_aim+1] = do_auto_stomp
            end
        end)

        create_connection(menu_references["auto_stomp_stop_when_dead"]["on_toggle_change"], function(value)
            auto_stomp_stop_when_dead = value
        end)

        create_connection(menu_references["auto_stomp_target_statuses"]["on_dropdown_change"], function(value)
            auto_stomp_target_enemy = false
            auto_stomp_target_friendly = false
            auto_stomp_target_target = false
            auto_stomp_target_neutral = false

            for _, value in value do
                if value == "neutral" then
                    auto_stomp_target_neutral = true
                elseif value == "friendly" then
                    auto_stomp_target_friendly = true
                elseif value == "target" then
                    auto_stomp_target_target = true
                else
                    auto_stomp_target_enemy = true
                end
            end
        end)
    end

    -- >> ( void hide )

    do
        local last = clock()

        create_connection(menu_references["void_hide_exploit"]["on_toggle_change"], function(value)
            menu_references["void_hide_offset"]:set_visible(value)
            menu_references["void_hide_teleport_time"]:set_visible(value)
            menu_references["void_hide_void_time"]:set_visible(value)
            menu_references["void_hide_stop_if_forced"]:set_visible(value)
        end)

        menu_references["void_hide_offset"]:set_visible(false)
        menu_references["void_hide_teleport_time"]:set_visible(false)
        menu_references["void_hide_void_time"]:set_visible(false)

        local void_hide_teleport_time = flags["void_hide_teleport_time"]
        local void_hide_void_time = flags["void_hide_void_time"]
        local void_hide_offset = flags["void_hide_offset"]
        local void_hide_disable_when_purchasing = false
        local void_hide_disable_when_target_selected = false
        local void_hide_disable_when_following_target = false
        local void_hide_disable_when_target_knocked = false
        local void_hide_disable_when_forced_position = false

        local void_hide_force_when_reloading = false
        local void_hide_force_when_tabbed_out = false
        local void_hide_force_when_not_full_health = false
        local void_hide_type = game["PlaceId"] == 7213786345 and "vc server" or "random"


        local isrbxactive = isrbxactive or LPH_NO_VIRTUALIZE(function() return true end)

        create_connection(menu_references["void_hide_teleport_time"]["on_slider_change"], function(value)
            void_hide_teleport_time = value
        end)

        create_connection(menu_references["void_hide_offset"]["on_slider_change"], function(value)
            void_hide_offset = value
        end)

        create_connection(menu_references["void_hide_void_time"]["on_slider_change"], function(value)
            void_hide_void_time = value
        end)

        create_connection(menu_references["void_hide_type"]["on_dropdown_change"], function(value)
            void_hide_type = value[1]
            
            local is_bait = value[1] == "bait"
            menu_references["void_hide_bait_distance"]:set_visible(is_bait)
            menu_references["void_hide_bait_time"]:set_visible(is_bait)
            menu_references["void_hide_bait_cooldown"]:set_visible(is_bait)

        end)
        menu_references["void_hide_bait_distance"]:set_visible(false)
        menu_references["void_hide_bait_time"]:set_visible(false)
        menu_references["void_hide_bait_cooldown"]:set_visible(false)

        local cframe_angles = CFrame["Angles"]
        local rad = math["rad"]
        local bait_position = nil
        local last_bait = clock()

        local offsets = {
            vector3_new(-1414, 0, -1414),
            vector3_new(1414, 0, -1414),
            vector3_new(-1414, 0, 1414),
            vector3_new(1414, 0, 1414),
            vector3_new(1414, 1414, 1414),
            vector3_new(-1414, 1414, 1414),
            vector3_new(1414, 1414, -1414)
        }

        local comeback_offsets = {
            vector3_new(-1390, 0, -1390),
            vector3_new(1390, 0, -1390),
            vector3_new(-1390, 0, 1390),
            vector3_new(1390, 0, 1390),
            vector3_new(1390, 1390, 1390),
            vector3_new(-1390, 1390, 1390),
            vector3_new(1390, 1390, -1390)
        }

        local new_cframe = cframe_new()
        
        local do_void_hide = LPH_JIT_MAX(function(dt, hrp)
            local humanoid = local_parts["Humanoid"]

            local forced = (void_hide_force_when_reloading and local_reloading) or (void_hide_force_when_tabbed_out and not isrbxactive()) or (void_hide_force_when_not_full_health and (humanoid and humanoid["Health"] ~= humanoid["MaxHealth"] or false))

            if not forced then
                if (void_hide_disable_when_forced_position and ragebot_force_position) or (void_hide_disable_when_target_selected and ragebot_target) or (void_hide_disable_when_target_knocked and (flags["ragebot"] and ragebot_target and ragebot_target[18])) or (void_hide_disable_when_following_target and local_following) or (void_hide_disable_when_purchasing and purchasing) then
                    return
                end
            end

            if hrp and not ragebot_force_position then
                local old_cframe = hrp["CFrame"]
                local old_velocity = hrp["Velocity"]
                in_void = true
                local tick = clock()
                local do_void_hide = not ragebot_force_position or math_random(1,10) == 1
                if flags["void_hide_exploit"] and (not flags["void_hide_stop_if_forced"] or not forced) then
                    if tick - last > void_hide_void_time then
                        last = tick
                        in_void = false
                    elseif tick - last < void_hide_teleport_time then
                        in_void = false
                    elseif do_void_hide then
                        in_void = true
                        local fake_in_void = true
                        if void_hide_type == "bait" then
                            local bait_range = flags["void_hide_bait_distance"]
                            local difference = tick - last_bait
                            if difference > 0.5 then
                                last_bait = tick
                                bait_position = cframe_new(vector3_new(math_random(-bait_range, bait_range), math_random(-200, 200), math_random(-bait_range, bait_range)))
                            elseif difference < flags["void_hide_bait_time"] and bait_position then
                                fake_in_void = false
                            else
                                fake_in_void = true
                            end
                        elseif void_hide_type == "meta" then
                            fake_in_void = false
                            local diff = tick - last_meta_switch
                            if diff > 0.2 then
                                if diff > 0.3 then
                                    last_meta_switch = tick
                                end
                                if tick - last_meta_switch2 > 0.1 then
                                    last_meta_switch2 = tick
                                    new_cframe = cframe_new(comeback_offsets[math_random(1,7)] + vector3_new(math_random(-15, 200), math_random(-15, 15), math_random(-15, 15))*cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359))))
                                end
                                hrp["CFrame"] = new_cframe
                            else
                                if tick - last_meta_switch2 > 0.05 then
                                    last_meta_switch2 = tick
                                    new_cframe = cframe_new(offsets[math_random(1,#offsets)]*cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359))))
                                end
                                hrp["CFrame"] = new_cframe
                            end
                        end
                        if fake_in_void then
                            hrp["CFrame"] = ((void_hide_type == "vc server" and cframe_new(vector3_new(0, math_random(-2147483647, 2147483647), 0)) or cframe_new(vector3_new(math_random(-2147483647, 2147483647), math_random(-400, 2147483647), math_random(-2147483647, 2147483647)))) + vector3_new(math_random(-void_hide_offset, void_hide_offset), math_random(-void_hide_offset, void_hide_offset), math_random(-void_hide_offset, void_hide_offset)))*cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359)))
                        end
                    end
                elseif do_void_hide then
                    in_void = true
                    local fake_in_void = true
                    if void_hide_type == "bait" then
                        local bait_range = flags["void_hide_bait_distance"]
                        local difference = tick - last_bait
                        if difference > flags["void_hide_bait_cooldown"] then
                            last_bait = tick
                            bait_position = cframe_new(vector3_new(math_random(-bait_range, bait_range), math_random(-200, 200), math_random(-bait_range, bait_range)))
                        elseif difference < flags["void_hide_bait_time"] and bait_position then
                            fake_in_void = false
                            hrp["CFrame"] = bait_position + vector3_new(math_random(-void_hide_offset, void_hide_offset), math_random(-void_hide_offset, void_hide_offset), math_random(-void_hide_offset, void_hide_offset))
                        elseif void_hide_type == "meta" then
                            fake_in_void = false
                            local diff = tick - last_meta_switch
                            if diff > 0.2 then
                                if diff > 0.35 then
                                    last_meta_switch = tick
                                end
                                if diff < 0.21 then
                                    diff = 0.21
                                    new_cframe = new_cframe - vector3_new(0, 30, 0)
                                end
                                hrp["CFrame"] = new_cframe
                            else
                                if tick - last_meta_switch2 > 0.09 then
                                    last_meta_switch2 = tick
                                    new_cframe = cframe_new(offsets[math_random(1,#offsets)]*cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359))))
                                end
                                hrp["CFrame"] = new_cframe
                            end
                        else
                            fake_in_void = true
                        end
                    end
                    if fake_in_void then
                        hrp["CFrame"] = ((void_hide_type == "vc server" and cframe_new(vector3_new(0, math_random(-2147483647, 2147483647), 0)) or cframe_new(vector3_new(math_random(-2147483647, 2147483647), math_random(-400, 2147483647), math_random(-2147483647, 2147483647)))) + vector3_new(math_random(-void_hide_offset, void_hide_offset), math_random(-void_hide_offset, void_hide_offset), math_random(-void_hide_offset, void_hide_offset)))*cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359)))
                    end
                end
                if not in_void then
                    hrp["CFrame"] = (old_cframe + vector3_new(math_random(-void_hide_offset, void_hide_offset), math_random(-void_hide_offset, void_hide_offset), math_random(-void_hide_offset, void_hide_offset)))*cframe_angles(rad(math_random(1,359)), rad(math_random(1,359)), rad(math_random(1,359)))
                end
                render_stepped_wait(render_stepped)
                hrp["CFrame"] = old_cframe
                hrp["Velocity"] = old_velocity
            else
                in_void = false
            end
        end)

        create_connection(menu_references["void_hide"]["on_toggle_change"], function(value)
            for i = 1, #anti_aim do
                if anti_aim[i] == do_void_hide then
                    remove(anti_aim, i)
                    break
                end
            end

            in_void = false

            if value then
                anti_aim[#anti_aim+1] = do_void_hide
            else
                local camera_cframe = camera["CFrame"]
                render_stepped_wait(render_stepped)
                camera["CFrame"] = camera_cframe
            end
        end)

        create_connection(menu_references["void_hide_force_when"]["on_dropdown_change"], function(value)
            void_hide_force_when_reloading = false
            void_hide_force_when_tabbed_out = false
            void_hide_force_when_not_full_health = false
            for i = 1, #value do
                local value = value[i]
                if value == "not full health" then
                    void_hide_force_when_not_full_health = true
                elseif value == "reloading" then
                    void_hide_force_when_reloading = true
                elseif value == "tabbed out" then
                    void_hide_force_when_tabbed_out = true
                end
            end
        end)

        create_connection(menu_references["void_hide_disable_when"]["on_dropdown_change"], function(value)
            void_hide_disable_when_purchasing = false
            void_hide_disable_when_following_target = false
            void_hide_disable_when_target_knocked = false
            void_hide_disable_when_target_selected = false
            for i = 1, #value do
                local value = value[i]
                if value == "purchasing" then
                    void_hide_disable_when_purchasing = true
                elseif value == "following target" then
                    void_hide_disable_when_following_target = true
                elseif value == "target knocked" then
                    void_hide_disable_when_target_knocked = true
                elseif value == "target selected" then
                    void_hide_disable_when_target_selected = true
                end
            end
        end)
    end

    -- > ( auto equip)

    do
        local auto_equip_guns = {"[Rifle]"}
        local fake_local_guns = {}
        local auto_equip_unequip_when_when_no_target = true
        local auto_equip_unequip_when_when_no_target_connection = nil

        local auto_equip_connection_1 = nil
        local auto_equip_connection_2 = nil
        local auto_equip_connection_3 = nil

        local setscriptable = setscriptable

        local do_auto_equip = LPH_JIT_MAX(function(dt, hrp)
            local backpack = local_player["Backpack"]
            if backpack and not purchasing and hrp and (not auto_equip_unequip_when_when_no_target or ragebot_target ~= nil) then
                for name, gun in fake_local_guns do
                    local is_gun = false
                    for i = 1, #auto_equip_guns do
                        if name == auto_equip_guns[i] then
                            setscriptable(gun, "Parent", true)
                            gun["Parent"] = local_character
                            is_gun = true
                        end
                    end
                    if not is_gun and gun["Parent"] == local_character then
                        setscriptable(gun, "Parent", true)
                        gun["Parent"] = backpack
                    end
                end
            end
        end)

        local do_unequip = function()
            local backpack = local_player["Backpack"]

            if backpack then
                for gun, data in local_guns do
                    local gun = gun["Parent"]
                    if gun and gun["Parent"] == local_character then
                        setscriptable(gun, "Parent", true)
                        gun["Parent"] = backpack
                    end
                end
            end
        end

        local add_tool = function(gun)
            if gun then
                fake_local_guns[gun["Name"]] = gun
            end
        end

        local remove_tool = function(gun)
            fake_local_guns[gun["Name"]] = nil
        end

        local refresh_backpack_connections = function()
            local backpack = local_player["Backpack"]

            if auto_equip_connection_2 then
                auto_equip_connection_2:Disconnect()
                auto_equip_connection_2 = nil
            end

            if auto_equip_connection_3 then
                auto_equip_connection_3:Disconnect()
                auto_equip_connection_3 = nil
            end

            local children = get_children(backpack)
            for i = 1, #children do
                add_tool(children[i])
            end

            auto_equip_connection_2 = create_connection(backpack["ChildAdded"], add_tool)
            auto_equip_connection_3 = create_connection(backpack["ChildRemoved"], remove_tool)
        end

        create_connection(menu_references["auto_equip"]["on_toggle_change"], function(value)
            fake_local_guns = {}

            if auto_equip_connection_1 then
                auto_equip_connection_1:Disconnect()
                auto_equip_connection_1 = nil
            end

            if auto_equip_connection_2 then
                auto_equip_connection_2:Disconnect()
                auto_equip_connection_2 = nil
            end

            if auto_equip_connection_3 then
                auto_equip_connection_3:Disconnect()
                auto_equip_connection_3 = nil
            end

            if auto_equip_unequip_when_when_no_target_connection then
                auto_equip_unequip_when_when_no_target_connection:Disconnect()
                auto_equip_unequip_when_when_no_target_connection = nil
            end

            wait()
            local value = flags["auto_equip"]
            for i = 1, #heartbeat do
                if heartbeat[i] == do_auto_equip then
                    remove(heartbeat, i)
                    break
                end
            end

            if value then
                heartbeat[#heartbeat+1] = do_auto_equip

                refresh_backpack_connections()

                auto_equip_connection_1 = create_connection(signals["on_local_character_added"], refresh_backpack_connections)
                if auto_equip_unequip_when_when_no_target then
                    auto_equip_unequip_when_when_no_target_connection = create_connection(signals["on_ragebot_target_changed"], do_unequip)
                end
            end
        end)

        create_connection(menu_references["auto_equip_unequip_when"]["on_dropdown_change"], function(value)
            if auto_equip_unequip_when_when_no_target_connection then
                auto_equip_unequip_when_when_no_target_connection:Disconnect()
                auto_equip_unequip_when_when_no_target_connection = nil
            end

            auto_equip_unequip_when_when_no_target = false

            for i = 1, #value do
                local value = value[i]
                if value == "no target" then
                    auto_equip_unequip_when_when_no_target = true
                end
            end

            if auto_equip_unequip_when_when_no_target and flags["auto_equip"] then
                auto_equip_unequip_when_when_no_target_connection = create_connection(signals["on_ragebot_target_changed"], do_unequip)
            end
        end)

        create_connection(menu_references["auto_equip_gun"]["on_dropdown_change"], function(value)
            auto_equip_guns = {}
            for i = 1, #value do
                local value = value[i]
                if value == "revolver" then
                    auto_equip_guns[#auto_equip_guns+1] = "[Revolver]"
                elseif value == "rifle" then
                    auto_equip_guns[#auto_equip_guns+1] = "[Rifle]"
                elseif value == "lmg" then
                    auto_equip_guns[#auto_equip_guns+1] = "[LMG]"
                elseif value == "aug" then
                    auto_equip_guns[#auto_equip_guns+1] = "[AUG]"
                elseif value == "ak47" then
                    auto_equip_guns[#auto_equip_guns+1] = "[AK47]"
                elseif value == "p90" then
                    auto_equip_guns[#auto_equip_guns+1] = "[P90]"
                elseif value == "flintlock" then
                    auto_equip_guns[#auto_equip_guns+1] = "[Flintlock]"
                elseif value == "double-barrel sg" then
                    auto_equip_guns[#auto_equip_guns+1] = "[Double-Barrel SG]"
                end
            end
        end)
    end

    -- > ( look at )

    do
        local do_face_target = LPH_NO_VIRTUALIZE(function(dt, hrp)
            local humanoid = local_parts["Humanoid"]

            if humanoid then
                humanoid["AutoRotate"] = ragebot_target == nil
            end

            if ragebot_target and hrp then
                local old = hrp["Position"]
                local target = ragebot_target[4]["HumanoidRootPart"]["Position"]
                hrp["CFrame"] = cframe_new(old, vector3_new(target["X"], old["Y"], target["Z"]))
            end
        end)

        create_connection(menu_references["face_target"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_face_target then
                    remove(heartbeat, i)
                    break
                end
            end

            local humanoid = local_parts["Humanoid"]

            if humanoid then
                humanoid["AutoRotate"] = true
            end

            if value then
                heartbeat[#heartbeat+1] = do_face_target
            end
        end)
    end

    -- > ( ragebot tracer )

    do
        local tracer = nil
        local outline = nil

        local did = false
        local last_to = nil
        local tracer_end = "predicted position"

        local tracer_origin = "gun"
        local transparency = {["Transparency"] = 1}
        local outline_transparency = {["Transparency"] = 1}

        local do_ragebot_tracer = LPH_JIT_MAX(function(dt, hrp)
            local ragebot_aim_position = ragebot_aim_position ~= vector3_zero and ragebot_aim_position or nil
            if not ragebot_aim_position and did then
                did = false

                tween(tracer, hide_transparency, circular, out, 0.12)
                tween(outline, hide_transparency, circular, out, 0.12)

                delay(0.12, function()
                    last_to = nil
                end)
            elseif ragebot_aim_position and not did then
                did = true

                tween(tracer, transparency, circular, out, 0.12)
                tween(outline, outline_transparency, circular, out, 0.12)
            end

            last_to = tracer_end == "predicted position" and ragebot_aim_position or (ragebot_target and (ragebot_target[4]["UpperTorso"] and ragebot_target[4]["UpperTorso"]["Position"] or vector3_new())) or last_to

            local origin = nil
            if tracer_origin == "gun" and local_gun and local_tool then
                local handle = local_tool["Handle"]
                origin = world_to_viewport_point(camera, handle["Position"])
            elseif tracer_origin == "character" and hrp then
                origin = world_to_viewport_point(camera, hrp["Position"])
            end

            origin = origin or get_mouse_location(user_input_service)

            if origin and last_to then
                local to = world_to_viewport_point(camera, last_to)

                local size = camera["ViewportSize"]
                local x_full = size["X"]
                local y_full = size["Y"]
                local x_half = x_full/2
                local y_half = y_full/2

                if typeof(origin) == "Vector3" then
                    origin = origin["Z"] < 0 and vector2_new(clamp(x_half + (x_half - origin["X"]), 0, x_full), clamp(y_half + (y_half - origin["Y"]), 0, y_full)) or vector2_new(origin["X"], origin["Y"])
                end

                to = to["Z"] < 0 and vector2_new(clamp(x_half + (x_half - to["X"]), 0, x_full), clamp(y_half + (y_half - to["Y"]), 0, y_full)) or vector2_new(to["X"], to["Y"])

                tracer["From"] = origin
                tracer["To"] = to

                local vector = to - origin
                local distance = vector["Magnitude"]
                local unit = vector2_new(vector["X"] / distance, vector["Y"] / distance) * 2

                outline["From"] = origin - unit
                outline["To"] = to + unit
            end
        end)

        create_connection(menu_references["ragebot_tracer"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_ragebot_tracer then
                    remove(heartbeat, i)
                    break
                end
            end

            if tracer then
                tracer:Destroy()
                outline:Destroy()
                tracer = nil
                outline = nil
            end

            if value then
                outline = create_real_drawing("Line", {
                    ["Thickness"] = flags["ragebot_tracer_thickness"]+4,
                    ["Color"] = flags["ragebot_tracer_outline_color"],
                    ["Visible"] = true,
                    ["Transparency"] = 0
                })

                tracer = create_real_drawing("Line", {
                    ["Thickness"] = flags["ragebot_tracer_thickness"],
                    ["Color"] = flags["ragebot_tracer_color"],
                    ["Visible"] = true,
                    ["ZIndex"] = 2,
                    ["Transparency"] = 0
                })

                did = false

                heartbeat[#heartbeat+1] = do_ragebot_tracer
            end
        end)

        create_connection(menu_references["ragebot_tracer_origin"]["on_dropdown_change"], function(value)
            tracer_origin = value[1]
        end)

        create_connection(menu_references["ragebot_tracer_thickness"]["on_slider_change"], function(value)
            if outline then
                outline["Thickness"] = value+2
                tracer["Thickness"] = value
            end
        end)

        create_connection(menu_references["ragebot_tracer_end_point"]["on_dropdown_change"], function(value)
            tracer_end = value[1]
        end)

        create_connection(menu_references["ragebot_tracer_color"]["on_color_change"], function(value)
            if tracer then
                tracer["Color"] = value
            end
        end)

        create_connection(menu_references["ragebot_tracer_color"]["on_transparency_change"], function(value)
            local value = -value+1
            transparency = {["Transparency"] = value}
            if tracer then
                tracer["Transparency"] = value
            end
        end)

        create_connection(menu_references["ragebot_tracer_outline_color"]["on_color_change"], function(value)
            if outline then
                outline["Color"] = value
            end
        end)

        create_connection(menu_references["ragebot_tracer_outline_color"]["on_transparency_change"], function(value)
            local value = -value+1
            outline_transparency = {["Transparency"] = value}
            if outline then
                outline["Transparency"] = value
            end
        end)
    end
    
    -- > ( control )

    --[[do
        local path = "juju recode/controllers.json"
        local current_controllers = {}
        local controller_user_ids = {}
        local connections = {}
        local prefix = "!"
        local last_player = nil
        local commands = {}
        local do_reply = true

        local on_chat = LPH_JIT_MAX(function(chat)
            
            local p = chat:sub(1, 1)

            if prefix ~= p then
                return
            end

            local body = chat:sub(2)
            
            local parts = {}
            for word in body:gmatch("%S+") do
                parts[#parts+1] = word
            end
            
            if #parts >= 1 then
                local command = parts[1]
                local args = {}
            
                for i = 2, #parts do
                    args[#args+1] = parts[i]
                end

                if not command then
                    return
                end

                local command = commands[command]

                if command then
                    command(args)
                end 
            end
        end)

        local add_controller = function(data, old)
            local player = data[2]

            local id = player["UserId"]

            if not old then
                controller_user_ids[#controller_user_ids+1] = id

                writefile(path, http_service["JSONEncode"](http_service, controller_user_ids))
            end

            current_controllers[#current_controllers+1] = data

            connections[player] = create_connection(player["Chatted"], on_chat)
        end

        local event = find_first_child(replicated_storage, "DefaultChatSystemChatEvents")
            
        if event then
            event = find_first_child(event, "SayMessageRequest")
        end

        commands = {
            ["feature"] = function(args)
                if not args[1] or not args[2] then
                    return
                end

                local sub_command = args[1]
                local feature = args[2]:lower()

                local feature_data = menu_references[feature]
                if not feature_data then
                    if do_reply then
                        event["FireServer"](event, "[<3] failed to find feature "..feature.."(try the flag instead)", "All")
                    end
                    return
                end

                if sub_command == "enable" then
                    local set_toggle = feature_data["set_toggle"]

                    if not set_toggle then
                        if do_reply then
                            event["FireServer"](event, "[<3] feature "..feature.." does not have a toggle", "All")
                        end
                        return
                    end

                    set_toggle(feature_data, true)
                    if do_reply then
                        event["FireServer"](event, "[<3] enabled feature "..feature, "All")
                    end
                elseif sub_command == "disable" then
                    local set_toggle = feature_data["set_toggle"]

                    if not set_toggle then
                        if do_reply then
                            event["FireServer"](event, "[<3] feature "..feature.." does not have a toggle", "All")
                        end
                        return
                    end

                    set_toggle(feature_data, false)

                    if do_reply then
                        event["FireServer"](event, "[<3] disabled feature "..feature, "All")
                    end
                end
            end,
            ["control"] = function(args)
                if not args[1] or not args[2] then
                    return
                end

                local sub_command = args[1]
                local player = args[2]:lower()
                local found = nil

                for potential_player, data in player_data do
                    local instance = data[2]

                    if instance["Name"]:lower():find(player) or instance["DisplayName"]:lower():find(player) then
                        found = potential_player
                        break
                    end
                end

                if not found then
                    if do_reply then
                        event["FireServer"](event, "[<3] no matching players found for "..player, "All")
                    end
                    return
                end

                if sub_command == "add" then
                    local name = found["Name"]
                        
                    if connections[player] then
                        if do_reply then
                            event["FireServer"](event, "[<3] player "..name.." is already a controller", "All")
                        end
                        return
                    end

                    if do_reply then
                        event["FireServer"](event, "[<3] player "..name.." is now a controller", "All")
                    end

                    add_controller(player_data[found], false)
                elseif sub_command == "remove" then
                    local name = found["Name"]
                        
                    if not connections[player] then
                        if do_reply then
                            event["FireServer"](event, "[<3] player "..name.." is not a controller", "All")
                        end
                        return
                    end

                    if do_reply then
                        event["FireServer"](event, "[<3] player "..name.." is no longer a controller", "All")
                    end

                    remove_controller(player_data[found])
                end
            end,
            ["target"] = function(args)
                if not args[1] or not args[2] then
                    return
                end

                local sub_command = args[1]
                local player = args[2]:lower()
                local found = nil

                for potential_player, data in player_data do
                    local instance = data[2]

                    if instance["Name"]:lower():find(player) or instance["DisplayName"]:lower():find(player) then
                        found = potential_player
                        break
                    end
                end

                if not found then
                    if do_reply then
                        event["FireServer"](event, "[<3] no matching players found for "..player, "All")
                    end
                    return
                end

                if sub_command == "add" then
                    local name = found["Name"]
                    local target = player_data[found]

                    if ragebot_targets[target] then
                        if do_reply then
                            event["FireServer"](event, "[<3] player "..name.." is already a target", "All")
                        end
                        return
                    end

                    if do_reply then
                        event["FireServer"](event, "[<3] player  "..name.." is now a target", "All")
                    end

                    ragebot_targets[target] = true
                elseif sub_command == "remove" then
                    local name = found["Name"]

                    if not connections[found] then
                        if do_reply then
                            event["FireServer"](event, "[<3] player "..name.." is not a target", "All")
                        end
                        return
                    end

                    if do_reply then
                        event["FireServer"](event, "[<3] player "..name.." is no longer a target", "All")
                    end

                    local target = player_data[found]

                    if ragebot_target == target then
                        set_ragebot_target(nil)
                    end

                    ragebot_targets[target] = nil
                end
            end,
            ["get_controllers"] = function(args)
                local requested_page = args[1] or 1

                local pages = {}
                local current_page_string = ""

                for _, id in controller_user_ids do
                    local id_formatted = "> ID "..tostring(id).." | "

                    if #current_page_string + #id_formatted > 60 then
                        pages[#pages+1] = current_page_string
                        current_page_string = id_formatted
                    else
                        if #current_page_string > 0 then
                            current_page_string = current_page_string .. id_formatted
                        else
                            current_page_string = id_formatted
                        end
                    end
                end

                if #current_page_string > 0 then
                    pages[#pages+1] = current_page_string
                end

                event["FireServer"](event, pages[requested_page].."page ("..requested_page.."/"..#pages..")", "All")
            end
        }

        getgenv()["juju"]["add_control_command"] = function(name, callback)
            local type1 = type(name)

            if type1 ~= "string" then
                error("juju: add_control_command arg #1 expected string got "..type1)
                return
            end

            local type2 = type(callback)

            if type2 ~= "function" then
                error("juju: add_control_command arg #2 expected function got "..type2)
                return
            end

            if commands[name] then
                error("juju: command "..name.." already exists")
                return
            end

            commands[name] = callback
        end

        getgenv()["juju"]["remove_control_command"] = function(name)
            local type1 = type(name)

            if type1 ~= "string" then
                error("juju: remove_control_command arg #1 expected string got "..type1)
                return
            end

            if not commands[name] then
                error("juju: command "..name.." does not exist")
                return
            end

            if name == "target" or name == "feature" or name == "get_controllers" then
                error("juju: command "..name.." cannot be removed")
                return
            end

            commands[name] = nil
        end

        -- >> ( check saved controllers )

        if not isfile(path) then
            writefile(path, http_service["JSONEncode"](http_service, {}))
        else
            local controllers = {}

            local s, err = pcall(function()
                controllers = http_service["JSONDecode"](http_service, readfile(path))
            end)

            if err then
                writefile(path, http_service["JSONDecode"](http_service, {}))
            else
                for i = 1, #controllers do
                    local id = controllers[i]
                    for player, data in player_data do
                        if tostring(player["UserId"]) == id then
                            add_controller(data, true)
                        end
                    end
                end
            end
        end

        -- >> ( core )

        create_connection(menu_references["control"]["on_toggle_change"], function(value)
            for _, connection in connections do
                connection:Disconnect()
                connections[_] = nil
            end

            if value then
                connections[local_player] = create_connection(local_player["Chatted"], on_chat)
                for i, controller in current_controllers do
                    local controller = current_controllers[i]
                    if controller then
                        local player = controller[2]

                        if not player then
                            remove(current_controllers, i)
                            continue
                        end

                        add_controller(controller, false)
                    end
                end
            end
        end)
    end--]]
end

-- > ( legitbot )

local set_aim_assist_position = nil
local set_silent_aim_position = nil
local get_silent_aim_position = nil
local get_backtrack_models = nil

do
    -- >> ( mouse hook )

    local silent_aim_position = nil
    local silent_aim_redirect_chance = 0
    local custom_silent_aim_position = nil

    do
        local old = getrawmetatable(mouse)
        local old_index = old["__index"]
        local getcallingscript = getcallingscript
        local getthreadidentity = getthreadidentity
        local checkcaller = checkcaller
        
        local new = {
            ["__index"] = newcclosure(LPH_JIT_MAX(function(self, index)
                local force = getthreadidentity() == 5
                if (force or not checkcaller()) and self and index == "Hit" then
                    if silent_aim_position or ragebot_aim_position then
                        if force or getcallingscript()["Name"]:find("Gun") then
                            if ragebot_aim_position then
                                return cframe_new(ragebot_aim_position)
                            end
                            if math_random(1,100) > silent_aim_redirect_chance then
                                return cframe_new(silent_aim_position)
                            end
                        end
                    end
                end
                return old_index(self, index)
            end))
        }

        for _, v in old do
            if not new[_] then
                new[_] = v
            end
        end

        setrawmetatable(mouse, new)
    end

    set_silent_aim_position = LPH_NO_VIRTUALIZE(function(position)
        local type = typeof(position)

        if type ~= "Vector3" then
            error("juju: set_silent_aim_position expected Vector3 got"..type)
            return
        end

        custom_silent_aim_position = position
        spawn(function()
            if custom_silent_aim_position == position then
                custom_silent_aim_position = nil
            end
        end)
    end)

    get_silent_aim_position = LPH_NO_VIRTUALIZE(function()
        return custom_silent_aim_position or silent_aim_position
    end)

    -- >> ( ui )

    menu_references["legitbot_settings_section"] = menu["groups"]["main"]:create_section("legitbot", "target selection", 1, 0.57)
        menu_references["legitbot_target_selection_settings"] = menu_references["legitbot_settings_section"]:create_element({["name"] = "settings"}, {})
        menu_references["legitbot_target_selection_settings"] = menu_references["legitbot_target_selection_settings"]:create_settings()
        menu_references["legitbot_target_selection_target_switch_cooldown"] = menu_references["legitbot_target_selection_settings"]:create_element({["name"] = "target swap cooldown"}, {["slider"] = {["flag"] = "legitbot_target_selection_target_switch_cooldown", ["min"] = 0, ["max"] = 2, ["suffix"] = "s", ["min_text"] = "none", ["default"] = 0, ["decimals"] = 2}})
        menu_references["legitbot_target_selection_max_target_distance"] = menu_references["legitbot_target_selection_settings"]:create_element({["name"] = "target distance"}, {["slider"] = {["flag"] = "legitbot_target_selection_max_target_distance", ["min"] = 0, ["max"] = 2500, ["suffix"] = " studs", ["default"] = 0, ["min_text"] = "gun range", ["max_text"] = "infinite"}})
        menu_references["legitbot_target_selection_notification"] = menu_references["legitbot_settings_section"]:create_element({["name"] = "notification"}, {["toggle"] = {["flag"] = "legitbot_target_selection_notification", ["default"] = false}})
        menu_references["legitbot_target_selection_automatic"] = menu_references["legitbot_settings_section"]:create_element({["name"] = "automatic"}, {["toggle"] = {["flag"] = "legitbot_target_selection_automatic", ["default"] = false}})
        menu_references["legitbot_target_selection_target_bind"] = menu_references["legitbot_settings_section"]:create_element({["name"] = "target bind"}, {["keybind"] = {["flag"] = "legitbot_target_selection_target_bind", ["default"] = Enum["KeyCode"]["E"]}})
        menu_references["legitbot_target_selection_untarget_when"] = menu_references["legitbot_settings_section"]:create_element({["name"] = "untarget when"}, {["dropdown"] = {["flag"] = "legitbot_target_selection_untarget_when", ["default"] = {"not visible", "knocked"}, ["options"] = {"better target", "not visible", "off screen", "knocked"}, ["multi"] = true}})
        menu_references["legitbot_target_statuses"] = menu_references["legitbot_settings_section"]:create_element({["name"] = "target statuses"}, {["dropdown"] = {["flag"] = "legitbot_target_statuses", ["options"] = {"friendly", "neutral", "enemy"}, ["default"] = {"neutral", "enemy"}, ["multi"] = true, ["requires_one"] = true}})
        menu_references["legitbot_target_selection_ignore_if"] = menu_references["legitbot_settings_section"]:create_element({["name"] = "ignore if"}, {["dropdown"] = {["flag"] = "ignore_if", ["options"] = {"invulnerable", "not visible", "knocked"}, ["default"] = {"invulnerable", "not visible", "knocked"}, ["multi"] = true}})
        menu_references["legitbot_field_of_view"] = menu_references["legitbot_settings_section"]:create_element({["name"] = "field of view"}, {["slider"] = {["flag"] = "legitbot_field_of_view", ["min"] = 0, ["max"] = 180, ["default"] = 180, ["suffix"] = "", ["max_text"] = "full"}})
    menu_references["aim_assist_section"] = menu["groups"]["main"]:create_section("legitbot", "assistance", 1, 0.2, 0.57)
        menu_references["aim_assist"] = menu_references["aim_assist_section"]:create_element({["name"] = "aim assist"}, {["toggle"] = {["flag"] = "aim_assist"}})
        menu_references["aim_assist_settings"] = menu_references["aim_assist"]:create_settings()
        menu_references["aim_assist_hitbox"] = menu_references["aim_assist_settings"]:create_element({["name"] = "hitbox"}, {["dropdown"] = {["flag"] = "aim_assist_hitbox", ["options"] = {"random", "closest", "head", "root"}, ["default"] = {"head"}, ["multi"] = false, ["requires_one"] = true}})
        menu_references["aim_assist_method"] = menu_references["aim_assist_settings"]:create_element({["name"] = "method"}, {["dropdown"] = {["flag"] = "aim_assist_method", ["options"] = {"camera", "mouse"}, ["default"] = {"mouse"}, ["requires_one"] = true}})
        menu_references["aim_assist_dont_aim_if"] = menu_references["aim_assist_settings"]:create_element({["name"] = "dont aim if"}, {["dropdown"] = {["flag"] = "aim_assist_dont_aim_if", ["options"] = {"no gun equipped", "reloading"}, ["default"] = {"no gun equipped", "reloading"}, ["multi"] = true}})
        menu_references["aim_assist_max_distance"] = menu_references["aim_assist_settings"]:create_element({["name"] = "max distance"}, {["slider"] = {["flag"] = "aim_assist_max_distance", ["min"] = 0, ["max"] = 2500, ["default"] = 0, ["suffix"] = " studs", ["min_text"] = "gun range", ["max_text"] = "infinite"}})
        menu_references["aim_assist_multipoint"] = menu_references["aim_assist_settings"]:create_element({["name"] = "multipoint"}, {["slider"] = {["flag"] = "aim_assist_multipoint", ["min"] = 0, ["max"] = 100, ["default"] = 90, ["suffix"] = "%"}})

        menu_references["aim_assist_smoothing"] = menu_references["aim_assist_section"]:create_element({["name"] = "smoothing"}, {["toggle"] = {["flag"] = "aim_assist_smoothing"}})
        menu_references["aim_assist_smoothing_settings"] = menu_references["aim_assist_smoothing"]:create_settings()
        menu_references["aim_assist_smoothing_type"] = menu_references["aim_assist_smoothing_settings"]:create_element({["name"] = "type"}, {["dropdown"] = {["flag"] = "aim_assist_smoothing_type", ["options"] = {"exponential", "constant", "random", "quart", "quad", "back", "sine"}, ["default"] = {"random"}, ["multi"] = false, ["requires_one"] = true}})
        menu_references["aim_assist_horizontal_smoothing_amount"] = menu_references["aim_assist_smoothing_settings"]:create_element({["name"] = "horizontal"}, {["slider"] = {["flag"] = "aim_assist_horizontal_smoothing_amount", ["min"] = 0, ["max"] = 100, ["default"] = 45, ["suffix"] = "%"}})
        menu_references["aim_assist_vertical_smoothing_amount"] = menu_references["aim_assist_smoothing_settings"]:create_element({["name"] = "vertical"}, {["slider"] = {["flag"] = "aim_assist_vertical_smoothing_amount", ["min"] = 0, ["max"] = 100, ["default"] = 45, ["suffix"] = "%"}})

        menu_references["aim_assist_field_of_view"] = menu_references["aim_assist_section"]:create_element({["name"] = "field of view"}, {["slider"] = {["flag"] = "aim_assist_field_of_view", ["min"] = 0, ["max"] = 180, ["default"] = 30, ["suffix"] = "", ["decimals"] = 1}})
        menu_references["aim_assist_field_of_view_settings"] = menu_references["aim_assist_field_of_view"]:create_settings()
        menu_references["aim_assist_dead_zone"] = menu_references["aim_assist_field_of_view_settings"]:create_element({["name"] = "dead zone"}, {["slider"] = {["flag"] = "aim_assist_dead_zone", ["min"] = 0, ["max"] = 90, ["default"] = 0, ["suffix"] = "%", ["min_text"] = "disabled"}})
        menu_references["aim_assist_field_of_view_show_fov"] = menu_references["aim_assist_field_of_view_settings"]:create_element({["name"] = "show fov"}, {["toggle"] = {["flag"] = "aim_assist_field_of_view_show_fov"}, ["colorpicker"] = {["color_flag"] = "aim_assist_field_of_view_color", ["default_color"] = color3_fromrgb(181, 255, 246), ["default_transparency"] = 0.8, ["transparency_flag"] = "aim_assist_field_of_view_transparency"}})
        menu_references["aim_assist_field_of_view_dead_zone"] = menu_references["aim_assist_field_of_view_settings"]:create_element({["name"] = "dead zone"}, {["colorpicker"] = {["color_flag"] = "aim_assist_field_of_view_dead_zone_color", ["default_color"] = color3_fromrgb(155, 0, 0), ["default_transparency"] = 0.8, ["transparency_flag"] = "aim_assist_field_of_view_dead_zone_transparency"}})
        menu_references["aim_assist_field_of_view_outline"] = menu_references["aim_assist_field_of_view_settings"]:create_element({["name"] = "outline"}, {["colorpicker"] = {["color_flag"] = "aim_assist_field_of_view_outline_color", ["default_color"] = color3_fromrgb(181, 255, 246), ["default_transparency"] = 0.4, ["transparency_flag"] = "aim_assist_field_of_view_outline_transparency"}})

    menu_references["silent_aim_section"] = menu["groups"]["main"]:create_section("legitbot", "redirection", 1, 0.23, 0.77)
        menu_references["silent_aim"] = menu_references["silent_aim_section"]:create_element({["name"] = "silent aim"}, {["toggle"] = {["flag"] = "silent_aim"}})
        menu_references["silent_aim_settings"] = menu_references["silent_aim"]:create_settings()
        menu_references["silent_aim_hitbox"] = menu_references["silent_aim_settings"]:create_element({["name"] = "hitbox"}, {["dropdown"] = {["flag"] = "silent_aim_hitbox", ["options"] = {"random", "closest", "head", "root"}, ["default"] = {"head"}, ["multi"] = false, ["requires_one"] = true}})
        menu_references["silent_aim_max_distance"] = menu_references["silent_aim_settings"]:create_element({["name"] = "max distance"}, {["slider"] = {["flag"] = "silent_aim_max_distance", ["min"] = 0, ["max"] = 2500, ["default"] = 0, ["suffix"] = " studs", ["min_text"] = "gun range", ["max_text"] = "infinite"}})
        menu_references["silent_aim_multipoint"] = menu_references["silent_aim_settings"]:create_element({["name"] = "multipoint"}, {["slider"] = {["flag"] = "silent_aim_multipoint", ["min"] = 0, ["max"] = 100, ["default"] = 90, ["suffix"] = "%"}})
        menu_references["silent_aim_field_of_view"] = menu_references["silent_aim_section"]:create_element({["name"] = "field of view"}, {["slider"] = {["flag"] = "silent_aim_field_of_view", ["min"] = 0, ["max"] = 180, ["default"] = 30, ["suffix"] = "", ["decimals"] = 1}})
        menu_references["silent_aim_redirect_chance"] = menu_references["silent_aim_settings"]:create_element({["name"] = "redirect chance"}, {["slider"] = {["flag"] = "silent_aim_redirect_chance", ["min"] = 1, ["max"] = 100, ["default"] = 100, ["suffix"] = "%"}})
        menu_references["silent_aim_field_of_view_settings"] = menu_references["silent_aim_field_of_view"]:create_settings()
        menu_references["silent_aim_field_of_view_show_fov"] = menu_references["silent_aim_field_of_view_settings"]:create_element({["name"] = "show fov"}, {["toggle"] = {["flag"] = "silent_aim_field_of_view_show_fov"}, ["colorpicker"] = {["color_flag"] = "silent_aim_field_of_view_color", ["default_color"] = color3_fromrgb(181, 255, 246), ["default_transparency"] = 0.8, ["transparency_flag"] = "silent_aim_field_of_view_transparency"}})
        menu_references["silent_aim_field_of_view_outline"] = menu_references["silent_aim_field_of_view_settings"]:create_element({["name"] = "outline"}, {["colorpicker"] = {["color_flag"] = "silent_aim_field_of_view_outline_color", ["default_color"] = color3_fromrgb(181, 255, 246), ["default_transparency"] = 0.4, ["transparency_flag"] = "silent_aim_field_of_view_outline_transparency"}})
        menu_references["silent_aim_max_curve"] = menu_references["silent_aim_section"]:create_element({["name"] = "max curve"}, {["slider"] = {["flag"] = "silent_aim_max_curve", ["min"] = 1, ["max"] = 100, ["default"] = 100, ["suffix"] = "%"}})
        menu_references["silent_aim_max_curve_settings"] = menu_references["silent_aim_max_curve"]:create_settings()
        menu_references["silent_aim_dont_curve_vertically"] = menu_references["silent_aim_max_curve_settings"]:create_element({["name"] = "dont curve vertically"}, {["toggle"] = {["flag"] = "silent_aim_dont_curve_vertically"}})

    menu_references["triggerbot_section"] = menu["groups"]["main"]:create_section("legitbot", "trigger", 2, 0.09, 0)
        menu_references["triggerbot"] = menu_references["triggerbot_section"]:create_element({["name"] = "triggerbot"}, {["toggle"] = {["flag"] = "triggerbot"}})
        menu_references["triggerbot_settings"] = menu_references["triggerbot"]:create_settings()
        menu_references["triggerbot_max_distance"] = menu_references["triggerbot_settings"]:create_element({["name"] = "max distance"}, {["slider"] = {["flag"] = "triggerbot_max_distance", ["min"] = 0, ["max"] = 2500, ["default"] = 0, ["suffix"] = " studs", ["min_text"] = "gun range", ["max_text"] = "infinite"}})
        menu_references["triggerbot_hitboxes"] = menu_references["triggerbot_settings"]:create_element({["name"] = "hitboxes"}, {["dropdown"] = {["flag"] = "triggerbot_hitboxes", ["options"] = {"head", "torso", "arms", "legs"}, ["default"] = {"head", "torso", "arms", "legs"}, ["multi"] = true, ["requires_one"] = true}})
        menu_references["triggerbot_refresh_rate"] = menu_references["triggerbot_settings"]:create_element({["name"] = "refresh rate"}, {["slider"] = {["flag"] = "triggerbot_refresh_rate", ["min"] = 0, ["max"] = 0.1, ["default"] = 0, ["decimals"] = 2, ["suffix"] = "s", ["min_text"] = "instant"}})
        menu_references["triggerbot_hover_time"] = menu_references["triggerbot_settings"]:create_element({["name"] = "hover time"}, {["slider"] = {["flag"] = "triggerbot_hover_time", ["min"] = 0, ["max"] = 0.3, ["default"] = 0, ["decimals"] = 2, ["suffix"] = "s", ["min_text"] = "instant"}})
        menu_references["triggerbot_cooldown"] = menu_references["triggerbot_settings"]:create_element({["name"] = "cooldown"}, {["slider"] = {["flag"] = "triggerbot_cooldown", ["min"] = 0, ["max"] = 1, ["default"] = 0, ["decimals"] = 2, ["suffix"] = "s", ["min_text"] = "none"}})
        menu_references["triggerbot_delay"] = menu_references["triggerbot_settings"]:create_element({["name"] = "delay"}, {["slider"] = {["flag"] = "triggerbot_delay", ["min"] = 0, ["max"] = 0.75, ["default"] = 0, ["decimals"] = 2, ["suffix"] = "s", ["min_text"] = "instant"}})

    menu_references["legitbot_other_section"] = menu["groups"]["main"]:create_section("legitbot", "other", 2, 0.91, 0.09)
        menu_references["reduce_shotgun_spread"] = menu_references["legitbot_other_section"]:create_element({["name"] = "reduce shotgun spread"}, {["toggle"] = {["flag"] = "reduce_shotgun_spread"}})
        menu_references["reduce_shotgun_spread_settings"] = menu_references["reduce_shotgun_spread"]:create_settings()
        menu_references["reduce_shotgun_spread_amount"] = menu_references["reduce_shotgun_spread_settings"]:create_element({["name"] = "reduce amount"}, {["slider"] = {["flag"] = "reduce_shotgun_spread_amount", ["min"] = 1, ["max"] = 100, ["default"] = 35, ["decimals"] = 1, ["suffix"] = "%", ["max_text"] = "all"}})
        menu_references["backtrack"] = menu_references["legitbot_other_section"]:create_element({["name"] = "backtrack"}, {["toggle"] = {["flag"] = "backtrack"}})
        menu_references["backtrack_settings"] = menu_references["backtrack"]:create_settings()
        menu_references["backtrack_target_statuses"] = menu_references["backtrack_settings"]:create_element({["name"] = "target statuses"}, {["dropdown"] = {["flag"] = "backtrack_target_statuses", ["options"] = {"friendly", "neutral", "target", "enemy"}, ["default"] = {"neutral"}, ["requires_one"] = true, ["multi"] = true}})
        menu_references["backtrack_reset_on_hit"] = menu_references["backtrack_settings"]:create_element({["name"] = "reset when hit"}, {["toggle"] = {["flag"] = "backtrack_reset_on_hit"}})
        menu_references["backtrack_length"] = menu_references["backtrack_settings"]:create_element({["name"] = "length"}, {["slider"] = {["flag"] = "backtrack_length", ["min"] = 0.05, ["max"] = 2, ["decimals"] = 2, ["default"] = 0.125, ["suffix"] = "s"}})
        menu_references["backtrack_color"] = menu_references["backtrack_settings"]:create_element({["name"] = "color"}, {["colorpicker"] = {["color_flag"] = "backtrack_color", ["default_color"] = color3_fromrgb(181, 255, 246), ["default_transparency"] = 0.8, ["transparency_flag"] = "backtrack_transparency"}})
        menu_references["backtrack_material"] = menu_references["backtrack_settings"]:create_element({["name"] = "material"}, {["dropdown"] = {["flag"] = "backtrack_material", ["options"] = {"forcefield", "neon"}, ["default"] = {"neon"}, ["requires_one"] = true}})

    -- >> ( legitbot master )

    local legitbot_ignore_if_invulnerable = true
    local legitbot_ignore_if_knocked = true
    local legitbot_ignore_if_not_visible = true
    local legitbot_untarget_when_knocked = true
    local legitbot_untarget_when_better_target = false
    local legitbot_untarget_when_off_screen = false

    local legitbot_max_distance = 0
    local legitbot_untarget_when_not_visible = true
    local target_switch_cooldown = 0
    local legitbot_automatic = false
    local legitbot_dont_aim = false
    local do_notification = false

    local target_enemy = true
    local target_neutral = true
    local target_friendly = false
    local last_target_dt = clock()
    local last_switch = clock()

    local params = RaycastParams["new"]()
    local raycast = workspace["Raycast"]

    params["FilterType"] = Enum["RaycastFilterType"]["Exclude"]
    params["FilterDescendantsInstances"] = {}

    local target_changed_signal = signals["on_legitbot_target_changed"]

    set_legitbot_target = LPH_NO_VIRTUALIZE(function(target, automatic)
        if legitbot_target == target then
            return
        end

        if not automatic or (target == nil or clock() - last_switch > target_switch_cooldown) then
            last_switch = clock()

            if do_notification then
                new_notification("set legitbot target to "..(target and target[1][2]["Name"] or "nobody"), 1)
            end

            legitbot_target = target
            target_changed_signal:Fire(target and target[1] or nil)
        end
    end)

    local legitbot_field_of_view = false

    local get_legitbot_target = nil; get_legitbot_target = LPH_NO_VIRTUALIZE(function(dt, getting, bypass)
        local camera_pos = camera["CFrame"]["p"]
        local mouse_pos = get_mouse_location(user_input_service)

        if not bypass then
            legitbot_dont_aim = false

            if legitbot_target then
                local data = legitbot_target[1]

                if data then
                    local parts = data[4]
                    local hrp = parts["HumanoidRootPart"]
                    local hrp_position = hrp["Position"]

                    if (legitbot_untarget_when_knocked and data[18]) then
                        set_legitbot_target(legitbot_automatic and get_legitbot_target(dt, true, true) or nil)
                        return
                    end

                    if legitbot_untarget_when_not_visible then
                        local distance = hrp_position-camera_pos

                        params["FilterDescendantsInstances"] = {data[3], local_character, ignored, bush, vehicles, get_backtrack_models()}

                        if raycast(workspace, camera_pos, distance.unit * distance.Magnitude, params) then
                            set_legitbot_target(legitbot_automatic and get_legitbot_target(dt, true, true) or nil)
                            return
                        end
                    end

                    if legitbot_untarget_when_better_target then
                        local target = get_legitbot_target(dt, hrp, true)
                        if target and target[1] ~= data then
                            set_legitbot_target(legitbot_automatic and get_legitbot_target(dt, true, true) or nil, true)
                            return
                        end
                    end

                    if legitbot_max_distance == 2500 or (hrp_position-local_client_position["p"])["Magnitude"] < (legitbot_max_distance == 0 and (local_gun or 200) or legitbot_max_distance) then
                        local position, on_screen = world_to_viewport_point(camera, hrp_position)

                        if legitbot_untarget_when_off_screen and not on_screen then
                            set_legitbot_target(legitbot_automatic and get_legitbot_target(dt, true, true) or nil)
                            return
                        end

                        if legitbot_ignore_if_invulnerable and ((parts["FORCEFIELD"] or parts["ForceField"])) then
                            legitbot_dont_aim = true
                            return
                        elseif legitbot_ignore_if_knocked and data[18] then
                            legitbot_dont_aim = true
                            return
                        end

                        if legitbot_ignore_if_not_visible then
                            local distance = hrp_position-camera_pos

                            params["FilterDescendantsInstances"] = {data[3], local_character, ignored, bush, vehicles, get_backtrack_models()}
                            if raycast(workspace, camera_pos, distance.unit * distance.Magnitude, params) then
                                legitbot_dont_aim = true
                                return
                            end
                        end

                        legitbot_target = {data, hrp, (vector2_new(position["X"], position["Y"]) - mouse_pos)["Magnitude"]}
                        legitbot_dont_aim = false

                        return legitbot_target
                    end
                end
            end

            if not legitbot_automatic then
                return
            end
        end

        last_target_dt = dt
        local targets = {}

        local local_client_position = local_client_position["p"]
        local mouse_position = get_mouse_location(user_input_service)
        
        local field_of_view = legitbot_field_of_view and (camera["ViewportSize"]["Magnitude"]/(pi/2))*legitbot_field_of_view or false

        for player, data in player_data do
            if not data[7] and not data[18] then
                local status = data[1]

                if status == 3 and target_enemy or status == 2 and target_friendly or status == 1 and target_neutral then
                    local parts = data[4]
                    local hrp = parts["HumanoidRootPart"]

                    if hrp then
                        local hrp_position = hrp["Position"]
                        local position, on_screen = world_to_viewport_point(camera, hrp_position)

                        if on_screen and (legitbot_max_distance == 2500 or (hrp_position-local_client_position)["Magnitude"] < (legitbot_max_distance == 0 and (local_gun or 200) or legitbot_max_distance)) then
                            if legitbot_ignore_if_invulnerable and ((parts["FORCEFIELD"] or parts["ForceField"]) or parts["GRABBING_CONSTRAINT"]) then
                                continue
                            end
                            local distance = (vector2_new(position["X"], position["Y"]) - mouse_pos)["Magnitude"]

                            if field_of_view and distance > field_of_view then
                                continue
                            end
                            if legitbot_ignore_if_not_visible then
                                local distance = hrp_position-camera_pos

                                params["FilterDescendantsInstances"] = {data[3], local_character, ignored, bush, vehicles, get_backtrack_models()}
                                if raycast(workspace, camera_pos, distance.unit * distance.Magnitude, params) then
                                    continue
                                end
                            end
                            if legitbot_ignore_if_knocked and data[18] then
                                continue
                            end

                            targets[#targets+1] = {data, hrp, distance}
                        end
                    end
                end
            end
        end

        local closest = math["huge"]
        local best = nil
        for i = 1, #targets do
            local target = targets[i]
            local distance = target[3]
            if distance < closest then
                closest = distance
                best = target
            end
        end

        if getting then
            return best
        end

        set_legitbot_target(best, true)

        return best
    end)

    local get_closest_part = LPH_NO_VIRTUALIZE(function(data)
        local mouse_pos = get_mouse_location(user_input_service)

        local parts = data[4]
        local closest = math["huge"]
        local closest_part = nil

        for i = 1, #body_parts do
            local part = body_parts[i]
            local body_part = parts[part]
            if body_part then
                local pos, on_screen = world_to_viewport_point(camera, body_part["Position"])
                if on_screen then
                    local distance = (mouse_pos - vector2_new(pos["X"], pos["Y"])).Magnitude
                    if distance < closest then
                        closest = distance
                        closest_part = part
                    end
                end
            end
        end

        return closest_part or ""
    end)

    create_connection(menu_references["legitbot_target_selection_automatic"]["on_toggle_change"], function(value)
        legitbot_dont_aim = false
        legitbot_automatic = value
        menu_references["legitbot_target_selection_target_bind"]:set_visible(not value)
    end)

    create_connection(menu_references["legitbot_target_selection_target_bind"]["on_key_press"], function(value)
        if not legitbot_automatic and (flags["aim_assist"] or flags["triggerbot"] or flags["silent_aim"]) then
            if legitbot_target then
                set_legitbot_target(nil)
            else
                set_legitbot_target(get_legitbot_target(clock(), true, true))
            end
        end
    end)

    create_connection(menu_references["legitbot_target_selection_ignore_if"]["on_dropdown_change"], function(value)
        legitbot_ignore_if_knocked = false
        legitbot_ignore_if_invulnerable = false
        legitbot_ignore_if_not_visible = false

        for i = 1, #value do
            local value = value[i]
            if value == "knocked" then
                legitbot_ignore_if_knocked = true
            elseif value == "invulnerable" then
                legitbot_ignore_if_invulnerable = true
            elseif value == "not visible" then
                legitbot_ignore_if_not_visible = true
            end
        end
    end)

    create_connection(menu_references["legitbot_target_selection_target_switch_cooldown"]["on_slider_change"], function(value)
        target_switch_cooldown = value
    end)

    create_connection(menu_references["legitbot_target_selection_max_target_distance"]["on_slider_change"], function(value)
        legitbot_max_distance = value
    end)

    create_connection(menu_references["legitbot_target_selection_untarget_when"]["on_dropdown_change"], function(value)
        legitbot_untarget_when_knocked = false
        legitbot_untarget_when_better_target = false
        legitbot_untarget_when_not_visible = false
        legitbot_untarget_when_off_screen = false

        for i = 1, #value do
            local value = value[i]
            if value == "knocked" then
                legitbot_untarget_when_knocked = true
            elseif value == "not visible" then
                legitbot_untarget_when_not_visible = true
            elseif value == "better target" then
                legitbot_untarget_when_better_target = true
            elseif value == "off screen" then
                legitbot_untarget_when_off_screen = true
            end
        end
    end)

    create_connection(menu_references["legitbot_target_selection_notification"]["on_toggle_change"], function(value)
        do_notification = value
    end)

    create_connection(menu_references["legitbot_field_of_view"]["on_slider_change"], function(value)
        legitbot_field_of_view = value ~= 180 and value/180 or false
    end)

    -- >> ( aim assist )

    local fov_circle = nil
    local fov_circle_outline = nil
    local fov_circle_dead_zone = nil

    local aim_assist_field_of_view = (camera["ViewportSize"]["Magnitude"]/(pi/2))*(flags["aim_assist_field_of_view"]/180)
    local aim_assist_dead_zone = 0
    local aim_assist_vertical_smoothing = 6
    local aim_assist_horizontal_smoothing = 6
    local aim_assist_multipoint = 0.15
    local aim_assist_hitbox = "Head"
    local aim_assist_smoothing_type = "random"
    local aim_assist_dont_aim_if_no_gun_equipped = true
    local aim_assist_dont_aim_if_reloading = true
    local aim_assist_max_distance = 0
    local aim_assist_method = "mouse"
    local custom_aim_assist_position = nil

    local do_aim_assist = LPH_JIT_MAX(function(dt, local_hrp)
        local mouse_position = get_mouse_location(user_input_service)

        if fov_circle then
            local old_position = fov_circle["Position"]
            local new_position = old_position + (mouse_position - old_position) * dt*4^2

            fov_circle["Position"] = new_position
            fov_circle_outline["Position"] = new_position
            fov_circle_dead_zone["Position"] = new_position
        end

        if dt ~= last_target_dt and flags["aim_assist"] then
            get_legitbot_target(dt)
        end

        if legitbot_target and local_hrp then
            local distance = legitbot_target[3]
            if distance <= aim_assist_field_of_view and distance >= aim_assist_dead_zone and not legitbot_dont_aim then
                local data = legitbot_target[1]
                local part = data[4][aim_assist_hitbox == "closest" and get_closest_part(data) or aim_assist_hitbox]

                if part and not data[18] and not data[7] and (not aim_assist_dont_aim_if_no_gun_equipped or local_gun ~= nil) and (not aim_assist_dont_aim_if_reloading or not local_reloading) then
                    local part_position = custom_aim_assist_position or part["Position"]

                    if aim_assist_max_distance == 2500 or (local_hrp["Position"]-part_position)["Magnitude"] <= (aim_assist_max_distance == 0 and (local_gun or 250) or aim_assist_max_distance) then
                        if aim_assist_multipoint ~= 0 and not custom_aim_assist_position then
                            local part_cframe = part["CFrame"]
                            local cf = part_cframe:PointToObjectSpace(mouse["Hit"]["p"])
                            local size = part["Size"]*aim_assist_multipoint

                            part_cframe*=vector3_new(clamp(cf.X, -size.X, size.X),clamp(cf.Y, -size.Y, size.Y),clamp(cf.Z, -size.Z, size.Z))
                            part_position = vector3_new(part_cframe.X, part_cframe.Y, part_cframe.Z)
                        end

                        local pos, _ = world_to_viewport_point(camera, part_position)
                        local move_position = vector2_new(pos["X"] - mouse_position["X"], pos["Y"] - mouse_position["Y"])

                        if move_position["magnitude"] > 1 then 
                            local aim_assist_horizontal_multiplier = nil
                            local aim_assist_vertical_multiplier = nil

                            if aim_assist_horizontal_smoothing == 0 then
                                aim_assist_horizontal_multiplier = 0.9999
                            elseif aim_assist_smoothing_type == "random" then
                                aim_assist_horizontal_multiplier=((dt*100)/(math_random(floor(aim_assist_horizontal_smoothing*450), floor(aim_assist_horizontal_smoothing*1100))/1000))
                            elseif aim_assist_smoothing_type == "constant" then
                                aim_assist_horizontal_multiplier=((dt*100)/aim_assist_horizontal_smoothing)
                            else
                                aim_assist_horizontal_multiplier=((dt*100)/(aim_assist_horizontal_smoothing*get_value(tween_service, move_position["Magnitude"]/aim_assist_field_of_view, aim_assist_smoothing_type, out)))
                            end

                            if aim_assist_vertical_smoothing == 0 then
                                aim_assist_vertical_multiplier = 0.9999
                            elseif aim_assist_smoothing_type == "random" then
                                aim_assist_vertical_multiplier=((dt*100)/(math_random(floor(aim_assist_vertical_smoothing*450), floor(aim_assist_vertical_smoothing*1100))/1000))
                            elseif aim_assist_smoothing_type == "constant" then
                                aim_assist_vertical_multiplier=((dt*100)/aim_assist_vertical_smoothing)
                            else
                                aim_assist_vertical_multiplier=((dt*100)/(aim_assist_vertical_smoothing*get_value(tween_service, move_position["Magnitude"]/aim_assist_field_of_view, aim_assist_smoothing_type, out)))
                            end

                            if aim_assist_method == "mouse" then
                                mousemoverel(move_position["X"]*aim_assist_horizontal_multiplier, move_position["Y"]*aim_assist_vertical_multiplier)
                            elseif camera then
                                render_stepped_wait(render_stepped)
                                local old = camera["CFrame"]
                                camera["CFrame"] = old:Lerp(cframe_new(old["p"], vector3_new(part_position["X"], old["Y"], part_position["Z"])), clamp(aim_assist_horizontal_multiplier/9, 0, 1)):Lerp(cframe_new(old["p"], part_position), clamp(aim_assist_vertical_multiplier/9, 0, 1))
                            end
                        end
                    end
                end
            end
        end

        custom_aim_assist_position = nil
    end)

    local update_aim_assist_field_of_view = function()
        aim_assist_field_of_view = (camera["ViewportSize"]["Magnitude"]/(pi/2))*(flags["aim_assist_field_of_view"]/180)
        aim_assist_dead_zone = aim_assist_field_of_view*(flags["aim_assist_dead_zone"]/100)

        if fov_circle_outline then
            fov_circle_outline["Radius"] = aim_assist_field_of_view
        end

        if fov_circle_dead_zone then
            fov_circle_dead_zone["Radius"] = aim_assist_dead_zone
        end

        if fov_circle then
            fov_circle["Radius"] = aim_assist_field_of_view
        end
    end

    local aim_assist_camera_connection = nil

    create_connection(menu_references["aim_assist"]["on_toggle_change"], function(value)
        last_target_dt = nil

        if not value and not flags["triggerbot"] and not flags["silent_aim"] then
            delay(0.01, function()
                set_legitbot_target(nil)
                last_target_dt = nil
                silent_aim_position = nil
            end)
        end

        if not value then
            delay(0.15, function()
                for i = 1, #heartbeat do
                    if heartbeat[i] == do_aim_assist then
                        remove(heartbeat, i)
                        break
                    end
                end
            end)
        else
            for i = 1, #heartbeat do
                if heartbeat[i] == do_aim_assist then
                    remove(heartbeat, i)
                    break
                end
            end
        end

        if aim_assist_camera_connection then
            aim_assist_camera_connection:Disconnect()
            aim_assist_camera_connection = nil
        end

        if value then
            if fov_circle then
                tween(fov_circle, {["Transparency"] = -flags["aim_assist_field_of_view_transparency"]+1}, circular, out, 0.15)
                tween(fov_circle_outline, {['Transparency'] = -flags["aim_assist_field_of_view_outline_transparency"]+1}, circular, out, 0.15)
                tween(fov_circle_dead_zone, {['Transparency'] = -flags["aim_assist_field_of_view_dead_zone_transparency"]+1}, circular, out, 0.15)
            end
            heartbeat[#heartbeat+1] = do_aim_assist
            aim_assist_camera_connection = create_connection(camera:GetPropertyChangedSignal("ViewportSize"), update_aim_assist_field_of_view)
        elseif fov_circle then
            if fov_circle then
                tween(fov_circle, hide_transparency, circular, out, 0.15)
                tween(fov_circle_outline, hide_transparency, circular, out, 0.15)
                tween(fov_circle_dead_zone, hide_transparency, circular, out, 0.15)
            end
        end
    end)

    create_connection(menu_references["aim_assist_hitbox"]["on_dropdown_change"], function(value)
        local value = value[1]
        aim_assist_hitbox = value == "head" and "Head" or value == "root" and "HumanoidRootPart" or "closest"
    end)

    create_connection(menu_references["aim_assist_method"]["on_dropdown_change"], function(value)
        aim_assist_method = value[1]
    end)

    create_connection(menu_references["aim_assist_max_distance"]["on_slider_change"], function(value)
        aim_assist_max_distance = value
    end)

    create_connection(menu_references["aim_assist_field_of_view_show_fov"]["on_toggle_change"], function(value)
        if fov_circle then
            fov_circle:Destroy()
            fov_circle = nil
        end

        if fov_circle_outline then
            fov_circle_outline:Destroy()
            fov_circle_outline = nil
        end

        if fov_circle_dead_zone then
            fov_circle_dead_zone:Destroy()
            fov_circle_dead_zone= nil
        end

        if value then
            fov_circle = create_real_drawing("Circle", {
                ["Radius"] = aim_assist_field_of_view,
                ["Color"] = flags["aim_assist_field_of_view_color"],
                ["Filled"] = true,
                ["Transparency"] = 0,
                ["Thickness"] = 1,
                ["ZIndex"] = 12,
                ["Visible"] = true
            })
            fov_circle_outline = create_real_drawing("Circle", {
                ["Radius"] = aim_assist_field_of_view,
                ["Color"] = flags["aim_assist_field_of_view_outline_color"],
                ["Filled"] = false,
                ["Transparency"] = 0,
                ["Thickness"] = 2,
                ["ZIndex"] = 10,
                ["Visible"] = true
            })
            fov_circle_dead_zone = create_real_drawing("Circle", {
                ["Radius"] = aim_assist_dead_zone,
                ["Color"] = flags["aim_assist_field_of_view_dead_zone_color"],
                ["Filled"] = false,
                ["Transparency"] = 0,
                ["Thickness"] = 2,
                ["ZIndex"] = 11,
                ["Visible"] = true
            })
            if flags["aim_assist"] then
                tween(fov_circle, {["Transparency"] = -flags["aim_assist_field_of_view_transparency"]+1}, circular, out, 0.15)
                tween(fov_circle_outline, {['Transparency'] = -flags["aim_assist_field_of_view_outline_transparency"]+1}, circular, out, 0.15)
                tween(fov_circle_dead_zone, {['Transparency'] = -flags["aim_assist_field_of_view_dead_zone_transparency"]+1}, circular, out, 0.15)
            end
        end
    end)

    create_connection(menu_references["aim_assist_field_of_view_show_fov"]["on_color_change"], function(value)
        if fov_circle then
            fov_circle["Color"] = value
        end
    end)

    create_connection(menu_references["aim_assist_field_of_view_show_fov"]["on_transparency_change"], function(value)
        local transparency = 1-value
        if fov_circle and flags["aim_assist"] then
            tween(fov_circle, {["Transparency"] = transparency}, circular, out, 0)
        end
    end)

    create_connection(menu_references["aim_assist_field_of_view_outline"]["on_color_change"], function(value)
        if fov_circle_outline then
            fov_circle_outline["Color"] = value
        end
    end)

    create_connection(menu_references["aim_assist_field_of_view_outline"]["on_transparency_change"], function(value)
        local transparency = 1-value

        if fov_circle_outline and flags["aim_assist"] then
            tween(fov_circle_outline, {['Transparency'] = transparency}, circular, out, 0.15)
        end
    end)

    create_connection(menu_references["aim_assist_field_of_view_dead_zone"]["on_color_change"], function(value)
        if fov_circle_dead_zone then
            fov_circle_dead_zone["Color"] = value
        end
    end)

    create_connection(menu_references["aim_assist_field_of_view_dead_zone"]["on_transparency_change"], function(value)
        local transparency = 1-value
        if fov_circle_dead_zone and flags["aim_assist"] then
            tween(fov_circle_dead_zone, {['Transparency'] = transparency}, circular, out, 0.15)
        end
    end)

    create_connection(menu_references["aim_assist_field_of_view"]["on_slider_change"], update_aim_assist_field_of_view)
    create_connection(menu_references["aim_assist_dead_zone"]["on_slider_change"], update_aim_assist_field_of_view)

    create_connection(menu_references["aim_assist_smoothing"]["on_toggle_change"], function(value)
        aim_assist_vertical_smoothing = value and flags["aim_assist_vertical_smoothing_amount"]/5 or 0
        aim_assist_horizontal_smoothing = value and flags["aim_assist_horizontal_smoothing_amount"]/5 or 0
    end)

    create_connection(menu_references["aim_assist_multipoint"]["on_slider_change"], function(value)
        aim_assist_multipoint = value/200
    end)

    create_connection(menu_references["aim_assist_vertical_smoothing_amount"]["on_slider_change"], function(value)
        if flags["aim_assist_smoothing"] then
            aim_assist_vertical_smoothing = value/5
        end
    end)

    create_connection(menu_references["aim_assist_horizontal_smoothing_amount"]["on_slider_change"], function(value)
        if flags["aim_assist_smoothing"] then
            aim_assist_horizontal_smoothing = value/5
        end
    end)

    create_connection(menu_references["aim_assist_smoothing_type"]["on_dropdown_change"], function(value)
        local value = value[1]
        aim_assist_smoothing_type = value == "exponential" and Enum["EasingStyle"]["Exponential"] or value == "circular" and Enum["EasingStyle"]["Circular"] or value == "quad" and Enum["EasingStyle"]["Quad"] or value == "sine" and Enum["EasingStyle"]["Sine"] or value == "quart" and Enum["EasingStyle"]["Quart"] or value == "back" and Enum["EasingStyle"]["Back"] or value
    end)

    create_connection(menu_references["aim_assist_dont_aim_if"]["on_dropdown_change"], function(value)
        aim_assist_dont_aim_if_no_gun_equipped = false
        aim_assist_dont_aim_if_reloading = false

        for i = 1, #value do
            local value = value[i]
            if value == "no gun equipped" then
                aim_assist_dont_aim_if_no_gun_equipped = true
            elseif value == "reloading" then
                aim_assist_dont_aim_if_reloading = true
            end
        end
    end)

    set_aim_assist_position = LPH_NO_VIRTUALIZE(function(position)
        local type = typeof(position)

        if type ~= "Vector3" then
            error("juju: set_aim_assist_position arg #1 expected Vector3 got "..type)
            return
        end

        custom_aim_assist_position = position
        spawn(function()
            if custom_aim_assist_position == position then
                custom_aim_assist_position = nil
            end
        end)
    end)

    -- >> ( silent aim )

    local viewport_point_to_ray = camera["ViewportPointToRay"]

    local fov_circle = nil
    local fov_circle_outline = nil

    local silent_aim_max_distance = 0
    local silent_aim_field_of_view = (camera["ViewportSize"]["Magnitude"]/(pi/2))*(flags["silent_aim_field_of_view"]/180)
    local silent_aim_multipoint = 0.15
    local silent_aim_hitbox = "Head"
    local silent_aim_max_curve = nil
    local silent_aim_dont_curve_vertically = false

    local do_silent_aim = LPH_JIT_MAX(function(dt, hrp)
        local mouse_position = get_mouse_location(user_input_service)

        if fov_circle then
            local old_position = fov_circle["Position"]
            local new_position = old_position + (mouse_position - old_position) * dt*4^2

            fov_circle["Position"] = new_position
            fov_circle_outline["Position"] = new_position
        end

        if dt ~= last_target_dt and flags["silent_aim"] then
            get_legitbot_target(dt)
        end

        if legitbot_target and legitbot_target[3] < silent_aim_field_of_view and not legitbot_dont_aim then
            local data = legitbot_target[1]
            local part = data[4][silent_aim_hitbox == "closest" and get_closest_part(data) or silent_aim_hitbox]

            if part and not data[18] and not data[7] then
                local part_position = custom_silent_aim_position or part["Position"]

                if local_gun and (silent_aim_max_distance == 2500 or (hrp["Position"]-part_position)["Magnitude"] <= (silent_aim_max_distance == 0 and (local_gun or 250) or silent_aim_max_distance)) then
                    if silent_aim_multipoint ~= 0 and not custom_silent_aim_position then
                        local part_cframe = part["CFrame"]
                        local cf = part_cframe:PointToObjectSpace(mouse["Hit"]["p"])
                        local size = part["Size"]*silent_aim_multipoint

                        part_cframe*=vector3_new(clamp(cf.X, -size.X, size.X),clamp(cf.Y, -size.Y, size.Y),clamp(cf.Z, -size.Z, size.Z))
                        part_position = vector3_new(part_cframe.X, part_cframe.Y, part_cframe.Z)
                    end

                    silent_aim_position = part_position
                    custom_silent_aim_position = nil

                    if silent_aim_max_curve or silent_aim_dont_curve_vertically then
                        local pos = world_to_viewport_point(camera, silent_aim_position)
                        local world_position = mouse_position+((vector2_new(pos.X, pos.Y)-mouse_position)*(silent_aim_max_curve or 1))
                        local ray = viewport_point_to_ray(camera, world_position.X, silent_aim_dont_curve_vertically and mouse_position["Y"] or world_position["Y"])
                        silent_aim_position = ray["Origin"] + ray["Direction"] * (ray["Origin"]-part_position)["magnitude"]
                    end

                    return
                end
            end
        end

        silent_aim_position = nil
        custom_silent_aim_position = nil
    end)

    local update_silent_aim_field_of_view = function()
        local value = flags["silent_aim_field_of_view"]
        silent_aim_field_of_view = (camera["ViewportSize"]["Magnitude"]/(pi/2))*(value/180)

        if fov_circle_outline then
            fov_circle_outline["Radius"] = silent_aim_field_of_view
        end

        if fov_circle then
            fov_circle["Radius"] = silent_aim_field_of_view
        end
    end

    local silent_aim_camera_connection = nil

    create_connection(menu_references["silent_aim_max_curve"]["on_slider_change"], function(value)
        silent_aim_max_curve = value ~= 100 and value/100 or nil
    end)

    create_connection(menu_references["silent_aim_dont_curve_vertically"]["on_toggle_change"], function(value)
        silent_aim_dont_curve_vertically = value
    end)

    create_connection(menu_references["silent_aim"]["on_toggle_change"], function(value)
        last_target_dt = nil
        silent_aim_position = nil

        if not value and not flags["triggerbot"] and not flags["aim_assist"] then
            delay(0.01, function()
                set_legitbot_target(nil)
                last_target_dt = nil
                silent_aim_position = nil
            end)
        end

        if not value then
            delay(0.15, function()
                for i = 1, #heartbeat do
                    if heartbeat[i] == do_silent_aim then
                        remove(heartbeat, i)
                        break
                    end
                end
            end)
        else
            for i = 1, #heartbeat do
                if heartbeat[i] == do_silent_aim then
                    remove(heartbeat, i)
                    break
                end
            end
        end

        if silent_aim_camera_connection then
            silent_aim_camera_connection:Disconnect()
            silent_aim_camera_connection = nil
        end

        if value then
            update_silent_aim_field_of_view()
            if fov_circle then
                tween(fov_circle, {["Transparency"] = -flags["silent_aim_field_of_view_transparency"]+1}, circular, out, 0.15)
                tween(fov_circle_outline, {['Transparency'] = -flags["silent_aim_field_of_view_outline_transparency"]+1}, circular, out, 0.15)
            end
            heartbeat[#heartbeat+1] = do_silent_aim
            silent_aim_camera_connection = create_connection(camera:GetPropertyChangedSignal("ViewportSize"), update_silent_aim_field_of_view)
        else
            if fov_circle then
                tween(fov_circle, hide_transparency, circular, out, 0.15)
                tween(fov_circle_outline, hide_transparency, circular, out, 0.15)
            end
        end
    end)

    create_connection(menu_references["silent_aim_hitbox"]["on_dropdown_change"], function(value)
        local value = value[1]
        silent_aim_hitbox = value == "head" and "Head" or value == "root" and "HumanoidRootPart" or "closest"
    end)

    create_connection(menu_references["silent_aim_field_of_view_show_fov"]["on_toggle_change"], function(value)
        if fov_circle then
            fov_circle:Destroy()
            fov_circle = nil
        end

        if fov_circle_outline then
            fov_circle_outline:Destroy()
            fov_circle_outline = nil
        end

        if value then
            fov_circle = create_real_drawing("Circle", {
                ["Radius"] = silent_aim_field_of_view,
                ["Color"] = flags["silent_aim_field_of_view_color"],
                ["Filled"] = true,
                ["Transparency"] = 0,
                ["Thickness"] = 1,
                ["ZIndex"] = 11,
                ["Visible"] = true
            })
            fov_circle_outline = create_real_drawing("Circle", {
                ["Radius"] = silent_aim_field_of_view,
                ["Color"] = flags["silent_aim_field_of_view_outline_color"],
                ["Filled"] = false,
                ["Transparency"] = 0,
                ["Thickness"] = 2,
                ["ZIndex"] = 10,
                ["Visible"] = true
            })
            if flags["silent_aim"] then
                tween(fov_circle, {["Transparency"] = -flags["silent_aim_field_of_view_transparency"]+1}, circular, out, 0.15)
                tween(fov_circle_outline, {['Transparency'] = -flags["silent_aim_field_of_view_outline_transparency"]+1}, circular, out, 0.15)
            end
        end
    end)

    create_connection(menu_references["silent_aim_field_of_view_show_fov"]["on_color_change"], function(value)
        if fov_circle then
            fov_circle["Color"] = value
        end
    end)

    create_connection(menu_references["silent_aim_field_of_view_show_fov"]["on_transparency_change"], function(value)
        if fov_circle and flags["silent_aim"] then
            tween(fov_circle, {["Transparency"] = 1-value}, circular, out, 0)
        end
    end)

    create_connection(menu_references["silent_aim_field_of_view_outline"]["on_color_change"], function(value)
        if fov_circle_outline then
            fov_circle_outline["Color"] = value
        end
    end)

    create_connection(menu_references["silent_aim_field_of_view_outline"]["on_transparency_change"], function(value)
        if fov_circle_outline and flags["silent_aim"] then
            tween(fov_circle_outline, {["Transparency"] = 1-value}, circular, out, 0)
        end
    end)

    create_connection(menu_references["silent_aim_field_of_view"]["on_slider_change"], update_silent_aim_field_of_view)

    create_connection(menu_references["silent_aim_multipoint"]["on_slider_change"], function(value)
        silent_aim_multipoint = value/200
    end)

    create_connection(menu_references["silent_aim_redirect_chance"]["on_slider_change"], function(value)
        silent_aim_redirect_chance = 100 - value
    end)

    create_connection(menu_references["silent_aim_max_distance"]["on_slider_change"], function(value)
        silent_aim_max_distance = value
    end)

    -- >> ( triggerbot )

    do
        local viewport_point_to_ray = camera["ViewportPointToRay"]

        local triggerbot_do_head = true
        local triggerbot_do_torso = true
        local triggerbot_do_arms = false
        local triggerbot_do_legs = false
        local triggerbot_cooldown = 0
        local triggerbot_hover_time = 0
        local triggerbot_delay = 0
        local last_triggerbot_part = nil
        local triggerbot_max_distance = 0

        local triggerbot_hover_tick = clock()
        local triggerbot_tick = clock()

        local do_triggerbot = LPH_JIT_MAX(function(dt, hrp)
            local mouse_position = get_mouse_location(user_input_service)

            if dt ~= last_target_dt then
                get_legitbot_target(dt)
            end

            if legitbot_target and not legitbot_dont_aim and local_gun then
                local ray = viewport_point_to_ray(camera, mouse_position["X"], mouse_position["Y"])
                local data = legitbot_target[1]
                local parts = data[4]
                local target_hrp = parts["HumanoidRootPart"]
                if not data[7] and not data[18] and not parts["ForceField"] and not parts["FORCEFIELD"] and target_hrp then
                    local max = (triggerbot_max_distance == 0 and (local_gun or 250) or triggerbot_max_distance)
                    if triggerbot_max_distance == 2500 or (hrp["Position"]-target_hrp["Position"])["Magnitude"] <= max then
                        local ignore = {local_character, ignored, bush, vehicles, data[13], get_backtrack_models()}

                        for name, part in parts do
                            if part["ClassName"] == "Accessory" then
                                ignore[#ignore+1] = part
                            elseif part:IsA("BasePart") and part["Transparency"] == 1 then
                                ignore[#ignore+1] = part
                            end
                        end

                        params["FilterDescendantsInstances"] = ignore

                        local result = raycast(workspace, ray["Origin"], ray["Direction"] * (max), params)

                        if result then
                            local instance = result["Instance"]

                            if instance then
                                local name = instance["Name"]

                                if parts[name] == instance then
                                    local do_triggerbot = false

                                    if triggerbot_do_head and name == "Head" then
                                        do_triggerbot = instance
                                    elseif triggerbot_do_torso and (name == "UpperTorso" or name == "LowerTorso" or name == "HumanoidRootPart") then
                                        do_triggerbot = instance
                                    elseif triggerbot_do_arms and (name == "LeftUpperArm" or name == "RightUpperArm" or name == "LeftLowerArm" or name == "RightLowerArm" or name == "LeftHand" or name == "RightHand") then
                                        do_triggerbot = instance
                                    elseif triggerbot_do_legs and (name == "LeftUpperLeg" or name == "RightUpperLeg" or name == "LeftLowerLeg" or name == "RightLowerLeg" or name == "LeftFoot" or name == "RightFoot") then
                                        do_triggerbot = instance
                                    end

                                    if do_triggerbot then
                                        local tick = clock()

                                        if tick-triggerbot_tick > triggerbot_cooldown or triggerbot_cooldown == 0 then
                                            triggerbot_tick = tick

                                            if last_triggerbot_part ~= instance then
                                                triggerbot_hover_tick = tick
                                            end

                                            if tick - triggerbot_hover_tick > triggerbot_hover_time or triggerbot_hover_time == 0 then
                                                if triggerbot_delay > 0 then
                                                    delay(triggerbot_delay, function()
                                                        mouse1press()
                                                        wait()
                                                        mouse1release()
                                                    end)
                                                else
                                                    mouse1press()
                                                    wait()
                                                    mouse1release()
                                                end
                                            end
                                        end
                                    end

                                    last_triggerbot_part = instance

                                    return
                                end
                            end
                        end
                    end
                end
            end

            last_triggerbot_part = nil
        end)

        create_connection(menu_references["triggerbot"]["on_toggle_change"], function(value)
            last_target_dt = nil

            if not value and not flags["silent_aim"] and not flags["aim_assist"] then
                delay(0.01, function()
                    set_legitbot_target(nil)
                    last_target_dt = nil
                    silent_aim_position = nil
                end)
            end

            for i = 1, #heartbeat do
                if heartbeat[i] == do_triggerbot then
                    remove(heartbeat, i)
                    break
                end
            end

            if value then
                heartbeat[#heartbeat+1] = do_triggerbot
            end
        end)

        create_connection(menu_references["triggerbot_hitboxes"]["on_dropdown_change"], function(value)
            triggerbot_do_legs = false
            triggerbot_do_torso = false
            triggerbot_do_arms = false
            triggerbot_do_head = false

            for i = 1, #value do
                local value = value[i]

                if value == "head" then
                    triggerbot_do_head = true
                elseif value == "torso" then
                    triggerbot_do_torso = true
                elseif value == "arms" then
                    triggerbot_do_arms = true
                elseif value == "legs" then
                    triggerbot_do_legs = true
                end
            end
        end)

        create_connection(menu_references["triggerbot_cooldown"]["on_slider_change"], function(value)
            triggerbot_cooldown = value
        end)

        create_connection(menu_references["triggerbot_max_distance"]["on_slider_change"], function(value)
            triggerbot_max_distance = value
        end)

        create_connection(menu_references["triggerbot_delay"]["on_slider_change"], function(value)
            triggerbot_delay = value
        end)

        create_connection(menu_references["triggerbot_hover_time"]["on_slider_change"], function(value)
            triggerbot_hover_time = value
        end)
    end

    -- >> ( reduce shotgun spread )

    do
        local func_cache = {}
        local connection = nil
        local connection2 = nil
        local reduce_amount = 0.65

        local on_tool_added = function(tool)
            if not tool then
                return
            end

            local connection = getconnections(tool["Activated"])[1]

            if not connection then
                return
            end

            local old = connection["Function"]

            if not old or isourclosure(getfenv(old)["math"]["random"]) or not getinfo(old)["source"]:find("GunClientShotgun") then
                return
            end

            getfenv(old)["math"] = {
                ["random"] = newcclosure(function()
                    return math_random()*reduce_amount
                end)
            }

            func_cache[#func_cache+1] = old
        end

        local reset = function()
            func_cache = {}
        end

        create_connection(menu_references["reduce_shotgun_spread"]["on_toggle_change"], function(value)
            for i = 1, #func_cache do
                getfenv(func_cache[i])["math"] = nil
                func_cache[i] = nil
            end

            if connection then
                connection:Disconnect()
                connection = nil
            end

            if connection2 then
                connection2:Disconnect()
                connection2 = nil
            end

            if value then
                for handle, data in local_guns do
                    local tool = handle["Parent"]

                    if tool then
                        on_tool_added(tool)
                    end
                end

                connection = create_connection(signals["on_local_tool_equipped"], on_tool_added)
                connection2 = create_connection(signals["on_local_character_added"], reset)
            end
        end)

        create_connection(menu_references["reduce_shotgun_spread_amount"]["on_slider_change"], function(value)
            reduce_amount = (101-value)/100
        end)
    end 

    -- >> ( backtrack )

    do
        local backtrack_material = Enum["Material"]["Neon"]
        local backtrack_color = flags["backtrack_color"]
        local backtrack_transparency = flags["backtrack_transparency"]
        backtrack_data = {}

        getgenv()["juju"]["get_backtrack_position"] = LPH_JIT_MAX(function(player)
            local type = typeof(player)

            if type ~= "Instance" then
                error("juju: get_backtrack_position arg #1 expected Instance got "..type)
                return
            end

            if player["ClassName"] ~= "Player" then
                error("juju: get_backtrack_position arg #1 expected Player got "..player["ClassName"])
                return
            end

            return backtrack_data[player] and backtrack_data[player][3] or nil
        end)

        get_backtrack_models = LPH_JIT_MAX(function()
            local models = {}

            for player, data in backtrack_data do
                local model = data[1]
                if model then
                    models[#models+1] = model
                end
            end
            return models
        end)

        local do_friendly = false
        local do_neutral = true
        local do_target = false
        local do_enemy = false

        local connection = nil
        local connection2 = nil
        local connection3 = nil
        local connection4 = nil
        local connection5 = nil

        local create_backtrack_model = LPH_JIT_MAX(function(player, character)
            local data = backtrack_data[player]

            if not data or data[1] then
                return
            end

            character["Archivable"] = true
            local new_model = clone(character)
            character["Archivable"] = false
            new_model["SetAttribute"](new_model, "1", "1")
            local children = get_children(new_model)

            local model_parts = {}

            for i = 1, #children do
                local part = children[i]
                local class_name = part["ClassName"]
                if class_name == "MeshPart" then
                    part["Material"] = backtrack_material
                    part["Color"] = backtrack_color
                    part["Transparency"] = backtrack_transparency
                    part["TextureID"] = ""
                    part["CanCollide"] = false
                    part["Anchored"] = true

                    local name = part["Name"]

                    if name == "Head" then
                        local face = find_first_child_of_class(part, "Decal")

                        if face then
                            destroy(face)
                        end
                    end

                    model_parts[name] = part
                else
                    destroy(part)
                end
            end
            data[1] = new_model
            data[2] = model_parts
            new_model["Parent"] = workspace["Players"]
        end)

        local refresh_backtrack_data = function(player, character)
            local data = backtrack_data[player]

            if not data then
                return
            end

            local model = data[1]

            if model then
                destroy(model)
            end

            data[2] = {}
            data[3] = nil
            wait(0.5)

            if not character then
                return 
            end

            create_backtrack_model(player, character)
        end

        local hide_cframe = cframe_new(0,9e9,9e9)
        local last_reset_tick = clock()
        local last_backtrack_tick = clock()

        local do_backtrack = LPH_JIT_MAX(function(player, character)
            if clock() - last_backtrack_tick > 0.02 then
                last_backtrack_tick = clock()
                for player, bt_data in backtrack_data do
                    local data = player_data[player]

                    if not data then
                        local model = bt_data[1]
                        if model then
                            destroy(model)
                        end
                        backtrack_data[player] = nil
                        continue
                    end

                    local parts = bt_data[2]
                    local cframes = bt_data[3]
                    local player_parts = data[4]

                    local old_cframes = {}

                    for name, part in parts do
                        local player_part = player_parts[name]

                        if not player_part then
                            destroy(part)
                            parts[name] = nil
                            continue
                        end

                        old_cframes[part] = player_part["CFrame"]
                    end

                    local old_tick = bt_data[4]

                    delay(flags["backtrack_length"], function() 
                        if old_tick == bt_data[4] then
                            if not bt_data[3] then
                                bt_data[3] = {}
                            end
                            cframes = bt_data[3]
                            for name, part in parts do
                                cframes[part] = old_cframes[part]
                            end
                        end
                    end)

                    if cframes then
                        for part, cframe in cframes do
                            local part_name = part["Name"]
                            local player_part = player_parts[part_name]

                            if not player_part then
                                local part = parts[part_name]
                                if part then
                                    destroy(part)
                                    parts[part_name] = nil
                                    cframes[part_name] = nil
                                end
                                continue
                            end

                            part["CFrame"] = cframe
                        end
                    else
                        for name, part in parts do
                            part["CFrame"] = hide_cframe
                        end
                    end
                end
            end
        end)

        local create_backtrack_data = LPH_JIT_MAX(function()
            for player, data in player_data do
                local status = data[1]

                if status == 2 and do_friendly or status == 1 and do_neutral or status == 3 and do_enemy or (((legitbot_target and legitbot_target[1] == data) or (ragebot_target == data)) and do_target) then
                    if backtrack_data[player] then
                        return
                    end

                    local character = data[3]
                    
                    backtrack_data[player] = {
                        nil,
                        {},
                        nil,
                        clock()
                    }

                    if character then
                        create_backtrack_model(player, character)
                    end
                else
                    local bt_data = backtrack_data[player]

                    if bt_data then
                        local model = bt_data[1]

                        if model then
                            destroy(model)
                        end

                        backtrack_data[player] = nil
                    end
                end
            end
        end)

        local reset_backtrack_data = LPH_NO_VIRTUALIZE(function()
            for player, bt_data in backtrack_data do
                local model = bt_data[1]

                if model then
                    destroy(model)
                end
            end

            backtrack_data = {}
        end)

        local on_backtrack_hit = LPH_NO_VIRTUALIZE(function(player)            
            local bt_data = backtrack_data[player]

            if not bt_data then
                return 
            end

            bt_data[3] = nil
            bt_data[5] = clock()
        end)

        create_connection(menu_references["backtrack"]["on_toggle_change"], function(value)
            for i = 1, #heartbeat do
                if heartbeat[i] == do_backtrack then
                    remove(heartbeat, i)
                    break
                end
            end

            reset_backtrack_data()

            if connection then
                connection["Disconnect"](connection)
                connection = nil
            end

            if connection2 then
                connection2["Disconnect"](connection2)
                connection2 = nil
            end

            if connection3 then
                connection3["Disconnect"](connection3)
                connection3 = nil
            end

            if connection4 then
                connection4["Disconnect"](connection4)
                connection4 = nil
            end

            if connection5 then
                connection5["Disconnect"](connection5)
                connection5 = nil
            end

            if value then
                create_backtrack_data()
                heartbeat[#heartbeat+1] = do_backtrack

                if flags["backtrack_reset_on_hit"] then
                    connection2 = create_connection(signals["on_local_bullet_confirmed"], on_backtrack_hit)
                end

                if do_target then
                    connection3 = create_connection(signals["on_legitbot_target_changed"], create_backtrack_data)
                end
                connection4 = create_connection(signals["on_player_status_changed"], create_backtrack_data)
                connection5 = create_connection(signals["on_player_added"], create_backtrack_data)
                connection = create_connection(signals["on_player_character_added"], refresh_backtrack_data)
            end
        end)

        create_connection(menu_references["backtrack_reset_on_hit"]["on_toggle_change"], function(value)
            if connection2 then
                connection2["Disconnect"](connection2)
                connection2 = nil
            end

            if value and flags["backtrack_reset_on_hit"] then
                connection2 = create_connection(signals["on_local_bullet_confirmed"], on_backtrack_hit)
            end
        end)

        create_connection(menu_references["backtrack_color"]["on_color_change"], function(color)
            backtrack_color = color

            for player, data in backtrack_data do
                for name, part in data[2] do
                    part["Color"] = color
                end
            end
        end)

        create_connection(menu_references["backtrack_color"]["on_transparency_change"], function(transparency)
            backtrack_transparency = transparency

            for player, data in backtrack_data do
                for name, part in data[2] do
                    part["Transparency"] = transparency
                end
            end
        end)

        create_connection(menu_references["backtrack_material"]["on_dropdown_change"], function(value)
            backtrack_material = value[1] == "neon" and Enum["Material"]["Neon"] or Enum["Material"]["ForceField"]
            for player, data in backtrack_data do
                for name, part in data[2] do
                    part["Material"] = backtrack_material
                end
            end
        end)

        create_connection(menu_references["backtrack_target_statuses"]["on_dropdown_change"], function(value)
            do_target = false
            do_enemy = false
            do_neutral = false
            do_friendly = false

            for i = 1, #value do
                local status = value[i]
                if status == "friendly" then
                    do_friendly = true
                elseif status == "neutral" then
                    do_neutral = true
                elseif status == "target" then
                    do_target = true
                elseif status == "enemy" then
                    do_enemy = true
                end
            end

            if connection3 then
                connection3["Disconnect"](connection3)
                connection3 = nil
            end

            if connection then
                if do_target then
                    connection3 = create_connection(signals["on_legitbot_target_changed"], create_backtrack_data)
                end
                reset_backtrack_data()
                create_backtrack_data()
            end
        end)
    end
end

-- > ( finalization )

do
    local data_ping = game:GetService("Stats")["Network"]["ServerStatsItem"]["Data Ping"]
    local last_ping_check = clock()
    local ping_data = {}

    local update_server_position = LPH_NO_VIRTUALIZE(function(hrp)
        local_server_position = hrp["CFrame"]
    end)

    local last_fps = clock()

    create_connection(game:GetService("RunService")["Heartbeat"], LPH_NO_VIRTUALIZE(function(dt)
        if in_void then
            in_void = nil
        else
            in_void = false
        end

        local_fps = 1/(clock() - last_fps)
        last_fps = clock()

        if clock()-last_ping_check > 2 then
            last_ping_check = clock()

            if #ping_data >= 10 then
                remove(ping_data, 1)
            end

            local new_ping = data_ping:GetValue()
            ping_data[#ping_data+1] = new_ping

            local total = 0
            for _, ping in ping_data do
                total+=ping
            end
            local_ping = 3 + floor(total/#ping_data)
        end

        local hrp = vehicle or local_parts["HumanoidRootPart"]

        for i = 1, #heartbeat do
            spawn(heartbeat[i], dt, hrp)
        end

        if hrp then
            local_client_position = hrp["CFrame"]
        end

        for i = 1, #anti_aim do
            local func = anti_aim[i]
            if func then
                spawn(func, dt, hrp)
            end
        end

        if hrp then
            spawn(update_server_position, hrp)
        end
    end))

    local old_vehicle = nil

    create_connection(signals["on_vehicle_sat_in"], function(new_vehicle)
        if old_vehicle then
            setrawmetatable(old_vehicle, getrawmetatable(game))
        end
        if new_vehicle then
            local old = getrawmetatable(new_vehicle)
            local old_index = old["__index"]
            local old_new_index = old["__newindex"]

            local new = {
                ["__index"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, index)
                    if not checkcaller() and self then
                        local is_cframe = index == "CFrame" 
                        if is_cframe or index == "Position" and (#anti_aim ~= 0 or purchasing) then
                            return is_cframe and local_client_position or local_client_position["p"]
                        end
                    end
                    return old_index(self, index)
                end)),
                ["__newindex"] = newcclosure(LPH_NO_VIRTUALIZE(function(self, index, value)
                    if checkcaller() and self and index == "CFrame" and (#anti_aim ~= 0 or purchasing) then
                        return old_new_index(self, index, value)
                    end
                    return old_new_index(self, index, value)
                end))
            }

            for _, v in old do
                if not new[_] then
                    new[_] = v
                end
            end

            setrawmetatable(new_vehicle, new)
        end
        old_vehicle = new_vehicle
    end)
end

-- > ( addons )

do
    local running_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAAAMdwEA6AMAAAx3AQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAO7qLRjGzAACAAAALElEQVQYV2NgRALoHAYGmAiEA+XCOGAenAPiYucgKwOxoRwwE8xBACQOIyMAHuoAZdtKAY0AAAAASUVORK5CYII=")
    local lua_image_data = base64_decode("iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS4y+7wDtgAAALZlWElmSUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgAQAAAAWgAAAGmHBAABAAAAagAAAAAAAADydgEA6AMAAPJ2AQDoAwAAUGFpbnQuTkVUIDUuMS4yAAMAAJAHAAQAAAAwMjMwAaADAAEAAAABAAAABaAEAAEAAACUAAAAAAAAAAIAAQACAAQAAABSOTgAAgAHAAQAAAAwMTAwAAAAAI47wVfTF7xOAAAAOklEQVQYV3WMQQoAMAjD6v8/PVLrwMHKZhMPqlY+qgamvwYF8uDUXUNW86OMVktq1r4OBYnVkE6WVh04mgCJI6LjgQAAAABJRU5ErkJggg==")
    local addon_list = menu_references["addon_list"]

    for _, addon in menu["get_addon_list"]() do
        addon_list:add_item({
            ["text"] = addon,
            ["icons"] = {
                lua_image_data
            }
        })
    end

    -- >> ( addons )

    local addon_panel = menu_references["addon_panel"]
    local load_addon = menu_references["load_addon"]

    if load_addon then
        local unload_addon = menu_references["unload_addon"]
        local refresh_addon_list = menu_references["refresh_addon_list"]

        create_connection(addon_list["on_selection_change"], function(addon)
            local addon = addon or ""
            local path = "juju recode/addons/"..addon..".luau"

            if addon ~= "" and isfile(path) then
                if addon_data[addon] then
                    load_addon:set_visible(false)
                    unload_addon:set_visible(true)
                else
                    load_addon:set_visible(true)
                    unload_addon:set_visible(false)
                end
                refresh_addon_list:set_visible(false)
            else
                refresh_addon_list:set_visible(true)
                unload_addon:set_visible(false)
                load_addon:set_visible(false)
            end
        end)

        local do_refresh = function()
            local elements = addon_list["elements"]
            for _, element in elements do
                addon_list:remove_item(element["name"], true)
                elements[_] = nil
            end

            local addons = menu["get_addon_list"]()
            for i = 1, #addons do
                addon_list:add_item({
                    ["text"] = addons[i],
                    ["icons"] = addon_data[addons[i]] and {running_image_data, lua_image_data} or {
                        lua_image_data
                    }
                })
            end
        end

        create_connection(refresh_addon_list["on_clicked"], do_refresh)
        create_connection(menu["on_config_loaded"], do_refresh)

        create_connection(unload_addon["on_clicked"], function()
            local selected_addon = addon_list["selected"]
            local selected = selected_addon and selected_addon["name"]
            if selected_addon and addon_data[selected] then
                menu["unload_addon"](selected)
                new_notification("successfully unloaded addon "..selected, 1)
                addon_list:remove_icon(selected, running_image_data)
                load_addon:set_visible(true)
                unload_addon:set_visible(false)
            end
        end)

        create_connection(load_addon["on_clicked"], function()
            local selected_addon = addon_list["selected"]
            local selected = selected_addon and selected_addon["name"]

            if selected_addon and not addon_data[selected] then
                local did_error = menu["load_addon"](selected)
                if did_error then
                    new_notification("failed to load addon "..selected.." ("..did_error..")", 3)
                    error(did_error)
                    return
                end
                new_notification("successfully loaded addon "..selected, 1)
                unload_addon:set_visible(true)
                addon_list:add_icon(selected, running_image_data)
                load_addon:set_visible(false)
            end
        end)

        unload_addon:set_visible(false)
        load_addon:set_visible(false)
    end

    local typeof = typeof
    local g = menu["get_active_binds"]
    local old = getgenv()["juju"]
    local new = {
        create_connection = function(signal, callback)
            local type = typeof(signal)

            if type ~= "RBXScriptSignal" and type ~= "table" then
                error("juju: create_connection arg #1 expected RBXScriptSignal or table got "..type)
                return
            end

            local type = typeof(callback)

            if type ~= "function" then
                error("juju: create_connection arg #2 expected function got "..type)
                return
            end

            local identifier = getfenv(0).__IDENTIFIER or getfenv(1).__IDENTIFIER or getfenv(2).__IDENTIFIER or getfenv(3).__IDENTIFIER

            if identifier then
                local data = addon_data[identifier]

                if data then
                    local data = addon_data[identifier]
                    local connections = data[3]

                    local connection = signal:Connect(callback)

                    connections[#connections+1] = connection

                    return connection
                end
            end
        end,
        find_element = LPH_JIT_MAX(function(parent, name)
            local type = typeof(name)

            if type ~= "string" then
                error("juju: find_element arg #1 expected string got "..type)
                return
            end

            local type = typeof(parent)

            if type ~= "string" then
                error("juju: find_element arg #2 expected string got "..type)
                return
            end

            local name = name:lower()

            if name:find("config") or name:find("unload") then
                error("juju: find_element arg #2 expected string got <?>")
                return
            end

            local parent = parent:lower()

            for _, group in menu["groups"] do
                for _, tab in group["tabs"] do
                    for _, section in tab["sections"] do
                        if section["name"]:lower() == parent then
                            local elements = section["elements"]
                            for i = 1, #elements do
                                local element = elements[i]
                                if (element["name"]):lower() == name then
                                    return element
                                end
                            end
                        end
                    end
                end
            end

            for element_settings, settings in menu["settings"] do
                if element_settings["name"]:lower() == parent then
                    local elements = settings["elements"]
                    for i = 1, #elements do
                        local element = elements[i]
                        if (element["name"]:lower()) == name then
                            return element
                        end
                    end
                end
            end

            error("juju: find_element failed to find element "..name)
        end),
        create_section = function(name, side, size, offset)
            local type = typeof(name)

            if type ~= "string" then
                error("juju: create_section arg #1 expected string got "..type)
                return
            end

            local type = typeof(side)

            if type ~= "number" then
                error("juju: create_section arg #2 expected number got "..type)
                return
            elseif side ~= 1 and side ~= 2 then
                error("juju: create_section arg #2 expected number 1 or 2 got "..side)
                return
            end

            local type = typeof(size)

            if type ~= "number" then
                error("juju: create_section arg #3 expected number got "..type)
                return
            elseif size < 0 or size > 1 then
                error("juju: create_section arg #3 expected number between 0 and 1 got "..size)
                return
            end

            local type = typeof(offset)

            if type ~= "number" then
                error("juju: create_section arg #4 expected number got "..type)
                return
            elseif offset < 0 or offset > 0.9 then
                error("juju: create_section arg #4 expected number between 0 and 0.9 got "..offset)
                return
            end

            local identifier = getfenv(0).__IDENTIFIER or getfenv(1).__IDENTIFIER or getfenv(2).__IDENTIFIER or getfenv(3).__IDENTIFIER

            if identifier then
                local data = addon_data[identifier]

                if data then
                    local tab = data[2]

                    if tab and tab["destroy"] then
                        return menu["groups"]["addons"]:create_section(data[5], name, side, size, offset)
                    end
                end
            end
        end,
        create_element = function(section, info, elements)
            local type = typeof(section)

            if type ~= "string" then
                if not elements and type == "table" then
                    local new_info = section
                    local new_elements = info

                    if typeof(new_info) == "table" and typeof(new_elements) == "table" then
                        local identifier = getfenv(0).__IDENTIFIER or getfenv(1).__IDENTIFIER or getfenv(2).__IDENTIFIER or getfenv(3).__IDENTIFIER

                        local data = addon_data[identifier]

                        if data then
                            local tab = data[2]
        
                            if not tab or not tab["destroy"] then
                                juju["create_tab"]()
                                data[6] = juju["create_section"]("update yo addon twin", 1, 1, 0)
                            end

                            return data[6]:create_element(new_info, new_elements)
                        end
                    end
                end
                error("juju: create_element arg #1 expected string got "..type)
                return
            end

            local type = typeof(info)

            if type ~= "table" then
                error("juju: create_element arg #2 expected table got "..type)
                return
            end

            local type = typeof(elements)

            if type ~= "table" then
                error("juju: create_element arg #3 expected table got "..type)
                return
            end

            local identifier = getfenv(0).__IDENTIFIER or getfenv(1).__IDENTIFIER or getfenv(2).__IDENTIFIER or getfenv(3).__IDENTIFIER
            
            if identifier then
                local data = addon_data[identifier]

                if data then
                    local tab = data[2]

                    if not tab or not tab["destroy"] then
                        error("juju: create_element failed due to missing tab")
                        return 
                    end

                    local section = tab["sections"][section]

                    if not section or not section["destroy"] then
                        error("juju: create_element failed due to missing section \'"..section.."\''")
                        return 
                    end

                    return section:create_element(info, elements)
                end
            end
        end,
        get_signal = LPH_JIT_MAX(function(signal)
            local type = typeof(signal)

            if type ~= "string" then
                error("juju: get_signal arg #1 expected string got "..type)
                return
            end

            if signal == "on_ragebot_target_changed" or signal == "on_legitbot_target_changed" or signal == "on_target_changed" then
                local fake = {
                    ["Connect"] = function(self, callback)
                        return signals[signal]:Connect(function(player, ...)
                            return callback(player and player[2])
                        end)
                    end
                }

                return fake
            end

            return signals[signal]
        end),
        get_signals = LPH_NO_VIRTUALIZE(function()
            local all = {}
            for signal, _ in signals do
                all[#all+1] = signal
            end
            return all
        end),
        set_flag = LPH_JIT_MAX(function(flag, value)
            if flag == nil or flag == "author" or flag == "date" or flag == "loaded_addons" then
                error("juju: set_flag arg #1 expected string got <?>")
                return
            end

            local type = type(flag)

            if type ~= "string" then
                error("juju: set_flag arg #1 expected string got "..type)
                return
            end

            flags[flag] = value
        end),
        get_flag = LPH_NO_VIRTUALIZE(function(flag)
            if flag == "author" or flag == "date" or flag == "loaded_addons" or flag == nil then
                return nil
            end 

            return flags[flag]
        end),
        get_flags = LPH_NO_VIRTUALIZE(function()
            local all = {}
            for flag, _ in flags do
                if flag == "author" or flag == "date" or flag == "loaded_addons" then
                    continue
                end 
                all[#all+1] = flag
            end
            return all
        end),
        add_ragebot_target = function(player)
            local type = typeof(player)

            if type ~= "Instance" then
                error("juju: add_ragebot_target arg #1 expected Instance got "..type)
                return
            end

            local data = player_data[player]

            if not data then
                error("juju: add_ragebot_target errored due to missing player data")
                return
            end

            ragebot_targets[data] = true
        end,
        remove_ragebot_target = function(player)
            local type = typeof(player)

            if type ~= "Instance" then
                error("juju: remove_ragebot_target arg #1 expected Instance got "..type)
                return
            end

            local data = player_data[player]

            if not data then
                error("juju: remove_ragebot_target errored due to missing player data")
                return
            end

            ragebot_targets[data] = nil
        end,
        get_ragebot_targets = function()
            local targets = {}
            for data, _ in ragebot_targets do
                local player = data[2]
                if player then
                    targets[#targets+1] = player
                end
            end

            return targets
        end,
        load_config = newcclosure(function(string)
            local type = type(string)

            if type ~= "string" then
                error("juju: load_config arg #1 expected string got "..type)
                return
            end

            if isfile("juju recode/configs/"..string..".cfg") then
                menu["load_config"](string)
            else
                error("juju: load_config expected string got "..type)
            end
        end),
        set_tab_text = function(text)
            local identifier = getfenv(0).__IDENTIFIER or getfenv(1).__IDENTIFIER or getfenv(2).__IDENTIFIER or getfenv(3).__IDENTIFIER

            if identifier then
                local data = addon_data[identifier]

                if data then
                    local tab = data[2]

                    if tab and tab["text"] then
                        local type = type(text)

                        if type ~= "string" then
                            error("juju: set_tab_text arg #1 expected string got "..type)
                            return
                        end

                        tab["text"]["Text"] = text:sub(1, 12)
                    end
                end
            end
        end,
        on_unload = function(func)
            local identifier = getfenv(0).__IDENTIFIER or getfenv(1).__IDENTIFIER or getfenv(2).__IDENTIFIER or getfenv(3).__IDENTIFIER

            if identifier then
                local data = addon_data[identifier] 
                
                if data then
                    data[4] = func
                end
            end
        end,
        create_tab = function(func)
            local identifier = getfenv(0).__IDENTIFIER or getfenv(1).__IDENTIFIER or getfenv(2).__IDENTIFIER or getfenv(3).__IDENTIFIER

            if identifier then
                local data = addon_data[identifier]

                if data and not data[2]["destroy"] then
                    local addons = menu["groups"]["addons"]
                    if not addons["is_visible"] then
                        addons:show()
                    end

                    data[2] = addons:create_tab(addon_data[getfenv(0).__IDENTIFIER or getfenv(1).__IDENTIFIER or getfenv(2).__IDENTIFIER or getfenv(3).__IDENTIFIER][5], func)
                end
            end
        end,
        is_in_void = LPH_NO_VIRTUALIZE(function()
            return in_void
        end),
        is_auto_stomping = LPH_NO_VIRTUALIZE(function()
            return stomping
        end),
        get_ping = LPH_NO_VIRTUALIZE(function()
            return local_ping
        end),
        purchase_item = LPH_JIT_MAX(function(item, ammo)
            purchase_item(item, ammo)
        end),
        is_purchasing = LPH_NO_VIRTUALIZE(function()
            return purchasing
        end),
        get_server_cframe = LPH_NO_VIRTUALIZE(function()
            return local_server_position
        end),
        get_client_cframe = LPH_NO_VIRTUALIZE(function()
            return local_client_position
        end),
        get_ragebot_target = LPH_NO_VIRTUALIZE(function()
            return ragebot_target and ragebot_target[2] or nil
        end),
        set_ragebot_target = LPH_JIT_MAX(function(player, message)
            local type = typeof(player)

            if player ~= nil and ((type ~= "Instance") or (player and player["ClassName"] ~= "Player" or player == local_player)) then
                error("juju: set_ragebot_target arg #1 expected Player got "..type)
                return
            end

            local type = typeof(message)

            if type ~= "string" and message ~= nil then
                error("juju: set_ragebot_target arg #2 expected string or nil got "..type)
                return
            end

            if flags["ragebot"] then
                set_ragebot_target(player and player_data[player] or nil, "ragebot target set to "..(player and player["Name"] or "nobody"))

                return true
            end
        end),
        get_player_status = function(player)
            local type = typeof(player)

            if type ~= "Instance" or player["ClassName"] ~= "Player" or player == local_player then
                error("juju: get_player_status arg #1 expected Player got "..type)
                return
            end

            local data = player_data[player]

            if data then
                return data[1]
            end
        end,
        set_player_status = LPH_JIT_MAX(function(player, status)
            local type = typeof(player)

            if type ~= "Instance" or player["ClassName"] ~= "Player" or player == local_player then
                error("juju: set_player_status arg #1 expected Player got "..type)
                return
            end

            local type = typeof(status)

            if type ~= "number" then
                error("juju: set_player_status arg #1 expected number 1-3 got "..type)
                return
            end

            local data = player_data[player]

            if data then
                local old_status = data[1]

                if old_status ~= status then
                    data[1] = status
                    signals["on_player_status_changed"]:Fire(data, status)
                end
            end

            return true
        end),
        set_server_cframe = LPH_JIT_MAX(function(cf)
            local type = typeof(cf)

            if type ~= "CFrame" then
                error("juju: set_server_cframe arg #1 expected CFrame got "..type)
                return
            end

            local hrp = local_parts["HumanoidRootPart"]

            if not hrp then
                return
            end

            local new_function = function(dt, hrp)
                if not hrp then
                    return
                end

                local old = hrp["CFrame"]
                hrp["CFrame"] = cf
                render_stepped_wait(render_stepped)
                hrp["CFrame"] = old
            end

            anti_aim[#anti_aim+1] = new_function

            run_service["Heartbeat"]:Wait()

            for i = 1, #anti_aim do
                if anti_aim[i] == new_function then
                    remove(anti_aim, i)
                    break
                end
            end
        end),
        is_player_knocked = LPH_JIT_MAX(function(player)
            local type = typeof(player)

            if type ~= "Instance" or player["ClassName"] ~= "Player" then
                error("juju: is_player_knocked arg #1 expected Instance (Player) got "..type)
                return
            end

            local data = player_data[player]

            return data and data[18] or nil
        end),
        is_player_invulnerable = LPH_JIT_MAX(function(player)
            local type = typeof(player)

            if type ~= "Instance" or player["ClassName"] ~= "Player" then
                error("juju: is_player_invulnerable arg #1 expected Instance (Player) got "..type)
                return
            end

            local data = player_data[player]

            if data then
                local parts = data[4]
                return parts["GRABBING_CONSTRAINT"] or parts["ForceField"] or parts["FORCEFIELD"] or false
            end
        end),
        is_player_dead = LPH_JIT_MAX(function(player)
            local type = typeof(player)

            if type ~= "Instance" or player["ClassName"] ~= "Player" then
                error("juju: is_player_dead arg #1 expected Instance (Player) got "..type)
                return
            end

            local data = player_data[player]

            return data and data[7] or nil
        end),
        get_ragebot_aim_position = LPH_NO_VIRTUALIZE(function()
            return ragebot_aim_position
        end),
        set_ragebot_aim_position = LPH_NO_VIRTUALIZE(function(position)
            local type = typeof(position)

            if type == "Vector3" then
                custom_ragebot_aim_position = position
            end
        end),
        set_aim_assist_position = set_aim_assist_position,
        get_silent_aim_position = get_silent_aim_position,
        set_silent_aim_position = set_silent_aim_position,
        get_active_keybinds = LPH_NO_VIRTUALIZE(function()
            local b = g()
            local r = {}
            for i = 1, #b do
                local z = b[i]
                r[z["element"]["name"]] = z["value"]
            end
            return r
        end),
        reload_gun = LPH_NO_VIRTUALIZE(function()
            if not local_reloading and local_gun then
                event:FireServer("Reload", local_gun)
                return true
            end
        end),
        set_legitbot_target = LPH_JIT_MAX(function(player, message)
            local type = typeof(player)

            if player ~= nil and ((type ~= "Instance") or (player and player["ClassName"] ~= "Player" or player == local_player)) then
                error("juju: set_legitbot_target arg #1 expected Player got "..type)
                return
            end

            local type = typeof(message)

            if type ~= "string" and message ~= nil then
                error("juju: set_legitbot_target arg #2 expected string or nil got "..type)
                return
            end

            if flags["aim_assist"] or flags["triggerbot"] or flags["silent_aim"] then
                if player then
                    local data = player_data[player]

                    if data then
                        local hrp = data[4]["HumanoidRootPart"]
                        local distance = 1000

                        if hrp then
                            local position, on_screen = world_to_viewport_point(camera, hrp["Position"])
                            if on_screen then
                                local mouse_pos = get_mouse_location(user_input_service)
                                distance = (vector2_new(position["X"], position["Y"]) - mouse_pos)["Magnitude"]
                            end
                        end

                        set_legitbot_target({data, hrp, distance}, "legitbot target set to "..player["Name"])
                    else
                        set_legitbot_target(nil, "legitbot target set to nobody")
                    end
                else
                    set_legitbot_target(nil, "legitbot target set to nobody")
                end
                return true
            end
        end),
        get_legitbot_target = LPH_NO_VIRTUALIZE(function()
            return legitbot_target and legitbot_target[1][2] or nil
        end),
        is_defensive_active = is_defensive_active,
        is_in_vehicle = LPH_NO_VIRTUALIZE(function()
            return vehicle ~= nil
        end),
        create_notification = LPH_JIT_MAX(function(text, type, time)
            local type2 = typeof(text)

            if type2 ~= "string" then
                error("juju: create_notification arg #1 expected string got "..type2)
                return
            end

            local type2 = typeof(type)

            if type2 ~= "number" then
                error("juju: create_notification arg #2 expected number got "..type2)
                return
            end

            local type2 = typeof(time)

            if type2 ~= "number" and time ~= nil then
                error("juju: create_notification arg #3 expected number got "..type2)
                return
            end

            new_notification(text, type, time)
        end)
    }
    for name, func in old do
        new[name] = func
    end
    getgenv()["juju"] = new
end

-- > ( finish loading )

do
    local username = "?"
    local avatar = nil

    local LRM_LinkedDiscordID = LRM_LinkedDiscordID or "320421345324433418"
    if LRM_LinkedDiscordID then
        local s, data = pcall(function()
            local body = request({
                ["Url"] = "https://discord-lookup-api-pied.vercel.app/v1/user/"..LRM_LinkedDiscordID,
                ["Method"] = "GET",
                ["Headers"] = {
                    ["User-Agent"] = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
                    ["Accept"] = "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
                    ["Accept-Language"] = "en-US,en;q=0.9",
                    ["Connection"] = "keep-alive",
                    ["Referer"] = "https://www.google.com/",
                    ["DNT"] = "1",
                    ["Upgrade-Insecure-Requests"] = "1"
                }
            })

            if body and body["StatusCode"] == 200 then
                local username = http_service:JSONDecode(body["Body"])

                if username then
                    return username
                end
            end
        end)

        username = (s and data) and "@"..data["username"] or "?"

        if username ~= "?" then
            s, avatar = pcall(function()
                return game:HttpGet(data["avatar"]["link"])
            end)
        end
    end

    new_notification(
        "welcome back to juju, "..username,
        5,
        color3_fromrgb(255, 255, 255),
        avatar or base64_decode("iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuMvu8A7YAAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAADHcBAOgDAAAMdwEA6AMAAFBhaW50Lk5FVCA1LjEuMgADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAADu6i0YxswAAgAAAGBJREFUOE+tkdEOgCAIRdH//+eCO3BG16TWeUEYB5zK7xyKHynNI9g1G01BRJZYDOjqjPpN3G2lG2cpGqIWOWUW89nwFHSPIG95DRNLwypNl6sapcmMqjiemAmPX/ANkROaKkTiEnqHHQAAAABJRU5ErkJggg==")
    )

    new_notification(
        "please only use alternate accounts! read announcements for more info",
        1
    )

    local overlay = core_gui["RobloxPromptGui"]["promptOverlay"]

    create_connection(overlay["ChildAdded"], LPH_JIT_MAX(function(error) -- >> genuinely if this ever gets leaked.. DONT ask
        if error["Name"] == "ErrorPrompt" then
            if flags["custom_kick_screen"] then
                if not _G.did then
                    spawn(function()
                        local gui_service = cloneref(game:GetService("GuiService"))
                        while wait(0.15) do
                            gui_service:ClearError()
                        end
                    end)
                    wait()
                    _G.did = true
                    local background = flags["custom_kick_screen_background"]
                    local create_fake_drawing = getgenv()["_PROXY"]["new"]
                    local color = flags["custom_kick_screen_color"]
                    local path = "juju recode/"..(background == "2.png" and "assets/2.png" or "custom/"..background)
                    local data = isfile(path) and readfile(path) or readfile("juju recode/assets/2.png")
                    local message_label = error["MessageArea"]["ErrorFrame"]["ErrorMessage"]
                    local message = error["MessageArea"]["ErrorFrame"]["ErrorMessage"]
                    error["Visible"] = false
                    local blur = find_first_child_of_class(cloneref(game:GetService("Lighting")), "BlurEffect")
                    if blur then
                        destroy(blur)
                    end
                    message = message["Text"] == "Label" and "" or message["Text"]
                    local is_rejoining = message:find("Moderation message: R..")
                    local is_hopping = message:find("Moderation message: H..")

                    create_connection(message_label:GetPropertyChangedSignal("Text"), function()
                        message = message_label["Text"]
                    end)

                    local background = create_fake_drawing("Image", {
                        ["Color"] = color3_fromrgb(255, 255, 255),
                        ["Size"] = udim2_new(0, camera["ViewportSize"]["X"], 0, camera["ViewportSize"]["Y"]),
                        ["Position"] = udim2_new(0, 0, 0, 0),
                        ["Transparency"] = 0,
                        ["Visible"] = true,
                        ["Data"] = data,
                        ["ZIndex"] = 10000,
                    })
                    local shadow = create_fake_drawing("Image", {
                        ["Color"] = color3_fromrgb(0, 0, 0),
                        ["Size"] = udim2_new(1, 560, 1, 560),
                        ["Position"] = udim2_new(0, -280, 0, -280),
                        ["Transparency"] = 0,
                        ["Visible"] = true,
                        ["Data"] = shadow_image_data,
                        ["Parent"] = background,
                        ["ZIndex"] = 10001,
                    })
                    local logo = create_fake_drawing("Image", {
                        ["Color"] = color3_fromrgb(255, 255, 255),
                        ["Size"] = udim2_new(0, 100, 0, 100),
                        ["Position"] = udim2_new(0.5, -50, 0.45, -50),
                        ["Data"] = readfile("juju recode/assets/logo.png"),
                        ["Transparency"] = 0,
                        ["Parent"] = background,
                        ["Visible"] = true,
                        ["ZIndex"] = 10002,
                    })
                    local text = create_fake_drawing("Text", {
                        ["Color"] = color3_fromrgb(255, 255, 255),
                        ["Size"] = 24,
                        ["Position"] = udim2_new(1, 0, 0.45, 0),
                        ["Text"] = is_rejoining and "now rejoining..." or is_hopping and "now hopping..." or "you've been disconnected",
                        ["Transparency"] = 0,
                        ["Parent"] = logo,
                        ["ZIndex"] = 10003,
                        ["Visible"] = true
                    })

                    create_connection(camera:GetPropertyChangedSignal("ViewportSize"), function()
                        background["Size"] = udim2_new(0, camera["ViewportSize"]["X"], 0, camera["ViewportSize"]["Y"])
                    end)
                    error["Visible"] = false
                    local blur = find_first_child_of_class(cloneref(game:GetService("Lighting")), "BlurEffect")
                    if blur then
                        destroy(blur)
                    end

                    local linear = Enum["EasingStyle"]["Linear"]

                    tween(background, show_transparency, linear, out, 0.4)
                    tween(shadow, {["Transparency"] = 0.89}, circular, out, 0.4)
                    wait(0.8)
                    tween(logo, {["tween_position"] = udim2_new(0.5, -50, 0.5, -50), ["Transparency"] = 0.4}, circular, out, 0.4)
                    wait(0.5)
                    tween(logo, {["tween_position"] = udim2_new(0.5, -210, 0.5, -50)}, circular, out, 0.4)
                    tween(text, {["tween_position"] = udim2_new(1, 0, 0.5, 0), ["Transparency"] = 0.4}, circular, out, 0.8)
                    wait(0.9)
                    tween(text, {["tween_position"] = udim2_new(1, 0, 0.2, 0)}, circular, out, 0.4)

                    if not is_rejoining and not is_hopping then
                        local reason_text = create_fake_drawing("Text", {
                            ["Color"] = color3_fromrgb(150, 150, 150),
                            ["Size"] = 16,
                            ["Position"] = udim2_new(0.5, 0, 0.5, 50),
                            ["Text"] = "\""..message.."\"",
                            ["Transparency"] = 0,
                            ["Parent"] = background,
                            ["ZIndex"] = 10003,
                            ["Center"] = true,
                            ["Visible"] = true
                        })
                        local rejoin_frame = create_fake_drawing("Image", {
                            ["Color"] = color,
                            ["Size"] = udim2_new(1, 0, 0, 25),
                            ["Position"] = udim2_new(1, 0, 0.48, 0),
                            ["Data"] = pixel_image_data,
                            ["Rounding"] = 10,
                            ["Transparency"] = 0,
                            ["Parent"] = logo,
                            ["Visible"] = true,
                            ["ZIndex"] = 10002,
                        })
                        local rejoin_text = create_fake_drawing("Text", {
                            ["Color"] = color3_fromrgb(255, 255, 255),
                            ["Size"] = 16,
                            ["Position"] = udim2_new(0.5, 0, 0.15, 0),
                            ["Text"] = "rejoin",
                            ["Transparency"] = 0,
                            ["Parent"] = rejoin_frame,
                            ["ZIndex"] = 10003,
                            ["Center"] = true,
                            ["Visible"] = true
                        })
                        local hop_frame = create_fake_drawing("Image", {
                            ["Color"] = color,
                            ["Size"] = udim2_new(1, 0, 0, 25),
                            ["Position"] = udim2_new(2, 10, 0.48, 0),
                            ["Data"] = pixel_image_data,
                            ["Rounding"] = 10,
                            ["Transparency"] = 0,
                            ["Parent"] = logo,
                            ["Visible"] = true,
                            ["ZIndex"] = 10002,
                        })
                        local hop_text = create_fake_drawing("Text", {
                            ["Color"] = color3_fromrgb(255, 255, 255),
                            ["Size"] = 16,
                            ["Position"] = udim2_new(0.5, 0, 0.15, 0),
                            ["Text"] = "hop",
                            ["Transparency"] = 0,
                            ["Parent"] = hop_frame,
                            ["ZIndex"] = 10003,
                            ["Center"] = true,
                            ["Visible"] = true
                        })

                        tween(rejoin_frame, {["Transparency"] = 0.5}, circular, out, 0.4)
                        tween(hop_frame, {["Transparency"] = 0.5}, circular, out, 0.4)
                        tween(rejoin_text, {["Transparency"] = 0.5}, circular, out, 0.4)
                        tween(hop_text, {["Transparency"] = 0.5}, circular, out, 0.4)
                        tween(reason_text, {["Transparency"] = 0.5}, circular, out, 0.4)
                        create_connection(camera:GetPropertyChangedSignal("ViewportSize"), function()
                            background["Size"] = udim2_new(0, camera["ViewportSize"]["X"], 0, camera["ViewportSize"]["Y"])
                        end)

                        local last_tweened = nil
                        create_connection(mouse["Move"], function()
                            local pos = get_mouse_location(user_input_service)
                            local rejoin_pos = rejoin_frame["Position"]
                            local hop_pos = hop_frame["Position"]
                            local size = hop_frame["real_size"]["X"]

                            if (pos["X"] >= rejoin_pos["X"] and pos["X"] <= rejoin_pos["X"] + size) and (pos["Y"] >= rejoin_pos["Y"] and pos["Y"] <= rejoin_pos["Y"] + 25) then
                                if not last_tweened then
                                    tween(rejoin_frame, {["Transparency"] = 0.75}, circular, out, 0.2)
                                end
                                last_tweened = rejoin_frame
                                return
                            elseif (pos["X"] >= hop_pos["X"] and pos["X"] <= hop_pos["X"] + size) and (pos["Y"] >= hop_pos["Y"] and pos["Y"] <= hop_pos["Y"] + 25) then
                                if not last_tweened then
                                    tween(hop_frame, {["Transparency"] = 0.75}, circular, out, 0.2)
                                end
                                last_tweened = hop_frame
                                return
                            end

                            if last_tweened then
                                tween(last_tweened, {["Transparency"] = 0.5}, circular, out, 0.2)
                                last_tweened = nil
                                return
                            end
                        end)

                        local connection = nil
                        connection = create_connection(user_input_service["InputBegan"], function(input, gpe)
                            if input["UserInputType"] == Enum["UserInputType"]["MouseButton1"] then
                                if last_tweened == rejoin_frame then
                                    connection:Disconnect()

                                    teleport_service:Teleport(game["PlaceId"])
                                    text["Text"] = "rejoining server..."
                                    tween(last_tweened, {["Transparency"] = 0.8}, circular, out, 0.2)
                                elseif last_tweened == hop_frame then
                                    connection:Disconnect()
                                    tween(last_tweened, {["Transparency"] = 0.8}, circular, out, 0.2)

                                    text["Text"] = "finding server..."
                                    local servers = http_service:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/"..game["PlaceId"].."/servers/Public?sortOrder=Asc&limit=100"))["data"]
                                    local lowest_ping = 9e9
                                    local most_players = 0
                                    local best_server
                                    local max_players = tonumber(servers[1]["maxPlayers"])
                                    for i = 1, #servers do
                                        local server = servers[i]
                                        local players = tonumber(server["playing"])
                                        local ping = tonumber(server["ping"])
                                        if players ~= max_players and players > most_players and ping < lowest_ping then
                                            lowest_ping = ping
                                            most_players = players
                                            best_server = server["id"]
                                        end
                                    end

                                    if best_server then
                                        text["Text"] = "joining server..."

                                        teleport_service:TeleportToPlaceInstance(game["PlaceId"], best_server)
                                    else
                                        text["Text"] = "failed to find server"
                                    end
                                end
                            end
                        end)
                    end
                end
            end
        end
    end))

    local autoload = menu["autoload"]
    if autoload and isfile("juju recode/configs/"..autoload..".cfg") then
        spawn(menu["load_config"], autoload)
        menu["new_notification"]("autoloaded config "..autoload, 1)
    end
end

-- > ( update data )

do
    local leaderstats = wait_for_child(local_player, "leaderstats", 9e9)
        local wanted = wait_for_child(leaderstats, "Wanted", 9e9)

    local last_wanted = wanted["Value"]
    local signal = signals["on_stomp"]
    create_connection(wanted:GetPropertyChangedSignal("Value"), LPH_NO_VIRTUALIZE(function()
        local new_value = wanted["Value"]
        if new_value-last_wanted == 50 then
            signal["Fire"](signal)
        end
        last_wanted = new_value
    end))

    local data_folder = wait_for_child(local_player, "DataFolder", 9e9)
    local currency = wait_for_child(data_folder, "Currency", 9e9)
    inventory = wait_for_child(data_folder, "Inventory", 9e9)

    create_connection(currency:GetPropertyChangedSignal("Value"), LPH_NO_VIRTUALIZE(function()
        local new_cash = currency["Value"]
        if new_cash < local_cash then
            local_bought_count+=1
        end
        local_cash = new_cash
    end))

    local_cash = currency["Value"]

    local information_folder = wait_for_child(data_folder, "Information", 9e9)
    local crew = find_first_child(information_folder, "Crew") or wait_for_child(information_folder, "Crew", 9e9)

    local_crew = crew["Value"]

    create_connection(crew:GetPropertyChangedSignal("Value"), LPH_NO_VIRTUALIZE(function()
        local_crew = crew["Value"]
    end))
end
